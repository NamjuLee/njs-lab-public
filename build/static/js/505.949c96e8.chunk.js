"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[505,5164],{71277:function(e,t,r){function n(e){return e=e||globalThis.location.hostname,u.some((function(t){var r;return null!=(null===(r=e)||void 0===r?void 0:r.match(t))}))}function a(e,t){return e&&(t=t||globalThis.location.hostname)?null!=t.match(i)||null!=t.match(s)?e.replace("static.arcgis.com","staticdev.arcgis.com"):null!=t.match(l)||null!=t.match(o)?e.replace("static.arcgis.com","staticqa.arcgis.com"):e:e}r.d(t,{XO:function(){return n},pJ:function(){return a}});var i=/^devext.arcgis.com$/,l=/^qaext.arcgis.com$/,s=/^[\w-]*\.mapsdevext.arcgis.com$/,o=/^[\w-]*\.mapsqa.arcgis.com$/,u=[/^([\w-]*\.)?[\w-]*\.zrh-dev-local.esri.com$/,i,l,/^jsapps.esri.com$/,s,o]},58971:function(e,t,r){r.d(t,{G6:function(){return E},Ie:function(){return T},J9:function(){return w},RF:function(){return b},U1:function(){return Z},vY:function(){return u},ym:function(){return S}});var n=r(29439),a=r(92026),i=r(77981);var l=function(e,t,r){return[t,r]},s=function(e,t,r){return[t,r,e[2]]},o=function(e,t,r){return[t,r,e[2],e[3]]};function u(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:(0,a.pC)(e.extent)?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function c(e,t){var r=e.scale,n=e.translate;return Math.round((t-n[0])/r[0])}function f(e,t){var r=e.scale,n=e.translate;return Math.round((n[1]-t)/r[1])}function p(e,t,r){for(var n,a,i,l,s=[],o=0;o<r.length;o++){var u=r[o];o>0?(i=c(e,u[0]),l=f(e,u[1]),i===n&&l===a||(s.push(t(u,i-n,l-a)),n=i,a=l)):(n=c(e,u[0]),a=f(e,u[1]),s.push(t(u,n,a)))}return s.length>0?s:null}function d(e,t){var r=e.scale,n=e.translate;return t*r[0]+n[0]}function m(e,t){var r=e.scale;return e.translate[1]-t*r[1]}function y(e,t,r){var a=new Array(r.length);if(!r.length)return a;var i=(0,n.Z)(e.scale,2),l=i[0],s=i[1],o=d(e,r[0][0]),u=m(e,r[0][1]);a[0]=t(r[0],o,u);for(var c=1;c<r.length;c++){var f=r[c];o+=f[0]*l,u-=f[1]*s,a[c]=t(f,o,u)}return a}function v(e,t,r){for(var n=new Array(r.length),a=0;a<r.length;a++)n[a]=y(e,t,r[a]);return n}function g(e,t,r,n,a){var i;return t.points=null!==(i=function(e,t,r,n){return p(e,r?n?o:s:n?s:l,t)}(e,r.points,n,a))&&void 0!==i?i:[],t}function b(e,t,r,n,a){return t.x=c(e,r.x),t.y=f(e,r.y),t!==r&&(n&&(t.z=r.z),a&&(t.m=r.m)),t}function h(e,t,r,n,a){var i=function(e,t,r,n){for(var a=[],i=r?n?o:s:n?s:l,u=0;u<t.length;u++){var c=p(e,i,t[u]);c&&c.length>=3&&a.push(c)}return a.length?a:null}(e,r.rings,n,a);return i?(t.rings=i,t):null}function x(e,t,r,n,a){var i=function(e,t,r,n){for(var a=[],i=r?n?o:s:n?s:l,u=0;u<t.length;u++){var c=p(e,i,t[u]);c&&c.length>=2&&a.push(c)}return a.length?a:null}(e,r.paths,n,a);return i?(t.paths=i,t):null}function S(e,t){return e&&t?(0,i.wp)(t)?b(e,{},t,!1,!1):(0,i.l9)(t)?x(e,{},t,!1,!1):(0,i.oU)(t)?h(e,{},t,!1,!1):(0,i.aW)(t)?g(e,{},t,!1,!1):(0,i.YX)(t)?function(e,t,r,n,a){return t.xmin=c(e,r.xmin),t.ymin=f(e,r.ymin),t.xmax=c(e,r.xmax),t.ymax=f(e,r.ymax),t!==r&&(n&&(t.zmin=r.zmin,t.zmax=r.zmax),a&&(t.mmin=r.mmin,t.mmax=r.mmax)),t}(e,{},t,!1,!1):null:null}function w(e,t,r,n,i){return(0,a.pC)(r)&&(t.points=function(e,t,r,n){return y(e,r?n?o:s:n?s:l,t)}(e,r.points,n,i)),t}function Z(e,t,r,n,i){return(0,a.Wi)(r)||(t.x=d(e,r.x),t.y=m(e,r.y),t!==r&&(n&&(t.z=r.z),i&&(t.m=r.m))),t}function T(e,t,r,n,i){return(0,a.pC)(r)&&(t.rings=function(e,t,r,n){return v(e,r?n?o:s:n?s:l,t)}(e,r.rings,n,i)),t}function E(e,t,r,n,i){return(0,a.pC)(r)&&(t.paths=function(e,t,r,n){return v(e,r?n?o:s:n?s:l,t)}(e,r.paths,n,i)),t}},18745:function(e,t,r){r.d(t,{a:function(){return s}});var n=r(10064),a=r(32718),i=r(80613),l=r(46640);function s(e){return(0,l.hj)(e.minDataValue)&&(0,l.hj)(e.maxDataValue)&&null!=e.minSize&&null!=e.maxSize?i.X.SIZE_MINMAX_VALUE:(e.expression&&"view.scale"===e.expression||e.valueExpression&&"$view.scale"===e.valueExpression)&&Array.isArray(e.stops)?i.X.SIZE_SCALE_STOPS:(null!=e.field||e.expression&&"view.scale"!==e.expression||e.valueExpression&&"$view.scale"!==e.valueExpression)&&(Array.isArray(e.stops)||"levels"in e&&e.levels)?i.X.SIZE_FIELD_STOPS:(null!=e.field||e.expression&&"view.scale"!==e.expression||e.valueExpression&&"$view.scale"!==e.valueExpression)&&null!=e.valueUnit?i.X.SIZE_UNIT_VALUE:(a.Z.getLogger("esri.views.2d.engine.webgl").error(new n.Z("mapview-bad-type","Found invalid size VisualVariable",e)),i.X.NONE)}},85164:function(e,t,r){r.r(t),r.d(t,{createSymbolSchema:function(){return o}});var n=r(1413),a=r(80613),i=r(54815);function l(e){var t;return"line-marker"===e.type?{type:"line-marker",color:null===(t=e.color)||void 0===t?void 0:t.toJSON(),placement:e.placement,style:e.style}:e.constructor.fromJSON(e.toJSON()).toJSON()}function s(e){return(0,i.hF)(e)}function o(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;switch(e.type){case"simple-fill":case"picture-fill":return c(e,t,r);case"simple-marker":case"picture-marker":return p(e,t,r);case"simple-line":return f(e,t,r);case"text":return d(e,t,r);case"label":return u(e,t,r);case"cim":return{type:"cim",rendererKey:t.vvFlags,data:e.data,maxVVSize:t.maxVVSize};case"CIMSymbolReference":return{type:"cim",rendererKey:t.vvFlags,data:e,maxVVSize:t.maxVVSize};case"web-style":return(0,n.Z)((0,n.Z)({},l(e)),{},{type:"web-style",hash:e.hash(),rendererKey:t.vvFlags,maxVVSize:t.maxVVSize});default:throw new Error("symbol not supported ".concat(e.type))}}function u(e,t,r){var l=e.toJSON(),o=(0,i.jj)(a.LW.LABEL,(0,n.Z)((0,n.Z)({},t),{},{placement:l.labelPlacement}));return(0,n.Z)((0,n.Z)({materialKey:r?s(o):o,hash:e.hash()},l),{},{labelPlacement:l.labelPlacement})}function c(e,t,r){var o=(0,i.jj)(a.LW.FILL,t),u=r?s(o):o,c=e.clone(),f=c.outline,p=(0,i.jy)(t.symbologyType);p||(c.outline=null);var d=(0,n.Z)({materialKey:u,hash:c.hash()},l(c));if(p)return d;var m=[];if(m.push(d),f){var y=(0,i.jj)(a.LW.LINE,(0,n.Z)((0,n.Z)({},t),{},{isOutline:!0})),v=(0,n.Z)({materialKey:r?s(y):y,hash:f.hash()},l(f));m.push(v)}return{type:"composite-symbol",layers:m,hash:m.reduce((function(e,t){return t.hash+e}),"")}}function f(e,t,r){var o=(0,i.jy)(t.symbologyType)?a.mD.DEFAULT:t.symbologyType,u=(0,i.jj)(a.LW.LINE,(0,n.Z)((0,n.Z)({},t),{},{symbologyType:o})),c=r?s(u):u,f=e.clone(),p=f.marker;f.marker=null;var d=[];if(d.push((0,n.Z)({materialKey:c,hash:f.hash()},l(f))),p){var m,y=(0,i.jj)(a.LW.MARKER,t),v=r?s(y):y;p.color=null!==(m=p.color)&&void 0!==m?m:f.color,d.push((0,n.Z)({materialKey:v,hash:p.hash(),lineWidth:f.width},l(p)))}return{type:"composite-symbol",layers:d,hash:d.reduce((function(e,t){return t.hash+e}),"")}}function p(e,t,r){var o=(0,i.jj)(a.LW.MARKER,t),u=r?s(o):o,c=l(e);return(0,n.Z)((0,n.Z)({materialKey:u,hash:e.hash()},c),{},{angle:e.angle,maxVVSize:t.maxVVSize})}function d(e,t,r){var o=(0,i.jj)(a.LW.TEXT,t),u=r?s(o):o,c=l(e);return(0,n.Z)((0,n.Z)({materialKey:u,hash:e.hash()},c),{},{angle:e.angle,maxVVSize:t.maxVVSize})}},69534:function(e,t,r){r.d(t,{MD:function(){return K},Ew:function(){return L},q5:function(){return z}});var n=r(93433),a=r(1413),i=r(37762),l=r(10064),s=r(93169),o=r(32718),u=r(92026),c=r(17842),f=r(76672),p=r(48732),d=r(85116),m=r(80613),y=r(46640),v=r(8848),g=r(18745);var b=r(85164),h=(r(78915),r(691)),x=r(94109);r(95857),r(98125);function S(e,t){if(!("visualVariables"in e))return 0;if(!e.hasVisualVariables("size"))return 0;var r=e.getVisualVariablesForType("size");if(!r[0])return 0;var n=r[0];if(t&&"cluster_count"===n.field&&"cluster"===t.type)return t.clusterMaxSize;if("outline"===n.target)return 0;if("stops"===n.transformationType)return n.stops.map((function(e){return e.size})).reduce(w,0);if("clamped-linear"===n.transformationType){var a,i;return a="number"==typeof n.maxSize?n.maxSize:n.maxSize.stops.map((function(e){return e.size})).reduce(w,0),i="number"==typeof n.minSize?n.minSize:n.minSize.stops.map((function(e){return e.size})).reduce(w,0),Math.max(a,i)}return"real-world-size"===n.transformationType?30:void 0}x.eF.metrics,new h.Z(0,0,24,24);function w(e,t){return Math.max(e,t)}var Z=r(91370),T=r(20478),E=r(31666),V=o.Z.getLogger("esri.views.2d.layers.features.schemaUtils"),F="ValidationError";function z(e,t){var r=0,n=0,a=m.mD.DEFAULT;if((0,u.pC)(e)){if(n=S(e,t),"visualVariables"in e&&(r=function(e){if(!e)return m.X.NONE;var t,r=0,n=(0,i.Z)(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if("size"===a.type){var l=(0,g.a)(a);r|=l,"outline"===a.target&&(r|=l<<4)}else"color"===a.type?r|=m.X.COLOR:"opacity"===a.type?r|=m.X.OPACITY:"rotation"===a.type&&(r|=m.X.ROTATION)}}catch(s){n.e(s)}finally{n.f()}return r}(e.visualVariables||[]),"dot-density"===e.type&&(a=m.mD.DOT_DENSITY)),"heatmap"===e.type&&(a=m.mD.HEATMAP),"dictionary"===e.type)return{maxVVSize:n,vvFlags:r,symbologyType:m.mD.DEFAULT};if("pie-chart"===e.type)return{maxVVSize:n,vvFlags:r,symbologyType:m.mD.PIE_CHART};if(a!==m.mD.DOT_DENSITY&&a!==m.mD.HEATMAP){var l=e.getSymbols();"backgroundFillSymbol"in e&&e.backgroundFillSymbol&&l.push(e.backgroundFillSymbol);var s,o=!0,c=!0,f=(0,i.Z)(l);try{for(f.s();!(s=f.n()).done;){var p=s.value;if("cim"===p.type&&(c=!1),"simple-fill"===p.type||"picture-fill"===p.type){var d=p.outline,y=d&&"none"!==d.style&&"solid"!==d.style,v="simple-fill"===p.type&&"none"!==p.style&&"solid"!==p.style,b="picture-fill"===p.type||v||y;y&&(o=!1),b&&(c=!1)}}}catch(h){f.e(h)}finally{f.f()}o?a=c?m.mD.OUTLINE_FILL_SIMPLE:m.mD.OUTLINE_FILL:c&&(a=m.mD.SIMPLE)}}return{vvFlags:r,maxVVSize:n,symbologyType:a}}var I=null;function L(e){if((0,s.Z)("esri-2d-update-debug")){var t=k(e,!0);console.debug("Created new schema",t),console.debug("Schema diff",(0,p.Hg)(I,t)),I=t}return k(e)}function k(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var r,n,a=R(e,t),i=j(e),l={};a.map((function(t){return N(l,e,t)}));var s=(0,u.pC)(e.subtypeCode)?"".concat(e.subtypeField," = ").concat(e.subtypeCode):null,o=(0,f._)(e.definitionExpression,s);return{source:{definitionExpression:o,fields:e.fields.map((function(e){return e.toJSON()})),gdbVersion:e.gdbVersion,historicMoment:null===(r=e.historicMoment)||void 0===r?void 0:r.getTime(),outFields:e.availableFields,pixelBuffer:e.pixelBuffer,spatialReference:e.spatialReference.toJSON(),timeExtent:null===(n=e.timeExtent)||void 0===n?void 0:n.toJSON(),customParameters:e.customParameters},attributes:{fields:{},indexCount:0},processors:a,tileRenderer:i,targets:l}}catch(c){if(c.fieldName===F)return V.error(c),null;throw c}}function N(e,t,r){switch(r.target){case"feature":return void D(e,M(t),r);case"aggregate":if(!("featureReduction"in t))return;var n=t.featureReduction;switch(n.type){case"selection":throw new l.Z(F,"Mapview does not support `selection` reduction type",n);case"binning":return D(e,M(t),r),void function(e,t,r,n){var i;e.aggregate||(e.aggregate={name:"aggregate",type:"bin",filters:null,input:"feature",params:{fixedBinLevel:t.fixedBinLevel,fields:(null!==(i=t.fields)&&void 0!==i?i:[]).map((function(e){return(0,a.Z)((0,a.Z)({},e.toJSON()),{},{type:C(e,r)})}))},attributes:{}}),O(e.aggregate,n.attributes.fields)}(e,n,t.fields.map((function(e){return e.toJSON()})),r);case"cluster":return D(e,M(t),r),void function(e,t,r,n){var i,l;e.aggregate||(e.aggregate={name:"aggregate",type:"cluster",input:"feature",filters:null,attributes:{},params:{clusterRadius:(0,c.F2)(t.clusterRadius/2),clusterPixelBuffer:64*Math.ceil((0,c.F2)(t.clusterMaxSize)/64),fields:null===(i=null!==(l=t.fields)&&void 0!==l?l:[])||void 0===i?void 0:i.map((function(e){return(0,a.Z)((0,a.Z)({},e.toJSON()),{},{type:C(e,r)})}))}}),O(e.aggregate,n.attributes.fields)}(e,n,t.fields.map((function(e){return e.toJSON()})),r)}}}function O(e,t){for(var r in t){var n=t[r];if(n.target===e.name){var a=e.attributes[r];a?(a.context.mesh=a.context.mesh||n.context.mesh,a.context.storage=a.context.storage||n.context.storage):e.attributes[r]=n}}return e}function M(e){var t,r,n,a,i;return[null!==(t=null===(r=(0,u.Wg)(e.filter))||void 0===r?void 0:r.toJSON())&&void 0!==t?t:null,null!==(n=null===(a=(0,u.Wg)(null===(i=(0,u.Wg)(e.featureEffect))||void 0===i?void 0:i.filter))||void 0===a?void 0:a.toJSON())&&void 0!==n?n:null]}function D(e,t,r){return e.feature||(e.feature={name:"feature",input:"source",filters:t,attributes:{}}),O(e.feature,r.attributes.fields),e}function C(e,t){var r=e.onStatisticExpression,n=e.onStatisticField;switch(e.statisticType){case"min":case"max":case"avg":case"avg_angle":case"sum":case"count":return"esriFieldTypeDouble";case"mode":if(r){var a=r.returnType;return a?"string"===a?"esriFieldTypeString":"esriFieldTypeDouble":(V.error(new l.Z(F,"Unable to infer type of aggregateField with onStatisticExpression. ReturnType is not defined",e)),"esriFieldTypeString")}var i=t.find((function(e){return e.name===n}));return i?i.type:(V.error(new l.Z(F,"Unable to infer type of aggregateField with onStatisticExpression. ReturnType is not defined",e)),"esriFieldTypeString")}}function P(e,t){return t.field?A(e,(0,a.Z)((0,a.Z)({},t),{},{type:"field",field:t.field})):t.valueExpression?A(e,(0,a.Z)((0,a.Z)({},t),{},{type:"expression",valueExpression:t.valueExpression})):{field:null,fieldIndex:null}}function A(e,t){switch(t.type){case"expression":var r=t.valueExpression;if(!e.fields[r]){var n=e.indexCount++;e.fields[r]=(0,a.Z)((0,a.Z)({},t),{},{name:r,fieldIndex:n})}return{fieldIndex:e.fields[r].fieldIndex};case"label-expression":var i=JSON.stringify(t.label);if(!e.fields[i]){var l=e.indexCount++;e.fields[i]=(0,a.Z)((0,a.Z)({},t),{},{name:i,fieldIndex:l})}return{fieldIndex:e.fields[i].fieldIndex};case"field":var s=t.field;return"aggregate"===t.target&&e.fields[s]||(e.fields[s]=(0,a.Z)((0,a.Z)({},t),{},{name:s})),{field:s};case"statistic":return e.fields[t.name]=(0,a.Z)({},t),{field:t.name}}}function R(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new Array,n=0;return r.push(U(e,n++,t)),r}function _(e,t,r,n,i){var l=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=A(e,{type:"label-expression",target:r,context:{mesh:!0},resultType:"string",label:{labelExpression:t.labelExpression,labelExpressionInfo:t.labelExpressionInfo?{expression:t.labelExpressionInfo.expression}:null,symbol:!!t.symbol,where:t.where}}),o=s.fieldIndex;return(0,a.Z)((0,a.Z)({},(0,b.createSymbolSchema)(t,i,l)),{},{fieldIndex:o,target:r,index:n})}function J(e,t,r){var a,s,o="featureReduction"in t&&t.featureReduction;if(!o)return{fields:[],labels:[],matcher:null,rendererOverride:null};var u=[],c=null,f=(0,E.oq)(t.geometryType),p=[],m=null;if(o)switch(o.type){case"selection":return V.error(new l.Z(F,"Mapview does not support `selection` reduction type",o)),{fields:[],labels:[],matcher:null,rendererOverride:null};case"cluster":case"binning":if(u.push.apply(u,(0,n.Z)(null!==(a=o.fields)&&void 0!==a?a:[])),"cluster"===o.type?f="esriGeometryPoint":"binning"===o.type&&(f="esriGeometryPolygon"),!o.renderer||null!==(s=o.renderer.authoringInfo)&&void 0!==s&&s.isAutoGenerated){if("cluster"===o.type){if(m=(0,T.S1)(u,t.renderer,o,null,!0),o.symbol){var y=z(m,o);c={type:"simple",symbol:(0,b.createSymbolSchema)(o.symbol,y,r),symbologyType:y.symbologyType}}p=o&&o.labelsVisible&&o.labelingInfo||[]}}else{if("cluster"===o.type)m=(0,T.st)(o.renderer,o,null).renderer;else m=o.renderer;var v=z(o.renderer,o);c=K(null,"aggregate",o.renderer,v,r),p=o&&o.labelsVisible&&o.labelingInfo||[]}}return function(e,t){var r,n={mesh:!0,storage:!0},a=(0,i.Z)(t);try{for(a.s();!(r=a.n()).done;){var l=r.value,s=l.name,o=l.onStatisticField,u=l.onStatisticExpression,c=l.statisticType,f=null,p=null,d="numeric",m="feature";u?p=A(e,{type:"expression",target:m,valueExpression:u.expression,resultType:d}).fieldIndex:f=A(e,{type:"field",target:m,field:o,resultType:d}).field,A(e,{type:"statistic",target:"aggregate",name:s,context:n,inField:f,inFieldIndex:p,statisticType:c})}}catch(y){a.e(y)}finally{a.f()}}(e,u),{labels:(0,d.a)(p,"binning"===o.type?"esriGeometryPolygon":f),matcher:c,fields:u,rendererOverride:m}}function U(e,t){var r,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s={indexCount:0,fields:{}},o="featureReduction"in e&&e.featureReduction,c=o?"aggregate":"feature";if("sublayers"in e){var f=function(){var t,r={type:"subtype",subtypeField:e.subtypeField,renderers:{},symbologyType:m.mD.DEFAULT},n={type:"subtype",mapping:{},target:"feature"},o={type:"subtype",classes:{}},f={type:"symbol",target:"feature",aggregateFields:[],attributes:s,storage:n,mesh:{matcher:r,aggregateMatcher:null,labels:o,sortKey:null}},p=new Set,d=0,y=(0,i.Z)(e.sublayers);try{var v=function(){var e=t.value,i=e.renderer,f=e.subtypeCode,y=e.labelingInfo,v=e.labelsVisible,g={symbologyType:m.mD.DEFAULT,vvFlags:0,maxVVSize:0},b=K(s,c,i,g,a),h=B(s,c,i),x=v&&y;if("visualVariables"in i&&i.visualVariables&&i.visualVariables.length)throw new l.Z(F,"Visual variables are currently not supported for subtype layers");if("dictionary"===b.type)throw new l.Z(F,"Dictionary renderer is not supported in subtype layers");if("subtype"===b.type)throw new l.Z(F,"Nested subtype renderers is not supported");if((0,u.pC)(h)&&"subtype"===h.type)throw new l.Z(F,"Nested subtype storage is not supported");if((0,u.pC)(h)&&(0,u.pC)(h.attributeMapping))throw new l.Z(F,"Non-visual-variable attributes are not supported in subtype layers");if("heatmap"===b.type)throw new l.Z(F,"Heatmaps are not supported in subtype layers");if("pie-chart"===b.type)throw new l.Z(F,"Pie-charts are not supported in subtype layers");if(p.has(f))throw new l.Z(F,"Subtype codes for sublayers must be unique");p.add(f),r.renderers[f]=b,n.mapping[f]=h,x&&(o.classes[f]=x.map((function(e){return _(s,e,"feature",d++,g,a)})))};for(y.s();!(t=y.n()).done;)v()}catch(g){y.e(g)}finally{y.f()}return{v:f}}();if("object"===typeof f)return f.v}if("heatmap"===e.renderer.type&&"raster"===(0,Z.rk)()){var p=e.renderer,y=p.radius,v=p.fieldOffset,g=p.field;return{type:"heatmap",aggregateFields:[],attributes:s,target:c,storage:null,mesh:{radius:y,fieldOffset:v,field:P(s,{target:c,field:g,resultType:"numeric"}).field}}}var b=J(s,e,a),h=(0,E.oq)(e.geometryType),x=null!==(r=b.rendererOverride)&&void 0!==r?r:e.renderer,S=z(x,o),w=K(s,c,x,S,a),T=B(s,c,x),V=W(s,e.orderBy,o),I=e.labelsVisible&&e.labelingInfo||[],L=(0,d.a)(I,h),k=0,N=[].concat((0,n.Z)(L.map((function(e){return _(s,e,"feature",k++,S,a)}))),(0,n.Z)(b.labels.map((function(e){return _(s,e,"aggregate",k++,S,a)}))));return{type:"symbol",target:c,attributes:s,aggregateFields:b.fields,storage:T,mesh:{matcher:w,labels:{type:"simple",classes:N},aggregateMatcher:b.matcher,sortKey:V}}}function j(e){var t;return"heatmap"===(null===(t=e.renderer)||void 0===t?void 0:t.type)&&"raster"===(0,Z.rk)()?{type:"heatmap"}:{type:"symbol"}}function W(e,t,r){if((0,u.pC)(r)||(0,u.Wi)(t)||!t.length)return null;t.length>1&&V.warn("Layer rendering currently only supports ordering by 1 orderByInfo, but found ".concat(t.length,". All but the first will be discarded"));var n=t[0],a="ascending"===n.order?"asc":"desc";return n.field?{field:n.field,order:a}:n.valueExpression?{fieldIndex:A(e,{type:"expression",target:"feature",valueExpression:n.valueExpression,resultType:"numeric"}).fieldIndex,order:a}:(V.error(new l.Z(F,"Expected to find a field or valueExpression for OrderByInfo",n)),null)}function B(e,t,r){var n;switch(r.type){case"simple":case"class-breaks":case"unique-value":case"dictionary":n={visualVariables:!0,attributes:null};break;default:n=(0,v.EJ)(r).getStorageSpec(r)}return function(e,t,r,n){if((0,u.Wi)(r))return null;var a=r.visualVariables,i=r.attributes,l=null;a&&"visualVariables"in n&&(l=function(e,t,r){if(!r||!r.length)return[];var n={storage:!0},a="numeric";return(0,Z.tv)(r).map((function(r){var i,l=(0,y.nU)(r.type),s=P(e,{target:t,valueExpression:r.valueExpression,field:r.field,context:n,resultType:a}),o=s.field,u=s.fieldIndex;switch(r.type){case"size":return"$view.scale"===r.valueExpression?null:{type:"size",binding:l,field:o,fieldIndex:u,normalizationField:P(e,{target:t,field:r.normalizationField,context:n,resultType:a}).field,valueRepresentation:null!==(i=r.valueRepresentation)&&void 0!==i?i:null};case"color":return{type:"color",binding:l,field:o,fieldIndex:u,normalizationField:P(e,{target:t,field:r.normalizationField,context:n,resultType:a}).field};case"opacity":return{type:"opacity",binding:l,field:o,fieldIndex:u,normalizationField:P(e,{target:t,field:r.normalizationField,context:n,resultType:a}).field};case"rotation":return{type:"rotation",binding:l,field:o,fieldIndex:u}}})).filter((function(e){return e}))}(e,t,n.visualVariables));var s=(0,u.pC)(l)?4:0,o=null;return(0,u.pC)(i)&&(o=i.map((function(r,n){var a=P(e,{valueExpression:r.valueExpression,field:r.field,resultType:"numeric",target:t}),i=a.field,l=a.fieldIndex;return{binding:n+s,field:i,fieldIndex:l}}))),{type:"simple",target:t,attributeMapping:o,vvMapping:l}}(e,t,n,r)}function K(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i=(0,u.Pt)(e,{indexCount:0,fields:{}});switch(r.type){case"simple":case"dot-density":return H(i,r,n,a);case"class-breaks":return q(i,t,r,n,a);case"unique-value":return G(i,t,r,n,a);case"dictionary":return $(i,r,n,a);case"heatmap":return Y(i,r,n,a);case"pie-chart":return X(i,r,n,a)}}function H(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=t.getSymbols(),i=a.length?a[0]:null;return{type:"simple",symbol:(0,b.createSymbolSchema)(i,r,n),symbologyType:r.symbologyType}}function X(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=t.getSymbols(),i=a[0],l=a.length>1?a[1]:null;return{type:"pie-chart",markerSymbol:(0,b.createSymbolSchema)(i,r,n),fillSymbol:(0,b.createSymbolSchema)(l,r,n),symbologyType:r.symbologyType}}function q(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i={mesh:!0,use:"renderer.field"},l=r.backgroundFillSymbol,s=P(e,{target:t,field:r.field,valueExpression:r.valueExpression,resultType:"numeric",context:i}),o=s.field,u=s.fieldIndex,c=r.normalizationType,f="log"===c?"esriNormalizeByLog":"percent-of-total"===c?"esriNormalizeByPercentOfTotal":"field"===c?"esriNormalizeByField":null,p=r.classBreakInfos.map((function(e){return{symbol:(0,b.createSymbolSchema)(e.symbol,n,a),min:e.minValue,max:e.maxValue}})).sort((function(e,t){return e.min-t.min}));return{type:"interval",attributes:e.fields,field:o,fieldIndex:u,backgroundFillSymbol:(0,b.createSymbolSchema)(l,n,a),defaultSymbol:(0,b.createSymbolSchema)(r.defaultSymbol,n,a),intervals:p,normalizationField:r.normalizationField,normalizationTotal:r.normalizationTotal,normalizationType:f,isMaxInclusive:r.isMaxInclusive,symbologyType:n.symbologyType}}function G(e,t,r,n){var s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=[],u=r.backgroundFillSymbol,c={target:t,context:{mesh:!0},resultType:"string"};if(r.field&&"string"!=typeof r.field)throw new l.Z(F,"Expected renderer.field to be a string",r);var f,p=P(e,(0,a.Z)((0,a.Z)({},c),{},{field:r.field,valueExpression:r.valueExpression})),d=p.field,m=p.fieldIndex,y=(0,i.Z)(r.uniqueValueInfos);try{for(y.s();!(f=y.n()).done;){var v=f.value;o.push({value:""+v.value,symbol:(0,b.createSymbolSchema)(v.symbol,n,s)})}}catch(g){y.e(g)}finally{y.f()}return{type:"map",attributes:e.fields,field:d,fieldIndex:m,field2:P(e,(0,a.Z)((0,a.Z)({},c),{},{field:r.field2})).field,field3:P(e,(0,a.Z)((0,a.Z)({},c),{},{field:r.field3})).field,fieldDelimiter:r.fieldDelimiter,backgroundFillSymbol:(0,b.createSymbolSchema)(u,n),defaultSymbol:(0,b.createSymbolSchema)(r.defaultSymbol,n),map:o,symbologyType:n.symbologyType}}function $(e,t,r){return{type:"dictionary",config:t.config,fieldMap:t.fieldMap,scaleExpression:t.scaleExpression,url:t.url,symbolOptions:r,symbologyType:r.symbologyType}}function Y(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=t.getSymbols(),i=a.length?a[0]:null;return{type:"heatmap",symbol:(0,b.createSymbolSchema)(i,r,n),symbologyType:r.symbologyType}}},91370:function(e,t,r){r.d(t,{TT:function(){return g},aR:function(){return f},rk:function(){return v},tv:function(){return p}});var n=r(93433),a=r(84506),i=r(10064),l=r(93169),s=r(32718),o=r(17842),u=r(90316),c=s.Z.getLogger("esri.views.2d.layers.features.support.rendererUtils"),f=function(e){if(!("visualVariables"in e)||!e.visualVariables||!e.visualVariables.length)return e;var t=e.clone(),r=t.visualVariables.map((function(e){return d(e)?m(e):e}));return t.visualVariables=r,t};function p(e){return e.map((function(e){return d(e)?m(e.clone()):e}))}function d(e){return("size"===e.type||"color"===e.type||"opacity"===e.type)&&null!=e.stops}function m(e){return e.stops=function(e,t){return t.length<=8?t:(c.warn("Found ".concat(t.length," Visual Variable stops, but MapView only supports ").concat(8,". Displayed stops will be simplified.")),t.length>16?function(e,t){for(var r=(0,a.Z)(t),n=r[0],i=r.slice(1),l=i.pop(),s=i[0].value,u=i[i.length-1].value,c=(u-s)/6,f=[],p=s;p<u;p+=c){for(var d=0;p>=i[d].value;)d++;var m=i[d],v=t[d-1],g=p-v.value,b=m.value===v.value?1:g/(m.value-v.value);if("color"===e){var h=i[d],x=t[d-1],S=h.color.clone();S.r=y(x.color.r,S.r,b),S.g=y(x.color.g,S.g,b),S.b=y(x.color.b,S.b,b),S.a=y(x.color.a,S.a,b),f.push({value:p,color:S,label:h.label})}else if("size"===e){var w=i[d],Z=t[d-1],T=(0,o.t_)(w.size),E=y((0,o.t_)(Z.size),T,b);f.push({value:p,size:E,label:w.label})}else{var V=i[d],F=y(t[d-1].opacity,V.opacity,b);f.push({value:p,opacity:F,label:V.label})}}return[n].concat(f,[l])}(e,t):function(e){for(var t=(0,a.Z)(e),r=t[0],i=t.slice(1),l=i.pop();i.length>6;){for(var s=0,o=0,u=1;u<i.length;u++){var c=i[u-1],f=i[u],p=Math.abs(f.value-c.value);p>o&&(o=p,s=u)}i.splice(s,1)}return[r].concat((0,n.Z)(i),[l])}(t))}(e.type,e.stops),e}function y(e,t,r){return(1-r)*e+r*t}function v(){if((0,l.Z)("heatmap-force-raster"))return"raster";var e=(0,u.hc)("2d"),t=e.supportsTextureFloat,r=e.supportsTextureHalfFloat,n=e.supportsColorBufferFloat,a=e.supportsColorBufferFloatBlend,i=e.supportsColorBufferHalfFloat;return t&&n&&a||r&&i?"symbol":(0,l.Z)("heatmap-allow-raster-fallback")?"raster":"none"}function g(e){if(!e)return!0;switch(e.type){case"dot-density":if(!(0,u.hc)("2d").supportsTextureFloat)return c.error(new i.Z("webgl-missing-extension","Missing WebGL extension OES_Texture_Float which is required for DotDensity")),!1;break;case"heatmap":var t=v();if("none"===t||"raster"===t&&!(0,l.Z)("heatmap-force-raster")){var r=(0,u.hc)("2d"),n=["supportsTextureFloat","supportsTextureHalfFloat","supportsColorBufferFloat","supportsColorBufferFloatBlend","supportsColorBufferHalfFloat"].filter((function(e){return!r[e]})).join(", ");if("none"===t)return c.errorOnce(new i.Z("webgl-missing-extension","Missing WebGL".concat(r.type," requirements for Heatmap: ").concat(n))),!1;"raster"===t&&c.warnOnce("Missing WebGL".concat(r.type," requirements for accelerated Heatmap: ").concat(n,". Feature support may be limited."))}}return!0}},95857:function(e,t,r){r.d(t,{I_:function(){return o},XA:function(){return m},Zu:function(){return c},ab:function(){return f},eT:function(){return d},y1:function(){return u},yA:function(){return p}});var n=r(29439),a=(r(75746),r(92026)),i=r(80885),l=r(65156),s=r(92975),o=(r(38999),r(94109),r(47975),512),u=50;function c(e,t){var r=(0,s.C5)(t);if(!r)return null;var a=(0,n.Z)(r.valid,2),i=a[0],o=a[1];return e[2]>o?[(0,l.Ue)([e[0],e[1],o,e[3]]),(0,l.Ue)([i,e[1],i+e[2]-o,e[3]])]:e[0]<i?[(0,l.Ue)([i,e[1],e[2],e[3]]),(0,l.Ue)([o-(i-e[0]),e[1],o,e[3]])]:null}function f(e){return"text"===e||"esriTS"===e}function p(e){return"simple-marker"===e||"picture-marker"===e||"esriSMS"===e||"esriPMS"===e}function d(e){switch((0,a.Wg)(e.geometry).type){case"point":case"multipoint":return 0;case"polyline":return 1;case"polygon":case"extent":return 2}return 0}function m(e){if(!e)return null;var t=e.xmin,r=e.ymin,n=e.xmax,a=e.ymax,l=e.spatialReference;return new i.Z({rings:[[[t,r],[t,a],[n,a],[n,r],[t,r]]],spatialReference:l})}},98125:function(e,t,r){r.d(t,{xS:function(){return I},B3:function(){return z}});var n=r(74165),a=r(15861),i=r(98991),l=r(37762),s=r(15671),o=r(43144),u=r(80613),c=r(54815),f={marker:u.LW.MARKER,fill:u.LW.FILL,line:u.LW.LINE,text:u.LW.TEXT},p=function(){function e(t,r,n,a){(0,s.Z)(this,e);var i={minScale:null===r||void 0===r?void 0:r.minScale,maxScale:null===r||void 0===r?void 0:r.maxScale},o=function(e){return e.minScale||e.maxScale?e.minScale+"-"+e.maxScale:""}(i);this.layers=t,this.data=r,this.hash=this._createHash()+o,this.rendererKey=n;var p,d={isOutline:!1,placement:null,symbologyType:u.mD.DEFAULT,vvFlags:n},m=(0,l.Z)(t);try{for(m.s();!(p=m.n()).done;){var y=p.value,v=f[y.type];d.isOutline="line"===y.type&&y.isOutline,y.materialKey=(0,c.jj)(v,d),y.maxVVSize=a,y.scaleInfo=i,y.templateHash+=o}}catch(g){m.e(g)}finally{m.f()}}return(0,o.Z)(e,[{key:"type",get:function(){return"expanded-cim"}},{key:"_createHash",value:function(){var e,t="",r=(0,l.Z)(this.layers);try{for(r.s();!(e=r.n()).done;){t+=e.value.templateHash}}catch(n){r.e(n)}finally{r.f()}return t}}]),e}();var d=r(71277),m=r(10064),y=r(92026),v=r(66978),g=r(35995),b=r(70032),h=r(53283),x=r(38048);function S(e,t,r){return w.apply(this,arguments)}function w(){return w=(0,a.Z)((0,n.Z)().mark((function e(t,r,a){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.name){e.next=2;break}throw new m.Z("style-symbol-reference-name-missing","Missing name in style symbol reference");case 2:if(!t.styleName||"Esri2DPointSymbolsStyle"!==t.styleName){e.next=4;break}return e.abrupt("return",Z(t,a));case 4:return e.prev=4,e.t0=E,e.next=8,(0,x.n2)(t,r,a);case 8:return e.t1=e.sent,e.t2=t.name,e.t3=r,e.t4=a,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3,e.t4));case 15:return e.prev=15,e.t5=e.catch(4),e.abrupt("return",((0,v.k_)(e.t5),null));case 18:case"end":return e.stop()}}),e,null,[[4,15]])}))),w.apply(this,arguments)}function Z(e,t){return T.apply(this,arguments)}function T(){return T=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x.wm.replace(/\{SymbolName\}/gi,t.name),e.prev=1,e.next=4,(0,x.EJ)(a,r);case 4:return i=e.sent,e.abrupt("return",(0,x.KV)(i.data));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",((0,v.k_)(e.t0),null));case 11:case"end":return e.stop()}}),e,null,[[1,8]])}))),T.apply(this,arguments)}function E(e,t,r,n){return V.apply(this,arguments)}function V(){return V=(0,a.Z)((0,n.Z)().mark((function e(t,r,a,i){var l,s,o,u,c;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=t.data,s={portal:a&&(0,y.pC)(a.portal)?a.portal:b.Z.getDefault(),url:(0,g.mN)(t.baseUrl),origin:"portal-item"},o=l.items.find((function(e){return e.name===r}))){e.next=3;break}throw new m.Z("symbolstyleutils:symbol-name-not-found","The symbol name '".concat(r,"' could not be found"),{symbolName:r});case 3:return u=(0,h.f)((0,x.v9)(o,"cimRef"),s),(0,d.XO)()&&(u=(0,d.pJ)(u)),e.prev=5,e.next=8,(0,x.EJ)(u,i);case 8:return c=e.sent,e.abrupt("return",(0,x.KV)(c.data));case 12:return e.prev=12,e.t0=e.catch(5),e.abrupt("return",((0,v.k_)(e.t0),null));case 15:case"end":return e.stop()}}),e,null,[[5,12]])}))),V.apply(this,arguments)}var F=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r,a){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=p,e.next=3,(0,i.c)(t.data,r,a);case 3:return e.t1=e.sent,e.t2=t.data,e.t3=t.rendererKey,e.t4=t.maxVVSize,e.abrupt("return",new e.t0(e.t1,e.t2,e.t3,e.t4));case 8:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),z=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(t,r,a,i){var l;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if("cim"!==t.type){e.next=4;break}return e.abrupt("return",F(t,r,a));case 4:if("web-style"!==t.type){e.next=12;break}return e.next=7,S(t,null,i);case 7:return e.t0=e.sent,e.t1=t.rendererKey,e.t2=t.maxVVSize,l={type:"cim",data:e.t0,rendererKey:e.t1,maxVVSize:e.t2},e.abrupt("return",F(l,r,a));case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}();function I(e){if(!e)return null;var t=e.type,r=e.cim,n=e.url,a={cim:r,type:t,mosaicHash:e.materialHash,url:n,size:null,dashTemplate:null,path:null,text:null,fontName:null,animatedSymbolProperties:null};switch(t){case"marker":a.size=e.size,a.path=e.path,a.animatedSymbolProperties=e.animatedSymbolProperties;break;case"line":a.dashTemplate=e.dashTemplate;break;case"text":a.text=e.text,a.fontName=e.fontName}return a}},31666:function(e,t,r){r.d(t,{JV:function(){return i},oq:function(){return a}});var n=new(r(43404).X)({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});function a(e){return n.toJSON(e)}function i(e){var t=e.rasterInfo,r=t.bandCount,n=t.attributeTable,a=t.colormap,i=t.pixelType;return 1===r&&(null!=n||null!=a||"u8"===i||"s8"===i)}}}]);
//# sourceMappingURL=505.949c96e8.chunk.js.map