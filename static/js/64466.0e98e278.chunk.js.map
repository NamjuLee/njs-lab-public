{"version":3,"file":"static/js/64466.0e98e278.chunk.js","mappings":"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","sources":["njslab/Workshop/workshop-mapping/09_Shape/index.ts","../node_modules/array-source/index.js","../node_modules/path-source/fetch.js","../node_modules/path-source/request.js","../node_modules/path-source/index.js","../node_modules/stream-source/index.js","../node_modules/array-source/read.js","../node_modules/array-source/cancel.js","../node_modules/slice-source/empty.js","../node_modules/slice-source/concat.js","../node_modules/slice-source/index.js","../node_modules/shapefile/dbf/number.js","../node_modules/slice-source/read.js","../node_modules/slice-source/slice.js","../node_modules/slice-source/cancel.js","../node_modules/shapefile/dbf/read.js","../node_modules/shapefile/dbf/string.js","../node_modules/shapefile/dbf/date.js","../node_modules/shapefile/dbf/boolean.js","../node_modules/shapefile/view.js","../node_modules/shapefile/dbf/index.js","../node_modules/shapefile/shp/multipoint.js","../node_modules/shapefile/shp/point.js","../node_modules/shapefile/shp/polygon.js","../node_modules/shapefile/shp/polyline.js","../node_modules/shapefile/shp/concat.js","../node_modules/shapefile/dbf/cancel.js","../node_modules/shapefile/shp/index.js","../node_modules/shapefile/shp/null.js","../node_modules/shapefile/shapefile/cancel.js","../node_modules/shapefile/shapefile/index.js","../node_modules/shapefile/shp/read.js","../node_modules/shapefile/shp/cancel.js","../node_modules/shapefile/index.js","../node_modules/shapefile/shapefile/read.js","../node_modules/@turf/bbox/index.ts","../node_modules/@turf/center/index.ts"],"sourcesContent":["import { RendererJSAPI , getJSONFromURL} from '../../../../lib'\r\nimport * as shapefile from 'shapefile'; // https://www.npmjs.com/package/shapefile\r\n\r\nimport * as turf from '@turf/turf'\r\n\r\n// import Shp from 'shpjs';\r\n\r\nexport class Solution extends RendererJSAPI {\r\n\r\n    locations: number[][] = [];\r\n    colors: string[] = [];\r\n    names: string[] = [];\r\n\r\n    shape;\r\n\r\n    constructor(id: string) {\r\n        super(id);\r\n    }\r\n    public initPost(): void {\r\n        // TODO\r\n        // You code goes here for one time operation\r\n        this.zoom(3)\r\n\r\n\r\n        const uploadFile = document.createElement(\"INPUT\");\r\n        this.hostDiv.appendChild(uploadFile);\r\n        uploadFile.style.position = 'absolute'\r\n        uploadFile.setAttribute(\"type\", \"file\");\r\n        uploadFile.onchange = (evt) => {\r\n            // @ts-ignore\r\n            const file = evt.target.files[0];\r\n            const reader = new FileReader();\r\n            console.log(file)\r\n\r\n            reader.onload =  (event) =>{\r\n                const arrayBuffer = event.target.result;\r\n                // @ts-ignore\r\n                const uint8Array = new Uint8Array(arrayBuffer);\r\n                shapefile.open(uint8Array)\r\n                  .then(source => source.read().then((result) => {\r\n                    if (result.done) return;\r\n                    this.shape = {\r\n                        features: [result.value],\r\n                        type: 'FeatureCollection',\r\n                    }\r\n                    const cp = turf.center(this.shape)\r\n                    this.center(cp.geometry.coordinates[0], cp.geometry.coordinates[1])\r\n                    this.start()\r\n\r\n                  })\r\n                  ).catch(error => console.error(error));\r\n            };\r\n            reader.readAsArrayBuffer(file)\r\n        }\r\n\r\n        \r\n\r\n        const path = 'https://raw.githubusercontent.com/NamjuLee/data/master/shape/cb_2018_us_county_5m/cb_2018_us_county_5m.shp';\r\n        this.importAsJSON(path)\r\n    }\r\n    public async importAsJSON(path: string) {\r\n        const geojson = await shapefile.read(path)\r\n        this.shape = geojson\r\n        console.log(geojson)\r\n        this.start();\r\n    }\r\n\r\n    public render(ctx: CanvasRenderingContext2D): void {\r\n        // TODO\r\n        // You code goes here for the rending loop\r\n\r\n        if (this.shape) {\r\n\r\n            for (let i = 0; i < this.shape.features.length; ++i) {\r\n                const feature = this.shape.features[i]\r\n                if (feature.geometry.type === 'Polygon') {\r\n                    renderPolygon(ctx, feature.geometry, this.toScreen)\r\n                }\r\n            }\r\n\r\n        }\r\n    }\r\n}\r\nconst renderPoint = (ctx: CanvasRenderingContext2D, x: number, y: number, t: number, color: string) => {\r\n    ctx.fillStyle = color;\r\n    ctx.strokeStyle = '#fff';\r\n    ctx.lineWidth = 0.75;\r\n    ctx.beginPath();\r\n    ctx.arc(x, y, (Math.sin(t * 0.8) + 4) * 2, 0, Math.PI * 2);\r\n    ctx.closePath();\r\n    ctx.fill();\r\n    ctx.stroke();\r\n};\r\nconst renderText = (ctx: CanvasRenderingContext2D, x: number, y: number, name: string, color: string) => {\r\n    ctx.strokeStyle = color;\r\n    ctx.lineWidth = 0.5;\r\n    ctx.strokeText(name, x + 13, y);\r\n};\r\n\r\n\r\nconst renderPolygon = (ctx, geometry, toScreen, color = '#f00', dash = false) => {\r\n    for (let i = 0; i < geometry.coordinates.length; ++i) {\r\n        const coordinates = geometry.coordinates[i]\r\n        // console.log(coordinates)\r\n        let sp = toScreen(coordinates[0][0], coordinates[0][1]);\r\n        ctx.beginPath()\r\n        ctx.moveTo(sp[0], sp[1])\r\n\r\n\r\n        for (let j = 1; j < coordinates.length; ++j) {\r\n            // console.log(coordinates[j]);\r\n            sp = toScreen(coordinates[j][0], coordinates[j][1]);\r\n            // console.log(sp)\r\n            ctx.lineTo(sp[0], sp[1]);\r\n        }\r\n        ctx.closePath();\r\n        ctx.strokeStyle = color;\r\n        ctx.stroke();\r\n    }\r\n}","import array_cancel from \"./cancel\";\nimport array_read from \"./read\";\n\nexport default function array(array) {\n  return new ArraySource(array instanceof Uint8Array ? array : new Uint8Array(array));\n}\n\nfunction ArraySource(array) {\n  this._array = array;\n}\n\nArraySource.prototype.read = array_read;\nArraySource.prototype.cancel = array_cancel;\n","import array from \"array-source\";\n\nexport default function(url) {\n  return fetch(url).then(function(response) {\n    return response.body && response.body.getReader\n        ? response.body.getReader()\n        : response.arrayBuffer().then(array);\n  });\n}\n","import array from \"array-source\";\n\nexport default function(url) {\n  return new Promise(function(resolve, reject) {\n    var request = new XMLHttpRequest;\n    request.responseType = \"arraybuffer\";\n    request.onload = function() { resolve(array(request.response)); };\n    request.onerror = reject;\n    request.ontimeout = reject;\n    request.open(\"GET\", url, true);\n    request.send();\n  });\n}\n","import fetchPath from \"./fetch\";\nimport requestPath from \"./request\";\n\nexport default function path(path) {\n  return (typeof fetch === \"function\" ? fetchPath : requestPath)(path);\n}\n","export default function stream(source) {\n  return typeof source.read === \"function\" ? source : source.getReader();\n}\n","export default function() {\n  var array = this._array;\n  this._array = null;\n  return Promise.resolve(array ? {done: false, value: array} : {done: true, value: undefined});\n}\n","export default function() {\n  this._array = null;\n  return Promise.resolve();\n}\n","export default new Uint8Array(0);\n","export default function concat(a, b) {\n  if (!a.length) return b;\n  if (!b.length) return a;\n  var c = new Uint8Array(a.length + b.length);\n  c.set(a);\n  c.set(b, a.length);\n  return c;\n}\n","import empty from \"./empty\";\nimport slice_cancel from \"./cancel\";\nimport slice_read from \"./read\";\nimport slice_slice from \"./slice\";\n\nexport default function slice(source) {\n  return typeof source.slice === \"function\" ? source :\n      new SliceSource(typeof source.read === \"function\" ? source\n          : source.getReader());\n}\n\nfunction SliceSource(source) {\n  this._source = source;\n  this._array = empty;\n  this._index = 0;\n}\n\nSliceSource.prototype.read = slice_read;\nSliceSource.prototype.slice = slice_slice;\nSliceSource.prototype.cancel = slice_cancel;\n","export default function(value) {\n  return !(value = value.trim()) || isNaN(value = +value) ? null : value;\n}\n","import concat from \"./concat\";\nimport empty from \"./empty\";\n\nexport default function() {\n  var that = this, array = that._array.subarray(that._index);\n  return that._source.read().then(function(result) {\n    that._array = empty;\n    that._index = 0;\n    return result.done ? (array.length > 0\n        ? {done: false, value: array}\n        : {done: true, value: undefined})\n        : {done: false, value: concat(array, result.value)};\n  });\n}\n","import empty from \"./empty\";\n\nexport default function(length) {\n  if ((length |= 0) < 0) throw new Error(\"invalid length\");\n  var that = this, index = this._array.length - this._index;\n\n  // If the request fits within the remaining buffer, resolve it immediately.\n  if (this._index + length <= this._array.length) {\n    return Promise.resolve(this._array.subarray(this._index, this._index += length));\n  }\n\n  // Otherwise, read chunks repeatedly until the request is fulfilled.\n  var array = new Uint8Array(length);\n  array.set(this._array.subarray(this._index));\n  return (function read() {\n    return that._source.read().then(function(result) {\n\n      // When done, it’s possible the request wasn’t fully fullfilled!\n      // If so, the pre-allocated array is too big and needs slicing.\n      if (result.done) {\n        that._array = empty;\n        that._index = 0;\n        return index > 0 ? array.subarray(0, index) : null;\n      }\n\n      // If this chunk fulfills the request, return the resulting array.\n      if (index + result.value.length >= length) {\n        that._array = result.value;\n        that._index = length - index;\n        array.set(result.value.subarray(0, length - index), index);\n        return array;\n      }\n\n      // Otherwise copy this chunk into the array, then read the next chunk.\n      array.set(result.value, index);\n      index += result.value.length;\n      return read();\n    });\n  })();\n}\n","export default function() {\n  return this._source.cancel();\n}\n","import readBoolean from \"./boolean\";\nimport readDate from \"./date\";\nimport readNumber from \"./number\";\nimport readString from \"./string\";\n\nvar types = {\n  B: readNumber,\n  C: readString,\n  D: readDate,\n  F: readNumber,\n  L: readBoolean,\n  M: readNumber,\n  N: readNumber\n};\n\nexport default function() {\n  var that = this, i = 1;\n  return that._source.slice(that._recordLength).then(function(value) {\n    return value && (value[0] !== 0x1a) ? {done: false, value: that._fields.reduce(function(p, f) {\n      p[f.name] = types[f.type](that._decode(value.subarray(i, i += f.length)));\n      return p;\n    }, {})} : {done: true, value: undefined};\n  });\n}\n","export default function(value) {\n  return value.trim() || null;\n}\n","export default function(value) {\n  return new Date(+value.substring(0, 4), value.substring(4, 6) - 1, +value.substring(6, 8));\n}\n","export default function(value) {\n  return /^[nf]$/i.test(value) ? false\n      : /^[yt]$/i.test(value) ? true\n      : null;\n}\n","export default function(array) {\n  return new DataView(array.buffer, array.byteOffset, array.byteLength);\n}\n","import slice from \"slice-source\";\nimport dbf_cancel from \"./cancel\";\nimport dbf_read from \"./read\";\nimport view from \"../view\";\n\nexport default function(source, decoder) {\n  source = slice(source);\n  return source.slice(32).then(function(array) {\n    var head = view(array);\n    return source.slice(head.getUint16(8, true) - 32).then(function(array) {\n      return new Dbf(source, decoder, head, view(array));\n    });\n  });\n}\n\nfunction Dbf(source, decoder, head, body) {\n  this._source = source;\n  this._decode = decoder.decode.bind(decoder);\n  this._recordLength = head.getUint16(10, true);\n  this._fields = [];\n  for (var n = 0; body.getUint8(n) !== 0x0d; n += 32) {\n    for (var j = 0; j < 11; ++j) if (body.getUint8(n + j) === 0) break;\n    this._fields.push({\n      name: this._decode(new Uint8Array(body.buffer, body.byteOffset + n, j)),\n      type: String.fromCharCode(body.getUint8(n + 11)),\n      length: body.getUint8(n + 16)\n    });\n  }\n}\n\nvar prototype = Dbf.prototype;\nprototype.read = dbf_read;\nprototype.cancel = dbf_cancel;\n","export default function(record) {\n  var i = 40, j, n = record.getInt32(36, true), coordinates = new Array(n);\n  for (j = 0; j < n; ++j, i += 16) coordinates[j] = [record.getFloat64(i, true), record.getFloat64(i + 8, true)];\n  return {type: \"MultiPoint\", coordinates: coordinates};\n};\n","export default function(record) {\n  return {type: \"Point\", coordinates: [record.getFloat64(4, true), record.getFloat64(12, true)]};\n};\n","export default function(record) {\n  var i = 44, j, n = record.getInt32(36, true), m = record.getInt32(40, true), parts = new Array(n), points = new Array(m), polygons = [], holes = [];\n  for (j = 0; j < n; ++j, i += 4) parts[j] = record.getInt32(i, true);\n  for (j = 0; j < m; ++j, i += 16) points[j] = [record.getFloat64(i, true), record.getFloat64(i + 8, true)];\n\n  parts.forEach(function(i, j) {\n    var ring = points.slice(i, parts[j + 1]);\n    if (ringClockwise(ring)) polygons.push([ring]);\n    else holes.push(ring);\n  });\n\n  holes.forEach(function(hole) {\n    polygons.some(function(polygon) {\n      if (ringContainsSome(polygon[0], hole)) {\n        polygon.push(hole);\n        return true;\n      }\n    }) || polygons.push([hole]);\n  });\n\n  return polygons.length === 1\n      ? {type: \"Polygon\", coordinates: polygons[0]}\n      : {type: \"MultiPolygon\", coordinates: polygons};\n};\n\nfunction ringClockwise(ring) {\n  if ((n = ring.length) < 4) return false;\n  var i = 0, n, area = ring[n - 1][1] * ring[0][0] - ring[n - 1][0] * ring[0][1];\n  while (++i < n) area += ring[i - 1][1] * ring[i][0] - ring[i - 1][0] * ring[i][1];\n  return area >= 0;\n}\n\nfunction ringContainsSome(ring, hole) {\n  var i = -1, n = hole.length, c;\n  while (++i < n) {\n    if (c = ringContains(ring, hole[i])) {\n      return c > 0;\n    }\n  }\n  return false;\n}\n\nfunction ringContains(ring, point) {\n  var x = point[0], y = point[1], contains = -1;\n  for (var i = 0, n = ring.length, j = n - 1; i < n; j = i++) {\n    var pi = ring[i], xi = pi[0], yi = pi[1],\n        pj = ring[j], xj = pj[0], yj = pj[1];\n    if (segmentContains(pi, pj, point)) {\n      return 0;\n    }\n    if (((yi > y) !== (yj > y)) && ((x < (xj - xi) * (y - yi) / (yj - yi) + xi))) {\n      contains = -contains;\n    }\n  }\n  return contains;\n}\n\nfunction segmentContains(p0, p1, p2) {\n  var x20 = p2[0] - p0[0], y20 = p2[1] - p0[1];\n  if (x20 === 0 && y20 === 0) return true;\n  var x10 = p1[0] - p0[0], y10 = p1[1] - p0[1];\n  if (x10 === 0 && y10 === 0) return false;\n  var t = (x20 * x10 + y20 * y10) / (x10 * x10 + y10 * y10);\n  return t < 0 || t > 1 ? false : t === 0 || t === 1 ? true : t * x10 === x20 && t * y10 === y20;\n}\n","export default function(record) {\n  var i = 44, j, n = record.getInt32(36, true), m = record.getInt32(40, true), parts = new Array(n), points = new Array(m);\n  for (j = 0; j < n; ++j, i += 4) parts[j] = record.getInt32(i, true);\n  for (j = 0; j < m; ++j, i += 16) points[j] = [record.getFloat64(i, true), record.getFloat64(i + 8, true)];\n  return n === 1\n      ? {type: \"LineString\", coordinates: points}\n      : {type: \"MultiLineString\", coordinates: parts.map(function(i, j) { return points.slice(i, parts[j + 1]); })};\n};\n","export default function(a, b) {\n  var ab = new Uint8Array(a.length + b.length);\n  ab.set(a, 0);\n  ab.set(b, a.length);\n  return ab;\n}\n","export default function() {\n  return this._source.cancel();\n}\n","import slice from \"slice-source\";\nimport view from \"../view\";\nimport shp_cancel from \"./cancel\";\nimport parseMultiPoint from \"./multipoint\";\nimport parseNull from \"./null\";\nimport parsePoint from \"./point\";\nimport parsePolygon from \"./polygon\";\nimport parsePolyLine from \"./polyline\";\nimport shp_read from \"./read\";\n\nvar parsers = {\n  0: parseNull,\n  1: parsePoint,\n  3: parsePolyLine,\n  5: parsePolygon,\n  8: parseMultiPoint,\n  11: parsePoint, // PointZ\n  13: parsePolyLine, // PolyLineZ\n  15: parsePolygon, // PolygonZ\n  18: parseMultiPoint, // MultiPointZ\n  21: parsePoint, // PointM\n  23: parsePolyLine, // PolyLineM\n  25: parsePolygon, // PolygonM\n  28: parseMultiPoint // MultiPointM\n};\n\nexport default function(source) {\n  source = slice(source);\n  return source.slice(100).then(function(array) {\n    return new Shp(source, view(array));\n  });\n};\n\nfunction Shp(source, header) {\n  var type = header.getInt32(32, true);\n  if (!(type in parsers)) throw new Error(\"unsupported shape type: \" + type);\n  this._source = source;\n  this._type = type;\n  this._index = 0;\n  this._parse = parsers[type];\n  this.bbox = [header.getFloat64(36, true), header.getFloat64(44, true), header.getFloat64(52, true), header.getFloat64(60, true)];\n}\n\nvar prototype = Shp.prototype;\nprototype.read = shp_read;\nprototype.cancel = shp_cancel;\n","export default function() {\n  return null;\n};\n","function noop() {}\n\nexport default function() {\n  return Promise.all([\n    this._dbf && this._dbf.cancel(),\n    this._shp.cancel()\n  ]).then(noop);\n}\n","import dbf from \"../dbf/index\";\nimport shp from \"../shp/index\";\nimport shapefile_cancel from \"./cancel\";\nimport shapefile_read from \"./read\";\n\nexport default function(shpSource, dbfSource, decoder) {\n  return Promise.all([\n    shp(shpSource),\n    dbfSource && dbf(dbfSource, decoder)\n  ]).then(function(sources) {\n    return new Shapefile(sources[0], sources[1]);\n  });\n}\n\nfunction Shapefile(shp, dbf) {\n  this._shp = shp;\n  this._dbf = dbf;\n  this.bbox = shp.bbox;\n}\n\nvar prototype = Shapefile.prototype;\nprototype.read = shapefile_read;\nprototype.cancel = shapefile_cancel;\n","import concat from \"./concat\";\nimport view from \"../view\";\n\nexport default function() {\n  var that = this;\n  ++that._index;\n  return that._source.slice(12).then(function(array) {\n    if (array == null) return {done: true, value: undefined};\n    var header = view(array);\n\n    // If the record starts with an invalid shape type (see #36), scan ahead in\n    // four-byte increments to find the next valid record, identified by the\n    // expected index, a non-empty content length and a valid shape type.\n    function skip() {\n      return that._source.slice(4).then(function(chunk) {\n        if (chunk == null) return {done: true, value: undefined};\n        header = view(array = concat(array.slice(4), chunk));\n        return header.getInt32(0, false) !== that._index ? skip() : read();\n      });\n    }\n\n    // All records should have at least four bytes (for the record shape type),\n    // so an invalid content length indicates corruption.\n    function read() {\n      var length = header.getInt32(4, false) * 2 - 4, type = header.getInt32(8, true);\n      return length < 0 || (type && type !== that._type) ? skip() : that._source.slice(length).then(function(chunk) {\n        return {done: false, value: type ? that._parse(view(concat(array.slice(8), chunk))) : null};\n      });\n    }\n\n    return read();\n  });\n}\n","export default function cancel() {\n  return this._source.cancel();\n}\n","import path from \"path-source\";\nimport array from \"array-source\";\nimport stream from \"stream-source\";\nimport dbf from \"./dbf/index\";\nimport shapefile from \"./shapefile/index\";\nimport shp from \"./shp/index\";\n\nexport function open(shp, dbf, options) {\n  if (typeof dbf === \"string\") {\n    if (!/\\.dbf$/.test(dbf)) dbf += \".dbf\";\n    dbf = path(dbf, options);\n  } else if (dbf instanceof ArrayBuffer || dbf instanceof Uint8Array) {\n    dbf = array(dbf);\n  } else if (dbf != null) {\n    dbf = stream(dbf);\n  }\n  if (typeof shp === \"string\") {\n    if (!/\\.shp$/.test(shp)) shp += \".shp\";\n    if (dbf === undefined) dbf = path(shp.substring(0, shp.length - 4) + \".dbf\", options).catch(function() {});\n    shp = path(shp, options);\n  } else if (shp instanceof ArrayBuffer || shp instanceof Uint8Array) {\n    shp = array(shp);\n  } else {\n    shp = stream(shp);\n  }\n  return Promise.all([shp, dbf]).then(function(sources) {\n    var shp = sources[0], dbf = sources[1], encoding = \"windows-1252\";\n    if (options && options.encoding != null) encoding = options.encoding;\n    return shapefile(shp, dbf, dbf && new TextDecoder(encoding));\n  });\n}\n\nexport function openShp(source, options) {\n  if (typeof source === \"string\") {\n    if (!/\\.shp$/.test(source)) source += \".shp\";\n    source = path(source, options);\n  } else if (source instanceof ArrayBuffer || source instanceof Uint8Array) {\n    source = array(source);\n  } else {\n    source = stream(source);\n  }\n  return Promise.resolve(source).then(shp);\n}\n\nexport function openDbf(source, options) {\n  var encoding = \"windows-1252\";\n  if (options && options.encoding != null) encoding = options.encoding;\n  encoding = new TextDecoder(encoding);\n  if (typeof source === \"string\") {\n    if (!/\\.dbf$/.test(source)) source += \".dbf\";\n    source = path(source, options);\n  } else if (source instanceof ArrayBuffer || source instanceof Uint8Array) {\n    source = array(source);\n  } else {\n    source = stream(source);\n  }\n  return Promise.resolve(source).then(function(source) {\n    return dbf(source, encoding);\n  });\n}\n\nexport function read(shp, dbf, options) {\n  return open(shp, dbf, options).then(function(source) {\n    var features = [], collection = {type: \"FeatureCollection\", features: features, bbox: source.bbox};\n    return source.read().then(function read(result) {\n      if (result.done) return collection;\n      features.push(result.value);\n      return source.read().then(read);\n    });\n  });\n}\n","export default function() {\n  var that = this;\n  return Promise.all([\n    that._dbf ? that._dbf.read() : {value: {}},\n    that._shp.read()\n  ]).then(function(results) {\n    var dbf = results[0], shp = results[1];\n    return shp.done ? shp : {\n      done: false,\n      value: {\n        type: \"Feature\",\n        properties: dbf.value,\n        geometry: shp.value\n      }\n    };\n  });\n};\n","import { BBox } from \"geojson\";\nimport { AllGeoJSON } from \"@turf/helpers\";\nimport { coordEach } from \"@turf/meta\";\n\n/**\n * Calculates the bounding box for any GeoJSON object, including FeatureCollection.\n * Uses geojson.bbox if available and options.recompute is not set.\n *\n * @name bbox\n * @param {GeoJSON} geojson any GeoJSON object\n * @param {Object} [options={}] Optional parameters\n * @param {boolean} [options.recompute] Whether to ignore an existing bbox property on geojson\n * @returns {BBox} bbox extent in [minX, minY, maxX, maxY] order\n * @example\n * var line = turf.lineString([[-74, 40], [-78, 42], [-82, 35]]);\n * var bbox = turf.bbox(line);\n * var bboxPolygon = turf.bboxPolygon(bbox);\n *\n * //addToMap\n * var addToMap = [line, bboxPolygon]\n */\nfunction bbox(\n  geojson: AllGeoJSON,\n  options: {\n    recompute?: boolean;\n  } = {}\n): BBox {\n  if (geojson.bbox != null && true !== options.recompute) {\n    return geojson.bbox;\n  }\n  const result: BBox = [Infinity, Infinity, -Infinity, -Infinity];\n  coordEach(geojson, (coord) => {\n    if (result[0] > coord[0]) {\n      result[0] = coord[0];\n    }\n    if (result[1] > coord[1]) {\n      result[1] = coord[1];\n    }\n    if (result[2] < coord[0]) {\n      result[2] = coord[0];\n    }\n    if (result[3] < coord[1]) {\n      result[3] = coord[1];\n    }\n  });\n  return result;\n}\n\nexport { bbox };\nexport default bbox;\n","import { BBox, Feature, GeoJsonProperties, Point } from \"geojson\";\nimport { bbox } from \"@turf/bbox\";\nimport { point, Id, AllGeoJSON } from \"@turf/helpers\";\n\n/**\n * Takes a {@link Feature} or {@link FeatureCollection} and returns the absolute center point of all features.\n *\n * @name center\n * @param {GeoJSON} geojson GeoJSON to be centered\n * @param {Object} [options={}] Optional parameters\n * @param {Object} [options.properties={}] Translate GeoJSON Properties to Point\n * @param {Object} [options.bbox={}] Translate GeoJSON BBox to Point\n * @param {Object} [options.id={}] Translate GeoJSON Id to Point\n * @returns {Feature<Point>} a Point feature at the absolute center point of all input features\n * @example\n * var features = turf.points([\n *   [-97.522259, 35.4691],\n *   [-97.502754, 35.463455],\n *   [-97.508269, 35.463245]\n * ]);\n *\n * var center = turf.center(features);\n *\n * //addToMap\n * var addToMap = [features, center]\n * center.properties['marker-size'] = 'large';\n * center.properties['marker-color'] = '#000';\n */\nfunction center<P extends GeoJsonProperties = GeoJsonProperties>(\n  geojson: AllGeoJSON,\n  options: { properties?: P; bbox?: BBox; id?: Id } = {}\n): Feature<Point, P> {\n  const ext = bbox(geojson);\n  const x = (ext[0] + ext[2]) / 2;\n  const y = (ext[1] + ext[3]) / 2;\n  return point([x, y], options.properties, options);\n}\n\nexport { center };\nexport default center;\n"],"names":["Solution","RendererJSAPI","constructor","id","super","locations","colors","names","shape","initPost","this","zoom","uploadFile","document","createElement","hostDiv","appendChild","style","position","setAttribute","onchange","evt","file","target","files","reader","FileReader","console","log","onload","event","arrayBuffer","result","uint8Array","Uint8Array","shapefile","then","source","read","done","features","value","type","cp","turf","center","geometry","coordinates","start","catch","error","readAsArrayBuffer","importAsJSON","path","geojson","render","ctx","i","length","feature","renderPolygon","toScreen","color","sp","beginPath","moveTo","j","lineTo","closePath","strokeStyle","stroke","array","ArraySource","_array","url","fetch","response","body","getReader","Promise","resolve","reject","request","XMLHttpRequest","responseType","onerror","ontimeout","open","send","fetchPath","requestPath","stream","prototype","undefined","cancel","concat","a","b","c","set","slice","SliceSource","_source","empty","_index","trim","isNaN","that","subarray","Error","index","types","B","readNumber","C","D","Date","substring","F","L","test","M","N","DataView","buffer","byteOffset","byteLength","decoder","head","view","getUint16","Dbf","_decode","decode","bind","_recordLength","_fields","n","getUint8","push","name","String","fromCharCode","record","getInt32","Array","getFloat64","m","parts","points","polygons","holes","forEach","ring","area","ringClockwise","hole","some","polygon","ringContains","ringContainsSome","point","x","y","contains","pi","xi","yi","pj","xj","yj","segmentContains","p0","p1","p2","x20","y20","x10","y10","t","map","ab","reduce","p","f","parsers","parsePoint","parsePolyLine","parsePolygon","parseMultiPoint","Shp","header","_type","_parse","bbox","noop","Shapefile","shp","dbf","_shp","_dbf","skip","chunk","options","ArrayBuffer","all","sources","encoding","shpSource","dbfSource","TextDecoder","collection","results","properties","recompute","Infinity","coordEach","coord","ext"],"sourceRoot":""}