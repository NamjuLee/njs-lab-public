"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[6690],{46690:function(t,e,i){i.r(e),i.d(e,{Edge:function(){return a},Graph:function(){return u},Node:function(){return d}});var s=i(37762),n=i(15671),h=i(43144),o=i(9936),u=function(){function t(){(0,n.Z)(this,t),this.nodes=[],this.edges=[],this.dt=0,this.mouse=new o.h9(0,0),this.damping=.96,this.gravity=-.032,this.timeStep=.16,this.groundZ=-9.26,this.capture=void 0}return(0,h.Z)(t,[{key:"Init",value:function(t,e){this.InitGridR(t,e),this.nodes[0].fixed=!0,this.nodes[9].fixed=!0,this.nodes[this.nodes.length-1].fixed=!0,this.nodes[this.nodes.length-1-9].fixed=!0}},{key:"updateOptionA",value:function(t){this.damping=.1*t,console.log(this.damping,"damping")}},{key:"updateOptionB",value:function(t){this.timeStep=.05*t,console.log(this.timeStep,"timeStep")}},{key:"updateOptionC",value:function(t){}},{key:"shrinkage",value:function(t){this.nodes[t].fixed=!0;for(var e=0;e<this.nodes[t].edge.length;++e)this.nodes[t].edge[e].targetLength*=.8}},{key:"InitGridR",value:function(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,n=0,h=0,u=t/i+1,a=e/s+1,d=this.nodes.length,r=0;r<s;++r)for(var l=0;l<i;++l){var v=n+u*l-.5*t,c=h+a*r-.5*e;this.AddNode(v,0,c,o.h9.Zero(),1)}for(var f=0;f<s;++f)for(var g=0;g<i;++g){var y=f*i+g;0!==g&&this.AddEdge(this.nodes[d+y-1],this.nodes[d+y]),0!==f&&this.AddEdge(this.nodes[d+y-i],this.nodes[d+y])}}},{key:"Clear",value:function(){this.nodes=[],this.edges=[]}},{key:"AddNode",value:function(t,e,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new o.h9(0,0,0),n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,h=new d(new o.h9(t,e,i),s,n);return this.nodes.push(h),h.id=this.nodes.length-1,h}},{key:"AddEdge",value:function(t,e){var i=new a(t,e);return t.edge.push(i),e.edge.push(i),this.edges.push(i),i}},{key:"MouseMove",value:function(t,e){this.mouse.x=t,this.mouse.y=e,console.log("move",t,e)}},{key:"MouseDClick",value:function(t,e){this.mouse.x=t,this.mouse.y=e;var i=this.FindNode(this.mouse);i&&(i.fixed=!i.fixed),console.log("click",t,e)}},{key:"MouseDown",value:function(t,e){this.mouse.x=t,this.mouse.y=e,this.capture=this.FindNode(this.mouse),this.capture&&(this.capture.fixed=!0,this.capture.isCapture=!0),console.log("down",t,e,this.capture)}},{key:"MouseLeftClick",value:function(t,e){console.log("click",t,e,this.capture)}},{key:"MouseUp",value:function(t,e){this.mouse.x=t,this.mouse.y=e,this.capture&&(this.capture.isCapture=!1,this.capture=void 0),console.log("up",t,e)}},{key:"MouseDrag",value:function(t,e){this.mouse.x=t,this.mouse.y=e,this.capture&&(this.capture.v.x=t,this.capture.v.y=e),console.log("drag",t,e)}},{key:"Render",value:function(t){this.dt+=.1,this.Move(this.mouse.x,this.mouse.y,this.mouse.z,this.damping,0,this.timeStep,this.groundZ,1)}},{key:"FindNode",value:function(t){var e,i=(0,s.Z)(this.nodes);try{for(i.s();!(e=i.n()).done;){var n=e.value;if(n.v.Distance(t)<n.m+3)return n}}catch(h){i.e(h)}finally{i.f()}}},{key:"Move",value:function(t,e,i,n){for(var h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.01,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-10,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,r=new o.h9(t,e,i),l=0;l<d;++l){var v,c=(0,s.Z)(this.nodes);try{for(c.s();!(v=c.n()).done;){var f=v.value,g=o.h9.Sub(r,f.v),y=g.Length();g.Unitize(),f.f=o.h9.Add(o.h9.Scale(g,.1*Math.exp(-.1*y*y)),o.h9.Scale(o.h9.YAxis(),h))}}catch(Z){c.e(Z)}finally{c.f()}var p,m=(0,s.Z)(this.edges);try{for(m.s();!(p=m.n()).done;){var k=p.value;k.ApplySpringForce()}}catch(Z){m.e(Z)}finally{m.f()}var x,S=(0,s.Z)(this.nodes);try{for(S.s();!(x=S.n()).done;){var M=x.value;M.Move(u,n,a)}}catch(Z){S.e(Z)}finally{S.f()}}}}]),t}(),a=function(){function t(e,i){(0,n.Z)(this,t),this.n0=void 0,this.n1=void 0,this.targetLength=0,this.springConstant=.8,this.n0=e,this.n1=i,this.targetLength=.95*this.n0.v.Distance(this.n1.v)}return(0,h.Z)(t,[{key:"Render",value:function(t){t.strokeStyle="#ff0000",o.h9.Distance(this.n0.v,this.n1.v)<2*this.targetLength&&(t.strokeStyle="#0000ff"),t.beginPath(),t.moveTo(this.n0.v.x,this.n0.v.y),t.lineTo(this.n1.v.x,this.n1.v.y),t.closePath(),t.stroke()}},{key:"ApplySpringForce",value:function(){var t=o.h9.Sub(this.n1.v,this.n0.v),e=t.Length();t.Unitize();var i=o.h9.Scale(t,(e-this.targetLength)*this.springConstant);this.n0.f=o.h9.Add(this.n0.f,i),this.n1.f=o.h9.Sub(this.n1.f,i)}}]),t}(),d=function(){function t(e,i,s){(0,n.Z)(this,t),this.id=-1,this.edge=[],this.nNodes=[],this.v=o.h9.Origin(),this.f=o.h9.Origin(),this.u=o.h9.Origin(),this.m=0,this.fixed=!1,this.isCapture=!1,this.v=new o.h9(e.x,e.y,e.z),this.u=new o.h9(i.x,i.y,i.z),this.m=s}return(0,h.Z)(t,[{key:"Move",value:function(t,e){if(!this.fixed&&!this.isCapture){this.u.Mult(e),this.u.Add(o.h9.Scale(this.f,t/this.m));var i=o.h9.Scale(this.u,t);this.v.x+=i.x,this.v.y+=i.y}}},{key:"Render",value:function(t,e){t.beginPath(),e.Distance(this.v)<this.m+3?(t.fillStyle="#000000",t.arc(this.v.x,this.v.y,this.m+6,0,2*Math.PI)):(t.fillStyle="#f90000",t.arc(this.v.x,this.v.y,this.m+3,0,2*Math.PI)),this.fixed&&(t.fillStyle="#000000",t.arc(this.v.x,this.v.y,this.m+7.5,0,2*Math.PI)),t.closePath(),t.fill()}}]),t}()}}]);
//# sourceMappingURL=6690.3acc6aa0.chunk.js.map