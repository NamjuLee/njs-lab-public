{"version":3,"file":"static/js/40403.54f49e4b.chunk.js","mappings":"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","sources":["njslab/app-legacy/NJSCore/App/NUI/WrapperIndependentPanel/Core/IndePanelPreset.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperIndependentPanel/Panel/Common/base/BodyDiv.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperIndependentPanel/Panel/Common/base/BtnClose.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperIndependentPanel/Panel/Common/base/BtnHam.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperIndependentPanel/Panel/Common/base/BtnMinimize.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperIndependentPanel/Panel/Common/base/BtnResize.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperIndependentPanel/Panel/Common/base/IndeSubMenu.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperIndependentPanel/Panel/Common/base/IndeSubPanel.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperIndependentPanel/Panel/Common/base/base/IndePanelBase.ts","njslab/app-legacy/NJSCore/Core/Geometry/NGeometry/NVector3.ts","njslab/app-legacy/NJSCore/Core/NColor/Utility/ColorUtility.ts","njslab/app-legacy/NJSCore/Core/CoreGeometry/NGeometry/NVector3.ts","njslab/app-legacy/NJSCore/Core/NUtility/Math/MathUtility.ts","njslab/app-legacy/NJSCore/Core/Geometry/NGeometry/Base/AbstractGeometryBase.ts","njslab/app-legacy/NJSCore/Core/Geometry/NGeometry/NLine.ts","njslab/app-legacy/NJSCore/Core/Geometry/NGeometry/Utility/NVectorUtility.ts","njslab/app-legacy/NJSCore/Core/NUtility/Animation/NumericalMotion.ts","njslab/app-legacy/NJSCore/Core/NUtility/Animation/Deltatime.ts","njslab/app-legacy/NJSCore/Core/AppCore/Common/Enumeration.ts","njslab/app-legacy/NJSCore/IO/EventInteraction/MouseInteraction.ts","njslab/app-legacy/NJSCore/IO/EventInteraction/TouchInteraction.ts","njslab/app-legacy/NJSCore/IO/Device/Camera.ts","njslab/app-legacy/NJSCore/IO/FilesURL/NJSLoader.ts","njslab/app-legacy/NJSCore/Core/NUtility/Web/BrowserUtility.ts","njslab/app-legacy/NJSCore/Core/NUtility/Web/ESUtility.ts","njslab/app-legacy/NJSCore/Core/NData/Core/StatisticsUtility.ts","njslab/app-legacy/NJSCore/Core/NData/NGeoJSON.ts","njslab/app-legacy/NJSCore/Core/NData/NGeoJSONPolygon.ts","njslab/app-legacy/NJSCore/Core/NData/NGeoJSONFeatureService.ts","njslab/app-legacy/NJSCore/Core/NData/DataStructure/Pixel.ts","njslab/app-legacy/NJSCore/Core/NData/DataStructure/PixelMapGlobe.ts","njslab/app-legacy/NJSCore/Core/NData/DataStructureImplmentation/ALineGraph.ts","njslab/app-legacy/NJSCore/Core/NData/DataStructureImplmentation/DataPixelMap.ts","njslab/app-legacy/NJSCore/App/NUI/AssetWrapper/index.ts","njslab/app-legacy/NJSCore/App/NUI/Core/ActiveCommand.ts","njslab/app-legacy/NJSCore/App/NUI/Core/ControllerTheme.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperPullDownMenu/Core/MenuRenderer.ts","njslab/app-legacy/NJSCore/App/NUI/Core/Base/UIWrapperBase.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperPullDownMenu/Menu/Common/Base/MenuBase.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperPullDownMenu/Menu/Common/MenuBar.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperPullDownMenu/Core/MenuPreset.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperPullDownMenu/Menu/Common/MenuCommon.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperPullDownMenu/Menu/Common/SubMenuIconCommon.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperPullDownMenu/Menu/Common/SubMenuCommonSection.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperPullDownMenu/Menu/Common/SubMenuIconFlyCommon.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperPullDownMenu/Menu/Common/SubMenuCommonFly.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperPullDownMenu/Menu/Menu/MenuNCanvas.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperPullDownMenu/Menu/Common/SubMenuIconFlyCommonSection.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperPullDownMenu/Menu/Menu/MenuNCanvasVisualization.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperPullDownMenu/Menu/Menu/MenuNCreativeCoding.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperPullDownMenu/Menu/Menu/MenuNDrawingBlock.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperPullDownMenu/Menu/Menu/MenuNImage.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperPullDownMenu/Menu/Menu/MenuNAlgorithmEnv.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperPullDownMenu/Menu/Menu/Env/MenuNTFCustom.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperPullDownMenu/Menu/Menu/MenuNJSLabCoreSandbox.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperPullDownMenu/PullDownMenuWrapper.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperIndependentPanel/Core/IndePanelRender.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperIndependentPanel/Panel/Common/IndependentPanel.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperIndependentPanel/Core/ActiveCommand.ts","njslab/app-legacy/NJSCore/App/NUI/WrapperIndependentPanel/IndependentPanelWrapper.ts","njslab/app-legacy/NJSCore/App/NUI/Core/UICanvas.ts","njslab/app-legacy/NJSCore/App/NUI/NUI.ts","njslab/app-legacy/NJSCore/Core/AppCore/Common/AppProperties.ts","njslab/app-legacy/NJSCore/GL/Canvas/CanvasDrawing.ts","njslab/app-legacy/NJSCore/GL/Canvas/Utility/CanvasLoopController.ts"],"sourcesContent":["import { NVector3 } from '../../../../';\r\n// import { ADrawingPreset } from '../../AppDrawing/Canvas/CAnnotation/ADrawingPreset';\r\n// import { ColorUtility } from '../../Core/Utility';\r\n\r\nexport class IndePanelPreset {\r\n\r\n    static theme = {\r\n        'mainMenuNormal': '#ffffff', // '#1267B0', // '#0FAAEA;',\r\n        'mainMenuOver': '#0FAAEA'\r\n    };\r\n    static RoundedRectFill(ctx: CanvasRenderingContext2D, vs: NVector3[], r: number, xOff: number = 0, fillCol: string = '#ffffff', strokeCol: string = '#000000') {\r\n        // let color = s.backgroundColor;\r\n        let radius = r; // parseFloat(s.borderRadius);\r\n        // console.log(color);\r\n        // ctx.save();\r\n        ctx.lineWidth = 1; // parseFloat(s.lineWidth);\r\n        ctx.beginPath();\r\n\r\n        ctx.moveTo(vs[0].x + xOff + radius, vs[0].y);\r\n        ctx.lineTo(vs[1].x - xOff - radius, vs[1].y);\r\n\r\n        ctx.arcTo(vs[1].x - xOff, vs[1].y, vs[1].x - xOff, vs[1].y + radius, radius);\r\n        ctx.lineTo(vs[2].x - xOff, vs[2].y - radius);\r\n\r\n        ctx.arcTo(vs[2].x - xOff, vs[2].y, vs[2].x - xOff - radius, vs[2].y, radius);\r\n        ctx.lineTo(vs[3].x + xOff + radius, vs[3].y);\r\n\r\n        ctx.arcTo(vs[3].x + xOff, vs[3].y, vs[3].x + xOff, vs[3].y - radius, radius);\r\n        ctx.lineTo(vs[0].x + xOff, vs[0].y + radius);\r\n        ctx.arcTo(vs[0].x + xOff, vs[0].y, vs[0].x + xOff + radius, vs[0].y, radius);\r\n        ctx.closePath();\r\n        ctx.strokeStyle = strokeCol;\r\n        ctx.fillStyle = fillCol;\r\n\r\n        ctx.shadowBlur = 4;\r\n        ctx.shadowColor = 'rgb(0,0,0,0.3)';\r\n        ctx.shadowOffsetY = 2;\r\n        ctx.shadowOffsetX = 2;\r\n\r\n        ctx.fill();\r\n        // ctx.stroke();\r\n        // ctx.restore();\r\n    }\r\n    static RoundedRectFillRForEach(ctx: CanvasRenderingContext2D, vs: NVector3[], r0: number, r1: number, r2: number, r3: number, xOff: number = 0, fillCol: string = '#ffffff', strokeCol: string = '#000000', isShadow: boolean = false) {\r\n        // let color = s.backgroundColor;\r\n        let radius0 = r0; // parseFloat(s.borderRadius);\r\n        let radius1 = r1; // parseFloat(s.borderRadius);\r\n        let radius2 = r2; // parseFloat(s.borderRadius);\r\n        let radius3 = r3; // parseFloat(s.borderRadius);\r\n        // console.log(color);\r\n        // ctx.save();\r\n        ctx.lineWidth = 1; // parseFloat(s.lineWidth);\r\n        ctx.beginPath();\r\n\r\n        ctx.moveTo(vs[0].x + xOff + radius0, vs[0].y);\r\n        ctx.lineTo(vs[1].x - xOff - radius1, vs[1].y);\r\n\r\n        ctx.arcTo(vs[1].x - xOff, vs[1].y, vs[1].x - xOff, vs[1].y + radius1, radius1);\r\n        ctx.lineTo(vs[2].x - xOff, vs[2].y - radius1);\r\n\r\n        ctx.arcTo(vs[2].x - xOff, vs[2].y, vs[2].x - xOff - radius2, vs[2].y, radius2);\r\n        ctx.lineTo(vs[3].x + xOff + radius2, vs[3].y);\r\n\r\n        ctx.arcTo(vs[3].x + xOff, vs[3].y, vs[3].x + xOff, vs[3].y - radius3, radius3);\r\n        ctx.lineTo(vs[0].x + xOff, vs[0].y + radius3);\r\n\r\n        ctx.arcTo(vs[0].x + xOff, vs[0].y, vs[0].x + xOff + radius0, vs[0].y, radius0);\r\n        ctx.closePath();\r\n        ctx.strokeStyle = strokeCol;\r\n        ctx.fillStyle = fillCol;\r\n\r\n        if (isShadow) {\r\n            ctx.shadowBlur = 4;\r\n            ctx.shadowColor = 'rgb(0,0,0,0.3)';\r\n            ctx.shadowOffsetY = 2;\r\n            ctx.shadowOffsetX = 2;\r\n        } else {\r\n            ctx.shadowBlur = 0;\r\n            ctx.shadowOffsetY = 0;\r\n            ctx.shadowOffsetX = 0;\r\n        }\r\n\r\n        ctx.fill();\r\n        // ctx.stroke();\r\n        // ctx.restore();\r\n    }\r\n    static Text(ctx: CanvasRenderingContext2D, x: number, y: number, text: string, color: string = 'white') {\r\n\r\n        ctx.save();\r\n        ctx.fillStyle = color;\r\n        ctx.textBaseline = 'bottom';\r\n        ctx.textAlign = 'left'; // 'start', 'end', 'left', 'center', 'right';\r\n        ctx.fillText(text, x, y - 14);\r\n        ctx.fill();\r\n        ctx.restore();\r\n    }\r\n    static RoundedRectFillWithColorMainMenu(ctx: CanvasRenderingContext2D, title: string, vs: NVector3[], r: number, xOff: number = 0, isOver: boolean, isSel: boolean, col: string, isShadow: boolean = true) {\r\n        let radius = r; // parseFloat(s.borderRadius);\r\n        let color: string = col;\r\n\r\n        ctx.save();\r\n        ctx.lineWidth = 2; // parseFloat(s.lineWidth);\r\n        ctx.beginPath();\r\n        ctx.moveTo(vs[0].x + xOff + radius, vs[0].y);\r\n        ctx.lineTo(vs[1].x - xOff - radius, vs[1].y);\r\n        ctx.arcTo(vs[1].x - xOff, vs[1].y, vs[1].x - xOff, vs[1].y + radius, radius);\r\n        ctx.lineTo(vs[2].x - xOff, vs[2].y - radius);\r\n        ctx.arcTo(vs[2].x - xOff, vs[2].y, vs[2].x - xOff - radius, vs[2].y, radius);\r\n        ctx.lineTo(vs[3].x + xOff + radius, vs[3].y);\r\n        ctx.arcTo(vs[3].x + xOff, vs[3].y, vs[3].x + xOff, vs[3].y - radius, radius);\r\n        ctx.lineTo(vs[0].x + xOff, vs[0].y + radius);\r\n        ctx.arcTo(vs[0].x + xOff, vs[0].y, vs[0].x + xOff + radius, vs[0].y, radius);\r\n        ctx.closePath();\r\n        ctx.strokeStyle = color; // s.strokeStyle;\r\n        ctx.fillStyle = color;\r\n        if (isShadow) {\r\n            ctx.shadowBlur = 7;\r\n            ctx.shadowColor = 'rgb(0,0,0,0.5)';\r\n            ctx.shadowOffsetY = 1.5;\r\n            ctx.shadowOffsetX = 1.5;\r\n        } else {\r\n            ctx.shadowBlur = 0;\r\n            ctx.shadowOffsetY = 0;\r\n            ctx.shadowOffsetX = 0;\r\n        }\r\n        ctx.fill();\r\n        ctx.restore();\r\n\r\n    }\r\n    static TopRoundedRectFill(ctx: CanvasRenderingContext2D, title: string, vs: NVector3[], r: number, xOff: number = 0, isOver: boolean, isSel: boolean, col: string, isShadow: boolean = true) {\r\n        let radius = r; // parseFloat(s.borderRadius);\r\n        let color: string = col;\r\n\r\n        ctx.save();\r\n        ctx.lineWidth = 2; // parseFloat(s.lineWidth);\r\n        ctx.beginPath();\r\n        ctx.moveTo(vs[0].x + xOff + radius, vs[0].y);\r\n        ctx.lineTo(vs[1].x - xOff - radius, vs[1].y);\r\n        ctx.arcTo(vs[1].x - xOff, vs[1].y, vs[1].x - xOff, vs[1].y + radius, radius);\r\n        ctx.lineTo(vs[2].x - xOff, vs[2].y);\r\n        ctx.lineTo(vs[3].x + xOff, vs[3].y);\r\n        ctx.lineTo(vs[0].x + xOff, vs[0].y + radius);\r\n        ctx.arcTo(vs[0].x + xOff, vs[0].y, vs[0].x + xOff + radius, vs[0].y, radius);\r\n        ctx.closePath();\r\n        ctx.strokeStyle = color; // s.strokeStyle;\r\n        ctx.fillStyle = color;\r\n        if (isShadow) {\r\n            ctx.shadowBlur = 4;\r\n            ctx.shadowColor = 'rgb(0,0,0,0.3)';\r\n            ctx.shadowOffsetY = 2;\r\n            ctx.shadowOffsetX = 2;\r\n        } else {\r\n            ctx.shadowBlur = 0;\r\n            ctx.shadowOffsetY = 0;\r\n            ctx.shadowOffsetX = 0;\r\n        }\r\n        ctx.fill();\r\n        ctx.restore();\r\n\r\n    }\r\n    constructor() { /* */ }\r\n\r\n}","import { NVector3 } from '../../../../../../';\r\nimport { IndependentPanel } from '../IndependentPanel';\r\nexport class BodyDiv {\r\n    static zIndex = 9999;\r\n    host: IndependentPanel;\r\n    vec: NVector3;\r\n\r\n    divAnchor: HTMLDivElement;\r\n    div: HTMLDivElement;\r\n    divHost: HTMLDivElement;\r\n\r\n    width: number;\r\n    height: number;\r\n\r\n    private xOff0: number = 5;\r\n    private yOff0: number = 5;\r\n    private xOff1: number = 25;\r\n    private yOff1: number = 25;\r\n\r\n    private _textAlign: string = 'left';\r\n    private _textCol: string;\r\n    private _content: string;\r\n\r\n    static GetZIndex() {\r\n        return (BodyDiv.zIndex--).toString();\r\n    }\r\n\r\n    constructor(host: IndependentPanel, x: number, y: number, width: number, height: number) {\r\n        this.host = host;\r\n        this.vec = new NVector3(x, y);\r\n        this.width = width;\r\n        this.height = height;\r\n        // console.log(this.host.independentPanelWrapper.viewUIWrapper);\r\n        this.divHost = this.host.independentPanelWrapper.nUI.divHost as HTMLDivElement;\r\n        this.GetDivBaseContainer();\r\n        this.textAlign = 'left';\r\n        // this.textCol = this.host.renderer.currentStyle.textCol;\r\n    }\r\n    set textCol(v: string) {\r\n        this._textCol = v;\r\n        this.div.style.color = this._textCol;\r\n    }\r\n    set textAlign(v: string) {\r\n        this._textAlign = v;\r\n        this.div.style.textAlign = this._textAlign;\r\n    }\r\n    get Width() {\r\n        return this.width;\r\n    }\r\n    set Width(v: number) {\r\n        this.width = v;\r\n        this.UpdateSize();\r\n    }\r\n    get Height() {\r\n        return this.height;\r\n    }\r\n    set Height(v: number) {\r\n        this.height = v;\r\n        this.UpdateSize();\r\n    }\r\n    get content() {\r\n        return this._content;\r\n    }\r\n    set content(v: string) {\r\n        this._content = v;\r\n        this.div.textContent = v;\r\n    }\r\n    Hide(v: boolean) {\r\n        if (v) {\r\n            this.Remove();\r\n        } else {\r\n            this.GetDivBaseContainer();\r\n        }\r\n    }\r\n\r\n    Translate(xo: number, yo: number) {\r\n        this.vec.x += xo; this.vec.y += yo;\r\n        this.div.style.left = this.vec.x + this.xOff0 + 'px';\r\n        this.div.style.top = this.vec.y + this.yOff0 + 'px';\r\n    }\r\n    UpdateSize() {\r\n        this.div.style.width = this.width - this.xOff1 + 'px';\r\n        this.div.style.height = this.height - this.host.HeadHeight - this.yOff1 + 'px';\r\n    }\r\n    Remove() {\r\n        this.divHost.removeChild(this.div);\r\n    }\r\n    private GetDivBaseContainer() {\r\n        let div = document.createElement('div');\r\n        div.style.position = 'absolute';\r\n        div.style.pointerEvents = 'none';\r\n        div.id = `indePanel`;\r\n        div.style.height = this.height - this.yOff1 + 'px';\r\n        div.style.width = this.width - this.xOff1 + 'px';\r\n        div.style.left = this.vec.x + this.xOff0 + 'px';\r\n        div.style.top = this.vec.y + this.yOff0 + 'px';\r\n        // div.style.background = ColorUtility.HexToCanvasColor('#ffffff', '0.5');\r\n        div.style.zIndex = '10'; // BodyDiv.GetZIndex();\r\n        div.style.padding = '6px';\r\n        div.style.paddingLeft = '6px';\r\n        div.style.wordWrap = 'break-word'; // word-wrap: break-word\r\n        div.style.overflow = 'hidden'; // word-wrap: break-word\r\n        div.textContent = this._content;\r\n        div.style.font = '13px Arial';\r\n        div.style.fontWeight = 'lighter';\r\n        div.style.lineHeight = '23px';\r\n        // div.style.background = '#ff0000';\r\n        div.style.textAlign = this._textAlign;\r\n        div.style.color = this.textCol;\r\n\r\n        this.divHost.appendChild(div);\r\n        this.div = div;\r\n        return div;\r\n    }\r\n}","import { NVector3 } from '../../../../../../';\r\nimport { IndePanelBase } from './base/IndePanelBase';\r\n\r\nexport class BtnClose extends IndePanelBase {\r\n\r\n    host: IndePanelBase;\r\n\r\n    constructor(indePanelBase: IndePanelBase, x: number, y: number) {\r\n        super(indePanelBase.independentPanelWrapper);\r\n        this.title = 'X';\r\n        this.vec = new NVector3(x, y);\r\n        this.host = indePanelBase;\r\n        this.width = indePanelBase.HeadHeight;\r\n        this.height = indePanelBase.HeadHeight;\r\n    }\r\n    MouseDown() {\r\n        this.independentPanelWrapper.stopPropagation = true;\r\n        this.host.Remove();\r\n\r\n    }\r\n    RenderPost(ctx: CanvasRenderingContext2D): void {\r\n        // this.ComputeBoundary();\r\n        // IndePanelPreset.RoundedRectFillWithColorMainMenu(ctx, this.title, this.boundarVecs, this.filletR, 0, this.isOver, this.isSelected, '#ff0000', false);\r\n        this.RenderTitle(ctx);\r\n\r\n    }\r\n    RenderTitle(ctx: CanvasRenderingContext2D) {\r\n        ctx.save();\r\n        if (this.isOver) {\r\n            ctx.fillStyle = 'black';\r\n        } else {\r\n            ctx.fillStyle = 'white';\r\n        }\r\n        ctx.textBaseline = 'top';\r\n        ctx.textAlign = 'center';\r\n        ctx.font = '300 17px Sans-serif';\r\n        ctx.fillText(this.title, this.vec.x + (this.width * 0.5) - 3, this.vec.y + (this.height * 0.5) - 8);\r\n\r\n        ctx.shadowBlur = 0;\r\n        ctx.shadowOffsetY = 0;\r\n        ctx.shadowOffsetX = 0;\r\n        ctx.restore();\r\n    }\r\n}","import { NVector3 } from '../../../../../../';\r\nimport { MouseEventData } from '../../../../../../IO/EventInteraction/MouseInteraction';\r\nimport { IndePanelBase } from './base/IndePanelBase';\r\nexport class BtnHam extends IndePanelBase {\r\n\r\n    host: IndePanelBase;\r\n\r\n    constructor(indePanelBase: IndePanelBase, x: number, y: number) {\r\n        super(indePanelBase.independentPanelWrapper);\r\n        this.title = '-';\r\n        this.vec = new NVector3(x, y);\r\n        this.host = indePanelBase;\r\n        this.width = 20;\r\n        this.height = 20;\r\n    }\r\n    MouseDown() {\r\n        this.independentPanelWrapper.stopPropagation = true;\r\n        this.host.HasSubMenu = !this.host.HasSubMenu;\r\n    }\r\n    MouseDrag(e: MouseEventData) { /* */ }\r\n    Move(x: number, y: number) { /* */ }\r\n    // Translate(e: MouseEventData): void {\r\n    //     /* */\r\n    // }\r\n    RenderPost(ctx: CanvasRenderingContext2D): void {\r\n        // this.ComputeBoundary();\r\n        // IndePanelPreset.RoundedRectFillWithColorMainMenu(ctx, this.title, this.boundarVecs, this.filletR, 0, this.isOver, this.isSelected, '#ff0000', false);\r\n\r\n        ctx.save();\r\n        if (this.isOver) {\r\n            ctx.strokeStyle = 'black';\r\n        } else {\r\n            ctx.strokeStyle = 'white';\r\n        }\r\n        ctx.beginPath();\r\n        ctx.lineWidth = 2;\r\n        // if (this.host.isMinimized) {\r\n        //     ctx.rect(this.vec.x, this.vec.y + this.host.HeadHeight * 0.5 - 5, 10, 10);\r\n        // } else {\r\n\r\n        const theHeight = this.host.HeadHeight * 0.5;\r\n        const off = 5;\r\n        ctx.moveTo(this.vec.x, this.vec.y + theHeight - off);\r\n        ctx.lineTo(this.vec.x + 10, this.vec.y + theHeight - off);\r\n\r\n        ctx.moveTo(this.vec.x, this.vec.y + theHeight);\r\n        ctx.lineTo(this.vec.x + 10, this.vec.y + theHeight);\r\n\r\n        ctx.moveTo(this.vec.x, this.vec.y + theHeight + off);\r\n        ctx.lineTo(this.vec.x + 10, this.vec.y + theHeight + off);\r\n\r\n        // }\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n\r\n        ctx.restore();\r\n    }\r\n\r\n}","import { NVector3 } from '../../../../../../';\r\nimport { MouseEventData } from '../../../../../../IO/EventInteraction/MouseInteraction';\r\nimport { IndePanelBase } from './base/IndePanelBase';\r\nexport class BtnMinimize extends IndePanelBase {\r\n\r\n    host: IndePanelBase;\r\n\r\n    constructor(indePanelBase: IndePanelBase, x: number, y: number) {\r\n        super(indePanelBase.independentPanelWrapper);\r\n        this.title = '-';\r\n        this.vec = new NVector3(x, y);\r\n        this.host = indePanelBase;\r\n        this.width = 20;\r\n        this.height = 20;\r\n    }\r\n    MouseDown() {\r\n        this.independentPanelWrapper.stopPropagation = true;\r\n        this.host.IsMinimized = !this.host.IsMinimized;\r\n    }\r\n    MouseDrag(e: MouseEventData) { /* */ }\r\n    Move(x: number, y: number) { /* */ }\r\n    // Translate(e: MouseEventData): void {\r\n    //     /* */\r\n    // }\r\n    RenderPost(ctx: CanvasRenderingContext2D): void {\r\n        // this.ComputeBoundary();\r\n        // IndePanelPreset.RoundedRectFillWithColorMainMenu(ctx, this.title, this.boundarVecs, this.filletR, 0, this.isOver, this.isSelected, '#ff0000', false);\r\n\r\n        ctx.save();\r\n        if (this.isOver) {\r\n            ctx.strokeStyle = 'black';\r\n        } else {\r\n            ctx.strokeStyle = 'white';\r\n        }\r\n        ctx.beginPath();\r\n        ctx.lineWidth = 2;\r\n        if (this.host.isMinimized) {\r\n            ctx.rect(this.vec.x, this.vec.y + this.host.HeadHeight * 0.5 - 5, 10, 10);\r\n        } else {\r\n            ctx.moveTo(this.vec.x, this.vec.y + this.host.HeadHeight * 0.5);\r\n            ctx.lineTo(this.vec.x + 10, this.vec.y + this.host.HeadHeight * 0.5);\r\n        }\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n\r\n        ctx.restore();\r\n    }\r\n\r\n}","import { NVector3 } from '../../../../../../';\r\nimport { MouseEventData } from '../../../../../../IO/EventInteraction/MouseInteraction';\r\n\r\nimport { IndePanelBase } from './base/IndePanelBase';\r\n\r\nexport class BtnResize extends IndePanelBase {\r\n\r\n    host: IndePanelBase;\r\n\r\n    constructor(cUI: IndePanelBase, x: number, y: number, width: number, height: number) {\r\n        super(cUI.independentPanelWrapper);\r\n        this.title = '/';\r\n        this.vec = new NVector3(x, y);\r\n        this.host = cUI;\r\n        this.width = width;\r\n        this.height = height;\r\n    }\r\n    MouseDown() {\r\n        this.independentPanelWrapper.stopPropagation = true;\r\n        //  this.host.isMinimized = !this.host.isMinimized;\r\n    }\r\n    Translate(e: MouseEventData): void {\r\n        if (!this.isMoveable) { return; }\r\n        let xo = e.x - e.preX;\r\n        let yo = e.y - e.preY;\r\n\r\n        let xx = this.host.width + xo;\r\n        let yy = this.host.height + yo;\r\n        if (xx < this.host.minWidth) { xo = 0; }\r\n        if (yy < this.host.minHeight) { yo = 0; }\r\n        this.host.Width += xo;\r\n        this.host.Height += yo;\r\n        this.ResizePropagation(this.host.Width, this.host.Height);\r\n        this.vec.x += xo;\r\n        this.vec.y += yo;\r\n        for (let i = 0; i < this.boundarVecs.length; ++i) { this.boundarVecs[i].x += xo; this.boundarVecs[i].y += yo; }\r\n    }\r\n    ResizePropagation(width: number, height: number) {\r\n        // console.log('ResizePropagation', width,  height);\r\n    }\r\n    RenderPost(ctx: CanvasRenderingContext2D): void {\r\n        if (this.isHidden) { return; }\r\n        // this.ComputeBoundary();\r\n        // IndePanelPreset.RoundedRectFillWithColorMainMenu(ctx, this.title, this.boundarVecs, this.filletR, 0, this.isOver, this.isSelected, '#ff0000', false);\r\n\r\n        ctx.save();\r\n        if (this.isOver) {\r\n            ctx.strokeStyle = 'black';\r\n        } else {\r\n            ctx.strokeStyle = 'gray';\r\n        }\r\n        ctx.beginPath();\r\n        ctx.moveTo(this.vec.x + this.width - 5, this.vec.y);\r\n        ctx.lineTo(this.vec.x, this.vec.y + this.height - 5);\r\n        ctx.stroke();\r\n        ctx.restore();\r\n\r\n    }\r\n\r\n}","import { NVector3 } from '../../../../../../';\r\nimport { MouseEventData } from '../../../../../../IO/EventInteraction/MouseInteraction';\r\n\r\nimport { IndeSubPanel } from './IndeSubPanel';\r\nimport { IndePanelBase } from './base/IndePanelBase';\r\n\r\nimport { IndePanelPreset } from '../../../Core/IndePanelPreset';\r\n\r\nexport class IndeSubMenu extends IndePanelBase {\r\n    list: string[] = [];\r\n    indeSubPanel: IndeSubPanel;\r\n    width: number;\r\n    height: number;\r\n    vec: NVector3;\r\n    strings: string[];\r\n    stringSlice: string;\r\n    index: number = 0;\r\n    constructor(indeSubPanel: IndeSubPanel, i: number, v: string) {\r\n        super(indeSubPanel.independentPanel.independentPanelWrapper);\r\n        this.indeSubPanel = indeSubPanel;\r\n        this.index = i;\r\n        this.width = this.indeSubPanel.width - 10;\r\n        this.height = this.indeSubPanel.textHeight;\r\n        this.title = v;\r\n        this.stringSlice = v;\r\n        this.vec = new NVector3(this.indeSubPanel.vec.x + 5, this.indeSubPanel.vec.y + 5 + this.index * this.height);\r\n        this.isMoveable = false;\r\n        this.isHidden = true;\r\n    }\r\n    Translate(e: MouseEventData): void {\r\n        if (!this.isMoveable) { return; }\r\n    }\r\n    TranslateByXY(xo: number, yo: number) {\r\n        this.vec.x += xo; this.vec.y += yo;\r\n    }\r\n    MouseDown() {\r\n        this.independentPanelWrapper.stopPropagation = true;\r\n        // console.log(this.title);\r\n\r\n        // console.log(this.indeSubPanel);\r\n        if (this.indeSubPanel.independentPanel.divInput) {\r\n            this.indeSubPanel.independentPanel.divInput.value = this.title;\r\n        }\r\n        this.BindingMouseDownPost(this.title);\r\n    }\r\n    BindingMouseDownPost(v: string) {\r\n        this.indeSubPanel.independentPanel.ExecuteCommand(v);\r\n    }\r\n    RenderPost(ctx: CanvasRenderingContext2D) {\r\n        this.vec.x = this.indeSubPanel.vec.x + 5;\r\n        this.vec.y = this.indeSubPanel.vec.y + 5 + this.index * this.height;\r\n\r\n        if (this.isHidden) { return; }\r\n        if (this.IsHover) {\r\n            let fillCol = this.theme.colBG;\r\n            IndePanelPreset.RoundedRectFill(ctx, NVector3.GetBoundaryByVecWidthHeight(this.vec, this.width, this.height), 3, 0, fillCol);\r\n        }\r\n\r\n        if (this.IsHover) {\r\n            ctx.fillStyle = this.theme.colSelectedBG;\r\n        } else {\r\n            ctx.fillStyle = '#ffffff';\r\n        }\r\n\r\n        ctx.textBaseline = 'middle';\r\n        ctx.textAlign = 'left';\r\n        ctx.font = 'lighter 11px Arial';\r\n        ctx.shadowBlur = 0;\r\n        // console.log(ctx.canvas.style.letterSpacing);\r\n        ctx.shadowOffsetY = 0;\r\n        ctx.shadowOffsetX = 0;\r\n        this.strings = this.FragmentText(ctx, this.title.slice(0, 25), this.width - 5);\r\n        ctx.fillText(this.strings[0], this.vec.x + 2, this.vec.y + (this.HeadHeight * 0.5) - 2);\r\n\r\n    }\r\n    // reference : http://sourcoder.blogspot.com/2012/12/text-wrapping-in-html-canvas.html\r\n    private FragmentText(ctx: CanvasRenderingContext2D, text: string, maxWidth: number) {\r\n        let words = text.split(' ');\r\n        let lines: string[] = [];\r\n        let line = '';\r\n        if (ctx.measureText(text).width < maxWidth) { return [text]; }\r\n        while (words.length > 0) {\r\n            var split = false;\r\n            while (ctx.measureText(words[0]).width >= maxWidth) {\r\n                var tmp = words[0];\r\n                words[0] = tmp.slice(0, -1);\r\n                if (!split) {\r\n                    split = true;\r\n                    words.splice(1, 0, tmp.slice(-1));\r\n                } else {\r\n                    words[1] = tmp.slice(-1) + words[1];\r\n                }\r\n            }\r\n            if (ctx.measureText(line + words[0]).width < maxWidth) {\r\n                line += words.shift() + ' ';\r\n            } else {\r\n                lines.push(line);\r\n                line = '';\r\n            }\r\n            if (words.length === 0) {\r\n                lines.push(line);\r\n            }\r\n        }\r\n        return lines;\r\n    }\r\n}","import { NVector3 } from '../../../../../../';\r\n\r\nimport { IndependentPanel } from '../IndependentPanel';\r\n\r\nimport { IndePanelPreset } from '../../../Core/IndePanelPreset';\r\n\r\nimport { IndeSubMenu } from './IndeSubMenu';\r\n\r\nimport { ControllerTheme } from '../../../../Core/ControllerTheme';\r\n\r\nexport class IndeSubPanel {\r\n    list: IndeSubMenu[] = [];\r\n    independentPanel: IndependentPanel;\r\n    width: number;\r\n    height: number;\r\n    textHeight: number = 20;\r\n    vec: NVector3;\r\n\r\n    xOff: number = -5;\r\n    yOff: number = 10;\r\n    isHidden: boolean = true;\r\n    theme: ControllerTheme;\r\n    constructor(independentPanel: IndependentPanel) {\r\n        this.independentPanel = independentPanel;\r\n        this.theme = this.independentPanel.theme;\r\n        this.vec = new NVector3(this.independentPanel.vec.x + this.independentPanel.width + this.xOff, this.independentPanel.vec.y + this.yOff);\r\n        this.width = 150;\r\n        this.height = 100;\r\n    }\r\n    Add(v: string) {\r\n        this.list.push(new IndeSubMenu(this, this.list.length, v));\r\n    }\r\n    get IsHidden() {\r\n        return this.isHidden;\r\n    }\r\n    set IsHidden(v: boolean) {\r\n        this.isHidden = v;\r\n        for (let i = 0; i < this.list.length; ++i) {\r\n            this.list[i].IsHidden = v;\r\n        }\r\n    }\r\n    Remove() {\r\n        for (let i = 0; i < this.list.length; ++i) {\r\n            this.list[i].Remove();\r\n        }\r\n    }\r\n    Translate(xo: number, yo: number) {\r\n        // if (this.isHidden) { return; }\r\n        this.vec.x += xo; this.vec.y += yo;\r\n        for (let i = 0; i < this.list.length; ++i) {\r\n            this.list[i].TranslateByXY(xo, yo);\r\n        }\r\n    }\r\n    RenderPost(ctx: CanvasRenderingContext2D) {\r\n        if (this.isHidden) { return; }\r\n        this.height = this.list.length * this.textHeight + 10;\r\n        let fillCol =  this.independentPanel.theme.colSelectedBG;\r\n        IndePanelPreset.RoundedRectFill(ctx, NVector3.GetBoundaryByVecWidthHeight(this.vec, this.width, this.height), 3, 0, fillCol);\r\n\r\n        for (let i = 0; i < this.list.length; ++i) {\r\n            this.list[i].RenderPost(ctx);\r\n        }\r\n    }\r\n}","import { NVector3 } from '../../../../../../..';\r\nimport { MouseEventData } from '../../../../../../../IO/EventInteraction/MouseInteraction';\r\nimport { IndependentPanelWrapper } from '../../../../IndependentPanelWrapper';\r\nimport { ControllerTheme } from '../../../../../Core/ControllerTheme';\r\nexport abstract class IndePanelBase {\r\n    independentPanelWrapper: IndependentPanelWrapper;\r\n    value: number;\r\n    vec: NVector3;\r\n    boundarVecs: NVector3[];\r\n    isHidden: boolean;\r\n    div: HTMLElement;\r\n    height: number;\r\n    width: number;\r\n    minHeight: number = 100;\r\n    minWidth: number = 200;\r\n    HeadHeight: number = 25;\r\n    divID: string;\r\n    xOff: number;\r\n    yOff: number;\r\n    isMinimized: boolean = false;\r\n    hasSubMenu: boolean = false;\r\n    isSelected: boolean;\r\n    isOver: boolean;\r\n    isMoveable: boolean;\r\n    style: number;\r\n    filletR: number;\r\n    title: string;\r\n    colorBase: string;\r\n    colorOver: string;\r\n    colorText: string;\r\n    isRender: boolean;\r\n    transparent: number;\r\n    theme: ControllerTheme;\r\n    colorTop: string;\r\n    abstract RenderPost(ctx: CanvasRenderingContext2D): void;\r\n\r\n    constructor(independentPanelWrapper: IndependentPanelWrapper, width: number = 100, height: number = 20) {\r\n        this.independentPanelWrapper = independentPanelWrapper;\r\n        this.independentPanelWrapper.indePanelRender.Add(this);\r\n        this.theme = independentPanelWrapper.theme;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.xOff = 10;\r\n        this.yOff = 50;\r\n        this.isHidden = false;\r\n        this.isSelected = false;\r\n        this.isOver = false;\r\n        this.isMoveable = true;\r\n        this.style = 0;\r\n        this.filletR = 3;\r\n        this.isRender = true;\r\n        this.vec = new NVector3(100, 100, 0);\r\n        this.title = 'Drawing Block';\r\n        this.boundarVecs = [];\r\n        // this.colorBase = '#907BD2';\r\n        this.transparent = 1.0;\r\n        // this.mapContainer = <HTMLElement>document.getElementById('mapContainer');\r\n\r\n    }\r\n    setTopColorTheme(v: string) {\r\n        if (v === 'red') { this.colorTop = this.independentPanelWrapper.nUI.asset.themeRed.colSelectedBG; return; }\r\n        if (v === 'blue') { this.colorTop = this.independentPanelWrapper.nUI.asset.themeBlue.colSelectedBG; return; }\r\n        if (v === 'purple') { this.colorTop = this.independentPanelWrapper.nUI.asset.themePurple.colSelectedBG; return; }\r\n        if (v === 'green') { this.colorTop = this.independentPanelWrapper.nUI.asset.themeGreen.colSelectedBG; return; }\r\n        if (v === 'orange') { this.colorTop = this.independentPanelWrapper.nUI.asset.themeOrange.colSelectedBG; return; }\r\n        if (v === 'gray') { this.colorTop = this.independentPanelWrapper.nUI.asset.themeGray.colSelectedBG; return; }\r\n        if (v === 'darkGray') { this.colorTop = this.independentPanelWrapper.nUI.asset.themeDarkgray.colSelectedBG; return; }\r\n        if (v === 'black') { this.colorTop = this.independentPanelWrapper.nUI.asset.themeBlack.colSelectedBG; return; }\r\n    }\r\n    Remove() {\r\n        this.RemovePost();\r\n        this.independentPanelWrapper.indePanelRender.Remove(this);\r\n    }\r\n    RemovePost() {\r\n        //\r\n    }\r\n    DeepCopy() {\r\n        /* */\r\n    }\r\n    Dummy() {\r\n        /* */\r\n    }\r\n    get IsHidden() {\r\n        return this.isHidden;\r\n    }\r\n    set IsHidden(v: boolean) {\r\n        this.isHidden = v;\r\n    }\r\n    get IsHover() {\r\n        return this.isOver;\r\n    }\r\n    set IsHover(v: boolean) {\r\n        this.isOver = v;\r\n    }\r\n    get IsMinimized() {\r\n        return this.isMinimized;\r\n    }\r\n    set IsMinimized(v: boolean) {\r\n        this.isMinimized = v;\r\n    }\r\n    get HasSubMenu() {\r\n        return this.hasSubMenu;\r\n    }\r\n    set HasSubMenu(v: boolean) {\r\n        this.hasSubMenu = v;\r\n    }\r\n    get IsSelected() { return this.isSelected; }\r\n    set IsSelected(v: boolean) { this.isSelected = v; }\r\n    get Width() { return this.width; }\r\n    set Width(v: number) { this.width = v; }\r\n    get Height() { return this.height; }\r\n    set Height(v: number) { this.height = v; }\r\n    GetBoundaryVecs() {\r\n        let theHeight = this.height * 0.5;\r\n        let theWidth = this.width * 0.5;\r\n        let v0 = new NVector3(this.vec.x - theWidth, this.vec.y - theHeight);\r\n        let v1 = new NVector3(this.vec.x + theWidth, this.vec.y + theHeight);\r\n        this.boundarVecs = NVector3.GetBoundingVecs(v0, v1);\r\n        return this.boundarVecs;\r\n    }\r\n    ComputeBoundary() {\r\n        this.boundarVecs = [];\r\n        this.boundarVecs.push(new NVector3(this.vec.x, this.vec.y, this.vec.z));\r\n        this.boundarVecs.push(new NVector3(this.vec.x + this.width, this.vec.y, this.vec.z));\r\n        this.boundarVecs.push(new NVector3(this.vec.x + this.width, this.vec.y + this.height, this.vec.z));\r\n        this.boundarVecs.push(new NVector3(this.vec.x, this.vec.y + this.height, this.vec.z));\r\n        return this.boundarVecs;\r\n    }\r\n    ComputeBoundaryHead() {\r\n        this.boundarVecs = [];\r\n        this.boundarVecs.push(new NVector3(this.vec.x, this.vec.y, this.vec.z));\r\n        this.boundarVecs.push(new NVector3(this.vec.x + this.width, this.vec.y, this.vec.z));\r\n        this.boundarVecs.push(new NVector3(this.vec.x + this.width, this.vec.y + this.HeadHeight, this.vec.z));\r\n        this.boundarVecs.push(new NVector3(this.vec.x, this.vec.y + this.HeadHeight, this.vec.z));\r\n        return this.boundarVecs;\r\n    }\r\n    ComputeBoundaryPanel() {\r\n        this.boundarVecs = [];\r\n        this.boundarVecs.push(new NVector3(this.vec.x, this.vec.y + this.HeadHeight, this.vec.z));\r\n        this.boundarVecs.push(new NVector3(this.vec.x + this.width, this.vec.y + this.HeadHeight, this.vec.z));\r\n        this.boundarVecs.push(new NVector3(this.vec.x + this.width - 15, this.vec.y + this.height - 15, this.vec.z));\r\n        this.boundarVecs.push(new NVector3(this.vec.x, this.vec.y + this.height, this.vec.z));\r\n        return this.boundarVecs;\r\n    }\r\n    IsMouseInside(x: number, y: number) {\r\n        let v = NVector3.IsInsideOfVecs(new NVector3(x, y), this.ComputeBoundaryHead());\r\n        this.isOver = v;\r\n        return v;\r\n    }\r\n    IsMouseInsidePanel(x: number, y: number) {\r\n        let v = NVector3.IsInsideOfVecs(new NVector3(x, y), this.ComputeBoundaryPanel());\r\n        return v;\r\n    }\r\n    Translate(e: MouseEventData): void {\r\n        if (!this.isMoveable) { return; }\r\n        let xo = e.x - e.preX;\r\n        let yo = e.y - e.preY;\r\n        this.vec.x += xo;\r\n        this.vec.y += yo;\r\n        for (let i = 0; i < this.boundarVecs.length; ++i) { this.boundarVecs[i].x += xo; this.boundarVecs[i].y += yo; }\r\n    }\r\n    Move(x: number, y: number) {\r\n        this.vec.x = x; this.vec.y = y;\r\n    }\r\n    HideToogle() {\r\n        this.IsHidden = !this.IsHidden;\r\n        this.Hide();\r\n    }\r\n    ExecuteCommand(v: string) {\r\n        console.log(v + 'binding needed');\r\n    }\r\n    Hide() {\r\n        /* */\r\n    }\r\n    MouseDown() {\r\n        /* */\r\n    }\r\n    MouseUp(e: MouseEventData) {\r\n        /* */\r\n    }\r\n    MouseDrag(e: MouseEventData) {\r\n        this.Translate(e);\r\n    }\r\n    MouseDouble(e: MouseEventData) {\r\n        /* */\r\n    }\r\n    MouseRight(e: MouseEventData) {\r\n        /* */\r\n    }\r\n    Render(ctx: CanvasRenderingContext2D) {\r\n        if (this.isHidden) { return; }\r\n        this.RenderPost(ctx);\r\n    }\r\n}","// import { ConcaveCore } from './ConcaveCore';\r\n// import { CPoint } from '../../AppDrawing/Canvas/CGeometry/CPoint';\r\n// import { UNIT, MathUtility } from '../Utilities/MathUtility';\r\n\r\n// import { NWebassemblyController } from '../../../Webassembly/Core/NWebassemblyController/NWebassemblyController';\r\nexport class NVector3 {\r\n  public static eps: number = 0.0000001;\r\n  public static origin: NVector3 = new NVector3(0, 0, 0);\r\n  x: number = 0.0;\r\n  y: number = 0.0;\r\n  z: number = 0.0;\r\n  w: number = 0.0;\r\n  long: number = 0.0;\r\n  lat: number = 0.0;\r\n  ele: number = 0.0;\r\n  proX: number = 0.0;\r\n  proY: number = 0.0;\r\n  proZ: number = 0.0;\r\n  alt: number = 0.0;\r\n  d: boolean = true;\r\n  isModified: boolean = false;\r\n  color: string = '#000000';\r\n  isVisited: boolean = false;\r\n  // tslint:disable-next-line:no-any\r\n  parent: any;\r\n  public static GetVecforGraphicApp(long: number, lat: number, ele: number, proX: number, proY: number, proZ: number) {\r\n    let v = new NVector3(0, 0, 0);\r\n    v.long = long; v.lat = lat; v.ele = ele; v.proX = proX; v.proY = proY; v.proZ = proZ;\r\n    return v;\r\n  }\r\n  public static DeepCopy(v: NVector3): NVector3 {\r\n    const out = new NVector3(v.x, v.y, v.z);\r\n    out.long = v.long; out.lat = v.lat;\r\n    out.proX = v.proX; out.proY = v.proY; out.proZ = v.proZ;\r\n    return out;\r\n  }\r\n  public static Dot(a: NVector3, b: NVector3) {\r\n    return a.x * b.x + a.y * b.y + a.z * b.z;\r\n  }\r\n  // https://en.wikipedia.org/wiki/Shoelace_formula\r\n  // https://stackoverflow.com/questions/25122185/measuring-area-with-n-amount-of-gps-coordinates // no concave\r\n  public static GetAreayConvexGPS(vec: NVector3[]) {\r\n    let lats = [], longs = [];\r\n    for (let i = 0; i < vec.length; ++i) {\r\n      lats.push(vec[i].lat); longs.push(vec[i].long);\r\n    }\r\n    lats.push(vec[0].lat); longs.push(vec[0].long); // make sure to add the first term to the end of both arrays\r\n\r\n    let latsSum = 0, longSum = 0; // get the average center point of the polygon\r\n\r\n    for (let i = lats.length; i--;) {\r\n      latsSum += lats[i]; longSum += longs[i];\r\n    }\r\n\r\n    let latOrigin = latsSum / lats.length;\r\n    let lonOrigin = longSum / longs.length;\r\n\r\n    // translate origin to (0,0) by shifting lat long and calculate the standard angle of the point\r\n    let angles = new Array(lats.length);\r\n\r\n    for (let j = lats.length; j--;) {\r\n      lats[j] -= latOrigin;\r\n      longs[j] -= lonOrigin;\r\n\r\n      if (longs[j] >= 0 && lats[j] >= 0) {\r\n        angles[j] = Math.abs(Math.atan(lats[j] / longs[j]) * 180 / Math.PI);\r\n      } else if (longs[j] < 0 && lats[j] >= 0) {\r\n        angles[j] = 90 + Math.abs(Math.atan(lats[j] / longs[j]) * 180 / Math.PI);\r\n      } else if (longs[j] < 0 && lats[j] < 0) {\r\n        angles[j] = 180 + Math.abs(Math.atan(lats[j] / longs[j]) * 180 / Math.PI);\r\n      } else if (longs[j] >= 0 && lats[j] < 0) {\r\n        angles[j] = 270 + Math.abs(Math.atan(lats[j] / longs[j]) * 180 / Math.PI);\r\n      }\r\n    }\r\n\r\n    // re-arrange the points from least to greatest angle\r\n    let curAng, curLat, curLon;\r\n\r\n    for (let l = 0; l < angles.length; l++) {\r\n      for (let k = 0; k < angles.length - 1; k++) {\r\n        curAng = angles[k];\r\n        curLat = lats[k];\r\n        curLon = longs[k];\r\n\r\n        if (curAng < angles[k + 1]) {\r\n          angles[k] = angles[k + 1];\r\n          lats[k] = lats[k + 1];\r\n          longs[k] = longs[k + 1];\r\n\r\n          angles[k + 1] = curAng;\r\n          lats[k + 1] = curLat;\r\n          longs[k + 1] = curLon;\r\n        }\r\n      }\r\n    }\r\n\r\n    // calculate area for irregular polygon\r\n    let sum1 = 0, sum2 = 0;\r\n\r\n    for (let t = 0; t < lats.length; t++) {\r\n      if (t !== lats.length - 1) {\r\n        sum1 += lats[t] * longs[t + 1];\r\n        sum2 += longs[t] * lats[t + 1];\r\n      } else {\r\n        sum1 += lats[t] * longs[0];\r\n        sum2 += longs[t] * lats[0];\r\n      }\r\n    }\r\n\r\n    let area = (sum1 - sum2) / 2.0;\r\n    // console.log('Area: ' + area * 6378137.0 * 6378137.0 / 2.0);\r\n    return area * 20; // * 6378137.0 * 6378137.0 / 2.0;\r\n  }\r\n  public static ScalarRev_V_S_OUT(v: NVector3, s: number, out: NVector3) {\r\n    out.x = s * v.x;\r\n    out.y = s * v.y;\r\n    out.z = s * v.z;\r\n    return out;\r\n  }\r\n  public static Add(v0: NVector3, v1: NVector3): NVector3 {\r\n    return new NVector3(v0.x + v1.x, v0.y + v1.y, v0.z + v1.z);\r\n  }\r\n  public static Sub(v0: NVector3, v1: NVector3): NVector3 {\r\n    return new NVector3(v0.x - v1.x, v0.y - v1.y, v0.z - v1.z);\r\n  }\r\n  public static Clone(v: NVector3): NVector3 {\r\n    return NVector3.DeepCopy(v);\r\n  }\r\n  public static ZAxis(): NVector3 {\r\n    return new NVector3(0, 0, 1);\r\n  }\r\n  public static YAxis(): NVector3 {\r\n    return new NVector3(0, 1, 0);\r\n  }\r\n  public static Zero(): NVector3 {\r\n    return new NVector3(0, 0, 0);\r\n  }\r\n  public static Origin(): NVector3 {\r\n    return new NVector3(0, 0, 0);\r\n  }\r\n  public static Plus(v1: NVector3, v2: NVector3): NVector3 {\r\n    return new NVector3(v1.x + v2.x, v1.y + v2.y, v1.z + v2.z);\r\n  }\r\n  public static Scale(v: NVector3, s: number): NVector3 {\r\n    return new NVector3(v.x * s, v.y * s, v.z * s);\r\n  }\r\n  public static MidVec(v0: NVector3, v1: NVector3): NVector3 {\r\n    return new NVector3(v0.x + ((v1.x - v0.x) * 0.5), v0.y + ((v1.y - v0.y) * 0.5), v0.z + ((v1.z - v0.z) * 0.5));\r\n  }\r\n  public static CompareTwoVectors(v0: NVector3, v1: NVector3): boolean {\r\n    if (v0.x !== v1.x || v0.y !== v1.y || v0.z !== v1.z) {\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n  public static CompareTwoVectorsByGeoPos(v0: NVector3, v1: NVector3, toFixed: number = 4): boolean {\r\n    if (v0.long.toFixed(toFixed) !== v1.long.toFixed(toFixed) || v0.lat.toFixed(toFixed) !== v1.lat.toFixed(toFixed)) {\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n    // let tor = 0.00000000001;\r\n    // if ((v1.long - v0.long) >  tor  || (v1.lat - v0.lat) > tor ) {\r\n    //   return false;\r\n    // } else {\r\n    //   return true;\r\n    // }\r\n  }\r\n  public static Length(v: NVector3): number {\r\n    return Math.sqrt(v.x * v.x + v.y * v.y + v.z * v.z);\r\n  }\r\n  public static Normalize(v: NVector3): NVector3 {\r\n    let len: number = Math.sqrt(v.x * v.x + v.y * v.y + v.z * v.z);\r\n    if (len < 0.0001) {\r\n      return new NVector3(v.x, v.y, v.z);\r\n    }\r\n    return new NVector3(v.x / len, v.y / len, v.z / len);\r\n  }\r\n  // https://web.archive.org/web/20090214201206/http://valis.cs.uiuc.edu:80/~sariel/research/CG/compgeom/msg00827.html\r\n  public static GetArea(vs: NVector3[]) {\r\n    let area = 0;\r\n    // // double center2dx = 0;\r\n    // // double center2dy = 0;\r\n    // for (let i = 0; i < vs.length - 1; i++) {\r\n    //   // tmreal t = 2 * vs[i].X * vs[i + 0].Y + vs[i].Y * vs[i + 1].X + vs[i].X * vs[i + 1].Y + 2 * vs[i + 1].X * vs[i + 1].Y;\r\n    //   area += (vs[i].x - vs[i + 1].x) * (vs[i].y + vs[i + 1].y);\r\n    //   // center2d.x += (+vs[i].X - vs[i + 1].X) * t;\r\n    //   // center2d.y += (-vs[i].Y + vs[i + 1].Y) * t;\r\n    // }\r\n    // area *= 0.5;\r\n    // // center2dx *= 1 / (6 * area);\r\n    // // center2dy *= 1 / (6 * area);\r\n    // return area;\r\n\r\n    for (let i = 0, l = vs.length; i < l; i++) {\r\n      let addX = vs[i].x;\r\n      let addY = vs[i === vs.length - 1 ? 0 : i + 1].y;\r\n      let subX = vs[i === vs.length - 1 ? 0 : i + 1].x;\r\n      let subY = vs[i].y;\r\n\r\n      area += (addX * addY * 0.5);\r\n      area -= (subX * subY * 0.5);\r\n    }\r\n\r\n    return Math.abs(area);\r\n  }\r\n  public static GetAreaByLongLat(vs: NVector3[]) {\r\n    let area = 0;\r\n    // double center2dx = 0;\r\n    // double center2dy = 0;\r\n    for (let i = 0; i < vs.length - 1; i++) {\r\n      // tmreal t = 2 * vs[i].X * vs[i + 0].Y + vs[i].Y * vs[i + 1].X + vs[i].X * vs[i + 1].Y + 2 * vs[i + 1].X * vs[i + 1].Y;\r\n      area += (vs[i].long - vs[i + 1].long) * (vs[i].lat + vs[i + 1].lat);\r\n      // center2d.x += (+vs[i].X - vs[i + 1].X) * t;\r\n      // center2d.y += (-vs[i].Y + vs[i + 1].Y) * t;\r\n    }\r\n    area *= 0.5;\r\n    // center2dx *= 1 / (6 * area);\r\n    // center2dy *= 1 / (6 * area);\r\n    return area;\r\n  }\r\n  public static GetGeoArea(vs: NVector3[]) {\r\n    let area = 0;\r\n    for (let i = 0; i < vs.length - 1; i++) {\r\n      area += (vs[i].x - vs[i + 1].x) * (vs[i].y + vs[i + 1].y);\r\n    }\r\n    area *= 0.5;\r\n    return Math.abs(area);\r\n  }\r\n  public static GetGeoAreaBbyLongLat(vs: NVector3[]) {\r\n    let area = 0;\r\n    for (let i = 0; i < vs.length - 1; i++) {\r\n      area += (vs[i].long - vs[i + 1].long) * (vs[i].lat + vs[i + 1].lat);\r\n    }\r\n    area *= 0.5;\r\n    return Math.abs(area);\r\n  }\r\n  public static GetIndexByShortDistance(v: NVector3, vs: NVector3[]): number[] {\r\n    let index = -1;\r\n    let dis = Number.MAX_SAFE_INTEGER;\r\n    for (let i = 0; i < vs.length; ++i) {\r\n      let distance = NVector3.Distance(v, vs[i]);\r\n      if (distance < dis) {\r\n        dis = distance;\r\n        index = i;\r\n      }\r\n    }\r\n    return [index, dis];\r\n  }\r\n  public static Distance(v0: NVector3, v1: NVector3): number {\r\n    return Math.sqrt((v0.x - v1.x) * (v0.x - v1.x) + (v0.y - v1.y) * (v0.y - v1.y) + (v0.z - v1.z) * (v0.z - v1.z));\r\n    // return NWebassemblyController.ctrller.Distance(v0.x, v0.y, v0.z, v1.x, v1.y, v1.z);\r\n  }\r\n  public static DistanceByArray(v0: number[], v1: number[]): number {\r\n    return Math.sqrt((v0[0] - v1[0]) * (v0[0] - v1[0]) + (v0[1] - v1[1]) * (v0[1] - v1[1]) + (v0[2] - v1[2]) * (v0[2] - v1[2]));\r\n  }\r\n  public static Distance2(v1: NVector3, v2: NVector3): number {\r\n    let d: number =\r\n      (v1.x - v2.x) * (v1.x - v2.x) +\r\n      (v1.y - v2.y) * (v1.y - v2.y) +\r\n      (v1.z - v2.z) * (v1.z - v2.z);\r\n    return d;\r\n  }\r\n  public static DotProduct(v1: NVector3, v2: NVector3): number {\r\n    return v1.x * v2.x + v1.y * v2.y + v1.z * v2.z;\r\n  }\r\n  public static CrossProduct(v1: NVector3, v2: NVector3): NVector3 {\r\n    return new NVector3(\r\n      v1.y * v2.z - v1.z * v2.y,\r\n      v1.z * v2.x - v1.x * v2.z,\r\n      v1.x * v2.y - v1.y * v2.x\r\n    );\r\n  }\r\n  public static DivideByNum(v0: NVector3, v1: NVector3, n: number = 5): NVector3[] {\r\n    let vs: NVector3[] = [];\r\n    let xOff = (v1.x - v0.x) / n;\r\n    let yOff = (v1.y - v0.y) / n;\r\n    let zOff = (v1.z - v0.z) / n;\r\n    for (let j = 0; j < n; ++j) {\r\n      let x = v0.x + xOff * j;\r\n      let y = v0.y + yOff * j;\r\n      let z = v0.z + zOff * j;\r\n      vs.push(new NVector3(x, y, z));\r\n    }\r\n    return vs;\r\n  }\r\n  // static DistancefromGeoV(v0: NVector3, v1: NVector3, unit: UNIT = CGeometry.appDrawing.activeCommands.unit): number {\r\n  //   let dis = NVector3.KMeterFromGeoGPSPos(v0, v1);\r\n  //   if (unit === UNIT.METER) { return dis * 1000; }\r\n  //   if (unit === UNIT.KM) { return dis; }\r\n  //   if (unit === UNIT.MILE) { return MathUtility.MilesFromKM(dis); }\r\n  //   return -1;\r\n  // }\r\n  public static KMeterFromGeoGPSPos(gV0: NVector3, gV1: NVector3): number {\r\n    let R = 6378.137; // Radius of earth in KM // a = Equatorial radius (6,378.1370 km) // b = Polar radius (6,356.7523 km)\r\n    let dLat = gV1.lat * Math.PI / 180 - gV0.lat * Math.PI / 180;\r\n    let dLon = gV1.long * Math.PI / 180 - gV0.long * Math.PI / 180;\r\n    let a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(gV0.lat * Math.PI / 180) * Math.cos(gV1.lat * Math.PI / 180) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\r\n    let c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n    let d = R * c;\r\n    return d; // * 1000; // meters\r\n  }\r\n  public static KMeterByTwoGeoPos(long0: number, lat0: number, long1: number, lat1: number) {\r\n    let v0 = new NVector3(0, 0); v0.long = long0; v0.lat = lat0;\r\n    let v1 = new NVector3(0, 0); v1.long = long1; v1.lat = lat1;\r\n    return NVector3.KMeterFromGeoGPSPos(v0, v1);\r\n  }\r\n  public static KMeterFromGPSPos(gV0: NVector3, gV1: NVector3): number {\r\n    let R = 6378.137; // Radius of earth in KM // a = Equatorial radius (6,378.1370 km) // b = Polar radius (6,356.7523 km)\r\n    let dLat = gV1.y * Math.PI / 180 - gV0.y * Math.PI / 180;\r\n    let dLon = gV1.x * Math.PI / 180 - gV0.x * Math.PI / 180;\r\n    let a =\r\n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n      Math.cos(gV0.y * Math.PI / 180) *\r\n      Math.cos(gV1.y * Math.PI / 180) *\r\n      Math.sin(dLon / 2) *\r\n      Math.sin(dLon / 2);\r\n    let c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n    let d = R * c;\r\n    return d; // * 1000; // meters\r\n  }\r\n  public static Get1KM_Long_ByGeoUnit(long: number = 0, lat: number = 0): number {\r\n    let v = new NVector3(long, lat, 0);\r\n    let addition = 0.0;\r\n    for (let i = 0; i < 10000; ++i) {\r\n      let dis = NVector3.KMeterFromGPSPos(v, new NVector3(v.x + addition, v.y, v.z));\r\n      if (1 < dis && dis < 1.001) {\r\n        // console.log('result long', i, dis);\r\n        return v.x + addition;\r\n      }\r\n      addition += 0.00001;\r\n    }\r\n    return -1;\r\n  }\r\n  public static Get1KM_lat_ByGeoUnit(long: number = 0, lat: number = 0): number {\r\n    let v = new NVector3(long, lat, 0);\r\n    let addition = 0.0;\r\n    for (let i = 0; i < 10000; ++i) {\r\n      let dis = NVector3.KMeterFromGPSPos(v, new NVector3(v.x, v.y + addition, v.z));\r\n      if (1 < dis && dis < 1.001) {\r\n        // console.log('result lat', i, dis);\r\n        return v.y + addition;\r\n      }\r\n      addition += 0.00001;\r\n    }\r\n    return -1;\r\n  }\r\n  public static Get1KM_Lat_Long_GeoUnit(long: number = 0, lat: number = 0): NVector3 {\r\n    let lng = NVector3.Get1KM_Long_ByGeoUnit(long, lat);\r\n    let la = NVector3.Get1KM_lat_ByGeoUnit(long, lat);\r\n    return new NVector3(lng, la, 0);\r\n  }\r\n  // ............................................................................ vec compute\r\n  // static CalculateFalloff(pts: NVector3[], pt: NVector3, s: number, f: number): number {\r\n  //   let newValue = 0.0;\r\n  //   for (let i = 0; i < pts.length; ++i) {\r\n  //     // let v = NJS.PointUtils.CalculateFalloff(pt, pts[i], s, f);\r\n  //     // newValue += v;\r\n  //   }\r\n  //   return newValue;\r\n  // }\r\n  public static CalculateFalloff(pt: NVector3, attractor: NVector3, strength: number, falloff: number): number {\r\n    let v: NVector3 = NVector3.Sub(attractor, pt);\r\n    let dist: number = v.Length();\r\n    return dist * (strength * Math.exp(-falloff * dist * dist));\r\n  }\r\n  public static Attractor(pt: NVector3, attractor: NVector3, strength: number, falloff: number): NVector3 {\r\n    let v: NVector3 = NVector3.Sub(attractor, pt);\r\n    let dist = v.Length();\r\n    v.Unitize();\r\n    return v.Mult(strength * Math.exp(-falloff * dist * dist));\r\n  }\r\n  public static Explosion(pt: NVector3, Explosion: NVector3, strength: number, falloff: number): NVector3 {\r\n    let v = NVector3.Sub(Explosion, pt);\r\n    let dist = v.Length();\r\n    v.Unitize();\r\n    return v.Mult(-(strength * Math.exp(-falloff * dist * dist)));\r\n  }\r\n  public static Rotor(pt: NVector3, rotor: NVector3, strength: number, falloff: number): NVector3 {\r\n    let v = NVector3.Sub(rotor, pt);\r\n    v.Unitize();\r\n    // v.Rotate(3.141592 / 2, NVector3.zAxis);\r\n    // let dist: number = v.Length;\r\n    // return (v.Mult (strength * (Math.exp(-falloff * dist * dist))));\r\n    return NVector3.Origin();\r\n  }\r\n\r\n  // ............................................................................ vec angle\r\n  public static GetAngleBetween(v0: NVector3, v1: NVector3) {\r\n    return Math.atan2(v1.x - v0.x, v1.y - v0.y);\r\n  }\r\n  // .................................................\r\n  public static GetCosAngleByTwoVectors(v0: NVector3, v1: NVector3): number {\r\n    return NVector3.DotProduct(NVector3.Normalize(v0), NVector3.Normalize(v1));\r\n  }\r\n  public static GetAngleByTwoVectorsRadian(v0: NVector3, v1: NVector3): number {\r\n    return Math.acos(NVector3.GetCosAngleByTwoVectors(v0, v1));\r\n  }\r\n  public static GetAngleByTwoVectors(v0: NVector3, v1: NVector3): number {\r\n    return NVector3.GetAngleByTwoVectorsRadian(v0, v1) * 180.0 / Math.PI;\r\n  }\r\n  public static GetRotationByWorldCoodinate(v: NVector3): number {\r\n    let origin = new NVector3(1, 0, 0);\r\n    return NVector3.GetAngleByTwoVectors(origin, v);\r\n  }\r\n  public static GetRotationByWorldCoodinateByTwo(v0: NVector3, v1: NVector3): number {\r\n    let v = v1.Sub(v0);\r\n    let origin = new NVector3(1, 0, 0);\r\n    if (v.y > 0) {\r\n      return NVector3.GetAngleByTwoVectors(origin, v) * -1;\r\n    } else {\r\n      return NVector3.GetAngleByTwoVectors(origin, v);\r\n    }\r\n  }\r\n  // ............................................................................\r\n  // static ToJSon(v) {\r\n  // var p = {\r\n  //             'point': [],\r\n  //             'primitive': 'point',\r\n  //             'units': {\r\n  //             'point': 'meters'\r\n  //         }\r\n  // }\r\n  // p.point = [v.x , v.y, v.z];\r\n  // return p;\r\n  // }\r\n  public static ComputeDotProducts(vs: NVector3[]) {\r\n    let out = [];\r\n    for (let i = 0; i < vs.length; ++i) {\r\n      // let v0: NVector3 = NVector3.Origin();\r\n      // let v1: NVector3;\r\n      if (i < vs.length - 1) {\r\n        let v0 = new NVector3(vs[i].x, vs[i].y, vs[i].z);\r\n        let v1 = new NVector3(vs[i + 1].x, vs[i + 1].y, vs[i + 1].z);\r\n\r\n        v1.x -= v0.x;\r\n        v1.y -= v0.y;\r\n        v1.z -= v0.z;\r\n\r\n        let dot = NVector3.DotProduct(new NVector3(1, 0, 0), NVector3.Normalize(v1));\r\n        out.push(dot);\r\n      } else {\r\n        let v0 = new NVector3(vs[i].x, vs[i].y, vs[i].z);\r\n        let v1 = new NVector3(vs[0].x, vs[0].y, vs[0].z);\r\n\r\n        v1.x -= v0.x;\r\n        v1.y -= v0.y;\r\n        v1.z -= v0.z;\r\n\r\n        let dot = NVector3.DotProduct(new NVector3(1, 0, 0), NVector3.Normalize(v1));\r\n        out.push(dot);\r\n      }\r\n    }\r\n    return out;\r\n  }\r\n  public static ComputeDotProductsWithCenter(vs: NVector3[]) {\r\n    let cp = NVector3.GetCenterVecFromVecs(vs);\r\n    let out = [];\r\n    for (let i = 0; i < vs.length; ++i) {\r\n      let v0: NVector3;\r\n      let v1: NVector3;\r\n      if (i < vs.length - 1) {\r\n        v0 = new NVector3(vs[i].x - cp.x, vs[i].y - cp.y, vs[i].z - cp.z);\r\n        v1 = new NVector3(vs[i + 1].x - cp.x, vs[i + 1].y - cp.y, vs[i + 1].z - cp.z);\r\n      } else {\r\n        v0 = new NVector3(vs[i].x - cp.x, vs[i].y - cp.y, vs[i].z - cp.z);\r\n        v1 = new NVector3(vs[0].x - cp.x, vs[0].y - cp.y, vs[0].z - cp.z);\r\n      }\r\n      let dot = NVector3.DotProduct(NVector3.Normalize(v0), NVector3.Normalize(v1));\r\n      out.push(dot);\r\n    }\r\n    return out;\r\n  }\r\n  public static GetXYDimForCircle(vs: NVector3[]) {\r\n    let cp = NVector3.GetCenterVecFromVecs(vs);\r\n    // let out = [];\r\n    let xx: number = 0;\r\n    let yy: number = 0;\r\n    let len = vs.length;\r\n    for (let i = 0; i < len; ++i) {\r\n\r\n      // if (i < vs.length - 1) {\r\n      xx += Math.abs(vs[i].x - cp.x);\r\n      yy += Math.abs(vs[i].y - cp.y);\r\n      // v0 = new NVector3(vs[i].x - cp.x, vs[i].y - cp.y, vs[i].z - cp.z);\r\n      // v1 = new NVector3(vs[i + 1].x - cp.x, vs[i + 1].y - cp.y, vs[i + 1].z - cp.z);\r\n      // } else {\r\n      // v0 = new NVector3(vs[i].x - cp.x, vs[i].y - cp.y, vs[i].z - cp.z);\r\n      // v1 = new NVector3(vs[0].x - cp.x, vs[0].y - cp.y, vs[0].z - cp.z);\r\n      // }\r\n      // let dot = NVector3.DotProduct(NVector3.Normalize(v0), NVector3.Normalize(v1));\r\n      // out.push(dot);\r\n    }\r\n    len += 2;\r\n    return [xx / len, yy / len];\r\n  }\r\n\r\n  public static DistanceMouseWithTwoVecs(m: NVector3, v0: NVector3, v1: NVector3): number {\r\n    v0.x += 0.00001;\r\n    v0.y += 0.00001;\r\n    let boundary = NVector3.GetBoundingVecs(v0, v1);\r\n    let vec = NVector3.GetCloseVec(v0, v1, m.x, m.y, boundary, true);\r\n    return NVector3.Distance(m, vec);\r\n  }\r\n  public static GetCloseVec(p0: NVector3, p1: NVector3, x: number, y: number, vecsBound: NVector3[], OnLine: boolean = true): NVector3 {\r\n    let pp1: NVector3 = new NVector3(p0.x, p0.y, p0.z);\r\n    let pp2: NVector3 = new NVector3(p1.x, p1.y, p1.z);\r\n    let v1: NVector3 = pp2.Sub(pp1);\r\n    let p: NVector3 = new NVector3(x, y, 0);\r\n    let v2: NVector3 = p.Sub(pp1);\r\n    v1.Unitize();\r\n    let cp = pp1.Add(v1.Mult(v2.DotProduct(v1)));\r\n    if (OnLine) {\r\n      if (NVector3.IsInsideOfVecs(cp, vecsBound)) {\r\n        return cp;\r\n      } else {\r\n        if (p0.Distance(cp) < p1.Distance(cp)) {\r\n          return new NVector3(p0.x, p0.y, p0.z);\r\n        } else {\r\n          return new NVector3(p1.x, p1.y, p1.z);\r\n        }\r\n      }\r\n    } else {\r\n      return cp;\r\n    }\r\n  }\r\n  public static GetBoundingVecs(v0: NVector3, v1: NVector3): NVector3[] {\r\n    let listOfVec: NVector3[] = [];\r\n    let x: number = 0;\r\n    let y: number = 0;\r\n    let z: number = 0;\r\n    if (v0.x < v1.x) { x = v0.x; } else { x = v1.x; }\r\n    if (v0.y < v1.y) { y = v0.y; } else { y = v1.y; }\r\n    if (v0.z < v1.z) { z = v0.z; } else { z = v1.z; }\r\n    let nv0 = new NVector3(x, y, z);\r\n    if (v0.x > v1.x) { x = v0.x; } else { x = v1.x; }\r\n    if (v0.y > v1.y) { y = v0.y; } else { y = v1.y; }\r\n    if (v0.z > v1.z) { z = v0.z; } else { z = v1.z; }\r\n    let nv1 = new NVector3(x, y, z);\r\n    listOfVec.push(new NVector3(nv0.x, nv0.y, nv0.z));\r\n    listOfVec.push(new NVector3(nv1.x, nv0.y, nv0.z));\r\n    listOfVec.push(new NVector3(nv1.x, nv1.y, nv0.z));\r\n    listOfVec.push(new NVector3(nv0.x, nv1.y, nv0.z));\r\n    return listOfVec;\r\n  }\r\n  public static GetBoundaryByVecWidthHeight(v: NVector3, width: number, height: number): NVector3[] {\r\n    let boundarVecsSub = [];\r\n    boundarVecsSub.push(new NVector3(v.x, v.y, v.z));\r\n    boundarVecsSub.push(new NVector3(v.x + width, v.y, v.z));\r\n    boundarVecsSub.push(new NVector3(v.x + width, v.y + height, v.z));\r\n    boundarVecsSub.push(new NVector3(v.x, v.y + height, v.z));\r\n    return boundarVecsSub;\r\n  }\r\n  public static GetBoundingByVecs(vs: NVector3[]): NVector3[] {\r\n    let listOfVec: NVector3[] = [];\r\n    let xMin: number = Number.MAX_SAFE_INTEGER;\r\n    let yMin: number = Number.MAX_SAFE_INTEGER;\r\n    let zMin: number = Number.MAX_SAFE_INTEGER;\r\n\r\n    let xMax: number = Number.MIN_SAFE_INTEGER;\r\n    let yMax: number = Number.MIN_SAFE_INTEGER;\r\n    let zMax: number = Number.MIN_SAFE_INTEGER;\r\n    for (let i = 0; i < vs.length; ++i) {\r\n\r\n      if (xMin > vs[i].x) { xMin = vs[i].x; }\r\n      if (yMin > vs[i].y) { yMin = vs[i].y; }\r\n      if (zMin > vs[i].z) { zMin = vs[i].z; }\r\n\r\n      if (xMax < vs[i].x) { xMax = vs[i].x; }\r\n      if (yMax < vs[i].y) { yMax = vs[i].y; }\r\n      if (zMax < vs[i].z) { zMax = vs[i].z; }\r\n\r\n    }\r\n    listOfVec.push(new NVector3(xMin, yMin, zMin));\r\n    listOfVec.push(new NVector3(xMax, yMax, zMax));\r\n    return listOfVec;\r\n  }\r\n  public static GetMinMaxVecFromVecs(vec: NVector3[]): NVector3[] {\r\n    let minX = Number.MAX_VALUE, minY = Number.MAX_VALUE, minZ = Number.MAX_VALUE;\r\n    let maxX = Number.MIN_VALUE, maxY = Number.MIN_VALUE, maxZ = Number.MIN_VALUE;\r\n    for (let v of vec) {\r\n      if (minX > v.x) { minX = v.x; } if (minY > v.y) { minY = v.y; } if (minZ > v.z) { minZ = v.z; }\r\n      if (maxX < v.x) { maxX = v.x; } if (maxY < v.y) { maxY = v.y; } if (maxZ < v.z) { maxZ = v.z; }\r\n    }\r\n    return [new NVector3(minX, minY, minZ), new NVector3(maxX, maxY, maxZ)];\r\n  }\r\n  public static RemoveVecsWithinDis(vs: NVector3[], tor: number = 10): NVector3[] {\r\n    let vecs: NVector3[] = [];\r\n    for (let i = 0; i < vs.length - 1; ++i) {\r\n      let v0 = vs[i];\r\n      if (v0.d === false) { continue; }\r\n      for (let j = i + 1; j < vs.length; ++j) {\r\n        if (NVector3.Distance(v0, vs[j]) < tor) { vs[j].d = false; }\r\n      }\r\n    }\r\n    for (let i = 0; i < vs.length; ++i) { if (vs[i].d === true) { vecs.push(vs[i]); } }\r\n    // vecs.push(vs[vs.length - 1]);\r\n    return vecs;\r\n  }\r\n  // ...............................................................................\r\n  public static IsInsideOfVecsWtihVecs(vs: NVector3[], vecs: NVector3[]): boolean {\r\n    let inside: boolean = true;\r\n    for (let i = 0; i < vs.length; i++) {\r\n      inside = NVector3.IsInsideOfVecs(vs[i], vecs);\r\n      if (!inside) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n  public static IsInsideOfVecWithHeight(mv: NVector3, tv: NVector3, width: number, height: number) {\r\n    if (tv.x < mv.x && mv.x < tv.x + width && tv.y < mv.y && mv.y < tv.y + height) { return true; }\r\n    return false;\r\n  }\r\n  // intersect\r\n\r\n  public static orientation(p: NVector3, q: NVector3, r: NVector3): number {\r\n    // See https://www.geeksforgeeks.org/orientation-3-ordered-points/\r\n    // for details of below formula.\r\n    const val = (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\r\n\r\n    if (val === 0) { return 0; } // colinear\r\n\r\n    return (val > 0) ? 1 : 2; // clock or counterclock wise\r\n  }\r\n  public static onSegment(p: NVector3, q: NVector3, r: NVector3): boolean {\r\n    if (q.x <= Math.max(p.x, r.x) && q.x >= Math.min(p.x, r.x) && q.y <= Math.max(p.y, r.y) && q.y >= Math.min(p.y, r.y)) { return true; }\r\n    return false;\r\n  }\r\n  public static isIntersect(p1: NVector3, q1: NVector3, p2: NVector3, q2: NVector3): boolean {\r\n    // Find the four orientations needed for general and\r\n    // special cases\r\n    const o1 = this.orientation(p1, q1, p2);\r\n    const o2 = this.orientation(p1, q1, q2);\r\n    const o3 = this.orientation(p2, q2, p1);\r\n    const o4 = this.orientation(p2, q2, q1);\r\n\r\n    // General case\r\n    if (o1 !== o2 && o3 !== o4) { return true; }\r\n\r\n    // Special Cases\r\n    // p1, q1 and p2 are colinear and p2 lies on segment p1q1\r\n    if (o1 === 0 && this.onSegment(p1, p2, q1)) { return true; }\r\n\r\n    // p1, q1 and q2 are colinear and q2 lies on segment p1q1\r\n    if (o2 === 0 && this.onSegment(p1, q2, q1)) { return true; }\r\n\r\n    // p2, q2 and p1 are colinear and p1 lies on segment p2q2\r\n    if (o3 === 0 && this.onSegment(p2, p1, q2)) { return true; }\r\n\r\n    // p2, q2 and q1 are colinear and q1 lies on segment p2q2\r\n    if (o4 === 0 && this.onSegment(p2, q1, q2)) { return true; }\r\n\r\n    return false; // Doesn't fall in any of the above cases\r\n  }\r\n\r\n\r\n  // end intersect\r\n  public static IsInsideOfVecs(v: NVector3, vecs: NVector3[]): boolean {\r\n    // ray-casting algorithm based on https://github.com/substack/point-in-polygon\r\n    // http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\r\n    let x = v.x, y = v.y;\r\n    let inside = false;\r\n    for (let i = 0, j = vecs.length - 1; i < vecs.length; j = i++) {\r\n      let xi = vecs[i].x, yi = vecs[i].y;\r\n      let xj = vecs[j].x, yj = vecs[j].y;\r\n      let intersect = yi > y !== yj > y && x < (xj - xi) * (y - yi) / (yj - yi) + xi;\r\n      if (intersect) {\r\n        inside = !inside;\r\n      }\r\n    }\r\n    return inside;\r\n  }\r\n  public static IsInsideOfVecsByArray(v: number[], vecs: number[][]): boolean {\r\n    // ray-casting algorithm based on https://github.com/substack/point-in-polygon\r\n    // http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\r\n    let x = v[0], y = v[1];\r\n    let inside = false;\r\n    for (let i = 0, j = vecs.length - 1; i < vecs.length; j = i++) {\r\n      let xi = vecs[i][0], yi = vecs[i][1];\r\n      let xj = vecs[j][0], yj = vecs[j][1];\r\n      let intersect = yi > y !== yj > y && x < (xj - xi) * (y - yi) / (yj - yi) + xi;\r\n      if (intersect) {\r\n        inside = !inside;\r\n      }\r\n    }\r\n    return inside;\r\n  }\r\n  public static IsInsideOfVecsByCrossing(v: NVector3, w: number, h: number, vs: NVector3[]) {\r\n    if (this.IsInsideOfVecs(new NVector3(v.x - w * 0.5, v.y - h * 0.5), vs)) { return true; }\r\n    if (this.IsInsideOfVecs(new NVector3(v.x + w * 0.5, v.y - h * 0.5), vs)) { return true; }\r\n    if (this.IsInsideOfVecs(new NVector3(v.x + w * 0.5, v.y + h * 0.5), vs)) { return true; }\r\n    if (this.IsInsideOfVecs(new NVector3(v.x - w * 0.5, v.y + h * 0.5), vs)) { return true; }\r\n    return false;\r\n  }\r\n  public static IsInsideOfVecsByConcaveHull(v: NVector3, vs: NVector3[]) {\r\n    // let vsNum: number[][] = [];\r\n    // for (let i = 0; i < vs.length; ++i) {\r\n    //   vsNum.push([vs[i].x, vs[i].y]);\r\n    // }\r\n\r\n    // let result = ConcaveCore.hull(vsNum, 20)\r\n    // console.log(vs.length);\r\n    // console.log(result);\r\n\r\n    // for (let i = 0; i < result.length; ++i) {\r\n    //   new CPoint(result[i][0], result[i][1]);\r\n    // }\r\n  }\r\n  // Convex hull\r\n  // https://en.wikibooks.org/wiki/Algorithm_Implementation/Geometry/Convex_hull/Monotone_chain\r\n  public static IsInsideOfVecsByConvexHull(v: NVector3, vecs: NVector3[]): boolean {\r\n    vecs = NVector3.ConvexHull(vecs);\r\n    if (NVector3.IsInsideOfVecs(v, vecs)) { return true; } else { return false; }\r\n  }\r\n  public static ConvexHull(vs: NVector3[]): NVector3[] {\r\n    vs.sort(function (a: NVector3, b: NVector3) {\r\n      return a.x === b.x ? a.y - b.y : a.x - b.x;\r\n    });\r\n    let lower: NVector3[] = [];\r\n    for (let i = 0; i < vs.length; i++) {\r\n      while (lower.length >= 2 && NVector3.Cross(lower[lower.length - 2], lower[lower.length - 1], vs[i]) <= 0) { lower.pop(); }\r\n      lower.push(vs[i]);\r\n    }\r\n    let upper: NVector3[] = [];\r\n    for (let i = vs.length - 1; i >= 0; i--) {\r\n      while (upper.length >= 2 && NVector3.Cross(upper[upper.length - 2], upper[upper.length - 1], vs[i]) <= 0) { upper.pop(); }\r\n      upper.push(vs[i]);\r\n    }\r\n    upper.pop(); lower.pop();\r\n    for (let i = 0; i < upper.length; ++i) { lower.push(upper[i]); }\r\n    return lower;\r\n  }\r\n  public static Cross(O: NVector3, A: NVector3, B: NVector3): number {\r\n    return (A.x - O.x) * (B.y - O.y) - (A.y - O.y) * (B.x - O.x);\r\n  }\r\n  public static Cross_A_B_OUT(a: NVector3, b: NVector3, out: NVector3) {\r\n    const ax = a.x, ay = a.y, az = a.z, bx = b.x, by = b.y, bz = b.z;\r\n    out.x = ay * bz - az * by;\r\n    out.y = az * bx - ax * bz;\r\n    out.z = ax * by - ay * bx;\r\n    return out;\r\n  }\r\n  public static CheckBoundIntersection(vs: NVector3[], p0: NVector3, p1: NVector3) {\r\n    for (let i = 0; i < vs.length - 1; ++i) {\r\n      if (this.CheckLineIntersection(vs[i], vs[i + 1], p0, p1)) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n  // http://jsfiddle.net/justin_c_rounds/Gd2S2/light/\r\n  public static CheckLineIntersection(p0: NVector3, p1: NVector3, p2: NVector3, p3: NVector3) {\r\n    // if the lines intersect, the result contains the x and y of the intersection (treating the lines as infinite) and booleans for whether line segment 1 or line segment 2 contain the point\r\n    let denominator: number = 0, a: number = 0, b: number = 0, numerator1: number = 0, numerator2: number = 0;\r\n    let onLine0: boolean = false, onLine1: boolean = false;\r\n    denominator = ((p3.y - p2.y) * (p1.x - p0.x)) - ((p3.x - p2.x) * (p1.y - p0.y));\r\n    let result: NVector3 = new NVector3(0, 0, 0);\r\n    if (denominator === 0) { return undefined; }\r\n    a = p0.y - p2.y;\r\n    b = p0.x - p2.x;\r\n    numerator1 = ((p3.x - p2.x) * a) - ((p3.y - p2.y) * b);\r\n    numerator2 = ((p1.x - p0.x) * a) - ((p1.y - p0.y) * b);\r\n    a = numerator1 / denominator;\r\n    b = numerator2 / denominator;\r\n\r\n    // if we cast these lines infinitely in both directions, they intersect here:\r\n    result.x = p0.x + (a * (p1.x - p0.x));\r\n    result.y = p0.y + (a * (p1.y - p0.y));\r\n    /*\r\n            // it is worth noting that this should be the same as:\r\n            x = p2.x + (b * (p3.x - p2.x));\r\n            y = p2.x + (b * (p3.y - p2.y));\r\n            */\r\n    // if line1 is a segment and line2 is infinite, they intersect if:\r\n    if (a > 0 && a < 1) {\r\n      onLine0 = true;\r\n    }\r\n    // if line2 is a segment and line1 is infinite, they intersect if:\r\n    if (b > 0 && b < 1) {\r\n      onLine1 = true;\r\n    }\r\n    // if line1 and line2 are segments, they intersect if both of the above are true\r\n    if (onLine0 && onLine1) {\r\n      return result;\r\n    } else { return undefined; }\r\n  }\r\n  // http://www.sunshine2k.de/coding/java/Polygon/Convex/polygon.htm\r\n  public static CheckConvexity(vs: NVector3[]) {\r\n    if (vs.length < 3) { return false; }\r\n\r\n    let p: NVector3;\r\n    let v: NVector3;\r\n    let u: NVector3;\r\n    let res = 0;\r\n\r\n    for (let i = 0; i < vs.length; i++) {\r\n      p = vs[i];\r\n      let tmp = vs[(i + 1) % vs.length];\r\n      v = new NVector3(tmp.x - p.x, tmp.y - p.y, 0);\r\n      u = vs[(i + 2) % vs.length];\r\n\r\n      if (i === 0) { // in first loop direction is unknown, so save it in res\r\n        res = u.x * v.y - u.y * v.x + v.x * p.y - v.y * p.x;\r\n      } else {\r\n        let newres = u.x * v.y - u.y * v.x + v.x * p.y - v.y * p.x;\r\n        if ((newres > 0 && res < 0) || (newres < 0 && res > 0)) { return false; }\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n  //////////////////////////////////////////////////////////////////////////////// translation Utility\r\n  public static MoveVecs(vecs: NVector3[], dir: NVector3): NVector3[] {\r\n    let temp: NVector3[] = [];\r\n    for (let i = 0; i < vecs.length; ++i) {\r\n      //\r\n      temp.push(NVector3.MoveVec(vecs[i], dir));\r\n    }\r\n    return temp;\r\n  }\r\n  public static MoveVec(v: NVector3, dir: NVector3): NVector3 {\r\n    return new NVector3(v.x + dir.x, v.y + dir.y, v.z + dir.z);\r\n  }\r\n  public static RotateVecsLoal(vecs: NVector3[], angle: number): NVector3[] {\r\n    let cptToLocal = NVector3.GetCenterVecFromVecs(vecs);\r\n    let cptToWorld = new NVector3(-cptToLocal.x, -cptToLocal.y, -cptToLocal.z);\r\n    let temp: NVector3[] = NVector3.MoveVecs(vecs, cptToWorld);\r\n    temp = NVector3.RotateVecs(temp, angle);\r\n    temp = NVector3.MoveVecs(temp, cptToLocal);\r\n    return temp;\r\n  }\r\n  public static RotateVecs(vecs: NVector3[], angle: number) {\r\n    let temp: NVector3[] = [];\r\n    for (let i = 0; i < vecs.length; ++i) {\r\n      temp.push(NVector3.RotateVec(vecs[i], angle));\r\n    }\r\n    return temp;\r\n  }\r\n  public static Reflect(v: NVector3, n: NVector3, strength: number = 1): NVector3 {\r\n    // http://www.3dkingdoms.com/weekly/weekly.php?a=2\r\n    // (2 * (v * n) * n - v ) * strength;\r\n\r\n    v.x *= -1;\r\n    v.y *= -1;\r\n    v.z *= -1;\r\n\r\n    const dot = this.DotProduct(v, n);\r\n    return new NVector3(\r\n      (2 * dot * n.x - v.x) *  strength,\r\n      (2 * dot * n.y - v.y) *  strength,\r\n      (2 * dot * n.z - v.z) *  strength,\r\n    );\r\n  }\r\n  public static RotateVec(v: NVector3, angle: number): NVector3 {\r\n    let cos = Math.cos(angle * (3.14159265358979 / 180.0));\r\n    let sin = Math.sin(angle * (3.14159265358979 / 180.0));\r\n    let x = v.x * cos - v.y * sin;\r\n    let y = v.x * sin + v.y * cos;\r\n    return new NVector3(x, y, v.z);\r\n  }\r\n  public static GetCenterVecFromVecs(vecs: NVector3[]): NVector3 {\r\n    let nv = new NVector3(0, 0, 0);\r\n    for (let i = 0, c = vecs.length; i < c; ++i) {\r\n      nv.Add(vecs[i]);\r\n    }\r\n    nv.Mult(1.0 / vecs.length);\r\n    return nv;\r\n  }\r\n  // .............................................................................\r\n  public static MidVecGeo(p1: NVector3, p2: NVector3): NVector3 {\r\n    // return new NVector3(p1.screenX + p2.screenX * 0.5, p1.screenY + p2.screenY * 0.5, 0);\r\n    // return new NVector3(p1.x + p2.x * 0.5, p1.y + p2.y * 0.5, 0);\r\n    return new NVector3(p1.x + ((p2.x + p1.x) * 0.5), p1.y + ((p2.y + p1.y) * 0.5), p1.z + ((p2.z + p1.z) * 0.5));\r\n  }\r\n  // intersection // https://gist.github.com/gordonwoodhull/50eb65d2f048789f9558\r\n  // https://stackoverflow.com/questions/563198/whats-the-most-efficent-way-to-calculate-where-two-line-segments-intersect/1968345#1968345\r\n  public static GetVecFromIntersection(vs: NVector3[]): NVector3[] | undefined {\r\n    let newVes: NVector3[] = [];\r\n    for (let j = 0; j < vs.length - 1; ++j) {\r\n      for (let k = j + 1; k < vs.length - 1; ++k) {\r\n        let v = NVector3.CheckLineIntersection(vs[j], vs[j + 1], vs[k], vs[k + 1]);\r\n        if (v) { newVes.push(v); }\r\n      }\r\n    }\r\n    if (newVes.length === 0) { return undefined; } else { return newVes; }\r\n  }\r\n  public static between(a: number, b: number, c: number) {\r\n    return a - NVector3.eps <= b && b <= c + NVector3.eps;\r\n  }\r\n  public static segment_intersection(v0: NVector3, v1: NVector3, v2: NVector3, v3: NVector3) {\r\n    var x = ((v0.x * v1.y - v0.y * v1.x) * (v2.x - v3.x) - (v0.x - v1.x) * (v2.x * v3.y - v2.y * v3.x)) /\r\n      ((v0.x - v1.x) * (v2.y - v3.y) - (v0.y - v1.y) * (v2.x - v3.x));\r\n    var y = ((v0.x * v1.y - v0.y * v1.x) * (v2.y - v3.y) - (v0.y - v1.y) * (v2.x * v3.y - v2.y * v3.x)) /\r\n      ((v0.x - v1.x) * (v2.y - v3.y) - (v0.y - v1.y) * (v2.x - v3.x));\r\n    if (isNaN(x) || isNaN(y)) {\r\n      return false;\r\n    } else {\r\n      if (v0.x >= v1.x) {\r\n        if (!NVector3.between(v1.x, x, v0.x)) { return false; }\r\n      } else {\r\n        if (!NVector3.between(v0.x, x, v1.x)) { return false; }\r\n      }\r\n      if (v0.y >= v1.y) {\r\n        if (!NVector3.between(v1.y, y, v0.y)) { return false; }\r\n      } else {\r\n        if (!NVector3.between(v0.y, y, v1.y)) { return false; }\r\n      }\r\n      if (v2.x >= v3.x) {\r\n        if (!NVector3.between(v3.x, x, v2.x)) { return false; }\r\n      } else {\r\n        if (!NVector3.between(v2.x, x, v3.x)) { return false; }\r\n      }\r\n      if (v2.y >= v3.y) {\r\n        if (!NVector3.between(v3.y, y, v2.y)) { return false; }\r\n      } else {\r\n        if (!NVector3.between(v2.y, y, v3.y)) { return false; }\r\n      }\r\n    }\r\n    return new NVector3(x, y);\r\n  }\r\n  // ............................................................................. end static\r\n  constructor(x: number, y: number, z: number = 0) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.z = z;\r\n  }\r\n  public Set(x: number, y: number, z: number): NVector3 {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.z = z;\r\n    return new NVector3(this.x, this.y, this.z);\r\n  }\r\n  public Scale(v: number): NVector3 {\r\n    this.x *= v;\r\n    this.y *= v;\r\n    this.z *= v;\r\n    return new NVector3(this.x, this.y, this.z);\r\n  }\r\n  public Mult(v: number): NVector3 {\r\n    this.x *= v;\r\n    this.y *= v;\r\n    this.z *= v;\r\n    return new NVector3(this.x, this.y, this.z);\r\n  }\r\n  public DivByVal(v: number): NVector3 {\r\n    this.x /= v;\r\n    this.y /= v;\r\n    this.z /= v;\r\n    return new NVector3(this.x, this.y, this.z);\r\n  }\r\n  public DivByVec(v: NVector3): NVector3 {\r\n    this.x /= v.x;\r\n    this.y /= v.y;\r\n    this.z /= v.z;\r\n    return new NVector3(this.x, this.y, this.z);\r\n  }\r\n  public Add(v: NVector3): NVector3 {\r\n    this.x += v.x;\r\n    this.y += v.y;\r\n    this.z += v.z;\r\n    return new NVector3(this.x, this.y, this.z);\r\n  }\r\n  public Sub(v: NVector3): NVector3 {\r\n    this.x -= v.x;\r\n    this.y -= v.y;\r\n    this.z -= v.z;\r\n    return new NVector3(this.x, this.y, this.z);\r\n  }\r\n  public Negate() {\r\n    this.x *= -1;\r\n    this.y *= -1;\r\n    this.z *= -1;\r\n    return new NVector3(this.x, this.y, this.z);\r\n  }\r\n  public Equals(v: NVector3) {\r\n    return this.x === v.x && this.y === v.y && this.z === v.z;\r\n  }\r\n  public Clone(): NVector3 {\r\n    const other = new NVector3(this.x, this.y, this.z);\r\n    other.long = this.long; other.lat = this.lat; other.ele = this.ele;\r\n    other.proX = this.proX; other.proY = this.proY; other.proZ = this.proZ;\r\n    return other;\r\n  }\r\n  public Length(): number {\r\n    const len = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\r\n    if (len < 0.00001) {\r\n      return 0.00001;\r\n    }\r\n    return len;\r\n  }\r\n  public Unitize(): NVector3 {\r\n    return this.Normalize();\r\n  }\r\n  public IsOverlap(v: NVector3, tor: number = 0.1) {\r\n    if (this.Distance(v) < tor) { return true; } else { return false; }\r\n  }\r\n  public Normalize(): NVector3 {\r\n    let len: number = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\r\n    if (len < 0.0001) {\r\n      return this;\r\n    }\r\n    this.x = this.x / len;\r\n    this.y = this.y / len;\r\n    this.z = this.z / len;\r\n    return this;\r\n  }\r\n  public Distance(v: NVector3): number {\r\n    return NVector3.Distance(new NVector3(this.x, this.y, this.z), v);\r\n  }\r\n  public DistanceByArray(vs: number[]) {\r\n    return NVector3.DistanceByArray([this.x, this.y, this.z], vs);\r\n  }\r\n  public Distance2(v: NVector3): number {\r\n    return NVector3.Distance2(new NVector3(this.x, this.y, this.z), v);\r\n  }\r\n  public DotProduct(v: NVector3): number {\r\n    return NVector3.DotProduct(new NVector3(this.x, this.y, this.z), v);\r\n  }\r\n  public CrossProduct(v: NVector3): NVector3 {\r\n    return NVector3.CrossProduct(new NVector3(this.x, this.y, this.z), v);\r\n  }\r\n  public SquareLength(): number {\r\n    let len: number = NVector3.Length(new NVector3(this.x, this.y, this.z));\r\n    return len * len;\r\n  }\r\n  public FadeExp(attr: NVector3, dVal: number) {\r\n    let v = new NVector3(this.x, this.y, this.z);\r\n    v.Sub(attr);\r\n    return Math.exp(-dVal * v.SquareLength());\r\n  }\r\n  public GetAngle(): number {\r\n    return Math.atan2(this.y, this.x);\r\n  }\r\n  public GetAngleDegree() {\r\n    return 180 * this.GetAngle() / Math.PI;\r\n  }\r\n  public ToJSON() {\r\n    /* */\r\n  }\r\n  public ToString(): string {\r\n    let t: string = 'x: ' + this.x.toFixed(3).toString() + ' , y: ' + this.y.toFixed(3).toString() + ', z: ' + this.z.toFixed(3).toString();\r\n    return t;\r\n  }\r\n  public ToFloat32Array() {\r\n    return new Float32Array([this.x, this.y, this.z]);\r\n  }\r\n}\r\n\r\nexport const isInsideEllipse = (cv: NVector3, m: NVector3, r0: number, r1: number, threshold = 5) => {\r\n  const x = Math.pow((m.x - cv.x),2) / Math.pow(threshold + r0, 2);\r\n  const y = Math.pow((m.y - cv.y),2) / Math.pow(threshold + r1, 2);\r\n  if(x + y <= 1) {\r\n      return true;\r\n  }\r\n  return false;\r\n}","\r\nexport const Sepia = (r: number, g: number, b: number) => {\r\n    var avg = 0.3  * r + 0.59 * g + 0.11 * b;\r\n    return [avg + 100, avg + 50, avg, 255];\r\n};\r\nexport const getFalseColor = (value: number): number[] => {\r\n    const col: number[] = [];\r\n    col.push(Math.round(getR(value) * 255));\r\n    col.push(Math.round(getG(value) * 255));\r\n    col.push(Math.round(getB(value) * 255));\r\n    return col;\r\n};\r\nexport const getR = (value: number, min = 0, max = 1) => {\r\n    value = (value - min) / (max - min);\r\n    if (value <= 0.25)\r\n        return 0;\r\n    else if (value <= 0.5)\r\n        return (1020. * value - 255.) / 255.;\r\n    else return 1;\r\n};\r\nexport const getG = (value: number, min = 0, max = 1) => {\r\n    value = (value - min) / (max - min);\r\n    if (value <= 0.25)\r\n        return (1020 * value) / 255;\r\n    else if (value <= 0.5)\r\n        return 1;\r\n    else\r\n        return (-510 * value + 510) / 255;\r\n};\r\nexport const getB = (value: number, min = 0, max = 1) => {\r\n    value = (value - min) / (max - min);\r\n    if (value <= 0.25)\r\n        return (-512 * value + 128) / 255;\r\n    else return 0;\r\n};\r\nexport enum COLORBLENDING {\r\n    SOURCE_OVER = 'source-over',\r\n    SOURCE_IN = 'source-in',\r\n    SOURCE_OUT = 'source-out',\r\n    SOURCE_ATOP = 'source-atop',\r\n    COPY = 'copy',\r\n\r\n    DESTAINATION_OVER = 'destination-over',\r\n    DESTAINATION_IN = 'destination-in',\r\n    DESTAINATION_OUT = 'destination-out',\r\n    DESTAINATION_ATOP = 'destination-atop',\r\n\r\n    LIGHTER = 'lighter',\r\n    MULTIPLY = 'multiply',\r\n    SCREEN = 'screen',\r\n    OVERLAY = 'overlay',\r\n    DARKEN = 'darken',\r\n    LIGHTEN = 'lighten',\r\n    COLOR_DODGE = 'color-dodge',\r\n    COLOR_BURN = 'color-burn',\r\n    HARD_LIGHT = 'hard-light',\r\n    SOFT_LIGHT = 'soft-light',\r\n    DIFFERENCE = 'difference',\r\n    EXCLUSION = 'exclusion',\r\n    HUE = 'hue',\r\n    SATURATION = 'saturation',\r\n    COLOR = 'color',\r\n    LUMINOSITY = 'luminosity'\r\n}\r\nexport enum COLOR_HEX {\r\n    aqua = '#00ffff',\r\n    azure = '#f0ffff',\r\n    beige = '#f5f5dc',\r\n    black = '#000000',\r\n    blue = '#0000ff',\r\n    brown = '#a52a2a',\r\n    cyan = '#00ffff',\r\n    darkblue = '#00008b',\r\n    darkcyan = '#008b8b',\r\n    darkgrey = '#a9a9a9',\r\n    darkgreen = '#006400',\r\n    darkkhaki = '#bdb76b',\r\n    darkmagenta = '#8b008b',\r\n    darkolivegreen = '#556b2f',\r\n    darkorange = '#ff8c00',\r\n    darkorchid = '#9932cc',\r\n    darkred = '#8b0000',\r\n    darksalmon = '#e9967a',\r\n    darkviolet = '#9400d3',\r\n    fuchsia = '#ff00ff',\r\n    gold = '#ffd700',\r\n    green = '#008000',\r\n    indigo = '#4b0082',\r\n    khaki = '#f0e68c',\r\n    lightblue = '#add8e6',\r\n    lightcyan = '#e0ffff',\r\n    lightgreen = '#90ee90',\r\n    lightgrey = '#d3d3d3',\r\n    lightpink = '#ffb6c1',\r\n    lightyellow = '#ffffe0',\r\n    lime = '#00ff00',\r\n    magenta = '#ff00ff',\r\n    maroon = '#800000',\r\n    navy = '#000080',\r\n    olive = '#808000',\r\n    orange = '#ffa500',\r\n    pink = '#ffc0cb',\r\n    purple = '#800080',\r\n    violet = '#800080',\r\n    red = '#ff0000',\r\n    silver = '#c0c0c0',\r\n    white = '#ffffff',\r\n    yellow = '#ffff00'\r\n}\r\nexport class ColorUtility {\r\n    public static modeList = [\r\n        'source-over', 'source-in', 'source-out', 'source-atop', 'copy',\r\n        'destination-over', 'destination-in', 'destination-out', 'destination-atop',\r\n        'lighter', 'multiply', 'screen',\r\n        'overlay', 'darken', 'lighten', 'color-dodge',\r\n        'color-burn', 'hard-light', 'soft-light',\r\n        'difference', 'exclusion', 'hue',\r\n        'saturation', 'color', 'luminosity'\r\n    ];\r\n    public static modeListGL = [\r\n        'source-over',\r\n        'lighter', 'multiply', 'screen',\r\n        'overlay', 'darken', 'lighten', 'color-dodge',\r\n        'color-burn', 'hard-light', 'soft-light',\r\n        'difference', 'exclusion', 'hue',\r\n        'saturation', 'color', 'luminosity'\r\n    ];\r\n    public static ColorPreset = {\r\n        shadow: 'rgba(10,10,10,0.5)'\r\n    };\r\n    public static ShiftBlendingMode(v: number) { // 0 to 1\r\n        let num = v % ColorUtility.modeListGL.length;\r\n        console.log(ColorUtility.modeListGL[num] + ' mode for WebGL');\r\n        return ColorUtility.modeListGL[num] as COLORBLENDING;\r\n    }\r\n    public static RGBtoGray(r: number, g: number, b: number) {\r\n        return 0.2126 * r + 0.7152 * g + 0.0722 * b;\r\n    }\r\n    public static RGB_String_by_A(v: string, vis: number) {\r\n        const d = v.split(',');\r\n        return `${d[0]},${d[1]},${d[2]},${vis})`; // out rgba ( )\r\n    }\r\n    // reference http://scaledinnovation.com/analytics/splines/aboutSplines.html\r\n    public static HSVtoRGB(h: number, s: number, v: number, visibility: number) {\r\n        // inputs h=hue=0-360, s=saturation=0-1, v=value=0-1;\r\n        // algorithm from Wikipedia on HSV conversion;\r\n        const toHex = function (decimalValue: number, places: number = 2) {\r\n            if (places === undefined || isNaN(places)) { places = 2; }\r\n            let hex = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'A', 'B', 'C', 'D', 'E', 'F'];\r\n            let next = 0;\r\n            let hexidecimal = '';\r\n            decimalValue = Math.floor(decimalValue);\r\n            while (decimalValue > 0) {\r\n                next = decimalValue % 16;\r\n                decimalValue = Math.floor((decimalValue - next) / 16);\r\n                hexidecimal = hex[next] + hexidecimal;\r\n            }\r\n            while (hexidecimal.length < places) { hexidecimal = '0' + hexidecimal; }\r\n            return hexidecimal;\r\n        };\r\n        let hi = Math.floor(h / 60) % 6;\r\n        let f = h / 60 - Math.floor(h / 60);\r\n        let p = v * (1 - s);\r\n        let q = v * (1 - f * s);\r\n        let t = v * (1 - (1 - f) * s);\r\n        let r = v; // case hi===0 below\r\n        let g = t;\r\n        let b = p;\r\n        switch (hi) {\r\n            case 1: r = q; g = v; b = p; break;\r\n            case 2: r = p; g = v; b = t; break;\r\n            case 3: r = p; g = q; b = v; break;\r\n            case 4: r = t; g = p; b = v; break;\r\n            case 5: r = v; g = p; b = q; break;\r\n            default:\r\n                break;\r\n        }\r\n        //  At this point r,g,b are in 0...1 range.  Now convert into rgba or #FFFFFF notation\r\n        if (visibility) {\r\n            return `rgba( ${Math.round(255 * r)},${Math.round(255 * g)},${Math.round(255 * b)},${visibility})`;\r\n        } else {\r\n            return '#' + toHex(r * 255) + toHex(g * 255) + toHex(b * 255);\r\n        }\r\n    }\r\n    public static GetRandomHex() {\r\n        return ColorUtility.RGBToHex(Math.round(Math.random() * 255), Math.round(Math.random() * 255), Math.round(Math.random() * 255));\r\n    }\r\n    public static GetRandomRGB() {\r\n        return `rgb(${Math.round(Math.random() * 255)},${Math.round(Math.random() * 255)},${Math.round(Math.random() * 255)})`;\r\n    }\r\n    public static GetRandomRGBA() {\r\n        return `rgb(${Math.round(Math.random() * 255)},${Math.round(Math.random() * 255)},${Math.round(Math.random() * 255)},1)`;\r\n    }\r\n    public static GetRandomRGBArray() {\r\n        return [(Math.round(Math.random() * 255)), (Math.round(Math.random() * 255)), (Math.round(Math.random() * 255))];\r\n    }\r\n    public static GetRandomColor() {\r\n        let letters = '0123456789ABCDEF';\r\n        let color = '#';\r\n        for (let i = 0; i < 6; i++) {\r\n            color += letters[Math.floor(Math.random() * 16)];\r\n        }\r\n        return color;\r\n    }\r\n    // https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb\r\n    public static RGBToHex(r: number, g: number, b: number) {\r\n        return '#' + [Math.round(r), Math.round(g), Math.round(b)].map(x => {\r\n            const hex = x.toString(16);\r\n            return hex.length === 1 ? '0' + hex : hex;\r\n        }).join('');\r\n\r\n        // let rr = Math.round(r).toString(16);\r\n        // rr = rr.length === 1 ? '0' + rr : rr;\r\n\r\n        // let gg = Math.round(r).toString(16);\r\n        // gg = gg.length === 1 ? '0' + gg : gg;\r\n\r\n        // let bb = Math.round(r).toString(16);\r\n        // bb = bb.length === 1 ? '0' + bb : bb;\r\n\r\n        // return `#${r}${g}${b}`;\r\n    }\r\n    public static HexToCanvasColor(hex: string, visibility: number | string = 0, isGray: boolean = false) {\r\n        // if (hex[0] !== '#') {\r\n        //     let col = hex.split('(')[1].split(')')[0].split(',');\r\n        //     hex = this.RGBToHex(parseInt(col[0]), parseInt(col[1]), parseInt(col[2]));\r\n        // }\r\n        // Convert #AA77CC to rbga() format for Firefox\r\n        let thecol;\r\n        visibility = visibility || '1.0';\r\n        hex = hex.replace('#', '');\r\n        let r = parseInt(hex.substring(0, 2), 16);\r\n        let g = parseInt(hex.substring(2, 4), 16);\r\n        let b = parseInt(hex.substring(4, 6), 16);\r\n        if (isGray) {\r\n            // let v = (0.58 * (r / 255)) + (0.17 * (g / 255)) + (0.8 * (b / 255));\r\n            let v = (0.58 * r) + (0.17 * g) + (0.8 * b);\r\n            thecol = 'rgba(' + v + ',' + v + ',' + v + ',' + visibility + ')';\r\n        } else {\r\n            thecol = 'rgba(' + r + ',' + g + ',' + b + ',' + visibility + ')';\r\n        }\r\n        return thecol;\r\n    }\r\n    public static Dec2hex(i: number) {\r\n        return (i + 0x10000).toString(16).substr(-4).toUpperCase();\r\n    }\r\n    public static Hex2Dec(hex: string) {\r\n        return parseInt(hex, 16);\r\n    }\r\n    public static GetRandomColorByLightness(hex: string, lightness: number) {\r\n        const rgb = ColorUtility.HexToRGBANormalized(hex);\r\n        const hsl = ColorUtility.RGB2HSL(rgb[0], rgb[1], rgb[2]);\r\n        return ColorUtility.HSL2RGB(hsl[0], hsl[1], hsl[2] + lightness);\r\n    }\r\n    public static RGB_by_A(c: string, visiblity: number) {\r\n        let col = c.split(',');\r\n        return col[0] + ',' + col[1] + ',' + col[2] + ',' + visiblity + ')';\r\n    }\r\n    public static HexToRGBA(hex: string, visibility: number = 1, isGray: boolean = false) {\r\n        hex = hex.replace('#', '');\r\n        let r = parseInt(hex.substring(0, 2), 16);\r\n        let g = parseInt(hex.substring(2, 4), 16);\r\n        let b = parseInt(hex.substring(4, 6), 16);\r\n        if (isGray) {\r\n            // let v = (0.58 * (r / 255)) + (0.17 * (g / 255)) + (0.8 * (b / 255));\r\n            let v = (0.58 * r) + (0.17 * g) + (0.8 * b);\r\n            return [v, v, v, visibility];\r\n        } else {\r\n            return [r, g, b, visibility];\r\n        }\r\n    }\r\n    public static LABComputation() {\r\n        // console.log('lab');\r\n        // console.log(this.rgb2lab(255, 100, 50));\r\n        // console.log(this.lab2rgb(100, -50, 100));\r\n        // console.log(this.deltaE([100, 40, -50], [50, 50, -40 ]));\r\n    }\r\n    // refer https://github.com/antimatter15/rgb-lab/blob/master/color.js  // L = 0 to 100  / A -100 green + 100 red / B - 100 blue + 100 yellow\r\n    public static lab2rgb(L: number, A: number, B: number) {\r\n        let y = (L + 16) / 116,\r\n            x = A / 500 + y,\r\n            z = y - B / 200;\r\n        let r, g, b = 0;\r\n\r\n        x = 0.95047 * ((x * x * x > 0.008856) ? x * x * x : (x - 16 / 116) / 7.787);\r\n        y = 1.00000 * ((y * y * y > 0.008856) ? y * y * y : (y - 16 / 116) / 7.787);\r\n        z = 1.08883 * ((z * z * z > 0.008856) ? z * z * z : (z - 16 / 116) / 7.787);\r\n\r\n        r = x * 3.2406 + y * -1.5372 + z * -0.4986;\r\n        g = x * -0.9689 + y * 1.8758 + z * 0.0415;\r\n        b = x * 0.0557 + y * -0.2040 + z * 1.0570;\r\n\r\n        r = (r > 0.0031308) ? (1.055 * Math.pow(r, 1 / 2.4) - 0.055) : 12.92 * r;\r\n        g = (g > 0.0031308) ? (1.055 * Math.pow(g, 1 / 2.4) - 0.055) : 12.92 * g;\r\n        b = (b > 0.0031308) ? (1.055 * Math.pow(b, 1 / 2.4) - 0.055) : 12.92 * b;\r\n\r\n        return [Math.max(0, Math.min(1, r)) * 255,\r\n        Math.max(0, Math.min(1, g)) * 255,\r\n        Math.max(0, Math.min(1, b)) * 255];\r\n    }\r\n    public static rgb2lab(R: number, G: number, B: number) { // 0 to 255\r\n        let r = R / 255,\r\n            g = G / 255,\r\n            b = B / 255,\r\n            x, y, z;\r\n\r\n        r = (r > 0.04045) ? Math.pow((r + 0.055) / 1.055, 2.4) : r / 12.92;\r\n        g = (g > 0.04045) ? Math.pow((g + 0.055) / 1.055, 2.4) : g / 12.92;\r\n        b = (b > 0.04045) ? Math.pow((b + 0.055) / 1.055, 2.4) : b / 12.92;\r\n\r\n        x = (r * 0.4124 + g * 0.3576 + b * 0.1805) / 0.95047;\r\n        y = (r * 0.2126 + g * 0.7152 + b * 0.0722) / 1.00000;\r\n        z = (r * 0.0193 + g * 0.1192 + b * 0.9505) / 1.08883;\r\n\r\n        x = (x > 0.008856) ? Math.pow(x, 1 / 3) : (7.787 * x) + 16 / 116;\r\n        y = (y > 0.008856) ? Math.pow(y, 1 / 3) : (7.787 * y) + 16 / 116;\r\n        z = (z > 0.008856) ? Math.pow(z, 1 / 3) : (7.787 * z) + 16 / 116;\r\n\r\n        return [(116 * y) - 16, 500 * (x - y), 200 * (y - z)];\r\n    }\r\n\r\n    // calculate the perceptual distance between colors in CIELAB\r\n    // https://github.com/THEjoezack/ColorMine/blob/master/ColorMine/ColorSpaces/Comparisons/Cie94Comparison.cs\r\n\r\n    public static deltaE(labA: number[], labB: number[]) {\r\n        let deltaL = labA[0] - labB[0];\r\n        let deltaA = labA[1] - labB[1];\r\n        let deltaB = labA[2] - labB[2];\r\n        let c1 = Math.sqrt(labA[1] * labA[1] + labA[2] * labA[2]);\r\n        let c2 = Math.sqrt(labB[1] * labB[1] + labB[2] * labB[2]);\r\n        let deltaC = c1 - c2;\r\n        let deltaH = deltaA * deltaA + deltaB * deltaB - deltaC * deltaC;\r\n        deltaH = deltaH < 0 ? 0 : Math.sqrt(deltaH);\r\n        let sc = 1.0 + 0.045 * c1;\r\n        let sh = 1.0 + 0.015 * c1;\r\n        let deltaLKlsl = deltaL / (1.0);\r\n        let deltaCkcsc = deltaC / (sc);\r\n        let deltaHkhsh = deltaH / (sh);\r\n        let i = deltaLKlsl * deltaLKlsl + deltaCkcsc * deltaCkcsc + deltaHkhsh * deltaHkhsh;\r\n        return i < 0 ? 0 : Math.sqrt(i);\r\n    }\r\n    public static Threshold(r: number, g: number, b: number, threshold: number, high: number, low: number): number {\r\n        return (0.3 * r + 0.59 * g + 0.11 * b >= threshold) ? high : low;\r\n    }\r\n    public static HexToRGBANormalized(hex: string, visibility: number = 1, isGray: boolean = false) {\r\n        hex = hex.replace('#', '');\r\n        let r = parseInt(hex.substring(0, 2), 16);\r\n        let g = parseInt(hex.substring(2, 4), 16);\r\n        let b = parseInt(hex.substring(4, 6), 16);\r\n        if (isGray) {\r\n            // let v = (0.58 * (r / 255)) + (0.17 * (g / 255)) + (0.8 * (b / 255));\r\n            let v = (0.58 * r) + (0.17 * g) + (0.8 * b);\r\n            return [v, v, v, visibility];\r\n        } else {\r\n            return [r / 255, g / 255, b / 255, visibility / 255];\r\n        }\r\n    }\r\n    // https://gist.github.com/mjackson/5311256\r\n    public static RGB2HSL(r: number, g: number, b: number) { // 0 to 255\r\n        r /= 255; g /= 255; b /= 255;\r\n\r\n        let max = Math.max(r, g, b), min = Math.min(r, g, b);\r\n        let h = (max + min) / 2, s = (max + min) / 2, l = (max + min) / 2;\r\n\r\n        if (max === min) {\r\n            h = s = 0; // achromatic\r\n        } else {\r\n            let d = max - min;\r\n            s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n            switch (max) {\r\n                case r: h = (g - b) / d + (g < b ? 6 : 0); break;\r\n                case g: h = (b - r) / d + 2; break;\r\n                case b: h = (r - g) / d + 4; break;\r\n                default: break;\r\n            }\r\n            h /= 6;\r\n        }\r\n        return [h, s, l]; // 0 to 1\r\n    }\r\n    public static HSL2RGB(h: number, s: number, l: number) { // 0 to 1\r\n        let r, g, b;\r\n\r\n        if (s === 0) {\r\n            r = g = b = l; // achromatic\r\n        } else {\r\n            const hue2rgb = (pp: number, qq: number, t: number) => {\r\n                if (t < 0) { t += 1; }\r\n                if (t > 1) { t -= 1; }\r\n                if (t < 1 / 6) { return pp + (qq - pp) * 6 * t; }\r\n                if (t < 1 / 2) { return qq; }\r\n                if (t < 2 / 3) { return pp + (qq - pp) * (2 / 3 - t) * 6; }\r\n                return pp;\r\n            };\r\n\r\n            let q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n            let p = 2 * l - q;\r\n\r\n            r = hue2rgb(p, q, h + 1 / 3);\r\n            g = hue2rgb(p, q, h);\r\n            b = hue2rgb(p, q, h - 1 / 3);\r\n        }\r\n        return [\r\n            Math.max(0, Math.min(Math.round(r * 255), 255))\r\n            , Math.max(0, Math.min(Math.round(g * 255), 255))\r\n            , Math.max(0, Math.min(Math.round(b * 255), 255))\r\n        ];\r\n    }\r\n    public static RGB2HSV(r: number, g: number, b: number) { // 0 to 255\r\n        r /= 255; g /= 255; b /= 255;\r\n\r\n        let max = Math.max(r, g, b), min = Math.min(r, g, b);\r\n        let h = max, s = max, v = max;\r\n\r\n        let d = max - min;\r\n        s = max === 0 ? 0 : d / max;\r\n\r\n        if (max === min) {\r\n            h = 0; // achromatic\r\n        } else {\r\n            switch (max) {\r\n                case r: h = (g - b) / d + (g < b ? 6 : 0); break;\r\n                case g: h = (b - r) / d + 2; break;\r\n                case b: h = (r - g) / d + 4; break;\r\n                default: break;\r\n            }\r\n\r\n            h /= 6;\r\n        }\r\n        return [h, s, v]; // 0 to 1\r\n    }\r\n    public static HSV2RGB(h: number, s: number, v: number) { // 0 to 1\r\n        let r = 0, g = 0, b = 0;\r\n\r\n        let i = Math.floor(h * 6);\r\n        let f = h * 6 - i;\r\n        let p = v * (1 - s);\r\n        let q = v * (1 - f * s);\r\n        let t = v * (1 - (1 - f) * s);\r\n\r\n        switch (i % 6) {\r\n            case 0: r = v\r\n                    g = t\r\n                    b = p; break;\r\n            case 1: r = q\r\n                    g = v\r\n                    b = p; break;\r\n            case 2: r = p\r\n                    g = v\r\n                    b = t; break;\r\n            case 3: r = p\r\n                    g = q\r\n                    b = v; break;\r\n            case 4: r = t\r\n                    g = p\r\n                    b = v; break;\r\n            case 5: r = v\r\n                    g = p\r\n                    b = q; break;\r\n            default: break;\r\n        }\r\n\r\n        return [r * 255, g * 255, b * 255];\r\n    }\r\n    // ... interpolation\r\n    // https://graphicdesign.stackexchange.com/questions/83866/generating-a-series-of-colors-between-two-colors\r\n    public static InterpolateColor(colA: number[], colB: number[], factor: number = 0.5): number[] {\r\n        let result = [colA[0], colA[1], colA[2]]; // ;colA.slice();\r\n        for (let i = 0; i < 3; i++) {\r\n            // result[i] = Math.round(result[i] + factor * (colB[i] - colA[i]));\r\n            result[i] = (result[i] * 255 + factor * (colB[i] * 255 - colA[i] * 255));\r\n        }\r\n        // console.log(result);\r\n        return result;\r\n    }\r\n    public static InterpolateColorsByArray(cA: number[], cB: number[], steps: number): number[][] {\r\n        const step = 1. / (steps - 1.), interpolatedColors: number[][] = [];\r\n        for (let i = 0; i < steps; i++) {\r\n            interpolatedColors.push(ColorUtility.InterpolateColor(cA, cB, step * i));\r\n        }\r\n        // console.log(interpolatedColors);\r\n        return interpolatedColors;\r\n    }\r\n    public static InterpolateColors(rgb0: string, rgb1: string, steps: number): number[][] {\r\n        const step = 1 / (steps - 1), interpolatedColors: number[][] = [];\r\n\r\n        let cA = ColorUtility.RBGToArray(rgb0);\r\n        let cB = ColorUtility.RBGToArray(rgb1);\r\n\r\n        if (cA && cB) {\r\n            for (let i = 0; i < steps; i++) {\r\n                interpolatedColors.push(ColorUtility.InterpolateColor(cA, cB, step * i));\r\n            }\r\n        }\r\n        return interpolatedColors;\r\n    }\r\n    public static RBGToArray(rgb: string): number[] | undefined {\r\n        const c = rgb.match(/\\d+/g);\r\n        if (c) { return c.map(Number); }\r\n        return undefined;\r\n    }\r\n    // ............................................................................ blender\r\n    //      blendFunc blender = funcs[mode % 7];\r\n    // public delegate  blendFunc( a,  b,  c);\r\n    //     public blendFunc[] funcs = new blendFunc[]{\r\n    //     Blend, Addition, Subtraction, Multiply, Screen, Overlay, SoftLight\r\n    // };\r\n    public static Blend(vA: number, vB: number, blend: number) {\r\n        return vA * (1.0 - blend) + vB * blend;\r\n    }\r\n    public static Addition(vA: number, vB: number, blend: number) {\r\n        return vA * (1.0 - blend) + blend * (vA + vB) * 0.5;\r\n    }\r\n    public static Subtraction(vA: number, vB: number, blend: number) {\r\n        return vA * (1.0 - blend) + blend * (vA - vB) * 2;\r\n    }\r\n    public static Multiply(vA: number, vB: number, blend: number) {\r\n        return vA * (1.0 - blend) + blend * (vA * vB) * 0.5;\r\n    }\r\n    public static Screen(vA: number, vB: number, blend: number) {\r\n        return vA * (1.0 - blend) + blend * (1 - (1 - vA) * (1 - vB));\r\n    }\r\n    public static Overlay(vA: number, vB: number, blend: number) {\r\n        let val = 0;\r\n        if (vA < 0.5) { val = 2 * vA * vB; } else { val = 1 - 2 * (1 - vA) * (1 - vB); }\r\n        val = vA * (1.0 - blend) + blend * val;\r\n        return val;\r\n    }\r\n    public static SoftLight(vA: number, vB: number, blend: number) {\r\n        let val = 0;\r\n        if (vB < 0.5) { val = 2 * vA * vB + vA * vA * (1 - 2 * vB); } else { val = 2 * vA * (1 - vB) + Math.sqrt(vA) * (2 * vB - 1); }\r\n        val = vA * (1.0 - blend) + blend * val;\r\n        return val;\r\n    }\r\n    // ........................................................\r\n\r\n    public static Hex2HSVByHue(hex: string, s: number) { // s 0 to 1\r\n        let col = ColorUtility.HexToRGBA(hex);\r\n        let hsv = ColorUtility.RGB2HSV(col[0], col[1], col[2]);\r\n        hsv[1] = s;\r\n        return ColorUtility.HSVtoRGB(hsv[0], hsv[1], hsv[2], 1);\r\n\r\n    }\r\n    public static Hex2HSVByCol(hex: string, s: number) { // s 0 to 1\r\n        let col = ColorUtility.HexToRGBA(hex);\r\n        let hsv = ColorUtility.RGB2HSV(col[0], col[1], col[2]);\r\n        hsv[0] += s;\r\n        return ColorUtility.HSVtoRGB(hsv[0], hsv[1], hsv[2], 1);\r\n\r\n    }\r\n\r\n    // .....................................................................\r\n    // from -1 to 1 for brightness and contrast\r\n    public static BrightnessContrastLUT(brightness: number, contrast: number): number[] {\r\n        let lut = [];\r\n        let contrastAdjust = -128 * contrast + 128;\r\n        let brightnessAdjust = 255 * brightness;\r\n        let adjust = contrastAdjust + brightnessAdjust;\r\n        for (let i = 0; i < 256; i++) {\r\n            let c = i * contrast + adjust;\r\n            let result = Math.floor(c < 0 ? 0 : (c > 255 ? 255 : c));\r\n            lut.push(result);\r\n        }\r\n        return lut;\r\n    }\r\n    public static ImgBrightnessContrast(img: ImageData, brightness: number, contrast: number): ImageData {\r\n        let imgOut = new ImageData(img.width, img.height);\r\n        const lut = this.BrightnessContrastLUT(brightness, contrast + 1.0);\r\n        for (let i = 0; i < img.data.length; i += 4) {\r\n            let r = lut[img.data[i + 0]];\r\n            let g = lut[img.data[i + 1]];\r\n            let b = lut[img.data[i + 2]];\r\n            let a = img.data[i + 3];\r\n\r\n            imgOut.data[i + 0] = r; imgOut.data[i + 1] = g; imgOut.data[i + 2] = b; imgOut.data[i + 3] = a;\r\n        }\r\n        return imgOut;\r\n    }\r\n\r\n    public static HueSaturationLightness(img: ImageData, Hue: number, Saturation: number, Lightness: number) {\r\n        let imgOut = new ImageData(img.width, img.height);\r\n        for (let i = 0; i < img.data.length; i += 4) {\r\n            let r = img.data[i + 0];\r\n            let g = img.data[i + 1];\r\n            let b = img.data[i + 2];\r\n            let a = img.data[i + 3];\r\n\r\n            let hls = this.RGB2HSL(r, g, b);\r\n            // console.log(hls);\r\n            hls[0] += Hue;\r\n\r\n            hls[1] += Saturation;\r\n            if (hls[1] < 0) { hls[1] = 0; }\r\n\r\n            hls[2] += Lightness;\r\n\r\n            let col = this.HSL2RGB(hls[0], hls[1], hls[2]);\r\n            // imgOut.SetPixel(x, y, Color.FromArgb(255, (int)(col[0] * 255), (int)(col[1] * 255), (int)(col[2] * 255)));\r\n\r\n            imgOut.data[i + 0] = col[0];\r\n            imgOut.data[i + 1] = col[1];\r\n            imgOut.data[i + 2] = col[2];\r\n            imgOut.data[i + 3] = a;\r\n        }\r\n        return imgOut;\r\n    }\r\n    public static ImgInvert(img: ImageData) {\r\n        let imgOut = new ImageData(img.width, img.height);\r\n        for (let i = 0; i < img.data.length; i += 4) {\r\n            let r = img.data[i + 0];\r\n            let g = img.data[i + 1];\r\n            let b = img.data[i + 2];\r\n\r\n            imgOut.data[i + 0] = 255 - r;\r\n            imgOut.data[i + 1] = 255 - g;\r\n            imgOut.data[i + 2] = 255 - b;\r\n            imgOut.data[i + 3] = 255;\r\n        }\r\n        return imgOut;\r\n    }\r\n    public static ImgThreshold(img: ImageData, threshold: number, high: number, low: number) {\r\n        let imgOut = new ImageData(img.width, img.height);\r\n        for (let i = 0; i < img.data.length; i += 4) {\r\n            let r = img.data[i + 0];\r\n            let g = img.data[i + 1];\r\n            let b = img.data[i + 2];\r\n\r\n            let v = ColorUtility.Threshold(r / 255.0, g / 255.0, b / 255.0, threshold, high, low);\r\n            let gray = Math.floor(v * 255);\r\n            gray = (gray < 255) ? gray : 255;\r\n            gray = (gray < 0) ? 0 : gray;\r\n\r\n            // imgOut.SetPixel(x, y, Color.FromArgb(255, gray, gray, gray));\r\n            imgOut.data[i + 0] = gray;\r\n            imgOut.data[i + 1] = gray;\r\n            imgOut.data[i + 2] = gray;\r\n            imgOut.data[i + 3] = 255;\r\n        }\r\n        return imgOut;\r\n    }\r\n}\r\n\r\n\r\n\r\n\r\n// https://github.com/bahamas10/node-ryb2rgb/blob/master/ryb2rgb.js\r\n\r\n\r\nconst cubic = (t: number, a: number, b: number) => {\r\n    const weight = t * t * (3 - 2 * t);\r\n    return a + weight * (b - a);\r\n};\r\n\r\nexport const ryb_to_rgb = (r: number, y: number, b: number) => { // # Assumption: r, y, b in [0, 1]\r\n    // red\r\n    let x0  = cubic(b, 1.0, 0.163);\r\n    let x1  = cubic(b, 1.0, 0.0);\r\n    let x2 = cubic(b, 1.0, 0.5);\r\n    let x3 = cubic(b, 1.0, 0.2);\r\n    let y0 = cubic(y, x0, x1);\r\n    let y1 = cubic(y, x2, x3);\r\n    const red = cubic(r, y0, y1);\r\n\r\n    // green\r\n    x0 = cubic(b, 1.0, 0.373);\r\n    x1 = cubic(b, 1.0, 0.66);\r\n    x2 = cubic(b, 0., 0.);\r\n    x3 = cubic(b, 0.5, 0.094);\r\n    y0 = cubic(y, x0, x1);\r\n    y1 = cubic(y, x2, x3);\r\n    const green = cubic(r, y0, y1);\r\n\r\n    // blue\r\n    x0 = cubic(b, 1.0, 0.6);\r\n    x1 = cubic(b, 0.0, 0.2);\r\n    x2 = cubic(b, 0.0, 0.5);\r\n    x3 = cubic(b, 0.0, 0.0);\r\n    y0 = cubic(y, x0, x1);\r\n    y1 = cubic(y, x2, x3);\r\n    const blue = cubic(r, y0, y1);\r\n\r\n    return [red, green, blue];\r\n};\r\n\r\n\r\n\r\n\r\n// https://github.com/bahamas10/node-rgb2ryb/blob/master/rgb2ryb.js\r\n\r\n// if (typeof exports !== 'undefined') {\r\n//     module.exports = rgb2ryb;\r\n//     module.exports.rgb2ryb = rgb2ryb;\r\n//     module.exports.ryb2rgb = ryb2rgb;\r\n//     module.exports.complimentary = complimentary;\r\n//   }\r\n//   /*\r\n//    * Convert a red-green-blue system to a red-yellow-blue system.\r\n//    */\r\nexport const rgb2ryb = (r: number, g: number, b: number) => {\r\n      // Remove the whiteness from the color.\r\n      const w = Math.min(r, g, b);\r\n      r -= w;\r\n      g -= w;\r\n      b -= w;\r\n      const mg = Math.max(r, g, b);\r\n\r\n      // Get the yellow out of the red+green.\r\n      let y = Math.min(r, g);\r\n      r -= y;\r\n      g -= y;\r\n\r\n      // If this unfortunate conversion combines blue and green, then cut each in\r\n      // half to preserve the value's maximum range.\r\n      if (b && g) {\r\n          b /= 2.0;\r\n          g /= 2.0;\r\n      }\r\n\r\n      // Redistribute the remaining green.\r\n      y += g;\r\n      b += g;\r\n\r\n      // Normalize to values.\r\n      const my = Math.max(r, y, b);\r\n      if (my) {\r\n          const n = mg / my;\r\n          r *= n;\r\n          y *= n;\r\n          b *= n;\r\n      }\r\n\r\n      // Add the white back in.\r\n      r += w;\r\n      y += w;\r\n      b += w;\r\n\r\n      // And return back the ryb typed accordingly.\r\n      return [r, y, b];\r\n  };\r\n\r\n//   /**\r\n//    * Convert a red-yellow-blue system to a red-green-blue system.\r\n//    */\r\n//   function ryb2rgb(color) {\r\n//       var r = color[0], y = color[1], b = color[2];\r\n//       // Remove the whiteness from the color.\r\n//       var w = Math.min(r, y, b);\r\n//       r -= w;\r\n//       y -= w;\r\n//       b -= w;\r\n\r\n//       var my = Math.max(r, y, b);\r\n\r\n//       // Get the green out of the yellow and blue\r\n//       var g = Math.min(y, b);\r\n//       y -= g;\r\n//       b -= g;\r\n\r\n//       if (b && g) {\r\n//           b *= 2.0;\r\n//           g *= 2.0;\r\n//       }\r\n\r\n//       // Redistribute the remaining yellow.\r\n//       r += y;\r\n//       g += y;\r\n\r\n//       // Normalize to values.\r\n//       var mg = Math.max(r, g, b);\r\n//       if (mg) {\r\n//           var n = my / mg;\r\n//           r *= n;\r\n//           g *= n;\r\n//           b *= n;\r\n//       }\r\n\r\n//       // Add the white back in.\r\n//       r += w;\r\n//       g += w;\r\n//       b += w;\r\n\r\n//       // And return back the ryb typed accordingly.\r\n//       return [r, g, b];\r\n//   }\r\n\r\n//   /**\r\n//    * Return the complementary color values for a given color.\r\n//    * You must also give it the upper limit of the color values, typically 255 for\r\n//    * GUIs, 1.0 for OpenGL.\r\n//    */\r\n//   function complimentary(color, limit) {\r\n//       var r = color[0], g = color[1], b = color[2];\r\n//       limit = limit || 255;\r\n//       return [limit - r, limit - g, limit - b];\r\n//   }","// import { ConcaveCore } from './ConcaveCore';\r\n// import { CPoint } from '../../AppDrawing/Canvas/CGeometry/CPoint';\r\n// import { UNIT, MathUtility } from '../Utilities/MathUtility';\r\n\r\n// import { NWebassemblyController } from '../../../Webassembly/Core/NWebassemblyController/NWebassemblyController';\r\nexport class NVector3 {\r\n  public static eps: number = 0.0000001;\r\n  public static origin: NVector3 = new NVector3(0, 0, 0);\r\n  x: number = 0.0;\r\n  y: number = 0.0;\r\n  z: number = 0.0;\r\n  w: number = 0.0;\r\n  long: number = 0.0;\r\n  lat: number = 0.0;\r\n  ele: number = 0.0;\r\n  proX: number = 0.0;\r\n  proY: number = 0.0;\r\n  proZ: number = 0.0;\r\n  alt: number = 0.0;\r\n  d: boolean = true;\r\n  isModified: boolean = false;\r\n  color: string = '#000000';\r\n  isVisited: boolean = false;\r\n  // tslint:disable-next-line:no-any\r\n  parent: any;\r\n  public static GetVecforGraphicApp(long: number, lat: number, ele: number, proX: number, proY: number, proZ: number) {\r\n    let v = new NVector3(0, 0, 0);\r\n    v.long = long; v.lat = lat; v.ele = ele; v.proX = proX; v.proY = proY; v.proZ = proZ;\r\n    return v;\r\n  }\r\n  public static DeepCopy(v: NVector3): NVector3 {\r\n    const out = new NVector3(v.x, v.y, v.z);\r\n    out.long = v.long; out.lat = v.lat;\r\n    out.proX = v.proX; out.proY = v.proY; out.proZ = v.proZ;\r\n    return out;\r\n  }\r\n  public static Dot(a: NVector3, b: NVector3) {\r\n    return a.x * b.x + a.y * b.y + a.z * b.z;\r\n  }\r\n  // https://en.wikipedia.org/wiki/Shoelace_formula\r\n  // https://stackoverflow.com/questions/25122185/measuring-area-with-n-amount-of-gps-coordinates // no concave\r\n  public static GetAreayConvexGPS(vec: NVector3[]) {\r\n    let lats = [], longs = [];\r\n    for (let i = 0; i < vec.length; ++i) {\r\n      lats.push(vec[i].lat); longs.push(vec[i].long);\r\n    }\r\n    lats.push(vec[0].lat); longs.push(vec[0].long); // make sure to add the first term to the end of both arrays\r\n\r\n    let latsSum = 0, longSum = 0; // get the average center point of the polygon\r\n\r\n    for (let i = lats.length; i--;) {\r\n      latsSum += lats[i]; longSum += longs[i];\r\n    }\r\n\r\n    let latOrigin = latsSum / lats.length;\r\n    let lonOrigin = longSum / longs.length;\r\n\r\n    // translate origin to (0,0) by shifting lat long and calculate the standard angle of the point\r\n    let angles = new Array(lats.length);\r\n\r\n    for (let j = lats.length; j--;) {\r\n      lats[j] -= latOrigin;\r\n      longs[j] -= lonOrigin;\r\n\r\n      if (longs[j] >= 0 && lats[j] >= 0) {\r\n        angles[j] = Math.abs(Math.atan(lats[j] / longs[j]) * 180 / Math.PI);\r\n      } else if (longs[j] < 0 && lats[j] >= 0) {\r\n        angles[j] = 90 + Math.abs(Math.atan(lats[j] / longs[j]) * 180 / Math.PI);\r\n      } else if (longs[j] < 0 && lats[j] < 0) {\r\n        angles[j] = 180 + Math.abs(Math.atan(lats[j] / longs[j]) * 180 / Math.PI);\r\n      } else if (longs[j] >= 0 && lats[j] < 0) {\r\n        angles[j] = 270 + Math.abs(Math.atan(lats[j] / longs[j]) * 180 / Math.PI);\r\n      }\r\n    }\r\n\r\n    // re-arrange the points from least to greatest angle\r\n    let curAng, curLat, curLon;\r\n\r\n    for (let l = 0; l < angles.length; l++) {\r\n      for (let k = 0; k < angles.length - 1; k++) {\r\n        curAng = angles[k];\r\n        curLat = lats[k];\r\n        curLon = longs[k];\r\n\r\n        if (curAng < angles[k + 1]) {\r\n          angles[k] = angles[k + 1];\r\n          lats[k] = lats[k + 1];\r\n          longs[k] = longs[k + 1];\r\n\r\n          angles[k + 1] = curAng;\r\n          lats[k + 1] = curLat;\r\n          longs[k + 1] = curLon;\r\n        }\r\n      }\r\n    }\r\n\r\n    // calculate area for irregular polygon\r\n    let sum1 = 0, sum2 = 0;\r\n\r\n    for (let t = 0; t < lats.length; t++) {\r\n      if (t !== lats.length - 1) {\r\n        sum1 += lats[t] * longs[t + 1];\r\n        sum2 += longs[t] * lats[t + 1];\r\n      } else {\r\n        sum1 += lats[t] * longs[0];\r\n        sum2 += longs[t] * lats[0];\r\n      }\r\n    }\r\n\r\n    let area = (sum1 - sum2) / 2.0;\r\n    // console.log('Area: ' + area * 6378137.0 * 6378137.0 / 2.0);\r\n    return area * 20; // * 6378137.0 * 6378137.0 / 2.0;\r\n  }\r\n  public static ScalarRev_V_S_OUT(v: NVector3, s: number, out: NVector3) {\r\n    out.x = s * v.x;\r\n    out.y = s * v.y;\r\n    out.z = s * v.z;\r\n    return out;\r\n  }\r\n  public static Add(v0: NVector3, v1: NVector3): NVector3 {\r\n    return new NVector3(v0.x + v1.x, v0.y + v1.y, v0.z + v1.z);\r\n  }\r\n  public static Sub(v0: NVector3, v1: NVector3): NVector3 {\r\n    return new NVector3(v0.x - v1.x, v0.y - v1.y, v0.z - v1.z);\r\n  }\r\n  public static Clone(v: NVector3): NVector3 {\r\n    return NVector3.DeepCopy(v);\r\n  }\r\n  public static ZAxis(): NVector3 {\r\n    return new NVector3(0, 0, 1);\r\n  }\r\n  public static YAxis(): NVector3 {\r\n    return new NVector3(0, 1, 0);\r\n  }\r\n  public static Zero(): NVector3 {\r\n    return new NVector3(0, 0, 0);\r\n  }\r\n  public static Origin(): NVector3 {\r\n    return new NVector3(0, 0, 0);\r\n  }\r\n  public static Plus(v1: NVector3, v2: NVector3): NVector3 {\r\n    return new NVector3(v1.x + v2.x, v1.y + v2.y, v1.z + v2.z);\r\n  }\r\n  public static Scale(v: NVector3, s: number): NVector3 {\r\n    return new NVector3(v.x * s, v.y * s, v.z * s);\r\n  }\r\n  public static MidVec(v1: NVector3, v2: NVector3): NVector3 {\r\n    return new NVector3((v1.x + v2.x) * 0.5, (v1.y + v2.y) * 0.5, (v1.z + v2.z) * 0.5);\r\n  }\r\n  public static CompareTwoVectors(v0: NVector3, v1: NVector3): boolean {\r\n    if (v0.x !== v1.x || v0.y !== v1.y || v0.z !== v1.z) {\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n  }\r\n  public static CompareTwoVectorsByGeoPos(v0: NVector3, v1: NVector3, toFixed: number = 4): boolean {\r\n    if (v0.long.toFixed(toFixed) !== v1.long.toFixed(toFixed) || v0.lat.toFixed(toFixed) !== v1.lat.toFixed(toFixed)) {\r\n      return false;\r\n    } else {\r\n      return true;\r\n    }\r\n    // let tor = 0.00000000001;\r\n    // if ((v1.long - v0.long) >  tor  || (v1.lat - v0.lat) > tor ) {\r\n    //   return false;\r\n    // } else {\r\n    //   return true;\r\n    // }\r\n  }\r\n  public static Length(v: NVector3): number {\r\n    return Math.sqrt(v.x * v.x + v.y * v.y + v.z * v.z);\r\n  }\r\n  public static Normalize(v: NVector3): NVector3 {\r\n    let len: number = Math.sqrt(v.x * v.x + v.y * v.y + v.z * v.z);\r\n    return new NVector3(v.x / len, v.y / len, v.z / len);\r\n  }\r\n  // https://web.archive.org/web/20090214201206/http://valis.cs.uiuc.edu:80/~sariel/research/CG/compgeom/msg00827.html\r\n  public static GetArea(vs: NVector3[]) {\r\n    let area = 0;\r\n    // // double center2dx = 0;\r\n    // // double center2dy = 0;\r\n    // for (let i = 0; i < vs.length - 1; i++) {\r\n    //   // tmreal t = 2 * vs[i].X * vs[i + 0].Y + vs[i].Y * vs[i + 1].X + vs[i].X * vs[i + 1].Y + 2 * vs[i + 1].X * vs[i + 1].Y;\r\n    //   area += (vs[i].x - vs[i + 1].x) * (vs[i].y + vs[i + 1].y);\r\n    //   // center2d.x += (+vs[i].X - vs[i + 1].X) * t;\r\n    //   // center2d.y += (-vs[i].Y + vs[i + 1].Y) * t;\r\n    // }\r\n    // area *= 0.5;\r\n    // // center2dx *= 1 / (6 * area);\r\n    // // center2dy *= 1 / (6 * area);\r\n    // return area;\r\n\r\n    for (let i = 0, l = vs.length; i < l; i++) {\r\n      let addX = vs[i].x;\r\n      let addY = vs[i === vs.length - 1 ? 0 : i + 1].y;\r\n      let subX = vs[i === vs.length - 1 ? 0 : i + 1].x;\r\n      let subY = vs[i].y;\r\n\r\n      area += (addX * addY * 0.5);\r\n      area -= (subX * subY * 0.5);\r\n    }\r\n\r\n    return Math.abs(area);\r\n  }\r\n  public static GetAreaByLongLat(vs: NVector3[]) {\r\n    let area = 0;\r\n    // double center2dx = 0;\r\n    // double center2dy = 0;\r\n    for (let i = 0; i < vs.length - 1; i++) {\r\n      // tmreal t = 2 * vs[i].X * vs[i + 0].Y + vs[i].Y * vs[i + 1].X + vs[i].X * vs[i + 1].Y + 2 * vs[i + 1].X * vs[i + 1].Y;\r\n      area += (vs[i].long - vs[i + 1].long) * (vs[i].lat + vs[i + 1].lat);\r\n      // center2d.x += (+vs[i].X - vs[i + 1].X) * t;\r\n      // center2d.y += (-vs[i].Y + vs[i + 1].Y) * t;\r\n    }\r\n    area *= 0.5;\r\n    // center2dx *= 1 / (6 * area);\r\n    // center2dy *= 1 / (6 * area);\r\n    return area;\r\n  }\r\n  public static GetGeoArea(vs: NVector3[]) {\r\n    let area = 0;\r\n    for (let i = 0; i < vs.length - 1; i++) {\r\n      area += (vs[i].x - vs[i + 1].x) * (vs[i].y + vs[i + 1].y);\r\n    }\r\n    area *= 0.5;\r\n    return Math.abs(area);\r\n  }\r\n  public static GetGeoAreaBbyLongLat(vs: NVector3[]) {\r\n    let area = 0;\r\n    for (let i = 0; i < vs.length - 1; i++) {\r\n      area += (vs[i].long - vs[i + 1].long) * (vs[i].lat + vs[i + 1].lat);\r\n    }\r\n    area *= 0.5;\r\n    return Math.abs(area);\r\n  }\r\n  public static GetIndexByShortDistance(v: NVector3, vs: NVector3[]): number[] {\r\n    let index = -1;\r\n    let dis = Number.MAX_SAFE_INTEGER;\r\n    for (let i = 0; i < vs.length; ++i) {\r\n      let distance = NVector3.Distance(v, vs[i]);\r\n      if (distance < dis) {\r\n        dis = distance;\r\n        index = i;\r\n      }\r\n    }\r\n    return [index, dis];\r\n  }\r\n  public static Distance(v0: NVector3, v1: NVector3): number {\r\n    return Math.sqrt((v0.x - v1.x) * (v0.x - v1.x) + (v0.y - v1.y) * (v0.y - v1.y) + (v0.z - v1.z) * (v0.z - v1.z));\r\n    // return NWebassemblyController.ctrller.Distance(v0.x, v0.y, v0.z, v1.x, v1.y, v1.z);\r\n  }\r\n  public static DistanceByArray(v0: number[], v1: number[]): number {\r\n    return Math.sqrt((v0[0] - v1[0]) * (v0[0] - v1[0]) + (v0[1] - v1[1]) * (v0[1] - v1[1]) + (v0[2] - v1[2]) * (v0[2] - v1[2]));\r\n  }\r\n  public static Distance2(v1: NVector3, v2: NVector3): number {\r\n    let d: number =\r\n      (v1.x - v2.x) * (v1.x - v2.x) +\r\n      (v1.y - v2.y) * (v1.y - v2.y) +\r\n      (v1.z - v2.z) * (v1.z - v2.z);\r\n    return d;\r\n  }\r\n  public static DotProduct(v1: NVector3, v2: NVector3): number {\r\n    return v1.x * v2.x + v1.y * v2.y + v1.z * v2.z;\r\n  }\r\n  public static CrossProduct(v1: NVector3, v2: NVector3): NVector3 {\r\n    return new NVector3(\r\n      v1.y * v2.z - v1.z * v2.y,\r\n      v1.z * v2.x - v1.x * v2.z,\r\n      v1.x * v2.y - v1.y * v2.x\r\n    );\r\n  }\r\n  public static DivideByNum(v0: NVector3, v1: NVector3, n: number = 5): NVector3[] {\r\n    let vs: NVector3[] = [];\r\n    let xOff = (v1.x - v0.x) / n;\r\n    let yOff = (v1.y - v0.y) / n;\r\n    let zOff = (v1.z - v0.z) / n;\r\n    for (let j = 0; j < n; ++j) {\r\n      let x = v0.x + xOff * j;\r\n      let y = v0.y + yOff * j;\r\n      let z = v0.z + zOff * j;\r\n      vs.push(new NVector3(x, y, z));\r\n    }\r\n    return vs;\r\n  }\r\n  // static DistancefromGeoV(v0: NVector3, v1: NVector3, unit: UNIT = CGeometry.appDrawing.activeCommands.unit): number {\r\n  //   let dis = NVector3.KMeterFromGeoGPSPos(v0, v1);\r\n  //   if (unit === UNIT.METER) { return dis * 1000; }\r\n  //   if (unit === UNIT.KM) { return dis; }\r\n  //   if (unit === UNIT.MILE) { return MathUtility.MilesFromKM(dis); }\r\n  //   return -1;\r\n  // }\r\n  public static KMeterFromGeoGPSPos(gV0: NVector3, gV1: NVector3): number {\r\n    let R = 6378.137; // Radius of earth in KM // a = Equatorial radius (6,378.1370 km) // b = Polar radius (6,356.7523 km)\r\n    let dLat = gV1.lat * Math.PI / 180 - gV0.lat * Math.PI / 180;\r\n    let dLon = gV1.long * Math.PI / 180 - gV0.long * Math.PI / 180;\r\n    let a =\r\n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n      Math.cos(gV0.lat * Math.PI / 180) *\r\n      Math.cos(gV1.lat * Math.PI / 180) *\r\n      Math.sin(dLon / 2) *\r\n      Math.sin(dLon / 2);\r\n    let c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n    let d = R * c;\r\n    return d; // * 1000; // meters\r\n  }\r\n  public static KMeterByTwoGeoPos(long0: number, lat0: number, long1: number, lat1: number) {\r\n    let v0 = new NVector3(0, 0); v0.long = long0; v0.lat = lat0;\r\n    let v1 = new NVector3(0, 0); v1.long = long1; v1.lat = lat1;\r\n    return NVector3.KMeterFromGeoGPSPos(v0, v1);\r\n  }\r\n  public static KMeterFromGPSPos(gV0: NVector3, gV1: NVector3): number {\r\n    let R = 6378.137; // Radius of earth in KM // a = Equatorial radius (6,378.1370 km) // b = Polar radius (6,356.7523 km)\r\n    let dLat = gV1.y * Math.PI / 180 - gV0.y * Math.PI / 180;\r\n    let dLon = gV1.x * Math.PI / 180 - gV0.x * Math.PI / 180;\r\n    let a =\r\n      Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n      Math.cos(gV0.y * Math.PI / 180) *\r\n      Math.cos(gV1.y * Math.PI / 180) *\r\n      Math.sin(dLon / 2) *\r\n      Math.sin(dLon / 2);\r\n    let c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n    let d = R * c;\r\n    return d; // * 1000; // meters\r\n  }\r\n  public static Get1KM_Long_ByGeoUnit(long: number = 0, lat: number = 0): number {\r\n    let v = new NVector3(long, lat, 0);\r\n    let addition = 0.0;\r\n    for (let i = 0; i < 10000; ++i) {\r\n      let dis = NVector3.KMeterFromGPSPos(v, new NVector3(v.x + addition, v.y, v.z));\r\n      if (1 < dis && dis < 1.001) {\r\n        // console.log('result long', i, dis);\r\n        return v.x + addition;\r\n      }\r\n      addition += 0.00001;\r\n    }\r\n    return -1;\r\n  }\r\n  public static Get1KM_lat_ByGeoUnit(long: number = 0, lat: number = 0): number {\r\n    let v = new NVector3(long, lat, 0);\r\n    let addition = 0.0;\r\n    for (let i = 0; i < 10000; ++i) {\r\n      let dis = NVector3.KMeterFromGPSPos(v, new NVector3(v.x, v.y + addition, v.z));\r\n      if (1 < dis && dis < 1.001) {\r\n        // console.log('result lat', i, dis);\r\n        return v.y + addition;\r\n      }\r\n      addition += 0.00001;\r\n    }\r\n    return -1;\r\n  }\r\n  public static Get1KM_Lat_Long_GeoUnit(long: number = 0, lat: number = 0): NVector3 {\r\n    let lng = NVector3.Get1KM_Long_ByGeoUnit(long, lat);\r\n    let la = NVector3.Get1KM_lat_ByGeoUnit(long, lat);\r\n    return new NVector3(lng, la, 0);\r\n  }\r\n  // ............................................................................ vec compute\r\n  // static CalculateFalloff(pts: NVector3[], pt: NVector3, s: number, f: number): number {\r\n  //   let newValue = 0.0;\r\n  //   for (let i = 0; i < pts.length; ++i) {\r\n  //     // let v = NJS.PointUtils.CalculateFalloff(pt, pts[i], s, f);\r\n  //     // newValue += v;\r\n  //   }\r\n  //   return newValue;\r\n  // }\r\n  public static CalculateFalloff(pt: NVector3, attractor: NVector3, strength: number, falloff: number): number {\r\n    let v: NVector3 = attractor.Sub(pt);\r\n    let dist: number = v.Length();\r\n    return dist * (strength * Math.exp(-falloff * dist * dist));\r\n  }\r\n  public static Attractor(pt: NVector3, attractor: NVector3, strength: number, falloff: number): NVector3 {\r\n    let v: NVector3 = attractor.Sub(pt);\r\n    v.Unitize();\r\n    let dist = v.Length();\r\n    return v.Mult(strength * Math.exp(-falloff * dist * dist));\r\n  }\r\n  public static Explosion(pt: NVector3, Explosion: NVector3, strength: number, falloff: number): NVector3 {\r\n    let v = Explosion.Sub(pt);\r\n    v.Unitize();\r\n    let dist = v.Length();\r\n    return v.Mult(-(strength * Math.exp(-falloff * dist * dist)));\r\n  }\r\n  public static Rotor(pt: NVector3, rotor: NVector3, strength: number, falloff: number): NVector3 {\r\n    let v = rotor.Sub(pt);\r\n    v.Unitize();\r\n    // v.Rotate(3.141592 / 2, NVector3.zAxis);\r\n    // let dist: number = v.Length;\r\n    // return (v.Mult (strength * (Math.exp(-falloff * dist * dist))));\r\n    return NVector3.Origin();\r\n  }\r\n\r\n  // ............................................................................ vec angle\r\n  public static GetAngleBetween(v0: NVector3, v1: NVector3) {\r\n    return Math.atan2(v1.x - v0.x, v1.y - v0.y);\r\n  }\r\n  // .................................................\r\n  public static GetCosAngleByTwoVectors(v0: NVector3, v1: NVector3): number {\r\n    return NVector3.DotProduct(NVector3.Normalize(v0), NVector3.Normalize(v1));\r\n  }\r\n  public static GetAngleByTwoVectorsRadian(v0: NVector3, v1: NVector3): number {\r\n    return Math.acos(NVector3.GetCosAngleByTwoVectors(v0, v1));\r\n  }\r\n  public static GetAngleByTwoVectors(v0: NVector3, v1: NVector3): number {\r\n    return NVector3.GetAngleByTwoVectorsRadian(v0, v1) * 180.0 / Math.PI;\r\n  }\r\n  public static GetRotationByWorldCoodinate(v: NVector3): number {\r\n    let origin = new NVector3(1, 0, 0);\r\n    return NVector3.GetAngleByTwoVectors(origin, v);\r\n  }\r\n  public static GetRotationByWorldCoodinateByTwo(v0: NVector3, v1: NVector3): number {\r\n    let v = v1.Sub(v0);\r\n    let origin = new NVector3(1, 0, 0);\r\n    if (v.y > 0) {\r\n      return NVector3.GetAngleByTwoVectors(origin, v) * -1;\r\n    } else {\r\n      return NVector3.GetAngleByTwoVectors(origin, v);\r\n    }\r\n  }\r\n  // ............................................................................\r\n  // static ToJSon(v) {\r\n  // var p = {\r\n  //             'point': [],\r\n  //             'primitive': 'point',\r\n  //             'units': {\r\n  //             'point': 'meters'\r\n  //         }\r\n  // }\r\n  // p.point = [v.x , v.y, v.z];\r\n  // return p;\r\n  // }\r\n  public static ComputeDotProducts(vs: NVector3[]) {\r\n    let out = [];\r\n    for (let i = 0; i < vs.length; ++i) {\r\n      // let v0: NVector3 = NVector3.Origin();\r\n      // let v1: NVector3;\r\n      if (i < vs.length - 1) {\r\n        let v0 = new NVector3(vs[i].x, vs[i].y, vs[i].z);\r\n        let v1 = new NVector3(vs[i + 1].x, vs[i + 1].y, vs[i + 1].z);\r\n\r\n        v1.x -= v0.x;\r\n        v1.y -= v0.y;\r\n        v1.z -= v0.z;\r\n\r\n        let dot = NVector3.DotProduct(new NVector3(1, 0, 0), NVector3.Normalize(v1));\r\n        out.push(dot);\r\n      } else {\r\n        let v0 = new NVector3(vs[i].x, vs[i].y, vs[i].z);\r\n        let v1 = new NVector3(vs[0].x, vs[0].y, vs[0].z);\r\n\r\n        v1.x -= v0.x;\r\n        v1.y -= v0.y;\r\n        v1.z -= v0.z;\r\n\r\n        let dot = NVector3.DotProduct(new NVector3(1, 0, 0), NVector3.Normalize(v1));\r\n        out.push(dot);\r\n      }\r\n    }\r\n    return out;\r\n  }\r\n  public static ComputeDotProductsWithCenter(vs: NVector3[]) {\r\n    let cp = NVector3.GetCenterVecFromVecs(vs);\r\n    let out = [];\r\n    for (let i = 0; i < vs.length; ++i) {\r\n      let v0: NVector3;\r\n      let v1: NVector3;\r\n      if (i < vs.length - 1) {\r\n        v0 = new NVector3(vs[i].x - cp.x, vs[i].y - cp.y, vs[i].z - cp.z);\r\n        v1 = new NVector3(vs[i + 1].x - cp.x, vs[i + 1].y - cp.y, vs[i + 1].z - cp.z);\r\n      } else {\r\n        v0 = new NVector3(vs[i].x - cp.x, vs[i].y - cp.y, vs[i].z - cp.z);\r\n        v1 = new NVector3(vs[0].x - cp.x, vs[0].y - cp.y, vs[0].z - cp.z);\r\n      }\r\n      let dot = NVector3.DotProduct(NVector3.Normalize(v0), NVector3.Normalize(v1));\r\n      out.push(dot);\r\n    }\r\n    return out;\r\n  }\r\n  public static GetXYDimForCircle(vs: NVector3[]) {\r\n    let cp = NVector3.GetCenterVecFromVecs(vs);\r\n    // let out = [];\r\n    let xx: number = 0;\r\n    let yy: number = 0;\r\n    let len = vs.length;\r\n    for (let i = 0; i < len; ++i) {\r\n\r\n      // if (i < vs.length - 1) {\r\n      xx += Math.abs(vs[i].x - cp.x);\r\n      yy += Math.abs(vs[i].y - cp.y);\r\n      // v0 = new NVector3(vs[i].x - cp.x, vs[i].y - cp.y, vs[i].z - cp.z);\r\n      // v1 = new NVector3(vs[i + 1].x - cp.x, vs[i + 1].y - cp.y, vs[i + 1].z - cp.z);\r\n      // } else {\r\n      // v0 = new NVector3(vs[i].x - cp.x, vs[i].y - cp.y, vs[i].z - cp.z);\r\n      // v1 = new NVector3(vs[0].x - cp.x, vs[0].y - cp.y, vs[0].z - cp.z);\r\n      // }\r\n      // let dot = NVector3.DotProduct(NVector3.Normalize(v0), NVector3.Normalize(v1));\r\n      // out.push(dot);\r\n    }\r\n    len += 2;\r\n    return [xx / len, yy / len];\r\n  }\r\n\r\n  public static DistanceMouseWithTwoVecs(m: NVector3, v0: NVector3, v1: NVector3): number {\r\n    v0.x += 0.00001;\r\n    v0.y += 0.00001;\r\n    let boundary = NVector3.GetBoundingVecs(v0, v1);\r\n    let vec = NVector3.GetCloseVec(v0, v1, m.x, m.y, boundary, true);\r\n    return NVector3.Distance(m, vec);\r\n  }\r\n  public static GetCloseVec(p0: NVector3, p1: NVector3, x: number, y: number, vecsBound: NVector3[], OnLine: boolean = true): NVector3 {\r\n    let pp1: NVector3 = new NVector3(p0.x, p0.y, p0.z);\r\n    let pp2: NVector3 = new NVector3(p1.x, p1.y, p1.z);\r\n    let v1: NVector3 = pp2.Sub(pp1);\r\n    let p: NVector3 = new NVector3(x, y, 0);\r\n    let v2: NVector3 = p.Sub(pp1);\r\n    v1.Unitize();\r\n    let cp = pp1.Add(v1.Mult(v2.DotProduct(v1)));\r\n    if (OnLine) {\r\n      if (NVector3.IsInsideOfVecs(cp, vecsBound)) {\r\n        return cp;\r\n      } else {\r\n        if (p0.Distance(cp) < p1.Distance(cp)) {\r\n          return new NVector3(p0.x, p0.y, p0.z);\r\n        } else {\r\n          return new NVector3(p1.x, p1.y, p1.z);\r\n        }\r\n      }\r\n    } else {\r\n      return cp;\r\n    }\r\n  }\r\n  public static GetBoundingVecs(v0: NVector3, v1: NVector3): NVector3[] {\r\n    let listOfVec: NVector3[] = [];\r\n    let x: number = 0;\r\n    let y: number = 0;\r\n    let z: number = 0;\r\n    if (v0.x < v1.x) { x = v0.x; } else { x = v1.x; }\r\n    if (v0.y < v1.y) { y = v0.y; } else { y = v1.y; }\r\n    if (v0.z < v1.z) { z = v0.z; } else { z = v1.z; }\r\n    let nv0 = new NVector3(x, y, z);\r\n    if (v0.x > v1.x) { x = v0.x; } else { x = v1.x; }\r\n    if (v0.y > v1.y) { y = v0.y; } else { y = v1.y; }\r\n    if (v0.z > v1.z) { z = v0.z; } else { z = v1.z; }\r\n    let nv1 = new NVector3(x, y, z);\r\n    listOfVec.push(new NVector3(nv0.x, nv0.y, nv0.z));\r\n    listOfVec.push(new NVector3(nv1.x, nv0.y, nv0.z));\r\n    listOfVec.push(new NVector3(nv1.x, nv1.y, nv0.z));\r\n    listOfVec.push(new NVector3(nv0.x, nv1.y, nv0.z));\r\n    return listOfVec;\r\n  }\r\n  public static GetBoundaryByVecWidthHeight(v: NVector3, width: number, height: number): NVector3[] {\r\n    let boundarVecsSub = [];\r\n    boundarVecsSub.push(new NVector3(v.x, v.y, v.z));\r\n    boundarVecsSub.push(new NVector3(v.x + width, v.y, v.z));\r\n    boundarVecsSub.push(new NVector3(v.x + width, v.y + height, v.z));\r\n    boundarVecsSub.push(new NVector3(v.x, v.y + height, v.z));\r\n    return boundarVecsSub;\r\n  }\r\n  public static GetBoundingByVecs(vs: NVector3[]): NVector3[] {\r\n    let listOfVec: NVector3[] = [];\r\n    let xMin: number = Number.MAX_SAFE_INTEGER;\r\n    let yMin: number = Number.MAX_SAFE_INTEGER;\r\n    let zMin: number = Number.MAX_SAFE_INTEGER;\r\n\r\n    let xMax: number = Number.MIN_SAFE_INTEGER;\r\n    let yMax: number = Number.MIN_SAFE_INTEGER;\r\n    let zMax: number = Number.MIN_SAFE_INTEGER;\r\n    for (let i = 0; i < vs.length; ++i) {\r\n\r\n      if (xMin > vs[i].x) { xMin = vs[i].x; }\r\n      if (yMin > vs[i].y) { yMin = vs[i].y; }\r\n      if (zMin > vs[i].z) { zMin = vs[i].z; }\r\n\r\n      if (xMax < vs[i].x) { xMax = vs[i].x; }\r\n      if (yMax < vs[i].y) { yMax = vs[i].y; }\r\n      if (zMax < vs[i].z) { zMax = vs[i].z; }\r\n\r\n    }\r\n    listOfVec.push(new NVector3(xMin, yMin, zMin));\r\n    listOfVec.push(new NVector3(xMax, yMax, zMax));\r\n    return listOfVec;\r\n  }\r\n  public static GetMinMaxVecFromVecs(vec: NVector3[]): NVector3[] {\r\n    let minX = Number.MAX_VALUE, minY = Number.MAX_VALUE, minZ = Number.MAX_VALUE;\r\n    let maxX = Number.MIN_VALUE, maxY = Number.MIN_VALUE, maxZ = Number.MIN_VALUE;\r\n    for (let v of vec) {\r\n      if (minX > v.x) { minX = v.x; } if (minY > v.y) { minY = v.y; } if (minZ > v.z) { minZ = v.z; }\r\n      if (maxX < v.x) { maxX = v.x; } if (maxY < v.y) { maxY = v.y; } if (maxZ < v.z) { maxZ = v.z; }\r\n    }\r\n    return [new NVector3(minX, minY, minZ), new NVector3(maxX, maxY, maxZ)];\r\n  }\r\n  public static RemoveVecsWithinDis(vs: NVector3[], tor: number = 10): NVector3[] {\r\n    let vecs: NVector3[] = [];\r\n    for (let i = 0; i < vs.length - 1; ++i) {\r\n      let v0 = vs[i];\r\n      if (v0.d === false) { continue; }\r\n      for (let j = i + 1; j < vs.length; ++j) {\r\n        if (NVector3.Distance(v0, vs[j]) < tor) { vs[j].d = false; }\r\n      }\r\n    }\r\n    for (let i = 0; i < vs.length; ++i) { if (vs[i].d === true) { vecs.push(vs[i]); } }\r\n    // vecs.push(vs[vs.length - 1]);\r\n    return vecs;\r\n  }\r\n  // ...............................................................................\r\n  public static IsInsideOfVecsWtihVecs(vs: NVector3[], vecs: NVector3[]): boolean {\r\n    let inside: boolean = true;\r\n    for (let i = 0; i < vs.length; i++) {\r\n      inside = NVector3.IsInsideOfVecs(vs[i], vecs);\r\n      if (!inside) {\r\n        return false;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n  public static IsInsideOfVecs(v: NVector3, vecs: NVector3[]): boolean {\r\n    // ray-casting algorithm based on https://github.com/substack/point-in-polygon\r\n    // http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\r\n    let x = v.x, y = v.y;\r\n    let inside = false;\r\n    for (let i = 0, j = vecs.length - 1; i < vecs.length; j = i++) {\r\n      let xi = vecs[i].x, yi = vecs[i].y;\r\n      let xj = vecs[j].x, yj = vecs[j].y;\r\n      let intersect = yi > y !== yj > y && x < (xj - xi) * (y - yi) / (yj - yi) + xi;\r\n      if (intersect) {\r\n        inside = !inside;\r\n      }\r\n    }\r\n    return inside;\r\n  }\r\n  public static IsInsideOfVecsByArray(v: number[], vecs: number[][]): boolean {\r\n    // ray-casting algorithm based on https://github.com/substack/point-in-polygon\r\n    // http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\r\n    let x = v[0], y = v[1];\r\n    let inside = false;\r\n    for (let i = 0, j = vecs.length - 1; i < vecs.length; j = i++) {\r\n      let xi = vecs[i][0], yi = vecs[i][1];\r\n      let xj = vecs[j][0], yj = vecs[j][1];\r\n      let intersect = yi > y !== yj > y && x < (xj - xi) * (y - yi) / (yj - yi) + xi;\r\n      if (intersect) {\r\n        inside = !inside;\r\n      }\r\n    }\r\n    return inside;\r\n  }\r\n  public static IsInsideOfVecsByCrossing(v: NVector3, w: number, h: number, vs: NVector3[]) {\r\n    if (this.IsInsideOfVecs(new NVector3(v.x - w * 0.5, v.y - h * 0.5), vs)) { return true; }\r\n    if (this.IsInsideOfVecs(new NVector3(v.x + w * 0.5, v.y - h * 0.5), vs)) { return true; }\r\n    if (this.IsInsideOfVecs(new NVector3(v.x + w * 0.5, v.y + h * 0.5), vs)) { return true; }\r\n    if (this.IsInsideOfVecs(new NVector3(v.x - w * 0.5, v.y + h * 0.5), vs)) { return true; }\r\n    return false;\r\n  }\r\n  public static IsInsideOfVecsByConcaveHull(v: NVector3, vs: NVector3[]) {\r\n    // let vsNum: number[][] = [];\r\n    // for (let i = 0; i < vs.length; ++i) {\r\n    //   vsNum.push([vs[i].x, vs[i].y]);\r\n    // }\r\n\r\n    // let result = ConcaveCore.hull(vsNum, 20)\r\n    // console.log(vs.length);\r\n    // console.log(result);\r\n\r\n    // for (let i = 0; i < result.length; ++i) {\r\n    //   new CPoint(result[i][0], result[i][1]);\r\n    // }\r\n  }\r\n  // Convex hull\r\n  // https://en.wikibooks.org/wiki/Algorithm_Implementation/Geometry/Convex_hull/Monotone_chain\r\n  public static IsInsideOfVecsByConvexHull(v: NVector3, vecs: NVector3[]): boolean {\r\n    vecs = NVector3.ConvexHull(vecs);\r\n    if (NVector3.IsInsideOfVecs(v, vecs)) { return true; } else { return false; }\r\n  }\r\n  public static ConvexHull(vs: NVector3[]): NVector3[] {\r\n    vs.sort(function (a: NVector3, b: NVector3) {\r\n      return a.x === b.x ? a.y - b.y : a.x - b.x;\r\n    });\r\n    let lower: NVector3[] = [];\r\n    for (let i = 0; i < vs.length; i++) {\r\n      while (lower.length >= 2 && NVector3.Cross(lower[lower.length - 2], lower[lower.length - 1], vs[i]) <= 0) { lower.pop(); }\r\n      lower.push(vs[i]);\r\n    }\r\n    let upper: NVector3[] = [];\r\n    for (let i = vs.length - 1; i >= 0; i--) {\r\n      while (upper.length >= 2 && NVector3.Cross(upper[upper.length - 2], upper[upper.length - 1], vs[i]) <= 0) { upper.pop(); }\r\n      upper.push(vs[i]);\r\n    }\r\n    upper.pop(); lower.pop();\r\n    for (let i = 0; i < upper.length; ++i) { lower.push(upper[i]); }\r\n    return lower;\r\n  }\r\n  public static Cross(O: NVector3, A: NVector3, B: NVector3): number {\r\n    return (A.x - O.x) * (B.y - O.y) - (A.y - O.y) * (B.x - O.x);\r\n  }\r\n  public static Cross_A_B_OUT(a: NVector3, b: NVector3, out: NVector3) {\r\n    const ax = a.x, ay = a.y, az = a.z, bx = b.x, by = b.y, bz = b.z;\r\n    out.x = ay * bz - az * by;\r\n    out.y = az * bx - ax * bz;\r\n    out.z = ax * by - ay * bx;\r\n    return out;\r\n  }\r\n  public static CheckBoundIntersection(vs: NVector3[], p0: NVector3, p1: NVector3) {\r\n    for (let i = 0; i < vs.length - 1; ++i) {\r\n      if (this.CheckLineIntersection(vs[i], vs[i + 1], p0, p1)) {\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n  // http://jsfiddle.net/justin_c_rounds/Gd2S2/light/\r\n  public static CheckLineIntersection(p0: NVector3, p1: NVector3, p2: NVector3, p3: NVector3) {\r\n    // if the lines intersect, the result contains the x and y of the intersection (treating the lines as infinite) and booleans for whether line segment 1 or line segment 2 contain the point\r\n    let denominator: number = 0, a: number = 0, b: number = 0, numerator1: number = 0, numerator2: number = 0;\r\n    let onLine0: boolean = false, onLine1: boolean = false;\r\n    denominator = ((p3.y - p2.y) * (p1.x - p0.x)) - ((p3.x - p2.x) * (p1.y - p0.y));\r\n    let result: NVector3 = new NVector3(0, 0, 0);\r\n    if (denominator === 0) { return undefined; }\r\n    a = p0.y - p2.y;\r\n    b = p0.x - p2.x;\r\n    numerator1 = ((p3.x - p2.x) * a) - ((p3.y - p2.y) * b);\r\n    numerator2 = ((p1.x - p0.x) * a) - ((p1.y - p0.y) * b);\r\n    a = numerator1 / denominator;\r\n    b = numerator2 / denominator;\r\n\r\n    // if we cast these lines infinitely in both directions, they intersect here:\r\n    result.x = p0.x + (a * (p1.x - p0.x));\r\n    result.y = p0.y + (a * (p1.y - p0.y));\r\n    /*\r\n            // it is worth noting that this should be the same as:\r\n            x = p2.x + (b * (p3.x - p2.x));\r\n            y = p2.x + (b * (p3.y - p2.y));\r\n            */\r\n    // if line1 is a segment and line2 is infinite, they intersect if:\r\n    if (a > 0 && a < 1) {\r\n      onLine0 = true;\r\n    }\r\n    // if line2 is a segment and line1 is infinite, they intersect if:\r\n    if (b > 0 && b < 1) {\r\n      onLine1 = true;\r\n    }\r\n    // if line1 and line2 are segments, they intersect if both of the above are true\r\n    if (onLine0 && onLine1) {\r\n      return result;\r\n    } else { return undefined; }\r\n  }\r\n  // http://www.sunshine2k.de/coding/java/Polygon/Convex/polygon.htm\r\n  public static CheckConvexity(vs: NVector3[]) {\r\n    if (vs.length < 3) { return false; }\r\n\r\n    let p: NVector3;\r\n    let v: NVector3;\r\n    let u: NVector3;\r\n    let res = 0;\r\n\r\n    for (let i = 0; i < vs.length; i++) {\r\n      p = vs[i];\r\n      let tmp = vs[(i + 1) % vs.length];\r\n      v = new NVector3(tmp.x - p.x, tmp.y - p.y, 0);\r\n      u = vs[(i + 2) % vs.length];\r\n\r\n      if (i === 0) { // in first loop direction is unknown, so save it in res\r\n        res = u.x * v.y - u.y * v.x + v.x * p.y - v.y * p.x;\r\n      } else {\r\n        let newres = u.x * v.y - u.y * v.x + v.x * p.y - v.y * p.x;\r\n        if ((newres > 0 && res < 0) || (newres < 0 && res > 0)) { return false; }\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n  //////////////////////////////////////////////////////////////////////////////// translation Utility\r\n  public static MoveVecs(vecs: NVector3[], dir: NVector3): NVector3[] {\r\n    let temp: NVector3[] = [];\r\n    for (let i = 0; i < vecs.length; ++i) {\r\n      //\r\n      temp.push(NVector3.MoveVec(vecs[i], dir));\r\n    }\r\n    return temp;\r\n  }\r\n  public static MoveVec(v: NVector3, dir: NVector3): NVector3 {\r\n    return new NVector3(v.x + dir.x, v.y + dir.y, v.z + dir.z);\r\n  }\r\n  public static RotateVecsLoal(vecs: NVector3[], angle: number): NVector3[] {\r\n    let cptToLocal = NVector3.GetCenterVecFromVecs(vecs);\r\n    let cptToWorld = new NVector3(-cptToLocal.x, -cptToLocal.y, -cptToLocal.z);\r\n    let temp: NVector3[] = NVector3.MoveVecs(vecs, cptToWorld);\r\n    temp = NVector3.RotateVecs(temp, angle);\r\n    temp = NVector3.MoveVecs(temp, cptToLocal);\r\n    return temp;\r\n  }\r\n  public static RotateVecs(vecs: NVector3[], angle: number) {\r\n    let temp: NVector3[] = [];\r\n    for (let i = 0; i < vecs.length; ++i) {\r\n      temp.push(NVector3.RotateVec(vecs[i], angle));\r\n    }\r\n    return temp;\r\n  }\r\n  public static RotateVec(v: NVector3, angle: number): NVector3 {\r\n    let cos = Math.cos(angle * (3.14159265358979 / 180.0));\r\n    let sin = Math.sin(angle * (3.14159265358979 / 180.0));\r\n    let x = v.x * cos - v.y * sin;\r\n    let y = v.x * sin + v.y * cos;\r\n    return new NVector3(x, y, v.z);\r\n  }\r\n  public static GetCenterVecFromVecs(vecs: NVector3[]): NVector3 {\r\n    let nv = new NVector3(0, 0, 0);\r\n    for (let i = 0, c = vecs.length; i < c; ++i) {\r\n      nv.Add(vecs[i]);\r\n    }\r\n    nv.Mult(1.0 / vecs.length);\r\n    return nv;\r\n  }\r\n\r\n  // .............................................................................\r\n  public static MidVecGeo(p1: NVector3, p2: NVector3): NVector3 {\r\n    // return new NVector3(p1.screenX + p2.screenX * 0.5, p1.screenY + p2.screenY * 0.5, 0);\r\n    return new NVector3(p1.x + p2.x * 0.5, p1.y + p2.y * 0.5, 0);\r\n  }\r\n\r\n  // intersection // https://gist.github.com/gordonwoodhull/50eb65d2f048789f9558\r\n  // https://stackoverflow.com/questions/563198/whats-the-most-efficent-way-to-calculate-where-two-line-segments-intersect/1968345#1968345\r\n  public static GetVecFromIntersection(vs: NVector3[]): NVector3[] | undefined {\r\n    let newVes: NVector3[] = [];\r\n    for (let j = 0; j < vs.length - 1; ++j) {\r\n      for (let k = j + 1; k < vs.length - 1; ++k) {\r\n        let v = NVector3.CheckLineIntersection(vs[j], vs[j + 1], vs[k], vs[k + 1]);\r\n        if (v) { newVes.push(v); }\r\n      }\r\n    }\r\n    if (newVes.length === 0) { return undefined; } else { return newVes; }\r\n  }\r\n  public static between(a: number, b: number, c: number) {\r\n    return a - NVector3.eps <= b && b <= c + NVector3.eps;\r\n  }\r\n  public static segment_intersection(v0: NVector3, v1: NVector3, v2: NVector3, v3: NVector3) {\r\n    var x = ((v0.x * v1.y - v0.y * v1.x) * (v2.x - v3.x) - (v0.x - v1.x) * (v2.x * v3.y - v2.y * v3.x)) /\r\n      ((v0.x - v1.x) * (v2.y - v3.y) - (v0.y - v1.y) * (v2.x - v3.x));\r\n    var y = ((v0.x * v1.y - v0.y * v1.x) * (v2.y - v3.y) - (v0.y - v1.y) * (v2.x * v3.y - v2.y * v3.x)) /\r\n      ((v0.x - v1.x) * (v2.y - v3.y) - (v0.y - v1.y) * (v2.x - v3.x));\r\n    if (isNaN(x) || isNaN(y)) {\r\n      return false;\r\n    } else {\r\n      if (v0.x >= v1.x) {\r\n        if (!NVector3.between(v1.x, x, v0.x)) { return false; }\r\n      } else {\r\n        if (!NVector3.between(v0.x, x, v1.x)) { return false; }\r\n      }\r\n      if (v0.y >= v1.y) {\r\n        if (!NVector3.between(v1.y, y, v0.y)) { return false; }\r\n      } else {\r\n        if (!NVector3.between(v0.y, y, v1.y)) { return false; }\r\n      }\r\n      if (v2.x >= v3.x) {\r\n        if (!NVector3.between(v3.x, x, v2.x)) { return false; }\r\n      } else {\r\n        if (!NVector3.between(v2.x, x, v3.x)) { return false; }\r\n      }\r\n      if (v2.y >= v3.y) {\r\n        if (!NVector3.between(v3.y, y, v2.y)) { return false; }\r\n      } else {\r\n        if (!NVector3.between(v2.y, y, v3.y)) { return false; }\r\n      }\r\n    }\r\n    return new NVector3(x, y);\r\n  }\r\n  // ............................................................................. end static\r\n  constructor(x: number, y: number, z: number = 0) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.z = z;\r\n  }\r\n  public Set(x: number, y: number, z: number): NVector3 {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.z = z;\r\n    return new NVector3(this.x, this.y, this.z);\r\n  }\r\n  public Scale(v: number): NVector3 {\r\n    this.x *= v;\r\n    this.y *= v;\r\n    this.z *= v;\r\n    return new NVector3(this.x, this.y, this.z);\r\n  }\r\n  public Mult(v: number): NVector3 {\r\n    this.x *= v;\r\n    this.y *= v;\r\n    this.z *= v;\r\n    return new NVector3(this.x, this.y, this.z);\r\n  }\r\n  public DivByVal(v: number): NVector3 {\r\n    this.x /= v;\r\n    this.y /= v;\r\n    this.z /= v;\r\n    return new NVector3(this.x, this.y, this.z);\r\n  }\r\n  public DivByVec(v: NVector3): NVector3 {\r\n    this.x /= v.x;\r\n    this.y /= v.y;\r\n    this.z /= v.z;\r\n    return new NVector3(this.x, this.y, this.z);\r\n  }\r\n  public Add(v: NVector3): NVector3 {\r\n    this.x += v.x;\r\n    this.y += v.y;\r\n    this.z += v.z;\r\n    return new NVector3(this.x, this.y, this.z);\r\n  }\r\n  public Sub(v: NVector3): NVector3 {\r\n    this.x -= v.x;\r\n    this.y -= v.y;\r\n    this.z -= v.z;\r\n    return new NVector3(this.x, this.y, this.z);\r\n  }\r\n  public Negate() {\r\n    this.x *= -1;\r\n    this.y *= -1;\r\n    this.z *= -1;\r\n    return new NVector3(this.x, this.y, this.z);\r\n  }\r\n  public Equals(v: NVector3) {\r\n    return this.x === v.x && this.y === v.y && this.z === v.z;\r\n  }\r\n  public Clone(): NVector3 {\r\n    const other = new NVector3(this.x, this.y, this.z);\r\n    other.long = this.long; other.lat = this.lat; other.ele = this.ele;\r\n    other.proX = this.proX; other.proY = this.proY; other.proZ = this.proZ;\r\n    return other;\r\n  }\r\n  public Length(): number {\r\n    return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\r\n  }\r\n  public Unitize(): NVector3 {\r\n    return this.Normalize();\r\n  }\r\n  public IsOverlap(v: NVector3, tor: number = 0.1) {\r\n    if (this.Distance(v) < tor) { return true; } else { return false; }\r\n  }\r\n  public Normalize(): NVector3 {\r\n    let len: number = Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\r\n    this.x = this.x / len;\r\n    this.y = this.y / len;\r\n    this.z = this.z / len;\r\n    return new NVector3(this.x, this.y, this.z);\r\n  }\r\n  public Distance(v: NVector3): number {\r\n    return NVector3.Distance(new NVector3(this.x, this.y, this.z), v);\r\n  }\r\n  public DistanceByArray(vs: number[]) {\r\n    return NVector3.DistanceByArray([this.x, this.y, this.z], vs);\r\n  }\r\n  public Distance2(v: NVector3): number {\r\n    return NVector3.Distance2(new NVector3(this.x, this.y, this.z), v);\r\n  }\r\n  public DotProduct(v: NVector3): number {\r\n    return NVector3.DotProduct(new NVector3(this.x, this.y, this.z), v);\r\n  }\r\n  public CrossProduct(v: NVector3): NVector3 {\r\n    return NVector3.CrossProduct(new NVector3(this.x, this.y, this.z), v);\r\n  }\r\n  public SquareLength(): number {\r\n    let len: number = NVector3.Length(new NVector3(this.x, this.y, this.z));\r\n    return len * len;\r\n  }\r\n  public FadeExp(attr: NVector3, dVal: number) {\r\n    let v = new NVector3(this.x, this.y, this.z);\r\n    v.Sub(attr);\r\n    return Math.exp(-dVal * v.SquareLength());\r\n  }\r\n  public GetAngle(): number {\r\n    return Math.atan2(this.y, this.x);\r\n  }\r\n  public GetAngleDegree() {\r\n    return 180 * this.GetAngle() / Math.PI;\r\n  }\r\n  public ToJSON() {\r\n    /* */\r\n  }\r\n  public ToString(): string {\r\n    let t: string = 'x: ' + this.x.toFixed(3).toString() + ' , y: ' + this.y.toFixed(3).toString() + ', z: ' + this.z.toFixed(3).toString();\r\n    return t;\r\n  }\r\n  public ToFloat32Array() {\r\n    return new Float32Array([this.x, this.y, this.z]);\r\n  }\r\n}\r\n\r\n\r\nexport const CircularProjctionFromPoint = (p: NVector3, radius: number = 1) => {\r\n  let radian = Math.atan2(p.x, p.y);\r\n\r\n  radian -= Math.PI * 0.5;\r\n  radian *= -1;\r\n\r\n  const v = new NVector3(0, 0, 0);\r\n  v.x = Math.cos(radian);\r\n  v.y = Math.sin(radian);\r\n  v.z = Math.tan(0);\r\n  v.Unitize();\r\n  v.Mult(radius);\r\n\r\n  return v;\r\n};","export enum UNIT_LENGTH {\r\n    METER = 'METER', KILOMETER = 'KILOMETER', CENTIMETER = 'CENTIMETER', MILLIMETER = 'MILLIMETER', MICROMETER = 'MICROMETER', NANOMETER = 'NANOMETER',\r\n    MILE = 'MILE', YARD = 'YARD', FOOT = 'FOOT', INCH = 'INCH'\r\n}\r\nexport enum UNIT {\r\n    METER = 'METER',\r\n    KM = 'KM',\r\n    MILE = 'MILE'\r\n}\r\nexport const shuffle = (array: any) => {\r\n    var currentIndex = array.length, temporaryValue, randomIndex;\r\n    while (0 !== currentIndex) {\r\n      randomIndex = Math.floor(Math.random() * currentIndex);\r\n      currentIndex -= 1;\r\n      temporaryValue = array[currentIndex];\r\n      array[currentIndex] = array[randomIndex];\r\n      array[randomIndex] = temporaryValue;\r\n    }\r\n    return array;\r\n};\r\nexport const random = (seed: number) => {\r\n  var mask = 0xffffffff;\r\n  var m_w  = (123456789 + seed) & mask;\r\n  var m_z  = (987654321 - seed) & mask;\r\n\r\n  return function() {\r\n    m_z = (36969 * (m_z & 65535) + (m_z >>> 16)) & mask;\r\n    m_w = (18000 * (m_w & 65535) + (m_w >>> 16)) & mask;\r\n\r\n    var result = ((m_z << 16) + (m_w & 65535)) >>> 0;\r\n    result /= 4294967296;\r\n    return result;\r\n  };\r\n};\r\nexport class MathUtility {\r\n    public static DEG2RAD = Math.PI / 180;\r\n    public static RAD2DEG = 180 / Math.PI;\r\n    public static Series(s: number = 0, e: number = 10, step: number = 1) {\r\n        let series: number[] = [];\r\n        for (let i = 0; i < e; i += step) { series.push(i); }\r\n        return series;\r\n    }\r\n    public static Range(s: number = 0, e: number = 1, rNumber: number = 10) {\r\n        let range: number[] = [];\r\n        let theStep = e / rNumber;\r\n        for (let i = 0; i < e; i += theStep) { range.push(i); }\r\n        return range;\r\n    }\r\n    public static Playground() {\r\n        // let d = this.DigitGenerator(1423);\r\n        // console.log(d);\r\n        // d = this.DigitGenerator(987);\r\n        // console.log(d);\r\n    }\r\n    public static DigitGenerator(num: number) { // 1423 + 1 + 4 + 2 + 3\r\n        let r = num;\r\n        while (num) {\r\n            r += Math.floor((num % 10));\r\n            num = Math.floor(num / 10);\r\n        }\r\n        return r;\r\n    }\r\n    // ........................................................... data\r\n    // region get ReMap Nomalize From 0.0 to 1.0\r\n    public static ReMapNomalize(CValue: number[]) {\r\n        let valueOut: number[] = [];\r\n        let domain: number[] = MathUtility.GetDomain(CValue);\r\n        for (let d of CValue) { valueOut.push(((d - domain[0]) / (domain[1] - domain[0]))); }\r\n        return valueOut;\r\n    }\r\n    // endregion get ReMap Nomalize From 0.0 to 1.0\r\n\r\n    // region get re-map\r\n    public static Remaps(CValue: number[], OldMin: number, OldMax: number, NewMin: number, NewMax: number) {\r\n        let temp: number[] = [];\r\n        for (let d of CValue) { temp.push(MathUtility.Remap(d, OldMin, OldMax, NewMin, NewMax)); }\r\n        return temp;\r\n    }\r\n    public static Remap(CValue: number, OldMin: number, OldMax: number, NewMin: number, NewMax: number) {\r\n        return (((CValue - OldMin) * (NewMax - NewMin)) / (OldMax - OldMin)) + NewMin;\r\n    }\r\n    public static GetDomain(doubleList: number[]) {\r\n        let Min: number = Number.MAX_VALUE; let Max: number = Number.MIN_VALUE;\r\n        for (let d of doubleList) { if (Min > d) { Min = d; } if (Max < d) { Max = d; } }\r\n        return [Min, Max];\r\n    }\r\n    public static GetIndexBySort(d: number[]) {\r\n        let len = d.length;\r\n        let indices = new Array(len);\r\n        for (var i = 0; i < len; ++i) { indices[i] = i; }\r\n        indices.sort((a, b) => { return d[a] < d[b] ? -1 : d[a] > d[b] ? 1 : 0; });\r\n        return indices;\r\n    }\r\n    public static GetMaxIndex(d: number[]) {\r\n        let index = -1;\r\n        let max = Number.MIN_SAFE_INTEGER;\r\n        for (let i = 0; i < d.length; ++i) {\r\n            if (max < d[i]) { max = d[i]; index = i; }\r\n        }\r\n        return index;\r\n    }\r\n    // private static Heapify(d: number[], i: number) {\r\n    //     let c = 2 * i + 1;\r\n    //     if (c < d.length && d[c] < d[c + 1]) { c++; }\r\n    //     if (d[i] < d[c]) {\r\n    //         let temp = d[i];\r\n    //         d[i] = d[c];\r\n    //         d[c] = temp;\r\n    //     }\r\n    //     if (c <= Math.round(d.length / 2)) { this.Heapify(d, c); }\r\n    // }\r\n    public static GetRatioByWidthHidthByWidths(originWidth: number, originHeight: number, newWidth: number) {\r\n        return [newWidth, originHeight * (newWidth / originWidth)];\r\n    }\r\n    public static GetRatioByWidthHidthByHeight(originWidth: number, originHeight: number, newHeight: number) {\r\n        return [originWidth * (newHeight / originHeight), newHeight];\r\n    }\r\n    public static GetRatioByNewWidth(originWidth: number, originHeight: number, newWidth: number) {\r\n        return [newWidth, originHeight * (newWidth / originWidth)];\r\n    }\r\n    public static GetRatioByNewHeight(originWidth: number, originHeight: number, newHeight: number) {\r\n        return [originWidth * (newHeight / originHeight), newHeight];\r\n    }\r\n    public static IsContainNagativeNumber(vs: number[]) {\r\n        for (var i = 0; i < vs.length; ++i) { if (vs[i] < 0.0) { return true; } }\r\n        return false;\r\n    }\r\n    // ......................................................... geo\r\n    // #region remap geo utility\r\n    public static RemapMeterFromGPSPos(lat1: number, lon1: number, lat2: number, lon2: number) {  // generally used geo measurement function\r\n        let R = 6378.137; // Radius of earth in KM\r\n        let dLat = lat2 * Math.PI / 180 - lat1 * Math.PI / 180;\r\n        let dLon = lon2 * Math.PI / 180 - lon1 * Math.PI / 180;\r\n        let a = Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n            Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *\r\n            Math.sin(dLon / 2) * Math.sin(dLon / 2);\r\n        let c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n        let d = R * c;\r\n        return d * 1000; // meters\r\n    }\r\n    public static GetKilogramFromNewton(w: number): number { return w * 0.10197162129779283; }\r\n    public static GetNewtonFromKilogram(w: number): number { return w * 9.80665; }\r\n    public static ReMapMileFromMeter(meter: number): number { return meter * 0.000621371; }\r\n    public static ReMapMeterFromMile(meter: number): number { return meter * 1609.34; }\r\n    public static ConverterUnitLength(value: number, from: UNIT_LENGTH, to: UNIT_LENGTH) {\r\n        // MathUtility.ConverterUnitLengthFromMeter\r\n        switch (from) {\r\n            case UNIT_LENGTH.NANOMETER: return value * 1000000000;\r\n            case UNIT_LENGTH.MICROMETER: return value * 1000000;\r\n            case UNIT_LENGTH.MILLIMETER: return value * 1000;\r\n            case UNIT_LENGTH.CENTIMETER: return value * 100;\r\n            case UNIT_LENGTH.METER: return value;\r\n            case UNIT_LENGTH.INCH: return value * 39.37007874;\r\n            case UNIT_LENGTH.FOOT: return value * 3.280839895;\r\n            case UNIT_LENGTH.YARD: return value * 1.0936132983;\r\n            case UNIT_LENGTH.MILE: return value * 0.0006213689;\r\n            case UNIT_LENGTH.KILOMETER: return value * 0.001;\r\n            default: return value;\r\n        }\r\n    }\r\n    public static ConverterUnitLengthFromMeter(value: number, unitLength: UNIT_LENGTH) {\r\n        switch (unitLength) {\r\n            case UNIT_LENGTH.NANOMETER: return value * 1000000000;\r\n            case UNIT_LENGTH.MICROMETER: return value * 1000000;\r\n            case UNIT_LENGTH.MILLIMETER: return value * 1000;\r\n            case UNIT_LENGTH.CENTIMETER: return value * 100;\r\n            case UNIT_LENGTH.METER: return value;\r\n            case UNIT_LENGTH.INCH: return value * 39.37007874;\r\n            case UNIT_LENGTH.FOOT: return value * 3.280839895;\r\n            case UNIT_LENGTH.YARD: return value * 1.0936132983;\r\n            case UNIT_LENGTH.MILE: return value * 0.0006213689;\r\n            case UNIT_LENGTH.KILOMETER: return value * 0.001;\r\n            default: return value;\r\n        }\r\n    }\r\n\r\n    public static MilesFromMeters(m: number) {\r\n        return m * 0.00062137;\r\n    }\r\n    public static MilesFromKM(m: number) {\r\n        return m * 0.62137119;\r\n    }\r\n    // ........................................................... geometry\r\n    public static Radians(degrees: number): number {\r\n        return (degrees * (3.14159265358979 / 180.0)); // myDegree *=  3.141592 / 180 // degrees to radians\r\n    }\r\n\r\n    public static Degrees(radians: number): number {\r\n        return (radians * (180.0 / 3.14159265358979));  // myRadian *= 180 / 3.141592 //  radian to degrees\r\n    }\r\n    // ........................................................... random\r\n    public static GetRandom() {\r\n        return Math.random();\r\n    }\r\n    public static GetRandomArbitrary(min: number, max: number) {\r\n        return Math.random() * (max - min) + min;\r\n    }\r\n    public static GetRandomInt(min: number, max: number) {\r\n        return Math.floor(Math.random() * (max - min)) + min;\r\n    }\r\n    public static GetRandomIntFromRenage(range: number) {\r\n        return Math.floor(Math.random() * range);\r\n    }\r\n    public static GetRandomIntsInclusive(min: number, max: number, total: number) {\r\n        let out = [];\r\n        for (let i = 0; i < total; ++i) {\r\n            out.push(this.GetRandomIntInclusive(min, max));\r\n        }\r\n        return out;\r\n    }\r\n    public static GetRandomIntInclusive(min: number, max: number) {\r\n        return Math.floor(Math.random() * (max - min + 1)) + min;\r\n    }\r\n    public static GetRandomItemWithStringList(array: string[]) {\r\n        return array[Math.floor(Math.random() * array.length)];\r\n    }\r\n    public static GetUUID() {   // reference : https://jsfiddle.net/briguy37/2MVFd/\r\n        let d = new Date().getTime();\r\n        let uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c: string) {\r\n            // eslint-disable-next-line\r\n            let r = (d + Math.random() * 16) % 16 | 0;\r\n            d = Math.floor(d / 16);\r\n            // eslint-disable-next-line\r\n            return (c === 'x' ? r : (r & 0x3 | 0x8)).toString(16);\r\n        });\r\n        return uuid;\r\n    }\r\n    // static GetUUID() {\r\n    //   function s4() {\r\n    //     return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\r\n    //   }\r\n    //   return s4() + s4() + '-' + s4() + '-' + s4() + '-' +\r\n    //     s4() + '-' + s4() + s4() + s4();\r\n    // }\r\n\r\n    // reference https://github.com/sketchpunk/FunWithWebGL2\r\n    public static Clamp(v: number, min: number, max: number) { return Math.max(min, Math.min(max, v)); }\r\n    public static SmoothStep(edge1: number, edge2: number, val: number) { // https://en.wikipedia.org/wiki/Smoothstep\r\n        var x = Math.max(0, Math.min(1, (val - edge1) / (edge2 - edge1)));\r\n        return x * x * (3 - 2 * x);\r\n    }\r\n    // Get a number between A and B from a normalized number.\r\n    public static Lerp(a: number, b: number, t: number) { return a + t * (b - a); }\r\n\r\n    // From a point in space, closest spot to a 2D line\r\n    public static ClosestPointToLine2D(x0: number, y0: number, x1: number, y1: number, px: number, py: number) {\r\n        var dx = x1 - x0,\r\n            dy = y1 - y0,\r\n            t = ((px - x0) * dx + (py - y0) * dy) / (dx * dx + dy * dy),\r\n            x = x0 + (dx * t), // Util.lerp(x0, x1, t),\r\n            y = y0 + (dy * t); // Util.lerp(y0, y1, t);\r\n        return [x, y];\r\n    }\r\n\r\n    //  // Return back the two points that are closes on two infinite lines\r\n    // // http://geomalgorithms.com/a07-_distance.html\r\n    // static closestpoint_2Lines(A0:Vec3, A1:Vec3, B0:Vec3, B1:Vec3) {\r\n    //     var u = A1.Clone().Sub(A0),\r\n    //         v = B1.Clone().Sub(B0),\r\n    //         w = A0.Clone().Sub(B0),\r\n    //         a = Vec3.dot(u, u),         // always >= 0\r\n    //         b = Vec3.dot(u, v),\r\n    //         c = Vec3.dot(v, v),         // always >= 0\r\n    //         d = Vec3.dot(u, w),\r\n    //         e = Vec3.dot(v, w),\r\n    //         D = a * c - b * b,        // always >= 0\r\n    //         tU, tV;\r\n    //     //compute the line parameters of the two closest points\r\n    //     if (D < 0.000001) {\t// the lines are almost parallel\r\n    //         tU = 0.0;\r\n    //         tV = (b > c ? d / b : e / c);    // use the largest denominator\r\n    //     } else {\r\n    //         tU = (b * e - c * d) / D;\r\n    //         tV = (a * e - b * d) / D;\r\n    //     }\r\n\r\n    //     //Calc Length\r\n    //     //Vector   vLen = w + (uT * u) - (vT * v);  // =  L1(sc) - L2(tc)\r\n    //     //Float len = sqrt( dot(vLen,vLen) );\r\n\r\n    //     return [u.scale(tU).add(A0), v.scale(tV).add(B0)];\r\n    // }\r\n\r\n    // http://hevi.info/do-it-yourself/interpolating-and-array-to-fit-another-size/\r\n    public static LinearInterpolate(before: number, after: number, atPoint: number) {\r\n        return before + (after - before) * atPoint;\r\n    }\r\n    public static GetInterpolatedArray(data: number[], fitCount: number) {\r\n        let newData = {};\r\n        let springFactor = (data.length - 1) / (fitCount - 1);\r\n        newData[0] = data[0]; // for new allocation\r\n        for (let i = 1; i < fitCount - 1; i++) {\r\n            let tmp: number = i * springFactor;\r\n            let before: number = +(Math.floor(tmp)).toFixed();\r\n            let after: number = +(Math.ceil(tmp)).toFixed();\r\n            let atPoint: number = tmp - before;\r\n            newData[i] = this.LinearInterpolate(data[before], data[after], atPoint);\r\n        }\r\n        newData[fitCount - 1] = data[data.length - 1]; // for new allocation\r\n        return newData;\r\n    }\r\n    // // Return back the two points that are the closests but bound by the limit of two segments\r\n    // // http://geomalgorithms.com/a07-_distance.html\r\n    // static closestPointS_2Segments(A0, A1, B0, B1) {\r\n    //     var u = A1.clone().sub(A0),\r\n    //         v = B1.clone().sub(B0),\r\n    //         w = A0.clone().sub(B0),\r\n    //         a = Vec3.dot(u, u),         // always >= 0\r\n    //         b = Vec3.dot(u, v),\r\n    //         c = Vec3.dot(v, v),         // always >= 0\r\n    //         d = Vec3.dot(u, w),\r\n    //         e = Vec3.dot(v, w),\r\n    //         D = a * c - b * b,        // always >= 0\r\n    //         sc, sN, sD = D,       // sc = sN / sD, default sD = D >= 0\r\n    //         tc, tN, tD = D;       // tc = tN / tD, default tD = D >= 0\r\n\r\n    //     // compute the line parameters of the two closest points\r\n    //     if (D < 0.000001) { // the lines are almost parallel\r\n    //         sN = 0.0;         // force using point P0 on segment S1\r\n    //         sD = 1.0;         // to prevent possible division by 0.0 later\r\n    //         tN = e;\r\n    //         tD = c;\r\n    //     } else {                 // get the closest points on the infinite lines\r\n    //         sN = (b * e - c * d);\r\n    //         tN = (a * e - b * d);\r\n    //         if (sN < 0.0) {        // sc < 0 => the s=0 edge is visible\r\n    //             sN = 0.0;\r\n    //             tN = e;\r\n    //             tD = c;\r\n    //         } else if (sN > sD) {  // sc > 1  => the s=1 edge is visible\r\n    //             sN = sD;\r\n    //             tN = e + b;\r\n    //             tD = c;\r\n    //         }\r\n    //     }\r\n\r\n    //     if (tN < 0.0) { // tc < 0 => the t=0 edge is visible\r\n    //         tN = 0.0;\r\n    //         // recompute sc for this edge\r\n    //         if (-d < 0.0) sN = 0.0;\r\n    //         else if (-d > a) sN = sD;\r\n    //         else {\r\n    //             sN = -d;\r\n    //             sD = a;\r\n    //         }\r\n    //     } else if (tN > tD) { // tc > 1  => the t=1 edge is visible\r\n    //         tN = tD;\r\n    //         // recompute sc for this edge\r\n    //         if ((-d + b) < 0.0) sN = 0;\r\n    //         else if ((-d + b) > a) sN = sD;\r\n    //         else {\r\n    //             sN = (-d + b);\r\n    //             sD = a;\r\n    //         }\r\n    //     }\r\n\r\n    //     // finally do the division to get sc and tc\r\n    //     sc = (Math.abs(sN) < 0.000001 ? 0.0 : sN / sD);\r\n    //     tc = (Math.abs(tN) < 0.000001 ? 0.0 : tN / tD);\r\n\r\n    //     // get the difference of the two closest points\r\n    //     //Vector   dP = w + (sc * u) - (tc * v);  // =  S1(sc) - S2(tc)\r\n\r\n    //     return [u.scale(sc).add(A0), v.scale(tc).add(B0)];\r\n    // }\r\n\r\n    //     public static GetGeoProjectedPtOnSurface(Surface s, List<Point3d> pts)\r\n    // {\r\n    //     List < Point3d > outPts = new List<Point3d>();\r\n    //     Interval domainU = s.Domain(0);\r\n    //     Interval domainV = s.Domain(1);\r\n\r\n    //     foreach(Point3d p in pts)\r\n    //     {\r\n\r\n    //         double theLong = RemapLongToSurface(p.X, domainU.Min, domainU.Max);\r\n    //         double theLat = RemapLatToSurface(p.Y, domainV.Min, domainV.Max);\r\n\r\n    //         Point3d ppp = s.PointAt(theLong, theLat);\r\n\r\n    //         outPts.Add(ppp);\r\n    //     }\r\n    //     return outPts;\r\n    // }\r\n    public static RemapLongToSurface(CValue: number, min: number, max: number) { return (((CValue - (-180)) * (max - min)) / (180 - (-180)) + min); }\r\n    public static RemapLatToSurface(CValue: number, min: number, max: number) { return (((CValue - (-90)) * (max - min)) / (90 - (-90)) + min); }\r\n    public static RemapLongToSurfaceNormal(CValue: number) { return ((CValue - (-180)) * (1.0 - 0)) / (180 - (-180)); } // 0 to 1\r\n    public static RemapLatToSurfaceNormal(CValue: number) { return ((CValue - (-90)) * (1.0 - 0)) / (90 - (-90)); } // 0 to 1\r\n    public static RemapLong(CValue: number) { return (CValue + 180) * Math.PI * 2 / 360 * -1; } // -1 for reversing direction\r\n    public static RemapLat(CValue: number) { return (CValue + 90) * Math.PI / 180; }\r\n    // public static double RemapLong(double CValue, double OldMin = 0 , double OldMax = 180, double NewMin=0, double NewMax=3.14 * 2)\r\n    // {\r\n    //   double Nvalue = (((CValue - OldMin) * (NewMax - NewMin)) / (OldMax - OldMin)) + NewMin;\r\n    //   return Nvalue;\r\n    // }\r\n    // public static double RemapLat(double CValue, double OldMin = 90 , double OldMax = -90, double NewMin=-0, double NewMax=3.14)\r\n    // {\r\n    //   double Nvalue = (((CValue - OldMin) * (NewMax - NewMin)) / (OldMax - OldMin)) + NewMin;\r\n    //   return Nvalue;\r\n    // }\r\n    // static RemapLong(CValue: number) { return CValue * Math.PI * 2 / 180; }\r\n    // static Remap(CValue: number, OldMin: number, OldMax: number, NewMin: number, NewMax: number) {\r\n    //     return (((CValue - OldMin) * (NewMax - NewMin)) / (OldMax - OldMin)) + NewMin;\r\n    // }\r\n    // .. circle\r\n    public static GetRadiusByArea(area: number) { return Math.sqrt(area / Math.PI); }\r\n    public static GetRadiusByCircumference(circumference: number) { return circumference / Math.PI * 0.5; }\r\n\r\n}\r\n\r\n// // Copyright(C) 2015 NJ Namju Lee <nj.namju@gmail.com>\r\n\r\n// namespace NJS {\r\n//     public class NMath {\r\n\r\n//         public static number CalculateFalloff(List < NVector3 > pts, NVector3 pt, number s, number f)\r\n//         {\r\n//         number newValue = 0.0;\r\n//         foreach(NVector3 p in pts)\r\n//         {\r\n//             number v = NJS.PointUtils.CalculateFalloff(pt, p, s, f);\r\n//             newValue += v;\r\n//         }\r\n//         return newValue;\r\n//     }\r\n//         public static public number GetDegreeFromDotProduct(Vector3d v0, Vector3d v1)\r\n//     {\r\n//         return Degrees(Math.Acos(GetDotProduct(v0, v1) / v0.Length * v1.Length));\r\n//     }\r\n//         public static public number GetDotProduct(Vector3d v0, Vector3d v1)\r\n//     {\r\n//         return v0.X * v1.X + v0.Y * v1.Y + v0.Z * v1.Z;\r\n//     }\r\n\r\n//     #region get min max domain\r\n\r\n//         public static List < number > GetDomain(List < number > numberList)\r\n//     {\r\n\r\n//         List < number > domain = new List<number>();\r\n//         number Min = number.MaxValue;\r\n//         number Max = number.MinValue;\r\n\r\n//         foreach(number d in numberList)\r\n//         {\r\n//             if (Min > d) {\r\n//                 Min = d;\r\n//             }\r\n//             if (Max < d) {\r\n//                 Max = d;\r\n//             }\r\n//         }\r\n//         domain.push(Min);\r\n//         domain.push(Max);\r\n//         return domain;\r\n//     }\r\n\r\n//         public static List < float > GetDomain(List < float > numberList)\r\n//     {\r\n\r\n//         List < float > domain = new List<float>();\r\n//         float Min = 1000000000.0f;\r\n//         float Max = -100000000.0f;\r\n\r\n//         foreach(float d in numberList)\r\n//         {\r\n//             if (Min > d) {\r\n//                 Min = d;\r\n//             }\r\n//             if (Max < d) {\r\n//                 Max = d;\r\n//             }\r\n//         }\r\n//         domain.push(Min);\r\n//         domain.push(Max);\r\n//         return domain;\r\n//     }\r\n//         public static List < int > GetDomain(List < int > intList)\r\n//     {\r\n\r\n//         List < int > domain = new List<int>();\r\n//         int Min = int.MaxValue;\r\n//         int Max = int.MinValue;\r\n\r\n//         foreach(int d in intList)\r\n//         {\r\n//             if (Min > d) {\r\n//                 Min = d;\r\n//             }\r\n//             if (Max < d) {\r\n//                 Max = d;\r\n//             }\r\n//         }\r\n//         domain.push(Min);\r\n//         domain.push(Max);\r\n//         return domain;\r\n//     }\r\n//     #endregion get min max domain\r\n\r\n//     #region Panel control\r\n//         public static number GetMinMaxValue(number value, number minTarget, number maxTarget)\r\n//     {\r\n\r\n//         if (value <= minTarget) {\r\n//             value = minTarget;\r\n//         }\r\n//         else if (maxTarget <= value) {\r\n//             value = maxTarget;\r\n//         }\r\n//         return value;\r\n//     }\r\n\r\n//     #endregion Panel control\r\n\r\n//         public static Mesh GetCrackingMesh(Mesh m, NVector3 pt, number a, int iter)\r\n//     {\r\n\r\n//         //index variable used in order to step through the faces\r\n//         int i = 0;\r\n//         int j = 0;\r\n\r\n//         //that's the output mesh on which we'll be adding all new replacement meshes we will create\r\n//         Mesh compositemesh = new Mesh();\r\n\r\n//         //these 4 points will be used to store the coordinates of the vertices around each face\r\n//         NVector3 p1 = new NVector3();\r\n//         NVector3 p2 = new NVector3();\r\n//         NVector3 p3 = new NVector3();\r\n//         NVector3 p4 = new NVector3();\r\n\r\n//         //temporary variables that store the indices of the 4 vertices around each face\r\n//         int v1 = 0;\r\n//         int v2 = 0;\r\n//         int v3 = 0;\r\n//         int v4 = 0;\r\n\r\n//         Mesh tm = m.DuplicateMesh();// new Mesh(m);\r\n//         Mesh tm2 = new Mesh();\r\n//         for (j = 0; j < iter; j++) {\r\n//             //Loop that steps through all the faces in the mesh m\r\n//             //the faces are stored in a list called m_F\r\n//             //The function Count() tells us how many faces are in the list m.m_F\r\n\r\n//             tm2 = new Mesh();\r\n//             for (i = 0; i < tm.Faces.Count; i++) {\r\n//                 //check if the current face m.m_F[i] is a quad [that is, it has 4 vertices]\r\n//                 //if it is do whateer in the curly brackets, else do whatever is contained in the else curly brackets\r\n//                 if (tm.Faces[i].IsQuad) {\r\n//                     //Create a temporary mesh object that will hold a copy of the mesh that we\r\n//                     //will be creating as replacement for the quad face m.m_F[i]\r\n//                     Mesh fmesh = new Mesh();//4, 5, false, false);\r\n\r\n//                     //Set the coordinates of the 4 points p1,p2,p3,p4 to the coordinates of the vertices around face m_F[i]\r\n//                     //m_V is the list of vertices of the mesh m\r\n//                     //get_vi(0) is called on the current mesh face m.m_F[i] o return the index of the first [0th] vertex of the face\r\n//                     //the index is used to get the actual point location from the vertex list m_V\r\n\r\n//                     v1 = tm.Faces[i].A;\r\n//                     v2 = tm.Faces[i].B;\r\n//                     v3 = tm.Faces[i].C;\r\n//                     v4 = tm.Faces[i].D;\r\n\r\n//                     p1 = new NVector3(tm.Vertices[v1]);\r\n//                     p2 = new NVector3(tm.Vertices[v2]);\r\n//                     p3 = new NVector3(tm.Vertices[v3]);\r\n//                     p4 = new NVector3(tm.Vertices[v4]);\r\n\r\n//                     //Face normal\r\n//                     Vector3d fn = Vector3d.CrossProduct(p3 - p1, p4 - p2);\r\n//                     fn.Unitize();\r\n\r\n//                     NVector3 fc = (p1 + p2 + p3 + p4) * 0.25;\r\n//                     //  if (fn * (pt - fc) > 0.0) {\r\n//                     //Set the vertices of the new mesh to the loations of the vertices of face F[i]\r\n//                     fmesh.Vertices.SetVertex(0, p1);\r\n//                     fmesh.Vertices.SetVertex(1, p2);\r\n//                     fmesh.Vertices.SetVertex(2, p3);\r\n//                     fmesh.Vertices.SetVertex(3, p4);\r\n//                     fmesh.Vertices.SetVertex(4, fc + fn * a);\r\n\r\n//                     //Construct the new triangles\r\n//                     fmesh.Faces.SetFace(0, 4, 0, 1);\r\n//                     fmesh.Faces.SetFace(1, 4, 1, 2);\r\n//                     fmesh.Faces.SetFace(2, 4, 2, 3);\r\n//                     fmesh.Faces.SetFace(3, 4, 3, 0);\r\n\r\n//                     //Append the newly constructed mesh to the composite output mesh\r\n//                     tm2.Append(fmesh);\r\n//                     // }\r\n//                 }\r\n//                 else {\r\n//                     //Create a temporary mesh object that will hold a copy of the mesh that we\r\n//                     //will be creating as replacement for the quad face m.m_F[i]\r\n//                     Mesh fmesh = new Mesh();//3, 4, false, false);\r\n\r\n//                     //Set the coordinates of the 4 points p1,p2,p3,p4 to the coordinates of the vertices around face m_F[i]\r\n//                     //m_V is the list of vertices of the mesh m\r\n//                     //get_vi(0) is called on the current mesh face m.m_F[i] o return the index of the first [0th] vertex of the face\r\n//                     //the index is used to get the actual point location from the vertex list m_V\r\n\r\n//                     v1 = tm.Faces[i].A;\r\n//                     v2 = tm.Faces[i].B;\r\n//                     v3 = tm.Faces[i].C;\r\n\r\n//                     p1 = new NVector3(tm.Vertices[v1]);\r\n//                     p2 = new NVector3(tm.Vertices[v2]);\r\n//                     p3 = new NVector3(tm.Vertices[v3]);\r\n\r\n//                     //Face normal\r\n//                     Vector3d fn = Vector3d.CrossProduct(p3 - p1, p4 - p2);\r\n//                     fn.Unitize();\r\n\r\n//                     NVector3 fc = (p1 + p2 + p3) / 3.0;\r\n//                     //  if (fn * (pt - fc) > 0.0) {\r\n//                     //Set the vertices of the new mesh to the loations of the vertices of face F[i]\r\n//                     fmesh.Vertices.SetVertex(0, p1);\r\n//                     fmesh.Vertices.SetVertex(1, p2);\r\n//                     fmesh.Vertices.SetVertex(2, p3);\r\n//                     fmesh.Vertices.SetVertex(3, fc + fn * a);\r\n\r\n//                     //Construct the new triangles\r\n//                     fmesh.Faces.SetFace(0, 3, 0, 1);\r\n//                     fmesh.Faces.SetFace(1, 3, 1, 2);\r\n//                     fmesh.Faces.SetFace(2, 3, 2, 0);\r\n\r\n//                     //Append the newly constructed mesh to the composite output mesh\r\n//                     tm2.Append(fmesh);\r\n//                     // }\r\n//                 }\r\n//             }\r\n\r\n//             tm = tm2;\r\n//         }\r\n\r\n//         compositemesh.Append(tm2);\r\n\r\n//         compositemesh.FaceNormals.ComputeFaceNormals();\r\n//         compositemesh.Normals.ComputeNormals();\r\n//         return compositemesh;\r\n//     }\r\n\r\n//         private static Mesh GetMeshColorFromNormalBW(Mesh m, number f, NVector3 p, ref object A)\r\n//     {\r\n//         int i;\r\n//         m.VertexColors.Clear();\r\n//         for (i = 0; i < m.Vertices.Count; ++i) {\r\n//             NVector3 pp = new NVector3(m.Vertices[i]);\r\n//             Vector3d n = new Vector3d(m.Normals[i]);\r\n//             Vector3d dv = p - pp;\r\n//             dv.Unitize();\r\n\r\n//             number d = dv * n;//Math.Cos(dv * n * f);\r\n//             d = Math.Pow(d * d, f);\r\n\r\n//             int dd = (int)(d * 255.0);\r\n//             if (dd < 0) dd = 0;\r\n//             else if (dd > 255) dd = 255;\r\n//             m.VertexColors.push(Color.FromArgb(255, dd, dd, dd));\r\n//         }\r\n//         return m;\r\n//     }\r\n\r\n//         private static Mesh GetMeshColorFromNormalRGB(Mesh m, number f, NVector3 p)\r\n//     {\r\n//         int i;\r\n//         m.VertexColors.Clear();\r\n//         for (i = 0; i < m.Vertices.Count; ++i) {\r\n//             NVector3 pp = new NVector3(m.Vertices[i]);\r\n//             Vector3d n = new Vector3d(m.Normals[i]);\r\n//             Vector3d dv = p - pp;\r\n//             dv.Unitize();\r\n\r\n//             number dr = (1.0 + n.X) * 0.5;\r\n//             number dg = (1.0 + n.Y) * 0.5;\r\n//             number db = (1.0 + n.Z) * 0.5;\r\n\r\n//             int ddr = (int)(dr * 255.0);\r\n//             if (ddr < 0) ddr = 0;\r\n//             else if (ddr > 255) ddr = 255;\r\n\r\n//             int ddg = (int)(dg * 255.0);\r\n//             if (ddg < 0) ddg = 0;\r\n//             else if (ddg > 255) ddg = 255;\r\n\r\n//             int ddb = (int)(db * 255.0);\r\n//             if (ddb < 0) ddb = 0;\r\n//             else if (ddb > 255) ddb = 255;\r\n//             m.VertexColors.push(Color.FromArgb(255, ddr, ddg, ddb));\r\n//         }\r\n//         return m;\r\n//     }\r\n\r\n//     #region GetNextUVfromTwoPoints\r\n//         public static public List < int > GetNextUVfromTwoPoints(NVector3 orginPt, NVector3 targetPt)\r\n//     {\r\n//         List < int > uvTemp = new List<int>();\r\n//         number de = NJS.PointUtils.GetDegreeBetweenPoints(orginPt, targetPt);\r\n//         number angle = NJS.NMath.Degrees(de);\r\n//         int u = 0;\r\n//         int v = 0;\r\n//         if (-22.5 <= angle && angle <= 22.5) {\r\n//             u = 1; v = 0;\r\n//         }\r\n//         else if (22.5 <= angle && angle <= 67.5) {\r\n//             u = 1; v = 1;\r\n//         }\r\n//         else if (67.5 <= angle && angle <= 112.5) {\r\n//             u = 0; v = 1;\r\n//         }\r\n//         else if (112.5 <= angle && angle <= 157.5) {\r\n//             u = -1; v = 1;\r\n//         }\r\n//         else if ((157.5 <= angle && angle <= 180) || (angle <= -157.5 && -180 <= angle)) {\r\n//             u = -1; v = 0;\r\n//         }\r\n//         else if (angle <= -22.5 && -67.5 <= angle) {\r\n//             u = 1; v = -1;\r\n//         }\r\n//         else if (angle <= -67.5 && -112.5 <= angle) {\r\n//             u = 0; v = -1;\r\n//         }\r\n//         else if (angle <= -112.5 && -157.5 <= angle) {\r\n//             u = -1; v = -1;\r\n//         }\r\n//         uvTemp.push(u);\r\n//         uvTemp.push(v);\r\n//         return uvTemp;\r\n//     }\r\n\r\n//         public static public List < int > GetNextUVfromDegrre(number degree)\r\n//     {\r\n//         List < int > uvTemp = new List<int>();\r\n//         number angle = degree;\r\n//         int u = 0;\r\n//         int v = 0;\r\n//         if (-22.5 <= angle && angle <= 22.5) {\r\n//             u = 1; v = 0;\r\n//         }\r\n//         else if (22.5 <= angle && angle <= 67.5) {\r\n//             u = 1; v = 1;\r\n//         }\r\n//         else if (67.5 <= angle && angle <= 112.5) {\r\n//             u = 0; v = 1;\r\n//         }\r\n//         else if (112.5 <= angle && angle <= 157.5) {\r\n//             u = -1; v = 1;\r\n//         }\r\n//         else if ((157.5 <= angle && angle <= 180) || (angle <= -157.5 && -180 <= angle)) {\r\n//             u = -1; v = 0;\r\n//         }\r\n//         else if (angle <= -22.5 && -67.5 <= angle) {\r\n//             u = 1; v = -1;\r\n//         }\r\n//         else if (angle <= -67.5 && -112.5 <= angle) {\r\n//             u = 0; v = -1;\r\n//         }\r\n//         else if (angle <= -112.5 && -157.5 <= angle) {\r\n//             u = -1; v = -1;\r\n//         }\r\n//         uvTemp.push(u);\r\n//         uvTemp.push(v);\r\n//         return uvTemp;\r\n//     }\r\n//     #endregion GetNextUVfromTwoPoints\r\n\r\n//         //GetSlicedMesh\r\n//         public static public void GetSlicedMesh(Mesh mesh, List < Mesh > cuttingmeshes, out List < Mesh > slicedmeshesout)\r\n//     {\r\n\r\n//         IEnumerable < Mesh > slicedmeshes = new List<Mesh>();\r\n//         slicedmeshes = mesh.Split(cuttingmeshes);\r\n//         slicedmeshesout = slicedmeshes.ToList();\r\n\r\n//     }\r\n\r\n//         //PROJECT MESH ON PLANES\r\n//         public static public void GetProjectedMesh(List < Mesh > facadecuttingmeshes, out List < Mesh > projectedmeshesout)\r\n//     {\r\n//         Plane groundplane = new Plane(NVector3.Origin, Vector3d.ZAxis);\r\n//         List < Mesh > projectedmeshes = new List<Mesh>();\r\n//         for (int i = 0; i < facadecuttingmeshes.Count; i++)\r\n//         {\r\n//             Mesh facadecuttingmeshi = facadecuttingmeshes[i];\r\n//             facadecuttingmeshi.Transform(Transform.PlanarProjection(groundplane));\r\n//             projectedmeshes.push(facadecuttingmeshi);\r\n//         }\r\n\r\n//         projectedmeshesout = projectedmeshes;\r\n//     }\r\n\r\n//         ///................................................ shffle array or list start\r\n//         public static T[] ShuffleArray<T>(T[] arr) {\r\n//         Random rnd = new Random();\r\n//         T[] outTemp = new T[arr.Length];\r\n//         for (int i = arr.Length - 1; i > 0; i--) {\r\n//             int r = rnd.Next(0, i);\r\n//             T tmp = arr[i];\r\n//             arr[i] = arr[r];\r\n//             arr[r] = tmp;\r\n//         }\r\n//         for (int i = 0; i < arr.Length; ++i) {\r\n//             outTemp[i] = arr[rnd.Next(0, arr.Length)];\r\n//         }\r\n//         return outTemp;\r\n//     }\r\n//         public static List < T > ShuffleList<T>(List < T > arr) {\r\n//         Random rnd = new Random();\r\n//         List < T > outTemp = new List<T>(arr.Count);\r\n//         for (int i = arr.Count - 1; i > 0; i--) {\r\n//             int r = rnd.Next(0, i);\r\n//             T tmp = arr[i];\r\n//             arr[i] = arr[r];\r\n//             arr[r] = tmp;\r\n//         }\r\n//         for (int i = 0; i < arr.Count; ++i) {\r\n//             outTemp[i] = arr[rnd.Next(0, arr.Count)];\r\n//         }\r\n//         return outTemp;\r\n//     }\r\n//         ///................................................ shffle array or list end\r\n\r\n//         public int GetUVfromNumberByRoot(int num)\r\n//     {\r\n//         int n = (int)Math.Ceiling(Math.Sqrt(num));\r\n//         return n;\r\n//     }\r\n\r\n//\r\n\r\n//     //............................................................................ blender\r\n\r\n// }\r\n// }","// import { MouseEventData } from '../../Core/AppCore/EventInteraction/MouseInteraction';\r\nimport { NVector3 } from '../NVector3';\r\nexport abstract class GeometryBase {\r\n    vec: NVector3 = new NVector3(0, 0, 0);\r\n    constructor() { /* */ }\r\n    public abstract GetLog(): string;\r\n    public abstract IsMouseInside(x: number, y: number): boolean;\r\n    public abstract Translate(x: number, y: number): void;\r\n    public abstract Move(x: number, y: number): void;\r\n    public abstract Remove(): void;\r\n    // abstract RenderPost(ctx: CanvasRenderingContext2D): void;\r\n    // abstract Render(ctx: CanvasRenderingContext2D): void;\r\n}","import { GeometryBase } from './Base/AbstractGeometryBase';\r\nimport { NVector3 } from './NVector3';\r\nimport { MathUtility } from '../../NUtility/Math/MathUtility';\r\n// import { Point } from './Point';\r\nexport class NLine extends GeometryBase {\r\n    p0: NVector3;\r\n    p1: NVector3;\r\n    public static GetLineFromVecs(vs: NVector3[]) {\r\n        let lns: NLine[] = [];\r\n        for (let i = 0; i < vs.length; ++i) {\r\n            if (i === vs.length - 1) {\r\n                lns.push(new NLine(vs[i], vs[0]));\r\n            } else { lns.push(new NLine(vs[i], vs[i + 1])); }\r\n        }\r\n        return lns;\r\n    }\r\n    public static GetUnOverlapWithLines(ln: NLine[], others: NLine[]) {\r\n        let index = [];\r\n        let newLns = [];\r\n        for (let i = 0; i < ln.length; ++i) {\r\n            index.push(false);\r\n            for (let j = 0; j < others.length; ++j) {\r\n                if (NLine.IsOverlap(ln[i], others[j])) {\r\n                    index[i] = true;\r\n                }\r\n            }\r\n        }\r\n        for (let i = 0; i < index.length; ++i) {\r\n            if (!index[i]) { newLns.push(ln[i]); }\r\n        }\r\n        return newLns;\r\n    }\r\n    public static IsOverlap(ln: NLine, other: NLine): boolean {\r\n        if (ln.p0.IsOverlap(other.p0) && ln.p1.IsOverlap(other.p1)) {\r\n            return true;\r\n        } else if (ln.p0.IsOverlap(other.p1) && ln.p1.IsOverlap(other.p0)) {\r\n            return true;\r\n        } else {\r\n            return false;\r\n        }\r\n    }\r\n    public static RemoveOverlapWithLines(lns: NLine[]) {\r\n        let index = [];\r\n        let nLns = [];\r\n        for (let i = 0; i < lns.length; ++i) {\r\n            let over = false;\r\n            index.push(0);\r\n            for (let j = i + 1; j < lns.length; ++j) {\r\n                over = NLine.IsOverlap(lns[i], lns[j]);\r\n                if (over) { index[i]++; }\r\n            }\r\n        }\r\n        for (let i = 0; i < index.length; ++i) {\r\n            if (index[i] === 0) { nLns.push(lns[i]); }\r\n        }\r\n        return nLns;\r\n    }\r\n    constructor(p0: NVector3, p1: NVector3) {\r\n        super();\r\n        this.p0 = p0; this.p1 = p1;\r\n    }\r\n    public Render(ctx: CanvasRenderingContext2D): void {\r\n        ctx.lineWidth = 0.5;\r\n        ctx.strokeStyle = 'red';\r\n        ctx.beginPath();\r\n        ctx.moveTo(this.p0.x, this.p0.y);\r\n        ctx.lineTo(this.p1.x, this.p1.y);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n    }\r\n    public DistanceToPoint(p: NVector3) {\r\n        // slope\r\n        let m = (this.p1.y - this.p0.y) / (this.p1.x - this.p0.x),\r\n            // y offset\r\n            b = this.p0.y - (m * this.p0.x),\r\n            d = [];\r\n        // distance to the linear equation\r\n        d.push(Math.abs(p.y - (m * p.x) - b) / Math.sqrt(Math.pow(m, 2) + 1));\r\n        // distance to p0\r\n        d.push(Math.sqrt(Math.pow((p.x - this.p0.x), 2) + Math.pow((p.y - this.p0.y), 2)));\r\n        // distance to p1\r\n        d.push(Math.sqrt(Math.pow((p.x - this.p1.x), 2) + Math.pow((p.y - this.p1.y), 2)));\r\n        // return the smallest distance\r\n        return d.sort((aa, bb) => { return (aa - bb); })[0]; // causes an array to be sorted numerically and ascending;\r\n    }\r\n    public PointCloseToLine(p: NVector3) {\r\n        let dx = this.p1.x - this.p0.x,\r\n            dy = this.p1.y - this.p0.y,\r\n            t = ((p.x - this.p0.x) * dx + (p.y - this.p0.y) * dy) / (dx * dx + dy * dy),\r\n            x = MathUtility.Lerp(this.p0.x, this.p1.x, t),\r\n            y = MathUtility.Lerp(this.p0.y, this.p1.y, t);\r\n        return [x, y];\r\n    }\r\n    public GetLog(): string {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n    public RenderPost(ctx: CanvasRenderingContext2D): void {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n    public IsMouseInside(x: number, y: number): boolean {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n    public Translate(x: number, y: number): void {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n    public Move(x: number, y: number): void {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n    public Remove(): void {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n    Hide(): void {\r\n        throw new Error('Method not implemented.');\r\n    }\r\n}","import { NVector3 } from '../NVector3';\r\nimport { NLine } from '../NLine';\r\nimport { MathUtility } from '../../../NUtility/Math/MathUtility';\r\n// import { Point } from './Point';\r\nexport class NVectorUtility {\r\n    public static GetGridArray(xNum: number, yNum: number, x0: number, y0: number, x1: number, y1: number) {\r\n        let vertexs = new Float32Array(xNum * yNum * 2);\r\n        const xd: number = (x1 - x0) / (xNum - 1);\r\n        const yd: number = (y1 - y0) / (yNum - 1);\r\n        let i = 0;\r\n        for (let yi = 0; yi < yNum; ++yi) {\r\n            const theY = (yd * yi) + y0;\r\n            for (let xi = 0; xi < xNum; ++xi) {\r\n                const theX = (xd * xi) + x0;\r\n                vertexs[i++] = theX;\r\n                vertexs[i++] = theY;\r\n\r\n            }\r\n        }\r\n        return vertexs;\r\n    }\r\n    public static GetGridVec(xNum: number, yNum: number, x0: number, y0: number, x1: number, y1: number) {\r\n        let vs = [];\r\n        const xd: number = (x1 - x0) / (xNum - 1);\r\n        const yd: number = (y1 - y0) / (yNum - 1);\r\n        for (let yi = 0; yi < yNum; ++yi) {\r\n            const theY = (yd * yi) + y0;\r\n            for (let xi = 0; xi < xNum; ++xi) {\r\n                const theX = (xd * xi) + x0;\r\n                vs.push(new NVector3(theX, theY));\r\n            }\r\n        }\r\n        return vs;\r\n    }\r\n    public static GetGridVec3d(xNum: number, yNum: number, zNum: number, x0: number, y0: number, z0: number, x1: number, y1: number, z1: number) {\r\n        let vs = [];\r\n        const xd: number = (x1 - x0) / (xNum - 1);\r\n        const yd: number = (y1 - y0) / (yNum - 1);\r\n        const zd: number = (z1 - z0) / (zNum - 1);\r\n        for (let zi = 0; zi < zNum; ++zi) {\r\n            const theZ = (zd * zi) + z0;\r\n            for (let yi = 0; yi < yNum; ++yi) {\r\n                const theY = (yd * yi) + y0;\r\n                for (let xi = 0; xi < xNum; ++xi) {\r\n                    const theX = (xd * xi) + x0;\r\n                    vs.push(new NVector3(theX, theY, theZ));\r\n                }\r\n            }\r\n        }\r\n        return vs;\r\n    }\r\n    public static GetLineGridVec(xNum: number = 10, yNum: number = 10, xInterval: number = 100, yInterval: number = 100) {\r\n        let lns: NLine[] = [];\r\n        xNum = xNum - 1; yNum = yNum - 1;\r\n        let minV = new NVector3(-xNum * 0.5 * xInterval, -yNum * 0.5 * yInterval, 0);\r\n        let maxV = new NVector3(xNum * 0.5 * xInterval, yNum * 0.5 * yInterval, 0);\r\n\r\n        for (let i = 0; i <= yNum; ++i) {\r\n            let v0 = new NVector3(minV.x + (i * xInterval), minV.y, 0);\r\n            let v1 = new NVector3(minV.x + (i * xInterval), maxV.y, 0);\r\n            let ln0 = new NLine(v0, v1);\r\n            lns.push(ln0);\r\n            v0 = new NVector3(minV.x, minV.y + (i * yInterval), 0);\r\n            v1 = new NVector3(maxV.x, minV.y + (i * yInterval), 0);\r\n            ln0 = new NLine(v0, v1);\r\n            lns.push(ln0);\r\n        }\r\n        return lns;\r\n    }\r\n    public static GetCircleVec(xo: number, yo: number, xs: number = 1, ys: number = 1, n: number = 360) {\r\n        let circleVer = [xo, yo]; let iter = 360 / n; // center vec first\r\n        for (let i = 0; i <= 360; i += iter) {\r\n            let j = i * Math.PI / 180;\r\n            let xx = xo + Math.sin(j) * xs;\r\n            let yy = yo + Math.cos(j) * ys;\r\n            circleVer.push(xx, yy);\r\n        }\r\n        return new Float32Array(circleVer);\r\n    }\r\n    public static GetCircleVec3d(xo: number, yo: number, zo: number, xs: number = 1, ys: number = 1, n: number = 360) {\r\n        let circleVer = [xo, yo, zo]; let iter = 360 / n; // center vec first\r\n        for (let i = 0; i <= 360; i += iter) {\r\n            let j = i * Math.PI / 180;\r\n            let xx = xo + Math.sin(j) * xs;\r\n            let yy = yo + Math.cos(j) * ys;\r\n            let zz = zo;\r\n            circleVer.push(xx, yy, zz);\r\n        }\r\n        return new Float32Array(circleVer);\r\n    }\r\n    public static GetSpherec3d(radius: number = 100) {\r\n        let pts: number[] = [];\r\n        for (let x = 0; x < 3.14 * 2; x += 0.1) {\r\n            for (let y = 0; y < 3.14; y += 0.1) {\r\n                let xx = radius * Math.cos(x) * Math.sin(y);\r\n                let yy = radius * Math.sin(x) * Math.sin(y);\r\n                let zz = radius * Math.cos(y);\r\n                pts.push(xx, yy, zz);\r\n            }\r\n        }\r\n        return new Float32Array(pts);\r\n    }\r\n    public static GetArcVec(xo: number, yo: number, start: number, end: number, r: number, n: number = 5) {\r\n        let circleVer = [new NVector3(xo, yo)];\r\n        let sAngle = ((Math.PI * 2) * start) + Math.PI * 0.5;\r\n        let eAngle = ((Math.PI * 2) * end) + Math.PI * 0.5;\r\n        let iter = (eAngle - sAngle) / n; // center vec first\r\n        for (let i = sAngle; i <= eAngle + 0.001; i += iter) {\r\n            let xx = xo + Math.sin(i) * r;\r\n            let yy = yo - Math.cos(i) * r;\r\n            circleVer.push(new NVector3(xx, yy));\r\n        }\r\n        return circleVer;\r\n    }\r\n    // ........................................................... projected\r\n    public static GetSpherecVecs3d(xNum: number = 18, yNum: number = 10, radius: number = 100) {\r\n        let vs: NVector3[] = [];\r\n\r\n        let xInteral = Math.PI * 2 / xNum;\r\n        let yInteral = Math.PI / yNum;\r\n\r\n        for (let x = 0; x < Math.PI * 2; x += xInteral) {\r\n            for (let y = 0; y < Math.PI; y += yInteral) {\r\n                let xx = radius * Math.cos(x) * Math.sin(y);\r\n                let yy = radius * Math.sin(x) * Math.sin(y);\r\n                let zz = radius * Math.cos(y);\r\n                vs.push(new NVector3(xx, yy, zz));\r\n            }\r\n        }\r\n        return vs;\r\n    }\r\n    public static GetSpherecVecs3dRandom(num: number = 200, radius: number = 100) {\r\n        let vs: NVector3[] = [];\r\n\r\n        for (let i = 0; i < num; ++i) {\r\n            let x = Math.PI * 2 * Math.random();\r\n            let y = Math.PI * Math.random();\r\n            let xx = radius * Math.cos(x) * Math.sin(y);\r\n            let yy = radius * Math.sin(x) * Math.sin(y);\r\n            let zz = radius * Math.cos(y);\r\n            vs.push(new NVector3(xx, yy, zz));\r\n        }\r\n        return vs;\r\n    }\r\n\r\n    public static GetSpherecVecs3dRandomWithThicknessOffset(num: number = 200, radius: number = 100, offset: number = 0.1) {\r\n        // var sizes = new Float32Array(dotsAmount);\r\n        // var colorsAttribute = new Float32Array(dotsAmount * 3);\r\n        const out = [];\r\n        for (var i = 0; i < num; i++) {\r\n            // var vector = new THREE.Vector3();\r\n\r\n            // vector.color = Math.floor(Math.random() * colors.length);\r\n            const theta = Math.random() * Math.PI * 2;\r\n            const phi =\r\n                (1 - Math.sqrt(Math.random())) *\r\n                Math.PI /\r\n                2 *\r\n                (Math.random() > 0.5 ? 1 : -1);\r\n\r\n            const x = Math.cos(theta) * Math.cos(phi);\r\n            const y = Math.sin(phi);\r\n            const z = Math.sin(theta) * Math.cos(phi);\r\n\r\n            // vector.scaleX = 5;\r\n\r\n            const v = new NVector3(x, y, z);\r\n            v.Mult(radius + (Math.random() - 0.5) * offset);\r\n\r\n            // if (Math.random() > 0.5) {\r\n            //     moveDot(vector, i);\r\n            // }\r\n\r\n            out.push(v);\r\n            // dotsGeometry.vertices.push(vector);\r\n            // vector.toArray(positions, i * 3);\r\n            // colors[vector.color].toArray(colorsAttribute, i * 3);\r\n            // sizes[i] = 5;\r\n        }\r\n        return out;\r\n    }\r\n    public static GetSpherecVecs3dForWire(xNum: number = 18, yNum: number = 10, radius: number = 100) {\r\n        let vs: NVector3[] = [];\r\n\r\n        let xInteral = Math.PI * 2 / xNum;\r\n        let yInteral = Math.PI / yNum;\r\n\r\n        for (let y = 0; y < Math.PI; y += yInteral) {\r\n            for (let x = 0; x < Math.PI * 2; x += xInteral) {\r\n                let xx = radius * Math.cos(x) * Math.sin(y);\r\n                let yy = radius * Math.sin(x) * Math.sin(y);\r\n                let zz = radius * Math.cos(y);\r\n                vs.push(new NVector3(xx, yy, zz));\r\n            }\r\n        }\r\n\r\n        for (let x = 0; x < Math.PI * 2; x += xInteral) {\r\n            for (let y = 0; y < Math.PI; y += yInteral) {\r\n                let xx = radius * Math.cos(x) * Math.sin(y);\r\n                let yy = radius * Math.sin(x) * Math.sin(y);\r\n                let zz = radius * Math.cos(y);\r\n                vs.push(new NVector3(xx, yy, zz));\r\n            }\r\n        }\r\n        return vs;\r\n    }\r\n    public static GetPoints3dProjectedToGlobe(goePos: number[], radius: number = 10, zElevation: boolean = false, scaleZ: number = 10) {\r\n        let vs: NVector3[] = [];\r\n        for (let i = 0; i < goePos.length - 3; i += 3) {\r\n            // console.log(goePos[i], goePos[i + 1], goePos[i + 2]);\r\n            let x = MathUtility.RemapLong(goePos[i]);\r\n            let y = MathUtility.RemapLat(goePos[i + 1]);\r\n            let z = goePos[i + 2];\r\n            let xx = radius * Math.cos(x) * Math.sin(y);\r\n            let yy = radius * Math.sin(x) * Math.sin(y);\r\n            let zz = radius * Math.cos(y);\r\n            let v = new NVector3(xx, yy, zz);\r\n            if (zElevation) {\r\n                let zVal = z * scaleZ;\r\n                let nv = NVector3.Normalize(v).Mult(zVal);\r\n                v.Add(nv);\r\n            }\r\n            vs.push(v);\r\n        }\r\n        return vs;\r\n    }\r\n    public static GetPoint3dProjectedToGlobeByVecs(vs: NVector3[]) {\r\n        let nVecs = [];\r\n        for (let i = 0; i < vs.length; ++i) {\r\n            nVecs.push(this.GetPoint3dProjectedToGlobeByVec(vs[i].x, vs[i].y));\r\n        }\r\n        return nVecs;\r\n    }\r\n    public static GetPoint3dProjectedToGlobeByVec(long: number, lat: number, ele: number = 0, radius: number = 1, zElevation: boolean = false, scaleZ: number = 10) {\r\n        let x = MathUtility.RemapLong(long);\r\n        let y = MathUtility.RemapLat(lat);\r\n        let z = ele;\r\n        let xx = radius * Math.cos(x) * Math.sin(y);\r\n        let yy = radius * Math.sin(x) * Math.sin(y);\r\n        let zz = radius * Math.cos(y);\r\n        let v = new NVector3(xx, yy, zz);\r\n        if (zElevation) {\r\n            let zVal = z * scaleZ;\r\n            let nv = NVector3.Normalize(v).Mult(zVal);\r\n            v.Add(nv);\r\n        }\r\n        return v;\r\n    }\r\n    public static GetLineVecProjectedToGlobe(v0: NVector3, elevation: number = 0.1) {\r\n        let vs: NVector3[] = [];\r\n        // for (let i = 0; i < goePos.length - 3; i += 3) {\r\n        // console.log(goePos[i], goePos[i + 1], goePos[i + 2]);\r\n        let x = MathUtility.RemapLong(v0.x);\r\n        let y = MathUtility.RemapLat(v0.y);\r\n        let z = v0.z;\r\n        let xx = z * Math.cos(x) * Math.sin(y);\r\n        let yy = z * Math.sin(x) * Math.sin(y);\r\n        let zz = z * Math.cos(y);\r\n\r\n        vs.push(new NVector3(xx, yy, zz));\r\n\r\n        z = v0.z + elevation;\r\n        xx = z * Math.cos(x) * Math.sin(y);\r\n        yy = z * Math.sin(x) * Math.sin(y);\r\n        zz = z * Math.cos(y);\r\n        vs.push(new NVector3(xx, yy, zz));\r\n        // }\r\n        return vs;\r\n    }\r\n    constructor() { /* */ }\r\n}\r\n\r\n// //Copyright(C) 2015 NJ Namju Lee <nj.namju@gmail.com>\r\n\r\n// using System;\r\n// using System.Collections.Generic;\r\n// using System.Linq;\r\n// using System.Text;\r\n// using System.Threading.Tasks;\r\n// using Rhino;\r\n// using Rhino.Geometry;\r\n\r\n// namespace NJS\r\n// {\r\n//     public class PointUtils\r\n//     {\r\n//         public class Point2dGridWithTwoPoints\r\n//         {\r\n\r\n//             public List<Point3d> Pts;\r\n//             public List<Curve> UCurve ;\r\n//             public List<Curve> VCurve ;\r\n//             public int Xn;\r\n//             public int Yn;\r\n//             public Mesh Mesh;\r\n//             public Surface Surface;\r\n//             public Point2dGridWithTwoPoints(Point3d p1, Point3d p2, int _xn, int _yn)\r\n//             {\r\n\r\n//                 this.Pts = Pts2dWithTwoPts(p1, p2, _xn, _yn);\r\n//                 this.Xn = _xn;\r\n//                 this.Yn = _yn;\r\n//                 this.CalculateUCurve();\r\n//                 this.CalculateVCurve();\r\n//                 this.Mesh = NJS.MeshUtils.CreateMeshFromPts(this.Pts, this.Xn, this.Yn);\r\n//                 this.Surface = NJS.SurfaceUtils.GetSurfaceFromPts(this.Pts, this.Xn, this.Yn, 3, 3);\r\n//             }\r\n\r\n//             #region a simple point grid with two points\r\n//             // a simple point grid\r\n//             public static List<Point3d> Pts2dWithTwoPts(Point3d P1, Point3d P2, int xn, int yn)\r\n//             {\r\n//                 List<Point3d> pts = new List<Point3d>();\r\n//                 Point3d xStart = P1;\r\n//                 let xinterval = (P2.X - P1.X) / (let)(xn-1);\r\n//                 double yinterval = (P2.Y - P1.Y) / (double)(yn-1);\r\n\r\n//                 for (int j = 0; j < yn; ++j)\r\n//                 {\r\n//                     for (int i = 0; i < xn; ++i)\r\n//                     {\r\n//                         pts.Add(new Point3d(xStart.X + (i * xinterval), xStart.Y + (j * yinterval), 0));\r\n//                     }\r\n//                 }\r\n//                 return pts;\r\n//             }\r\n//             public static List<Point3d> Pts2dWithTwoPtsDistance(Point3d P1, Point3d P2, double dis)\r\n//             {\r\n//                 List<Point3d> pts = new List<Point3d>();\r\n//                 Point3d xStart = P1;\r\n//                 double xinterval = (P2.X - P1.X) / (double)(dis);\r\n//                 double yinterval = (P2.Y - P1.Y) / (double)(dis);\r\n\r\n//                 for (int j = 0; j < yinterval; ++j)\r\n//                 {\r\n//                     for (int i = 0; i < xinterval; ++i)\r\n//                     {\r\n//                         pts.Add(new Point3d(xStart.X + (i * dis), xStart.Y + (j * dis), 0));\r\n//                     }\r\n\r\n//                 }\r\n//                 return pts;\r\n//             }\r\n//             #endregion\r\n//             #region a simple point grid\r\n//             // a simple point grid\r\n//             public static List<Point3d> Pts2d(double x, double y, int xn, int yn)\r\n//             {\r\n//                 List<Point3d> pts = new List<Point3d>();\r\n//                 double xinterval = x / (double)xn;\r\n//                 double yinterval = y / (double)yn;\r\n\r\n//                 for (int j = 0; j < yn; j++)\r\n//                 {\r\n//                     for (int i = 0; i < xn; i++)\r\n//                     {\r\n//                         pts.Add(new Point3d(i * xinterval, j * yinterval, 0));\r\n//                     }\r\n\r\n//                 }\r\n//                 return pts;\r\n//             }\r\n//             #endregion\r\n//             #region Pts2dFromSurface\r\n//             public static List<Point3d> Pts2dFromSurface(Surface surface, int xNum, int yNum)\r\n//             {\r\n\r\n//                 double ud = (surface.Domain(0).Max - surface.Domain(0).Min) / (double)(xNum-1);\r\n//                 double vd = (surface.Domain(1).Max - surface.Domain(1).Min) / (double)(yNum-1);\r\n\r\n//                 List<Point3d> pts = new List<Point3d>();\r\n\r\n//                 for (int j = 0; j < yNum; j++)\r\n//                 {\r\n//                     double v = surface.Domain(1).Min + (j * vd);\r\n//                     for (int i = 0; i < xNum; i++)\r\n//                     {\r\n\r\n//                         double u = surface.Domain(0).Min + (i * ud); // I reverse I and J otherwise the point odering is differ from the future surface\r\n\r\n//                         Point3d pt = surface.PointAt(u, v);\r\n//                         pts.Add(pt);\r\n\r\n//                     }\r\n//                 }\r\n\r\n//                 return pts;\r\n\r\n//             }\r\n//             #endregion\r\n\r\n//             #region Pts3dFromSurface\r\n//             public static List<Point3d> Pts3dFromSurface(Surface surface, int xNum, int yNum, int zNum, double height)\r\n//             {\r\n\r\n//                 double ud = (surface.Domain(0).Max - surface.Domain(0).Min) / (double)(xNum );\r\n//                 double vd = (surface.Domain(1).Max - surface.Domain(1).Min) / (double)(yNum );\r\n//                 double zd = height / (double)zNum;\r\n\r\n//                 Rhino.Collections.RhinoList<Transform> trans = new Rhino.Collections.RhinoList<Transform>();\r\n//                 Rhino.Collections.RhinoList<Vector3d> vecs = new Rhino.Collections.RhinoList<Vector3d>();\r\n//                 List<Point3d> pts = new List<Point3d>();\r\n\r\n//                 //Vector3d vec = new Vector3d(0, 0, 0);\r\n\r\n//                 for (int k = 0; k <= yNum; k++)\r\n//                 {\r\n//                     for (int j = 0; j <= xNum; j++)\r\n//                     {\r\n//                         for (int i = 0; i <= zNum; i++)\r\n//                         {\r\n\r\n//                             double u = surface.Domain(0).Min + (i * ud);\r\n//                             double v = surface.Domain(1).Min + (j * vd);\r\n//                             double w = height * k;\r\n\r\n//                             Point3d pt = surface.PointAt(u, v);\r\n//                             pt.Z += w;\r\n\r\n//                             /*\r\n//                             foreach (Point3d rotor in rotors)\r\n//                             {\r\n//                                 Vector3d v = nj.PointUtils.PointGrid.Rotor(pt, rotor, -rotorStrength, rotorsFalloff);\r\n//                                 vec += v;\r\n//                                 pt += v;\r\n//                             }\r\n\r\n//                             foreach (Point3d attPt in attractors)\r\n//                             {\r\n//                                 Vector3d v = nj.PointUtils.PointGrid.Attractor(pt, attPt, attractorsStrength, attractorsFalloff);\r\n//                                 vec = v;\r\n//                                 pt += v;\r\n//                             }\r\n\r\n//                             foreach (Point3d explosion in explosions)\r\n//                             {\r\n//                                 Vector3d v = nj.PointUtils.PointGrid.Explosion(pt, explosion, explosionsStrength, explosionsFalloff);\r\n//                                 vec += v;\r\n//                                 pt += v;\r\n//                             }\r\n//                            */\r\n\r\n//                             //scale = Transform.Scale(Point3d.Origin, 1);\r\n\r\n//                             // move *= Transform.Translation((Vector3d) pt - (Vector3d) Point3d.Origin);\r\n//                             //Transform composite = move * scale;\r\n//                             //trans.Add(composite);\r\n//                             //trans.Add(vec);\r\n//                             //vec.Unitize();\r\n//                             //vecs.Add(vec * 10);\r\n//                             // ptsLow.Add(pt);\r\n\r\n//                             pts.Add(pt); //) + (norVec.Z * k));\r\n//                         }\r\n//                     }\r\n//                 }\r\n\r\n//                 return pts;\r\n\r\n//             }\r\n//             #endregion\r\n\r\n//             #region calculate attractors\r\n//             public void CalculateAttractors(List<Point3d> rotors, double rotorStrength, double rotorsFalloff)\r\n//             {\r\n\r\n//                 Vector3d vec;\r\n\r\n//                 for (int i = 0; i < this.Pts.Count; i++)\r\n//                 {\r\n\r\n//                     foreach (Point3d rotor in rotors)\r\n//                     {\r\n//                         Vector3d v = NJS.PointUtils.Attractor(this.Pts[i], rotor, rotorStrength, rotorsFalloff);\r\n//                         vec = v;\r\n//                         this.Pts[i] += v;\r\n//                     }\r\n//                 }\r\n//             }\r\n//             #endregion\r\n\r\n//             #region calculate Explosions\r\n//             public void CalculateExplosions(List<Point3d> explosions, double explosionsStrength, double explosionsFalloff)\r\n//             {\r\n\r\n//                 Vector3d vec;\r\n\r\n//                 for (int i = 0; i < this.Pts.Count; i++)\r\n//                 {\r\n\r\n//                     foreach (Point3d explosion in explosions)\r\n//                     {\r\n//                         Vector3d v = NJS.PointUtils.Explosion(this.Pts[i], explosion, explosionsStrength, explosionsFalloff);\r\n//                         vec = v;\r\n//                         this.Pts[i] += v;\r\n//                     }\r\n//                 }\r\n//             }\r\n//             #endregion\r\n\r\n//             #region calculate Rotors\r\n//             public void CalculateRotors(List<Point3d> rotors, double rotorStrength, double rotorsFalloff)\r\n//             {\r\n\r\n//                 Vector3d vec;\r\n\r\n//                 for (int i = 0; i < this.Pts.Count; i++)\r\n//                 {\r\n\r\n//                     foreach (Point3d rotor in rotors)\r\n//                     {\r\n//                         Vector3d v = NJS.PointUtils.Rotor(this.Pts[i], rotor, rotorStrength, rotorsFalloff);\r\n//                         vec = v;\r\n//                         this.Pts[i] += v;\r\n//                     }\r\n//                 }\r\n//             }\r\n//             #endregion\r\n\r\n//             #region public void get U curve\r\n//             public void CalculateUCurve()\r\n//             {\r\n//                 this.VCurve = NJS.CurveUtils.UIsoCurve(this.Pts, this.Xn, this.Yn);\r\n//                 //return this.uCurve;\r\n\r\n//             }\r\n//             #endregion\r\n\r\n//             #region public void  get V curve\r\n//             public void CalculateVCurve()\r\n//             {\r\n//                 this.UCurve = NJS.CurveUtils.VIsoCurve(this.Pts, this.Xn, this.Yn);\r\n//                 //return this.vCurve;\r\n\r\n//             }\r\n//             #endregion\r\n\r\n//             /*\r\n//             #region public void  get U minimal Curve\r\n//             public List<Curve> Get_UV_minimalCurve(int iter = 50, int npts = 50)\r\n//             {\r\n\r\n//                 for (int u = 0; u < this.uCurve.Count; u++)\r\n//                 {\r\n//                     this.uCurve[u] = NJS.CurveUtils.MinimalCurve(this.uCurve[u], iter, npts);\r\n//                 }\r\n//                 for (int v = 0; v < this.vCurve.Count; v++)\r\n//                 {\r\n//                     this.vCurve[v] = NJS.CurveUtils.MinimalCurve(this.vCurve[v], iter, npts);\r\n//                 }\r\n//                 this.UVCurve.Clear();\r\n//                 this.UVCurve.AddRange(this.uCurve);\r\n//                 this.UVCurve.AddRange(this.vCurve);\r\n//                 return this.UVCurve;\r\n\r\n//             }\r\n//             #endregion\r\n//             */\r\n\r\n//             #region public void  get U minimal Curve\r\n//             public void Calculate_U_MinimalCurve(int iter = 50, int npts = 50)\r\n//             {\r\n\r\n//                 for (int u = 0; u < this.UCurve.Count; u++)\r\n//                 {\r\n//                     this.UCurve[u] = NJS.CurveUtils.MinimalCurve(this.UCurve[u], iter, npts);\r\n//                 }\r\n\r\n//                 //return this.uCurve;\r\n\r\n//             }\r\n//             #endregion\r\n\r\n//             #region public void  get V minimal Curve\r\n//             public void Calculate_V_MinimalCurve(int iter = 50, int npts = 50)\r\n//             {\r\n\r\n//                 for (int v = 0; v < this.VCurve.Count; v++)\r\n//                 {\r\n//                     this.VCurve[v] = NJS.CurveUtils.MinimalCurve(this.VCurve[v], iter, npts);\r\n//                 }\r\n\r\n//                 //return this.vCurve;\r\n\r\n//             }\r\n//             #endregion\r\n//             #region Update\r\n//             public void Update()\r\n//             {\r\n\r\n//                 UpdateSurface();\r\n//                 UpdateUVcurve();\r\n//                 UpdateMesh();\r\n//             }\r\n\r\n//             public void UpdateSurface()\r\n//             {\r\n//                 List<Point3d> pts = NJS.PointUtils.FlipUVPointDirection(this.Pts, this.Xn, this.Yn);\r\n//                 this.Surface = Rhino.Geometry.NurbsSurface.CreateFromPoints(pts, this.Xn , this.Yn, 3, 3);\r\n\r\n//             }\r\n\r\n//             public void UpdateUVcurve()\r\n//             {\r\n\r\n//                 this.UCurve = NJS.CurveUtils.UIsoCurve(this.Pts, this.Xn, this.Yn);\r\n//                 this.VCurve = NJS.CurveUtils.VIsoCurve(this.Pts, this.Xn, this.Yn);\r\n\r\n//             }\r\n\r\n//             public void UpdateMesh()\r\n//             {\r\n//                 this.Mesh = NJS.MeshUtils.CreateMeshFromPts(this.Pts, this.Xn, this.Yn);\r\n\r\n//             }\r\n\r\n//             #endregion\r\n//         }\r\n//         #region Point 3d Grid with two points\r\n//         public class Point3dGridWithTwoPoints\r\n//         {\r\n//             public List<Point3d> Pts;\r\n//             public List<Curve> UCurve;\r\n//             public List<Curve> VCurve;\r\n//             public int Xn;\r\n//             public int Yn;\r\n//             public int Zn;\r\n//             public Mesh Mesh;\r\n//             public Surface Surface;\r\n\r\n//             public Point3dGridWithTwoPoints(Point3d p1, Point3d p2, int xn, int yn, int zn)\r\n//             {\r\n\r\n//                 this.Pts = Pts3dWithTwoPts(p1, p2, xn, yn, zn);\r\n//             }\r\n//             #region Pts3dWithTwoPts\r\n//             public static List<Point3d> Pts3dWithTwoPts(Point3d P1, Point3d P2, int xn, int yn, int zn)\r\n//             {\r\n//                 List<Point3d> pts = new List<Point3d>();\r\n//                 Point3d xStart = P1;\r\n//                 double xinterval = (P2.X - P1.X) / (double)(xn - 1);\r\n//                 double yinterval = (P2.Y - P1.Y) / (double)(yn - 1);\r\n//                 double zinterval = (P2.Z - P1.Z) / (double)(zn - 1);\r\n\r\n//                 for (int k = 0; k < zn; ++k)\r\n//                 {\r\n//                     for (int j = 0; j < yn; ++j)\r\n//                     {\r\n//                         for (int i = 0; i < xn; ++i)\r\n//                         {\r\n//                             pts.Add(new Point3d(xStart.X + (i * xinterval), xStart.Y + (j * yinterval), xStart.Z + (k * zinterval)));\r\n//                         }\r\n\r\n//                     }\r\n//                 }\r\n//                 return pts;\r\n//             }\r\n//             #endregion\r\n//             #region calculate attractors\r\n//             public void CalculateAttractors(List<Point3d> rotors, double rotorStrength, double rotorsFalloff)\r\n//             {\r\n\r\n//                 Vector3d vec;\r\n\r\n//                 for (int i = 0; i < this.Pts.Count; i++)\r\n//                 {\r\n\r\n//                     foreach (Point3d rotor in rotors)\r\n//                     {\r\n//                         Vector3d v = NJS.PointUtils.Attractor(this.Pts[i], rotor, rotorStrength, rotorsFalloff);\r\n//                         vec = v;\r\n//                         this.Pts[i] += v;\r\n//                     }\r\n//                 }\r\n//             }\r\n//             #endregion\r\n//             #region calculate Explosions\r\n//             public void CalculateExplosions(List<Point3d> explosions, double explosionsStrength, double explosionsFalloff)\r\n//                 {\r\n\r\n//                     Vector3d vec;\r\n\r\n//                     for (int i = 0; i < this.Pts.Count; i++)\r\n//                     {\r\n\r\n//                         foreach (Point3d explosion in explosions)\r\n//                         {\r\n//                             Vector3d v = NJS.PointUtils.Explosion(this.Pts[i], explosion, explosionsStrength, explosionsFalloff);\r\n//                             vec = v;\r\n//                             this.Pts[i] += v;\r\n//                         }\r\n//                     }\r\n//                 }\r\n//             #endregion\r\n//             #region calculate Rotors\r\n//             public void CalculateRotors(List<Point3d> rotors, double rotorStrength, double rotorsFalloff)\r\n//             {\r\n\r\n//                 Vector3d vec;\r\n\r\n//                 for (int i = 0; i < this.Pts.Count; i++)\r\n//                 {\r\n\r\n//                     foreach (Point3d rotor in rotors)\r\n//                     {\r\n//                         Vector3d v = NJS.PointUtils.Rotor(this.Pts[i], rotor, rotorStrength, rotorsFalloff);\r\n//                         vec = v;\r\n//                         this.Pts[i] += v;\r\n//                     }\r\n//                 }\r\n//             }\r\n//             #endregion\r\n//         }\r\n//         #endregion\r\n//         public class NVector3\r\n//         {\r\n\r\n//             public double X;\r\n//             public double Y;\r\n//             public double Z;\r\n//             public double NormalX;\r\n//             public double NormalY;\r\n//             public double NormalZ;\r\n//             public double Length;\r\n\r\n//             public string name;\r\n\r\n//             #region Construction of Vecto\r\n//             public NVector3()\r\n//             {\r\n//                 this.X = 0.0;\r\n//                 this.Y = 0.0;\r\n//                 this.Z = 0.0;\r\n//             }\r\n\r\n//             public NVector3(double x, double y, double z)\r\n//             {\r\n//                 this.X = x;\r\n//                 this.Y = y;\r\n//                 this.Z = z;\r\n//             }\r\n//             public NVector3(double x, double y, double z, string name)\r\n//             {\r\n//                 this.X = x;\r\n//                 this.Y = y;\r\n//                 this.Z = z;\r\n//                 this.name = name;\r\n//             }\r\n//             public NVector3(double val)\r\n//             {\r\n//                 this.X = val;\r\n//                 this.Y = val;\r\n//                 this.Z = val;\r\n//             }\r\n//             public NVector3(Point3d pt)\r\n//             {\r\n//                 this.X = pt.X;\r\n//                 this.Y = pt.Y;\r\n//                 this.Z = pt.Z;\r\n//             }\r\n//             #endregion\r\n//             #region Calculate Vector sets\r\n//             /*\r\n//             a. Cross product of two vectors to produce a new one\r\n//             b.Normalization of a vector\r\n//             c. Dot product of two vector\r\n//             d. Addition of two vectors to produce a new one\r\n//             e.Addition of a vector to an existing vector\r\n//             f. Subtraction of two vectors to produce a new one\r\n//             g.Length of a vector\r\n//             h. Squared length of a vector\r\n//             i. Normal vector from 3 points represented by vectors\r\n//             j.Average of a List<CVector> or ListArray<CVector> of vectors [you will need to add the following line at the top of your java file in processing: import java.util.*;]\r\n//             */\r\n//             public void CalculateScale(double scale) {\r\n//                 this.X *= scale; this.Y *= scale; this.Z *= scale;\r\n//             }\r\n\r\n//             public void CalculateLength()\r\n//             {\r\n//                 this.Length = Math.Sqrt(this.X * this.X + this.Y * this.Y + this.Z * this.Z);\r\n//             }\r\n\r\n//             public void CalculateNormalization()\r\n//             {\r\n//                 double len = Math.Sqrt(this.X * this.X + this.Y * this.Y + this.Z * this.Z);\r\n//                 this.NormalX = this.X / len;\r\n//                 this.NormalY = this.Y / len;\r\n//                 this.NormalZ = this.Z / len;\r\n//             }\r\n\r\n//             public Vector3d CalculateCrossProduct(Point3d v1, Point3d v2)\r\n//             {\r\n//                 double x = v1.Y * v2.Z - v1.Z * v2.Y;\r\n//                 double y = v1.Z * v2.X - v1.Y * v2.Z;\r\n//                 double z = v1.X * v2.Y - v1.Y * v2.X;\r\n//                 Vector3d v = new Vector3d(x, y, z);\r\n//                 return v;\r\n//             }\r\n//             public void Scale(double s) {\r\n//                 X *= s;\r\n//                 Y *= s;\r\n//                 Z *= s;\r\n//             }\r\n\r\n//             public double CalculateDotProduct(Point3d p0, Point3d p1)\r\n//             {\r\n//                 double d = (p0.X * p1.X) + (p0.Y * p1.Y) + (p0.Z * p1.Z);\r\n//                 return d;\r\n//             }\r\n//             public void CalculateAddition(NVector3 other)\r\n//             {\r\n\r\n//             }\r\n//             public void CalculateSubtraction()\r\n//             {\r\n\r\n//             }\r\n\r\n//             public void CalculateLengthSquare()\r\n//             {\r\n\r\n//             }\r\n\r\n//             public void CalculateNormalFromThreePts()\r\n//             {\r\n\r\n//             }\r\n//             public void CalculateAverageOfNVectors()\r\n//             {\r\n\r\n//             }\r\n//             #endregion\r\n//             #region Get Vector sets\r\n//             public double GetLength()\r\n//             {\r\n//                 double dp = Dot(this); // smae as below\r\n//                 return Math.Sqrt(dp);\r\n//             }\r\n\r\n//             public NVector3 Normalized()\r\n//             {\r\n//                 double length = GetLength();\r\n//                 return new NVector3(X / length, Y / length, Z / length);\r\n//             }\r\n//             public void Normalize()\r\n//             {\r\n//                 double length = GetLength();\r\n//                 Y /= length;\r\n//                 Y /= length;\r\n//                 Z /= length;\r\n\r\n//             }\r\n//             public void Add(NVector3 other)\r\n//             {\r\n//                 X += other.X;\r\n//                 Y += other.Y;\r\n//                 Z += other.Z;\r\n//             }\r\n//             public double Dot(NVector3 other)\r\n//             {\r\n//                 return X * other.X + Y * other.Y + Z * other.Z;\r\n//             }\r\n//             #endregion\r\n//             public Point3d ToPoint3d() {\r\n//                 return new Point3d(X, Y, Z);\r\n//             }\r\n\r\n//             public override string ToString()\r\n//             {\r\n//                 return \"(\" + this.X + \",\" + this.Y + \",\" + this.Z + \")\";\r\n//             }\r\n//         }\r\n//         public class PointSorting\r\n//         {\r\n//             public List<Point3d> orderedList = new List<Point3d>();\r\n//             public List<Point3d> oList = new List<Point3d>();\r\n//             int t = 0;\r\n\r\n//             public PointSorting(List<Point3d> pts)\r\n//             {\r\n//                 oList.AddRange(pts);\r\n//             }\r\n\r\n//             #region Z order\r\n//             public void CalculateZOrder()\r\n//             {\r\n//                 if (oList.Count == 0)\r\n//                 {\r\n\r\n//                 }\r\n//                 else {\r\n//                     GetListZOrder();\r\n//                     t++;\r\n//                 }\r\n//             }\r\n//             void GetListZOrder()\r\n//             {\r\n//                 double max = GetMaxZ(oList);\r\n//                 for (int i = 0; i < this.oList.Count; i++)\r\n//                 {\r\n//                     if (max == oList[i].Z)\r\n//                     {\r\n//                         orderedList.Add(oList[i]);\r\n//                         oList.RemoveAt(i);\r\n//                         CalculateZOrder();\r\n//                     }\r\n//                 }\r\n//             }\r\n//             double GetMaxZ(List<Point3d> pts)\r\n//             {\r\n\r\n//                 double max = -10000;\r\n//                 for (int i = 0; i < pts.Count; i++)\r\n//                 {\r\n//                     if (max < pts[i].Z)\r\n//                     {\r\n//                         max = pts[i].Z;\r\n//                     }\r\n//                 }\r\n//                 return max;\r\n//             }\r\n//             #endregion\r\n\r\n//             #region X order\r\n//             public void CalculateXOrder()\r\n//             {\r\n//                 if (oList.Count == 0)\r\n//                 {\r\n\r\n//                 }\r\n//                 else {\r\n//                     GetListXOrder();\r\n//                     t++;\r\n//                 }\r\n//             }\r\n//             void GetListXOrder()\r\n//             {\r\n//                 double max = GetMaxX(oList);\r\n//                 for (int i = 0; i < this.oList.Count; i++)\r\n//                 {\r\n//                     if (max == oList[i].X)\r\n//                     {\r\n//                         orderedList.Add(oList[i]);\r\n//                         oList.RemoveAt(i);\r\n//                         CalculateXOrder();\r\n//                     }\r\n//                 }\r\n//             }\r\n//             double GetMaxX(List<Point3d> pts)\r\n//             {\r\n\r\n//                 double max = -10000;\r\n//                 for (int i = 0; i < pts.Count; i++)\r\n//                 {\r\n//                     if (max < pts[i].X)\r\n//                     {\r\n//                         max = pts[i].X;\r\n//                     }\r\n//                 }\r\n//                 return max;\r\n//             }\r\n//             #endregion\r\n//             #region X order\r\n//             public void CalculateYOrder()\r\n//             {\r\n//                 if (oList.Count == 0)\r\n//                 {\r\n\r\n//                 }\r\n//                 else {\r\n//                     GetListYOrder();\r\n//                     t++;\r\n//                 }\r\n//             }\r\n//             void GetListYOrder()\r\n//             {\r\n//                 double max = GetMaxY(oList);\r\n//                 for (int i = 0; i < this.oList.Count; i++)\r\n//                 {\r\n//                     if (max == oList[i].Y)\r\n//                     {\r\n//                         orderedList.Add(oList[i]);\r\n//                         oList.RemoveAt(i);\r\n//                         CalculateYOrder();\r\n//                     }\r\n//                 }\r\n//             }\r\n//             double GetMaxY(List<Point3d> pts)\r\n//             {\r\n\r\n//                 double max = -10000;\r\n//                 for (int i = 0; i < pts.Count; i++)\r\n//                 {\r\n//                     if (max < pts[i].Y)\r\n//                     {\r\n//                         max = pts[i].Y;\r\n//                     }\r\n//                 }\r\n//                 return max;\r\n//             }\r\n//             #endregion\r\n//             // general function\r\n//             public void DeepcopyList()\r\n//             {\r\n\r\n//                 this.oList = new List<Point3d>();\r\n//                 foreach (Point3d p in orderedList)\r\n//                 {\r\n//                     oList.Add(new Point3d(p.X, p.Y, p.Z));\r\n//                 }\r\n\r\n//             }\r\n\r\n//             public List<Point3d> GetPointsWithNumber(int n)\r\n//             {\r\n//                 List<Point3d> newPt = new List<Point3d>();\r\n//                 for (int i = 0; i < n ; i++)\r\n//                 {\r\n\r\n//                     newPt.Add(new Point3d( orderedList[i].X, orderedList[i].Y, orderedList[i].Z));\r\n//                 }\r\n//                 return newPt;\r\n//             }\r\n//         }\r\n\r\n//         public Point3d GetDotProjection(Point3d v0, Point3d v1, Point3d v2) {\r\n//             Vector3d vv1 = v1 - v0;\r\n//             Vector3d vv2 = v2 - v0;\r\n//             vv1.Unitize();\r\n//             Vector3d p = (Vector3d)v0 + vv1 * (vv2 * vv1);\r\n//             return (Point3d)p;\r\n//         }\r\n//         #region Falloff calculation for pts\r\n//         public static double CalculateFalloff(Point3d pt, Point3d attractor, double strength, double falloff) {\r\n//             Vector3d v = attractor - pt;\r\n//             double dist = v.Length;\r\n//             return dist * (strength * (Math.Exp(-falloff * dist * dist)));\r\n//         }\r\n//         #endregion\r\n//         #region Attractor calculation for pts\r\n//         public static Vector3d Attractor(Point3d pt, Point3d attractor, double strength, double falloff) {\r\n//             Vector3d v = attractor - pt;\r\n//             v.Unitize();\r\n//             double dist = v.Length;\r\n//             return (v * (strength * Math.Exp(-falloff * dist * dist)));\r\n//         }\r\n//         #endregion\r\n//         #region Explosion calculation for pts\r\n//         public static Vector3d Explosion(Point3d pt, Point3d Explosion, double strength, double falloff) {\r\n//             Vector3d v = Explosion - pt;\r\n//             v.Unitize();\r\n//             double dist = v.Length;\r\n//             return (v * -(strength * Math.Exp(-falloff * dist * dist)));\r\n//         }\r\n//         #endregion\r\n//         #region Rotor calculation for pts\r\n//         public static Vector3d Rotor(Point3d pt, Point3d rotor, double strength, double falloff)\r\n//         {\r\n//             Vector3d v = rotor - pt;\r\n//             v.Unitize();\r\n//             v.Rotate(3.141592 / 2, Vector3d.ZAxis);\r\n//             double dist = v.Length;\r\n//             return (v * (strength * (Math.Exp(-falloff * dist * dist))));\r\n//         }\r\n//         #endregion\r\n\r\n//         #region Explosion calculation for pts\r\n//         public static List<Point3d> FlipPtsOrder(List<Point3d> p1, int xNum, int yNum) {\r\n//             List<Point3d> pts = new List<Point3d>();\r\n//             int count = 0;\r\n//             for (int j = 0; j < xNum; j++) {\r\n//                 for (int i = 0; i < yNum; i++) {\r\n//                     pts.Add(p1[count]);\r\n//                     count += 1;\r\n//                 }\r\n//             }\r\n//             return (pts);\r\n//         }\r\n//         #endregion\r\n//         #region Flip UV Point Direction\r\n//         public static List<Point3d> FlipUVPointDirection(List<Point3d> p1, int xNum, int yNum)\r\n//         {\r\n//             List<Point3d> pts = new List<Point3d>();\r\n\r\n//             for (int x = 0; x < xNum; ++x)\r\n//             {\r\n//                 for (int y = 0; y < yNum; ++y)\r\n//                 {\r\n//                     pts.Add(p1[(y * (xNum)) + x]);\r\n//                 }\r\n//             }\r\n//             return pts;\r\n//         }\r\n//         #endregion\r\n\r\n//         #region rebuild List of Points by Number //\r\n//         public static List<Point3d> GetPointGridByNNum(List<Point3d> pts, int u, int v, int nNum)\r\n//         {\r\n//             List<Point3d> temp = new List<Point3d>();\r\n//             for (int j = 0; j < v; ++j) {\r\n//                 for (int i = 0; i < u; ++i) {\r\n//                     if (j % nNum != 0) continue;\r\n//                     int k = j * u + i;\r\n//                     temp.Add(pts[k]);\r\n//                 }\r\n//             }\r\n//             return temp;\r\n//         }\r\n//         #endregion\r\n\r\n//         #region Get line grid from point list with u and v\r\n//         public List<Line> GetLineGridFromPoint(List<Point3d> pts, int u, int v)\r\n//         {\r\n//             List<Line> lns = new List<Line>();\r\n//             for (int j = 0; j < v - 1; ++j)\r\n//             {\r\n//                 for (int i = 0; i < u - 1; ++i)\r\n//                 {\r\n//                     int k = j * u + i;\r\n//                     lns.Add(new Line(pts[k], pts[k + 1]));\r\n//                     lns.Add(new Line(pts[k], pts[k + u]));\r\n//                     if (i == u - 2)\r\n//                     {\r\n//                         lns.Add(new Line(pts[k + 1], pts[k + u + 1]));\r\n//                     }\r\n//                     if (j == v - 2)\r\n//                     {\r\n//                         lns.Add(new Line(pts[k + u], pts[k + u + 1]));\r\n//                     }\r\n//                 }\r\n//             }\r\n//             return lns;\r\n//         }\r\n//         #endregion\r\n\r\n//         #region get weave U points\r\n//         public static List<Point3d> GetWeaveUPTs(List<Point3d> p1, List<Point3d> p2)\r\n//         {\r\n//             List<Point3d> pts = new List<Point3d>();\r\n\r\n//             for (int i = 0; i <= p1.Count - 1; i++)\r\n//             {\r\n//                 if (i % 2 == 0)\r\n//                 {\r\n//                     pts.Add(p1[i]);\r\n//                 }\r\n//                 else\r\n//                 {\r\n//                     pts.Add(p2[i]);\r\n//                 }\r\n//             }\r\n//             return (pts);\r\n//         }\r\n//         #endregion\r\n//         #region get weave V points\r\n//         public static List<Point3d> GetWeaveVPTs(List<Point3d> p1, List<Point3d> p2)\r\n//         {\r\n//             List<Point3d> pts = new List<Point3d>();\r\n\r\n//             for (int i = 0; i <= p1.Count - 1; i++)\r\n//             {\r\n//                 if (i % 2 == 0)\r\n//                 {\r\n//                     pts.Add(p2[i]);\r\n//                 }\r\n//                 else\r\n//                 {\r\n//                     pts.Add(p1[i]);\r\n//                 }\r\n//             }\r\n//             return (pts);\r\n//         }\r\n//         #endregion\r\n\r\n//         #region Get a point from average among points\r\n//         public static Point3d GetPtsFromMesh(List<Point3d> pts)\r\n//         {\r\n\r\n//             double x = 0;\r\n//             double y = 0;\r\n//             double z = 0;\r\n//             for (int i = 0; i < pts.Count; i++)\r\n//             {\r\n//                 x += pts[i].X;\r\n//                 y += pts[i].Y;\r\n//                 z += pts[i].Z;\r\n//             }\r\n\r\n//             Point3d pt = new Point3d(x / pts.Count, y / pts.Count, z / pts.Count);\r\n//             return pt;\r\n\r\n//         }\r\n//         #endregion\r\n//         #region GetCenter points from polylines\r\n//         public static List<Point3d> GetCenterPointsFromPolyline(List<Curve> cList)\r\n//         {\r\n//             List<Point3d> pts = new List<Point3d>();\r\n//             foreach (Curve c in cList)\r\n//             {\r\n//                 Rhino.Geometry.Polyline pl;\r\n//                 if (c.TryGetPolyline(out pl))\r\n//                 {\r\n//                     List<Point3d> pp = new List<Point3d>();\r\n//                     foreach (Point3d p in pl) pp.Add(p);\r\n//                     pts.Add(GetCenterPointFromFourPoints(pp));\r\n//                 }\r\n//             }\r\n//             return pts;\r\n//         }\r\n\r\n//         // get center pts from four points\r\n//         public static Point3d GetCenterPointFromFourPoints(List<Point3d> pts)\r\n//         {\r\n//             Point3d pp = Point3d.Origin;\r\n//             for (int i = 0; i < pts.Count - 1; ++i) pp += pts[i];\r\n//             return pp / (pts.Count - 1);\r\n//         }\r\n//         #endregion\r\n\r\n//         #region Get a point from average among points\r\n//         public static Point3d GetPtFromAverage(List<Point3d> pts)\r\n//         {\r\n\r\n//             double x = 0;\r\n//             double y = 0;\r\n//             double z = 0;\r\n//             for (int i = 0; i < pts.Count; i++)\r\n//             {\r\n//                 x += pts[i].X;\r\n//                 y += pts[i].Y;\r\n//                 z += pts[i].Z;\r\n//             }\r\n\r\n//             Point3d pt = new Point3d(x / pts.Count, y / pts.Count, z / pts.Count);\r\n//             return pt;\r\n\r\n//         }\r\n//         #endregion\r\n//         #region Get a mid point\r\n//         public Point3d GetMidPoint(Point3d p1, Point3d p2)\r\n//         {\r\n\r\n//             Point3d mp = (p1 + p2) * 0.5;\r\n//             return mp;\r\n\r\n//         }\r\n//         #endregion\r\n\r\n//         public static Point3d GetMidPTbyT(Point3d p1, Point3d p2, double t)\r\n//         {\r\n//             Vector3d v = p2 - p1;\r\n//             return new Point3d(p1 + v * t);\r\n//         }\r\n//         public static List<Point3d> GetMidPTbyNum(Point3d p1, Point3d p2, int n) {\r\n//             List<Point3d> pts = new List<Point3d>();\r\n//             Vector3d v = (p2 - p1) / (n + 1); // we need to add to off the loop\r\n//             for (int i = 1; i < n + 1; ++i)  // we need to start from 1 to prevent from overlaping pt with start point\r\n//             {\r\n//                 Vector3d vv = (p2 - p1);\r\n//                 vv = (v * i) + (Vector3d)p1;\r\n//                 pts.Add((Point3d)vv);\r\n//             }\r\n\r\n//             return pts;\r\n//         }\r\n//         public static double GetDistance(Point3d p1, Point3d p2)\r\n//         {\r\n//             double dis = Math.Abs(Math.Sqrt(((p2.X - p1.X) * (p2.X - p1.X)) + ((p2.Y - p1.Y) * (p2.Y - p1.Y)) + ((p2.Z - p1.Z) * (p2.Z - p1.Z))));\r\n//             return dis;\r\n//         }\r\n//         public static double GetDistance2(Point3d p1, Point3d p2)\r\n//         {\r\n//             double dis = (p1.X - p2.X) * (p1.X - p2.X) + (p1.Y - p2.Y) * (p1.Y - p2.Y) + (p1.Z - p2.Z) * (p1.Z - p2.Z);\r\n//             return dis;\r\n//         }\r\n//         public static int GetClosestIndexFromPTS(Point3d p, List<Point3d> targetPTs)\r\n//         {\r\n//             int ClosestIndex = 0;\r\n//             List<double> dis = new List<double>();\r\n\r\n//             foreach(Point3d pt in targetPTs)\r\n//             {\r\n//                 dis.Add(p.DistanceTo(pt));\r\n//             }\r\n\r\n//             double temp = 10000;\r\n//             for (int i = 0; i < dis.Count; i++)\r\n//             {\r\n//                 if (dis[i] < temp)\r\n//                 {\r\n//                     temp = dis[i];\r\n//                     ClosestIndex = i;\r\n//                 }\r\n//             }\r\n//             return ClosestIndex;\r\n//         }\r\n//         public static List<int> GetClosestIndexsFromPTSWithRadius(Point3d p, List<Point3d> targetPTs, double r)\r\n//         {\r\n//             List<int> outIndex = new List<int>();\r\n//             for (int i = 0; i < targetPTs.Count; i++)\r\n//             {\r\n//                if (p.DistanceTo(targetPTs[i]) < r)\r\n//                 {\r\n//                     outIndex.Add(i);\r\n//                 }\r\n//             }\r\n//             return outIndex;\r\n//         }\r\n//         public static Point3d GetClosestPtFromPTS(Point3d p, List<Point3d> targetPTs)\r\n//         {\r\n//             int ClosestIndex = 0;\r\n//             List<double> dis = new List<double>();\r\n\r\n//             foreach (Point3d pt in targetPTs)\r\n//             {\r\n//                 dis.Add(p.DistanceTo(pt));\r\n//             }\r\n\r\n//             double temp = 10000;\r\n//             for (int i = 0; i < dis.Count; i++)\r\n//             {\r\n//                 if (dis[i] < temp)\r\n//                 {\r\n//                     temp = dis[i];\r\n//                     ClosestIndex = i;\r\n//                 }\r\n//             }\r\n//             return targetPTs[ClosestIndex];\r\n//         }\r\n\r\n//         public static List<Point3d> GetClosesPTsfromMesh(List<Point3d> pts, Mesh m)\r\n//         {\r\n//             List<Point3d> tempPts = new List<Point3d>();\r\n//             foreach (Point3d pt in pts)\r\n//             {\r\n//                 Point3d tempPt = GetClosesPTfromMesh(pt, m);\r\n//                 tempPts.Add(tempPt);\r\n//             }\r\n//             return tempPts;\r\n//         }\r\n//         public static Point3d GetClosesPTfromMesh(Point3d p, Mesh m)\r\n//         {\r\n//             int ClosestIndex = 0;\r\n//             List<double> dis = new List<double>();\r\n\r\n//             for (int i = 0; i < m.Vertices.Count; ++i)\r\n//             {\r\n//                 Point3d vp = m.Vertices[i];\r\n//                 dis.Add(p.DistanceTo(vp));\r\n//             }\r\n\r\n//             double temp = 10000;\r\n//             for (int i = 0; i < dis.Count; i++)\r\n//             {\r\n//                 if (dis[i] < temp)\r\n//                 {\r\n//                     temp = dis[i];\r\n//                     ClosestIndex = i;\r\n//                 }\r\n//             }\r\n//             return m.Vertices[ClosestIndex];\r\n//         }\r\n\r\n//         public List<Point3d> GetPTsInsideOfBreps(List<Brep> brep, Mesh m)\r\n//         {\r\n//             List<Point3d> tempPts = new List<Point3d>();\r\n//             foreach (Brep b in brep)\r\n//             {\r\n//                 for (int i = 0; i < m.Vertices.Count; ++i)\r\n//                 {\r\n//                     Point3d vp = m.Vertices[i];\r\n\r\n//                     if (b.IsPointInside(vp, 0.1, false))\r\n//                     {\r\n//                         tempPts.Add(vp);\r\n//                     }\r\n\r\n//                 }\r\n//             }\r\n//             return tempPts;\r\n//         }\r\n\r\n//         public List<Vector3d> GetVectorPtsFrom3pts(Point3d p0, Point3d p1, Point3d p2)\r\n//         {\r\n//             List<Point3d> pt = new List<Point3d>();\r\n//             List<Point3d> vp = new List<Point3d>();\r\n//             List<Vector3d> v = new List<Vector3d>();\r\n\r\n//             Vector3d xAxis = p1 - p0;\r\n//             Vector3d yAxis = p2 - p0;\r\n//             Vector3d zAxis = Vector3d.CrossProduct(xAxis, yAxis);\r\n//             yAxis = Vector3d.CrossProduct(zAxis, xAxis);\r\n\r\n//             xAxis.Unitize();\r\n//             yAxis.Unitize();\r\n//             zAxis.Unitize();\r\n\r\n//             v.Add(xAxis);\r\n//             v.Add(yAxis);\r\n//             v.Add(zAxis);\r\n\r\n//             return v;\r\n//         }\r\n//         /*\r\n//         public static Mesh GetPointsByWave(List<Point3d> pt, double a1, double f1, double r1, double p1, double a2, double f2, double r2, double p2)\r\n//         {\r\n\r\n//             for (int i = 0; i < pt.Count; ++i)\r\n//             {\r\n//                 Point3d p = new Point3d(m.Vertices[i]);\r\n//                 Vector3d n = new Vector3d(m.Normals[i]);\r\n//                 double s = m.TextureCoordinates[i].X;\r\n//                 double t = m.TextureCoordinates[i].Y;\r\n//                 double wp1 = Math.cos(r1) * s + Math.sin(r1) * t;\r\n//                 double wave1 = a1 * Math.cos(wp1 * f1 + p1);\r\n//                 double wp2 = Math.cos(r2) * s + Math.sin(r2) * t;\r\n//                 double wave2 = a2 * Math.cos(wp2 * f2 + p2);\r\n\r\n//                 p = p + n * wave1 * wave2;\r\n\r\n//                 m.Vertices.SetVertex(i, p);\r\n//             }\r\n\r\n//             m.FaceNormals.ComputeFaceNormals();\r\n//             m.Normals.ComputeNormals();\r\n\r\n//             return m;\r\n//         }\r\n//         */\r\n//         #region ray test\r\n//         public static bool RayTest(Point3d p, Vector3d v, List<Brep> breps)\r\n//         {\r\n//             Ray3d ray = new Rhino.Geometry.Ray3d(p, v);\r\n//             Point3d[] intersectPTS = Rhino.Geometry.Intersect.Intersection.RayShoot(ray, breps, 1000);\r\n//             if (intersectPTS == null) return false;\r\n//             return true;\r\n//         }\r\n//         public static bool RayTest(Point3d p, Vector3d v, List<Brep> breps, out Point3d[] interPoint)\r\n//         {\r\n//             Ray3d ray = new Rhino.Geometry.Ray3d(p, v);\r\n//             Point3d[] intersectPTS = Rhino.Geometry.Intersect.Intersection.RayShoot(ray, breps, 1000);\r\n//             interPoint = intersectPTS;\r\n//             if (intersectPTS == null) return false;\r\n//             return true;\r\n//         }\r\n\r\n//         #endregion\r\n\r\n//         public static List<Point3d> GetPointsWithIndex(List<Point3d> pts, int n) {\r\n\r\n//             List<Point3d> newPt = new List<Point3d>();\r\n//             for (int i = 0; i <= n; i++)\r\n//             {\r\n//                 newPt.Add(pts[i]);\r\n//             }\r\n//             return newPt;\r\n//         }\r\n//         public static List<Point3d> GetPointsFromBrepFace(Rhino.Geometry.SumSurface s) {\r\n//             List<Point3d> ptOut = new List<Point3d>();\r\n\r\n//             ptOut.Add(s.PointAt(s.Domain(0).Min, s.Domain(1).Min));\r\n//             ptOut.Add(s.PointAt(s.Domain(0).Min, s.Domain(1).Max));\r\n//             ptOut.Add(s.PointAt(s.Domain(0).Max, s.Domain(1).Max));\r\n//             ptOut.Add(s.PointAt(s.Domain(0).Max, s.Domain(1).Min));\r\n\r\n//             return ptOut;\r\n//         }\r\n//         public static Point3d[,] GetPtsArrayFromSurface(Surface surface, int xNum, int yNum)\r\n//         {\r\n//             // Statics = new StatSystem();\r\n//             // StatNode nodeStart = new StatNode[xNum, yNum];\r\n//             Point3d[,] pts = new Point3d[xNum, yNum];\r\n//             double ud = (surface.Domain(0).Max - surface.Domain(0).Min) / (double)xNum - 1.0;\r\n//             double vd = (surface.Domain(1).Max - surface.Domain(1).Min) / (double)yNum - 1.0;\r\n//             for (int j = 0; j < yNum; j++)\r\n//             {\r\n//                 double v = surface.Domain(1).Min + (j * vd);\r\n\r\n//                 for (int i = 0; i < xNum; i++)\r\n//                 {\r\n\r\n//                     double u = surface.Domain(0).Min + (i * ud); // I reverse I and J otherwise the point odering is differ from the future surface\r\n//                     Point3d pt = surface.PointAt(u, v);\r\n//                     pts[i, j] = pt;\r\n\r\n//                 }\r\n//             }\r\n//             return pts;\r\n//         }\r\n//         #region remove overlape pts\r\n//         public static public List<Point3d> RemoveOverlapedPts(List<Point3d> pts)\r\n//         {\r\n//             List<Point3d> vList = new List<Point3d>();\r\n\r\n//             vList.Add(pts[0]);\r\n\r\n//             for (int i = 1; i < pts.Count; i++)\r\n//             {\r\n//                 bool noOver = true;\r\n//                 for (int j = 0; j < vList.Count; j++)\r\n//                 {\r\n//                     //if (vList[j].X == pts[i].X && vList[j].Y == pts[i].Y && vList[j].Z == pts[i].Z)\r\n//                     if (vList[j].DistanceTo(pts[i]) < 0.00001)\r\n//                     {\r\n//                         noOver = false;\r\n//                         continue;\r\n//                     }\r\n//                 }\r\n//                 if (noOver)\r\n//                 {\r\n//                     vList.Add(pts[i]);\r\n//                 }\r\n//             }\r\n//             return vList;\r\n\r\n//         }\r\n//         #endregion\r\n//         /*\r\n//         List<Point3d> pts = x;\r\n//         List<Point3d> sorted = pts.OrderBy(p => p.Y).ThenBy(p => p.Z).ToList();\r\n//         A = sorted;\r\n//         */\r\n\r\n//         //x.OrderBy(p => p.X).ThenBy(p => p.Y).ThenBy(p => p.Z).ToList();\r\n//         #region sorting point X Y Z\r\n//         public static List<Point3d> SortingX(List<Point3d> pts, bool reverse = false)\r\n//         {\r\n//             for (int i = 0; i < pts.Count; i++)\r\n//             {\r\n//                 for (int j = 0; j < pts.Count; j++)\r\n//                 {\r\n//                     if (pts[i].X < pts[j].X)\r\n//                     {\r\n//                         Point3d temp = pts[i];\r\n//                         pts[i] = pts[j];\r\n//                         pts[j] = temp;\r\n//                     }\r\n//                 }\r\n//             }\r\n//             if (reverse)\r\n//             {\r\n//                 pts.Reverse();\r\n//                 return pts;\r\n//             }\r\n//             else {\r\n//                 return pts;\r\n//             }\r\n//         }\r\n//         public static List<Point3d> SortingY(List<Point3d> pts, bool reverse = false)\r\n//         {\r\n//             for (int i = 0; i < pts.Count; i++)\r\n//             {\r\n//                 for (int j = 0; j < pts.Count; j++)\r\n//                 {\r\n//                     if (pts[i].Y < pts[j].Y)\r\n//                     {\r\n//                         Point3d temp = pts[i];\r\n//                         pts[i] = pts[j];\r\n//                         pts[j] = temp;\r\n//                     }\r\n//                 }\r\n//             }\r\n//             if (reverse)\r\n//             {\r\n//                 pts.Reverse();\r\n//                 return pts;\r\n//             }\r\n//             else {\r\n//                 return pts;\r\n//             }\r\n//         }\r\n//         public static List<Point3d> SortingZ(List<Point3d> pts, bool reverse = false)\r\n//         {\r\n//             for (int i = 0; i < pts.Count; i++)\r\n//             {\r\n//                 for (int j = 0; j < pts.Count; j++)\r\n//                 {\r\n//                     if (pts[i].Z < pts[j].Z)\r\n//                     {\r\n//                         Point3d temp = pts[i];\r\n//                         pts[i] = pts[j];\r\n//                         pts[j] = temp;\r\n//                     }\r\n//                 }\r\n//             }\r\n//             if (reverse)\r\n//             {\r\n//                 pts.Reverse();\r\n//                 return pts;\r\n//             }\r\n//             else {\r\n//                 return pts;\r\n//             }\r\n//         }\r\n//         #endregion\r\n//         #region\r\n//         // get angle from two vectors or points\r\n//         public static public double GetDegreeBetweenPoints(Vector3d a, Vector3d b)\r\n//         {\r\n//             double deltaY = b.Y - a.Y;\r\n//             double deltaX = b.X - a.X;\r\n//             return Math.Atan2(deltaY, deltaX);\r\n//         }\r\n//         public static public double GetDegreeBetweenPoints(Point3d a, Point3d b)\r\n//         {\r\n//             double deltaY = b.Y - a.Y;\r\n//             double deltaX = b.X - a.X;\r\n//             return Math.Atan2(deltaY, deltaX);\r\n//         }\r\n//         #endregion get angle from two vectors or points\r\n//         #region get diamond grid from point grid\r\n//         public static public List<Point3d> GetBumpFromPointSurface(List<Point3d> pts, int u, int v, Surface s, double scale = 10)\r\n//         {\r\n//             List<Point3d> newPts = new List<Point3d>();\r\n\r\n//             if (u % 2 != 0)\r\n//             {\r\n//                 for (int i = 0; i < v; ++i)\r\n//                 {\r\n//                     for (int j = 0; j < u; ++j)\r\n//                     {\r\n//                         int k = i * u + j;\r\n//                         double theU, theV;\r\n//                         s.ClosestPoint(pts[k], out theU, out theV);\r\n//                         Vector3d nv = s.NormalAt(theU, theV);\r\n//                         if (k % 2 != 0)\r\n//                         {\r\n//                             Point3d tp = new Point3d(pts[k].X, pts[k].Y, pts[k].Z);\r\n//                             tp += nv * (-scale);\r\n//                             newPts.Add(tp);\r\n//                         }\r\n//                         else\r\n//                         {\r\n//                             Point3d tp = new Point3d(pts[k].X, pts[k].Y, pts[k].Z);\r\n//                             tp += nv * scale;\r\n//                             newPts.Add(tp);\r\n//                         }\r\n//                     }\r\n//                 }\r\n//             }\r\n//             else\r\n//             {\r\n//                 for (int i = 0; i < v; ++i)\r\n//                 {\r\n//                     for (int j = 0; j < u; ++j)\r\n//                     {\r\n//                         int k = i * u + j;\r\n//                         double theU, theV;\r\n//                         s.ClosestPoint(pts[k], out theU, out theV);\r\n//                         Vector3d nv = s.NormalAt(theU, theV);\r\n//                         if (i % 2 != 0)\r\n//                         {\r\n\r\n//                             if (k % 2 != 0)\r\n//                             {\r\n//                                 Point3d tp = new Point3d(pts[k].X, pts[k].Y, pts[k].Z);\r\n//                                 tp += nv * (-scale);\r\n//                                 newPts.Add(tp);\r\n//                             }\r\n//                             else\r\n//                             {\r\n//                                 Point3d tp = new Point3d(pts[k].X, pts[k].Y, pts[k].Z);\r\n//                                 tp += nv * scale;\r\n//                                 newPts.Add(tp);\r\n//                             }\r\n//                         }\r\n//                         else\r\n//                         {\r\n//                             if (k % 2 == 0)\r\n//                             {\r\n//                                 Point3d tp = new Point3d(pts[k].X, pts[k].Y, pts[k].Z);\r\n//                                 tp += nv * (-scale);\r\n//                                 newPts.Add(tp);\r\n//                             }\r\n//                             else\r\n//                             {\r\n//                                 Point3d tp = new Point3d(pts[k].X, pts[k].Y, pts[k].Z);\r\n//                                 tp += nv * scale;\r\n//                                 newPts.Add(tp);\r\n//                             }\r\n//                         }\r\n//                     }\r\n//                 }\r\n//             }\r\n//             return newPts;\r\n//         }\r\n\r\n//         public static public List<Polyline> GetDiaGrid(List<Point3d> pts, int u, int v)\r\n//         {\r\n//             List<Point3d> ptsOut = new List<Point3d>();\r\n//             List<Line> lns = new List<Line>();\r\n//             List<Polyline> pls = new List<Polyline>();\r\n//             for (int i = 0; i < v; ++i)\r\n//             {\r\n//                 for (int j = 0; j < u; ++j)\r\n//                 {\r\n//                     if (i < v - 2 && 0 < j && j < u - 1)\r\n//                     {\r\n//                         if (i % 2 == 0 && j % 2 == 1)\r\n//                         {\r\n\r\n//                             int k0 = i * u + j;\r\n//                             int k1 = (i * u + j) + u + 1;\r\n//                             int k2 = (i * u + j) + u + u;\r\n//                             int k3 = (i * u + j) + u - 1;\r\n\r\n//                             Point3d p0 = pts[k0];\r\n//                             Point3d p1 = pts[k1];\r\n//                             Point3d p2 = pts[k2];\r\n//                             Point3d p3 = pts[k3];\r\n\r\n//                             Line ln0 = new Line(p0, p1);\r\n//                             Line ln1 = new Line(p1, p2);\r\n//                             Line ln2 = new Line(p2, p3);\r\n//                             Line ln3 = new Line(p3, p0);\r\n\r\n//                             ptsOut.Add(p0);\r\n//                             ptsOut.Add(p1);\r\n\r\n//                             lns.Add(ln0);\r\n//                             lns.Add(ln1);\r\n//                             lns.Add(ln2);\r\n//                             lns.Add(ln3);\r\n\r\n//                             Polyline pl = new Polyline();\r\n//                             pl.Add(p0);\r\n//                             pl.Add(p1);\r\n//                             pl.Add(p2);\r\n//                             pl.Add(p3);\r\n//                             pl.Add(p0);\r\n//                             pls.Add(pl);\r\n//                             if (1 < i && j < u - 2)\r\n//                             {\r\n//                                 int kp1 = (i * u + j) - u + 1;\r\n//                                 int kp2 = (i * u + j) + 2;\r\n//                                 int kp3 = (i * u + j) + u + 1;\r\n\r\n//                                 Point3d pp0 = pts[k0];\r\n//                                 Point3d pp1 = pts[kp1];\r\n//                                 Point3d pp2 = pts[kp2];\r\n//                                 Point3d pp3 = pts[kp3];\r\n\r\n//                                 Line lnp0 = new Line(pp0, pp1);\r\n//                                 Line lnp1 = new Line(pp1, pp2);\r\n//                                 Line lnp2 = new Line(pp2, pp3);\r\n//                                 Line lnp3 = new Line(pp3, pp0);\r\n\r\n//                                 ptsOut.Add(pp0);\r\n//                                 ptsOut.Add(pp1);\r\n\r\n//                                 lns.Add(lnp0);\r\n//                                 lns.Add(lnp1);\r\n//                                 lns.Add(lnp2);\r\n//                                 lns.Add(lnp3);\r\n\r\n//                                 Polyline plp = new Polyline();\r\n//                                 plp.Add(pp0);\r\n//                                 plp.Add(pp1);\r\n//                                 plp.Add(pp2);\r\n//                                 plp.Add(pp3);\r\n//                                 plp.Add(pp0);\r\n//                                 pls.Add(plp);\r\n\r\n//                             }\r\n//                         }\r\n//                     }\r\n//                 }\r\n//             }\r\n//             return pls;\r\n//         }\r\n\r\n//         public static public Surface GetSurfaceFromPts(List<Point3d> pts, int uCount, int vCount, int uDegree = 3, int vDegree = 3)\r\n//         {\r\n//             Surface m = Rhino.Geometry.NurbsSurface.CreateFromPoints(pts, vCount, uCount, uDegree, vDegree);\r\n//             return m;\r\n//         }\r\n\r\n//         #endregion\r\n\r\n//         public static public List<Point3d> GetBumpFromPointGrid(List<Point3d> pts, int u, int v) {\r\n//             List<Point3d> newPts = new List<Point3d>();\r\n//             if (u % 2 != 0) {\r\n//                 for (int i = 0; i < v; ++i) {\r\n//                     for (int j = 0; j < u; ++j) {\r\n//                         int k = i * u + j;\r\n//                         if (k % 2 != 0) newPts.Add(new Point3d(pts[k].X, pts[k].Y, pts[k].Z));\r\n//                         else newPts.Add(new Point3d(pts[k].X, pts[k].Y, pts[k].Z + 3));\r\n//                     }\r\n//                 }\r\n//             }else{\r\n//                 for (int i = 0; i < v; ++i) {\r\n//                     for (int j = 0; j < u; ++j) {\r\n//                         int k = i * u + j;\r\n//                         if (i % 2 != 0) {\r\n//                             if (k % 2 != 0) newPts.Add(new Point3d(pts[k].X, pts[k].Y, pts[k].Z));\r\n//                             else newPts.Add(new Point3d(pts[k].X, pts[k].Y, pts[k].Z + 3));\r\n//                         }else{\r\n//                             if (k % 2 == 0) newPts.Add(new Point3d(pts[k].X, pts[k].Y, pts[k].Z));\r\n//                             else newPts.Add(new Point3d(pts[k].X, pts[k].Y, pts[k].Z + 3));\r\n//                         }\r\n//                     }\r\n//                 }\r\n//             }\r\n//             return newPts;\r\n//         }\r\n\r\n//         // get boundaryBox from Pline\r\n//         public static List<Point3d> GetBoundaryFromPline(List<Point3d> pts)\r\n//         {\r\n//             List<Point3d> boundaryPts = new List<Point3d>();\r\n//             Point3d p1 = Point3d.Origin;\r\n//             Point3d p2 = Point3d.Origin;\r\n//             for (int i = 0; i < pts.Count; i++)\r\n//             {\r\n//                 if (i == 0)\r\n//                 {\r\n//                     p1 = new Point3d(pts[i].X, pts[i].Y, pts[i].Z);\r\n//                     p2 = new Point3d(pts[i].X, pts[i].Y, pts[i].Z);\r\n//                 }\r\n//                 if (p1.X > pts[i].X) p1.X = pts[i].X;\r\n//                 if (p1.Y > pts[i].Y) p1.Y = pts[i].Y;\r\n//                 if (p1.Z > pts[i].Z) p1.Z = pts[i].Z;\r\n\r\n//                 if (p2.X < pts[i].X) p2.X = pts[i].X;\r\n//                 if (p2.Y < pts[i].Y) p2.Y = pts[i].Y;\r\n//                 if (p2.Z < pts[i].Z) p2.Z = pts[i].Z;\r\n//             }\r\n//             boundaryPts.Add(p1);\r\n//             boundaryPts.Add(new Point3d(p2.X, p1.Y, p1.Z));\r\n//             boundaryPts.Add(p2);\r\n//             boundaryPts.Add(new Point3d(p1.X, p2.Y, p2.Z));\r\n//             return boundaryPts;\r\n//         }\r\n//         // endget boundaryBox from Pline\r\n\r\n//         // IsInside // https://github.com/substack/point-in-polygon\r\n//         public static public bool IsInside(Point3d v, List<Point3d> vecs) {\r\n//             double x = v.X, y = v.Y;\r\n//             bool inside = false;\r\n//             for (int i = 0, j = vecs.Count - 1; i < vecs.Count; j = i++) {\r\n//                 double xi = vecs[i].X, yi = vecs[i].Y;\r\n//                 double xj = vecs[j].X, yj = vecs[j].Y;\r\n//                 bool intersect = ((yi > y) != (yj > y)) && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\r\n//                 if (intersect) inside = !inside;\r\n//             }\r\n//             return inside;\r\n//         }\r\n//         // end IsInside\r\n\r\n//         public static List<Point3d> GetPoint3dInsideBrep(List<Brep> bs, List<Point3d> ps) {\r\n//             List<Point3d> pts = new List<Point3d>();\r\n//             foreach (Point3d p in ps) {\r\n//                 foreach (Brep b in bs) {\r\n//                     if (b.IsPointInside(p, 0.1, true)) {\r\n//                         pts.Add(p);\r\n//                         break;\r\n//                     }\r\n//                 }\r\n//             }\r\n//             return pts;\r\n//         }\r\n//         // https://web.archive.org/web/20100405070507/http:/valis.cs.uiuc.edu/~sariel/research/CG/compgeom/msg00831.html\r\n//         public double GetArea2(List<Point3d> pts)\r\n//         {\r\n\r\n//             double area = 0;\r\n//             //double center2dx = 0;\r\n//             //double center2dy = 0;\r\n\r\n//             for (int i = 0; i < pts.Count - 1; i++)\r\n//             {\r\n//                 //tmreal t = 2 * pts[i].X * pts[i + 0].Y + pts[i].Y * pts[i + 1].X + pts[i].X * pts[i + 1].Y + 2 * pts[i + 1].X * pts[i + 1].Y;\r\n//                 area += (pts[i].X - pts[i + 1].X) * (pts[i].Y + pts[i + 1].Y);\r\n//                 //center2d.x += (+pts[i].X - pts[i + 1].X) * t;\r\n//                 //center2d.y += (-pts[i].Y + pts[i + 1].Y) * t;\r\n\r\n//             }\r\n//             area *= 0.5;\r\n\r\n//             //center2dx *= 1 / (6 * area);\r\n//             //center2dy *= 1 / (6 * area);\r\n\r\n//             return area;\r\n//         }\r\n//         /*\r\n\r\n//       //...........................................................6\r\n//       private void RunScript(double k, ref object outPt)\r\n//       {\r\n\r\n//         List<Point3d> pts = new List<Point3d>();\r\n\r\n//         double radiiInterval = (10.0 - 2.0 ) / (double) 10;\r\n//         double kInterval = (k - 0.0 ) / (double) 20;\r\n\r\n//         for (int j = 0 ; j < 20; j++) {\r\n//           double angle = kInterval * j;\r\n//           for (int i = 0 ; i < 10; i++) {\r\n//             double radius = radiiInterval * i;\r\n\r\n//             double x = radius * Math.cos(angle);\r\n//             double y = radius * Math.sin(angle);\r\n\r\n//             pts.Add(new Point3d(x, y, 0));\r\n\r\n//           }\r\n//         }\r\n//         outPt = pts;\r\n//       }\r\n//       //...........................................................6 -1\r\n//      List<Point3d> pts = new List<Point3d>();\r\n//     //domain interval\r\n//     double radiiInterval = (10.0 - 2.0 ) / (double) 10;\r\n//     double kInterval = (k - 0.0 ) / (double) 20;\r\n\r\n//     double positionX = 0;\r\n//     double positionY = 0;\r\n\r\n//     for (int y = 0 ; y < 10; y++) {\r\n//       for (int x = 2 ; x < 20; x++) {\r\n\r\n//         //double ang = Math.Atan(i / j);\r\n\r\n//         pts.Add(new Point3d(positionY * Math.cos(positionX), positionY * Math.sin(positionX), 0));\r\n//         positionX += radiiInterval;\r\n//       }\r\n\r\n//       positionY += kInterval;\r\n//       //radiiInterval += radiiInterval;\r\n//     }\r\n//     outPt = pts;\r\n//     //pts.append(rs.AddPoint(y * math.cos(x), y * math.sin(x), 0))\r\n\r\n//       //...........................................................7\r\n//   private void RunScript(double k, ref object outPt)\r\n//   {\r\n\r\n//     List<Point3d> pts = new List<Point3d>();\r\n//     // domain interval\r\n//     double radiiInterval = (10.0 - 2.0 ) / (double) 10;\r\n//     double kInterval = (k - 0.0 ) / (double) 20;\r\n//     for (int j = 0 ; j < 20; j++) {\r\n//       double angle = kInterval * j;\r\n//       for (int i = 2 ; i < 10; i++) {\r\n//         double radius = radiiInterval * i;\r\n//         double y = Math.sinh(radius) * (Math.sin(angle));\r\n//         double x = Math.cosh(radius) * (Math.cos(angle));\r\n//         pts.Add(new Point3d(x, y, 0));\r\n//       }\r\n//     }\r\n//     outPt = pts;\r\n\r\n//   }\r\n//         //...........................................................7-1\r\n//       List<Point3d> pts = new List<Point3d>();\r\n//     // domain interval\r\n//     double radiiInterval = (10.0 - 2.0 ) / (double) 10;\r\n//     double kInterval = (k - 0.0 ) / (double) 20;\r\n\r\n//     //double positionY = 0.0;\r\n//     double positionX = 0.0;\r\n//     double positionY = 0.0;\r\n\r\n//     for (int i = 0 ; i < 10; i++) {\r\n\r\n//       double x = Math.cosh(positionX) * (Math.cos(positionY));\r\n\r\n//       // x = a \\ \\cosh \\ mu \\ \\cos \\ nu\r\n//       double y = Math.sinh(positionX) * (Math.sin(positionY));\r\n\r\n//       //double y = positionX * Math.sin(Math.PI / positionY);\r\n\r\n//       pts.Add(new Point3d(x, y, 0));\r\n\r\n//       positionX += radiiInterval;\r\n//       positionY += kInterval;\r\n//     }\r\n\r\n//     outPt = pts;\r\n//     //........................................................... 2016 version\r\n//     List<Point3d> pts = GetPointPolarCoordin(x, y);\r\n//     A = pts;\r\n//     B = GetPolylinePolarCoordin(x, y);\r\n\r\n//   List<Point3d> GetPointPolarCoordin(int u, int v) {\r\n//     List<Point3d> pts = new List<Point3d>();\r\n//     for (int j = 0; j < v; ++j) {\r\n//       for (int i = 0; i < u; ++i) {\r\n//         Point3d p = GetPointForPolarCoordinate(i, j);\r\n//         //Point3d p = GetPointForEllipticCoordinate(i, j);\r\n//         pts.Add(p);\r\n//       }\r\n//     }\r\n//     return pts;\r\n//   }\r\n//   List<Polyline> GetPolylinePolarCoordin(int u, int v) {\r\n//     List<Polyline> pls = new List<Polyline>();\r\n//     double radius = v / (3.14 * 2);\r\n//     for (int j = 0; j < v; ++j) {\r\n//       Polyline pl = new Polyline();\r\n//       for (int i = 0; i < u; ++i) {\r\n//         //Point3d p = GetPointForPolarCoordinate(i, radius * j);\r\n//         Point3d p = GetPointForEllipticCoordinate(i, j);\r\n//         pl.Add(p);\r\n//       }\r\n//       pls.Add(pl);\r\n//     }\r\n//     for (int j = 0; j < v; ++j) {\r\n//       Polyline pl = new Polyline();\r\n//       for (int i = 0; i < u; ++i) {\r\n//         //Point3d p = GetPointForPolarCoordinate(j, i);\r\n//         Point3d p = GetPointForEllipticCoordinate(i, j);\r\n//         pl.Add(p);\r\n//       }\r\n//       pls.Add(pl);\r\n//     }\r\n//     return pls;\r\n//   }\r\n//     public List<Point3d> GetPointsForPolarCoordinate(int xNum, int yNum, double k, double r) {\r\n//     List<Point3d> pts = new List<Point3d>();\r\n//     double radiiInterval = (10.0 - 2.0 ) / (double) r;\r\n//     double kInterval = (k - 0.0 ) / (double) 20;\r\n//     for (int j = 0 ; j < xNum; j++) {\r\n//       double angle = kInterval * j;\r\n//       for (int i = 0 ; i < yNum; i++) {\r\n//         double radius = radiiInterval * i;\r\n//         double x = radius * Math.cos(angle);\r\n//         double y = radius * Math.sin(angle);\r\n//         pts.Add(new Point3d(x, y, 0));\r\n//       }\r\n//     }\r\n//     return pts;\r\n//   }\r\n//   Point3d GetPointForPolarCoordinate(double radius, double degree) {\r\n//     double x = radius * Math.sin(degree);\r\n//     double y = radius * Math.cos(degree);\r\n//     return new Point3d(x, y, 0);\r\n//     return new Point3d(radius, degree, 0);\r\n//   }\r\n//   public List<Point3d> GetPointsForPolarCoordinate(int xNum, int yNum, double k, double r) {\r\n//     List<Point3d> pts = new List<Point3d>();\r\n//     double radiiInterval = (10.0 - 2.0 ) / (double) r;\r\n//     double kInterval = (k - 0.0 ) / (double) 20;\r\n//     for (int j = 0 ; j < xNum; j++) {\r\n//       double angle = kInterval * j;\r\n//       for (int i = 0 ; i < yNum; i++) {\r\n//         double radius = radiiInterval * i;\r\n//         double u = radius;\r\n//         double v = angle;\r\n//         double x = 2 * Math.cosh(u) * Math.cos(v);\r\n//         double y = 2 * Math.sinh(u) * Math.sin(v);\r\n//         pts.Add(new Point3d(x, y, 0));\r\n//       }\r\n//     }\r\n//     return pts;\r\n//   }\r\n//   Point3d GetPointForEllipticCoordinate(double u, double v) {\r\n//     double x = 2 * Math.cosh(u) * Math.cos(v);\r\n//     double y = 2 * Math.sinh(u) * Math.sin(v);\r\n//     return new Point3d(x, y, 0);\r\n//   }\r\n//         */\r\n\r\n//         public static public List<Point3d> GetStartEndPTfromLine(List<Line> lns)\r\n//         {\r\n//             List<Point3d> pts = new List<Point3d>();\r\n//             foreach (Line l in lns)\r\n//             {\r\n//                 NurbsCurve c = l.ToNurbsCurve();\r\n//                 pts.Add(c.PointAtStart);\r\n//                 pts.Add(c.PointAtEnd);\r\n//             }\r\n//             return pts;\r\n//         }\r\n\r\n//         public static public List<Point3d> GetPtsInsideCurve(List<Point3d> pts, List<Curve> curves) {\r\n//             List<Point3d> ptOut = new List<Point3d>();\r\n//             foreach (Point3d p in pts) {\r\n//                 bool inside = false;\r\n//                 foreach (Curve c in curves) {\r\n//                     if (c.Contains(p) == PointContainment.Inside) {\r\n//                         inside = true;\r\n//                         continue;\r\n//                     }\r\n//                 }\r\n//                 if (inside) ptOut.Add(p);\r\n//             }\r\n//             return ptOut;\r\n//         }\r\n//         //////////////////// Grid preset\r\n//         #region\r\n\r\n//         public List<Line> GetGrid2DVertical(Point3d p1, int rx, double width, double height, int mod, int mtype, double dist, out List<Point3d> ptsOut)\r\n//         {\r\n//             int i;\r\n//             int j;\r\n\r\n//             double dx = (p1.X + width - p1.X) / (double)(rx - 1.0);\r\n//             int ry = (int)(0.5 + (p1.Y + height - p1.Y) / dx);\r\n//             //int rz = (int) (0.5 + (p1.Z + height - p1.Z) / dx);\r\n\r\n//             List<Point3d> pt = new List<Point3d>();\r\n\r\n//             for (j = 0; j < ry; j++)\r\n//             {\r\n//                 for (i = 0; i < rx; i++)\r\n//                 {\r\n//                     double x = p1.X + i * dx;\r\n//                     double y = p1.Y;\r\n//                     double z = p1.Z + j * dx; // p1.Z;\r\n//                     if (mtype == 0)\r\n//                     {\r\n//                         if ((i * i - j * j) % mod == 0)\r\n//                         {\r\n//                             pt.Add(new Point3d(x, y, z));\r\n//                         }\r\n//                     }\r\n//                     else if (mtype == 1)\r\n//                     {\r\n//                         if ((i * i + j * j) % mod == 0)\r\n//                         {\r\n//                             pt.Add(new Point3d(x, y, z));\r\n//                         }\r\n//                     }\r\n//                     else if (mtype == 2)\r\n//                     {\r\n//                         if ((i * j) % mod == 0)\r\n//                         {\r\n//                             pt.Add(new Point3d(x, y, z));\r\n//                         }\r\n//                     }\r\n//                     else\r\n//                     {\r\n//                         if ((i * j + j * i) % mod == 0)\r\n//                         {\r\n//                             pt.Add(new Point3d(x, y, z));\r\n//                         }\r\n//                     }\r\n//                 }\r\n//             }\r\n//             List<Line> ln = new List<Line>();\r\n//             double d2 = dist * dist;\r\n//             for (j = 0; j < pt.Count; ++j)\r\n//             {\r\n//                 for (i = j + 1; i < pt.Count; ++i)\r\n//                 {\r\n//                     if (dist2(pt[i], pt[j]) < d2)\r\n//                     {\r\n//                         ln.Add(new Line(pt[i], pt[j]));\r\n//                     }\r\n//                 }\r\n//             }\r\n//             ptsOut = pt;\r\n//             return ln;\r\n//         }\r\n\r\n//         public List<Line> GetGrid2D(Point3d p1, Point3d p2, int rx, int mod, int mtype, double dist, out List<Point3d> ptsOut, out List<List<int>> Connectivity)\r\n//         {\r\n//             int i;\r\n//             int j;\r\n\r\n//             double dx = (p2.X - p1.X) / (double)(rx - 1.0);\r\n//             int ry = (int)(0.5 + (p2.Y - p1.Y) / dx);\r\n//             int rz = (int)(0.5 + (p2.Z - p1.Z) / dx);\r\n\r\n//             List<Point3d> pt = new List<Point3d>();\r\n\r\n//             for (j = 0; j < ry; j++)\r\n//             {\r\n//                 for (i = 0; i < rx; i++)\r\n//                 {\r\n//                     double x = p1.X + i * dx;\r\n//                     double y = p1.Y + j * dx;\r\n//                     double z = p1.Z;\r\n//                     if (mtype == 0)\r\n//                     {\r\n//                         if ((i * i - j * j) % mod == 0)\r\n//                         {\r\n//                             pt.Add(new Point3d(x, y, z));\r\n//                         }\r\n//                     }\r\n//                     else if (mtype == 1)\r\n//                     {\r\n//                         if ((i * i + j * j) % mod == 0)\r\n//                         {\r\n//                             pt.Add(new Point3d(x, y, z));\r\n//                         }\r\n//                     }\r\n//                     else if (mtype == 2)\r\n//                     {\r\n//                         if ((i * j) % mod == 0)\r\n//                         {\r\n//                             pt.Add(new Point3d(x, y, z));\r\n//                         }\r\n//                     }\r\n//                     else\r\n//                     {\r\n//                         if ((i * j + j * i) % mod == 0)\r\n//                         {\r\n//                             pt.Add(new Point3d(x, y, z));\r\n//                         }\r\n//                     }\r\n//                 }\r\n\r\n//             }\r\n\r\n//             List<List<int>> connectivity = new List<List<int>>();\r\n//             List<Line> ln = new List<Line>();\r\n//             double d2 = dist * dist;\r\n//             for (j = 0; j < pt.Count; ++j)\r\n//             {\r\n//                 List<int> temp = new List<int>();\r\n//                 for (i = j + 1; i < pt.Count; ++i)\r\n//                 {\r\n//                     if (dist2(pt[i], pt[j]) < d2)\r\n//                     {\r\n//                         temp.Add(i);\r\n//                         temp.Add(j);\r\n//                         ln.Add(new Line(pt[i], pt[j]));\r\n//                     }\r\n\r\n//                 }\r\n//                 connectivity.Add(temp);\r\n//             }\r\n//             Connectivity = connectivity;\r\n//             ptsOut = pt;\r\n//             return ln;\r\n//         }\r\n\r\n//         public List<Line> GetGrid3D(Point3d p1, Point3d p2, int rx, int mod, int mtype, double dist, out List<Point3d> ptsOut)\r\n//         {\r\n//             int i;\r\n//             int j;\r\n//             int k;\r\n//             double dx = (p2.X - p1.X) / (double)(rx - 1.0);\r\n//             int ry = (int)(0.5 + (p2.Y - p1.Y) / dx);\r\n//             int rz = (int)(0.5 + (p2.Z - p1.Z) / dx);\r\n\r\n//             List<Point3d> pt = new List<Point3d>();\r\n//             for (k = 0; k < rz; ++k) {\r\n//                 for (j = 0; j < ry; j++) {\r\n//                     for (i = 0; i < rx; i++) {\r\n//                         double x = p1.X + i * dx;\r\n//                         double y = p1.Y + j * dx;\r\n//                         double z = p1.Z + k * dx;\r\n//                         if (mtype == 0) {\r\n//                             if ((i * i - j * j + k * k) % mod == 0) {\r\n//                                 pt.Add(new Point3d(x, y, z));\r\n//                             }\r\n//                         }\r\n//                         else if (mtype == 1)\r\n//                         {\r\n//                             if ((i * i + j * j + k * k) % mod == 0)\r\n//                             {\r\n//                                 pt.Add(new Point3d(x, y, z));\r\n//                             }\r\n//                         }\r\n//                         else if (mtype == 2)\r\n//                         {\r\n//                             if ((i * j * k) % mod == 0)\r\n//                             {\r\n//                                 pt.Add(new Point3d(x, y, z));\r\n//                             }\r\n//                         }\r\n//                         else\r\n//                         {\r\n//                             if ((i * j + j * k + i * k) % mod == 0)\r\n//                             {\r\n//                                 pt.Add(new Point3d(x, y, z));\r\n//                             }\r\n//                         }\r\n//                     }\r\n//                 }\r\n//             }\r\n//             List<Line> ln = new List<Line>();\r\n//             double d2 = dist * dist;\r\n//             for (j = 0; j < pt.Count; ++j) {\r\n//                 for (i = j + 1; i < pt.Count; ++i) {\r\n//                     if (dist2(pt[i], pt[j]) < d2) {\r\n//                         ln.Add(new Line(pt[i], pt[j]));\r\n//                     }\r\n//                 }\r\n//             }\r\n//             ptsOut = pt;\r\n//             return ln;\r\n//         }\r\n//         public List<Line> GetGrid2DFromSurface(Surface surface, int xNum, int yNum, int mod, int mtype, double dist, out List<Point3d> ptsOut)\r\n//         {\r\n//             int i;\r\n//             int j;\r\n//             double ud = (surface.Domain(0).Max - surface.Domain(0).Min) / (double)(xNum - 1);\r\n//             double vd = (surface.Domain(1).Max - surface.Domain(1).Min) / (double)(yNum - 1); ;\r\n\r\n//             List<Point3d> pt = new List<Point3d>();\r\n\r\n//             for (j = 0; j < yNum; j++)\r\n//             {\r\n//                 double v = surface.Domain(1).Min + (j * vd);\r\n//                 for (i = 0; i < xNum; i++)\r\n//                 {\r\n\r\n//                     double u = surface.Domain(0).Min + (i * ud); // I reverse I and J otherwise the point odering is differ from the future surface\r\n\r\n//                     Point3d tpt = surface.PointAt(u, v);\r\n//                     //pts.Add(pt)\r\n\r\n//                     double x = tpt.X; //p1.X + i * dx;\r\n//                     double y = tpt.Y; //p1.Y;\r\n//                     double z = tpt.Z; //p1.Z + j * dx; // p1.Z;\r\n//                     if (mtype == 0)\r\n//                     {\r\n//                         if ((i * i - j * j) % mod == 0)\r\n//                         {\r\n//                             pt.Add(new Point3d(x, y, z));\r\n//                         }\r\n//                     }\r\n//                     else if (mtype == 1)\r\n//                     {\r\n//                         if ((i * i + j * j) % mod == 0)\r\n//                         {\r\n//                             pt.Add(new Point3d(x, y, z));\r\n//                         }\r\n//                     }\r\n//                     else if (mtype == 2)\r\n//                     {\r\n//                         if ((i * j) % mod == 0)\r\n//                         {\r\n//                             pt.Add(new Point3d(x, y, z));\r\n//                         }\r\n//                     }\r\n//                     else\r\n//                     {\r\n//                         if ((i * j + j * i) % mod == 0)\r\n//                         {\r\n//                             pt.Add(new Point3d(x, y, z));\r\n//                         }\r\n//                     }\r\n//                 }\r\n//             }\r\n//             List<Line> ln = new List<Line>();\r\n//             double d2 = dist * dist;\r\n//             for (j = 0; j < pt.Count; ++j)\r\n//             {\r\n//                 for (i = j + 1; i < pt.Count; ++i)\r\n//                 {\r\n//                     if (dist2(pt[i], pt[j]) < d2)\r\n//                     {\r\n//                         ln.Add(new Line(pt[i], pt[j]));\r\n//                     }\r\n//                 }\r\n//             }\r\n//             ptsOut = pt;\r\n//             return ln;\r\n//         }\r\n//         public static public Point3d GetCenterPtFromMesh(Mesh m) {\r\n//             Point3d cp = new Point3d(0, 0, 0);\r\n//             foreach (Point3d p in m.Vertices) {\r\n//                 cp += p;\r\n//             }\r\n//             cp /= m.Vertices.Count;\r\n//             return cp;\r\n//         }\r\n//         public List<Line> GetGrid3DFromSurface(Surface surface, int xNum, int yNum, int zNum, double zLength, int mod, int mtype, double dist, out List<Point3d> ptsOut)\r\n//         {\r\n//             int i;\r\n//             int j;\r\n//             int k;\r\n//             double ud = (surface.Domain(0).Max - surface.Domain(0).Min) / (double)(xNum - 1);\r\n//             double vd = (surface.Domain(1).Max - surface.Domain(1).Min) / (double)(yNum - 1); ;\r\n//             double zd = zLength / (double)(zNum - 1); ;\r\n\r\n//             List<Point3d> pt = new List<Point3d>();\r\n//             for (k = 0; k < zNum; k++)\r\n//             {\r\n//                 for (j = 0; j < yNum; j++)\r\n//                 {\r\n//                     double v = surface.Domain(1).Min + (j * vd);\r\n//                     for (i = 0; i < xNum; i++)\r\n//                     {\r\n\r\n//                         double u = surface.Domain(0).Min + (i * ud); // I reverse I and J otherwise the point odering is differ from the future surface\r\n\r\n//                         Point3d tpt = surface.PointAt(u, v);\r\n//                         Vector3d nv = surface.NormalAt(u, v);\r\n//                         tpt += nv * zd * k;\r\n//                         //pts.Add(pt)\r\n\r\n//                         double x = tpt.X; //p1.X + i * dx;\r\n//                         double y = tpt.Y; //p1.Y;\r\n//                         double z = tpt.Z; //p1.Z + j * dx; // p1.Z;\r\n//                         if (mtype == 0)\r\n//                         {\r\n//                             if ((i * i - j * j + k * k) % mod == 0)\r\n//                             {\r\n//                                 pt.Add(new Point3d(x, y, z));\r\n//                             }\r\n//                         }\r\n//                         else if (mtype == 1)\r\n//                         {\r\n//                             if ((i * i + j * j + k * k) % mod == 0)\r\n//                             {\r\n//                                 pt.Add(new Point3d(x, y, z));\r\n//                             }\r\n//                         }\r\n//                         else if (mtype == 2)\r\n//                         {\r\n//                             if ((i * j * k) % mod == 0)\r\n//                             {\r\n//                                 pt.Add(new Point3d(x, y, z));\r\n//                             }\r\n//                         }\r\n//                         else\r\n//                         {\r\n//                             if ((i * j + j * k + i * k) % mod == 0)\r\n//                             {\r\n//                                 pt.Add(new Point3d(x, y, z));\r\n//                             }\r\n//                         }\r\n//                     }\r\n//                 }\r\n//             }\r\n//             List<Line> ln = new List<Line>();\r\n//             double d2 = dist * dist;\r\n//             for (j = 0; j < pt.Count; ++j)\r\n//             {\r\n//                 for (i = j + 1; i < pt.Count; ++i)\r\n//                 {\r\n//                     if (dist2(pt[i], pt[j]) < d2)\r\n//                     {\r\n//                         ln.Add(new Line(pt[i], pt[j]));\r\n//                     }\r\n//                 }\r\n//             }\r\n//             ptsOut = pt;\r\n//             return ln;\r\n//         }\r\n//         double dist2(Point3d p0, Point3d p1)\r\n//         {\r\n//             return (p0.X - p1.X) * (p0.X - p1.X) + (p0.Y - p1.Y) * (p0.Y - p1.Y) + (p0.Z - p1.Z) * (p0.Z - p1.Z);\r\n//         }\r\n//         #endregion\r\n//     } //end class\r\n// } // end namescape\r\n","export class NumericalMotion {\r\n    public static t: number = 0.0;\r\n    public static Scale(r: number) { return (Math.sin(NumericalMotion.t) + 5.0) * 0.2 * r; }\r\n    public static ScaleLocalT(r: number, t: number) { return (Math.sin(t) + 5.0) * 0.2 * r; }\r\n    public static ScaleMin(r: number) { return ((Math.sin(NumericalMotion.t) + 5.0) * 0.02 + 0.9) * r; }\r\n    public static ScaleMinOfMin(t: number) { return Math.cos(t); }\r\n    public static ScaleMinLocalT(r: number, t: number) { return ((Math.sin(t) + 5.0) * 0.02 + 0.9) * r; }\r\n    // reference for easing motion.\r\n    // https://codepen.io/xerxesnoble/pen/JNgmJR?editors=0010\r\n    public static linear(t: number) { return t; }\r\n    // accelerating from zero velocity\r\n    public static EaseInQuad(t: number) { return t * t; }\r\n    // decelerating to zero velocity\r\n    public static EaseOutQuad(t: number) { return t * (2 - t); }\r\n    // acceleration until halfway, then deceleration\r\n    public static EaseInOutQuad(t: number) { return t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t; }\r\n    // accelerating from zero velocity\r\n    public static EaseInCubic(t: number) { return t * t * t; }\r\n    // decelerating to zero velocity\r\n    public static EaseOutCubic(t: number) { return (--t) * t * t + 1; }\r\n    // acceleration until halfway, then deceleration\r\n    public static EaseInOutCubic(t: number) { return t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1; }\r\n    // accelerating from zero velocity\r\n    public static EaseInQuart(t: number) { return t * t * t * t; }\r\n    // decelerating to zero velocity\r\n    public static EaseOutQuart(t: number) { return 1 - (--t) * t * t * t; }\r\n    // acceleration until halfway, then deceleration\r\n    public static EaseInOutQuart(t: number) { return t < .5 ? 8 * t * t * t * t : 1 - 8 * (--t) * t * t * t; }\r\n    // accelerating from zero velocity\r\n    public static EaseInQuint(t: number) { return t * t * t * t * t; }\r\n    // decelerating to zero velocity\r\n    public static EaseOutQuint(t: number) { return 1 + (--t) * t * t * t * t; }\r\n    // acceleration until halfway, then deceleration\r\n    public static EaseInOutQuint(t: number) { return t < .5 ? 16 * t * t * t * t * t : 1 + 16 * (--t) * t * t * t * t; }\r\n    // elastic bounce effect at the beginning\r\n    public static EaseInElastic(t: number) { return (.04 - .04 / t) * Math.sin(25 * t) + 1; }\r\n    // elastic bounce effect at the end\r\n    public static EaseOutElastic(t: number) { return .04 * t / (--t) * Math.sin(25 * t); }\r\n    // elastic bounce effect at the beginning and end\r\n    public static EaseInOutElastic(t: number) { t -= .5; return t < 0 ? (.01 + .01 / t) * Math.sin(50 * t) : (.02 - .01 / t) * Math.sin(50 * t) + 1; }\r\n\r\n    // https://joshondesign.com/2013/03/01/improvedEasingEquations\r\n    public static easeOutElastic2(t: number) { var p = 0.3; return Math.pow(2, -10 * t) * Math.sin((t - p / 4) * (2 * Math.PI) / p) + 1; }\r\n\r\n    // https://github.com/AndrewRayCode/easing-utils/blob/master/src/easing.js\r\n    // Slight acceleration from zero to full speed\r\n    public static easeInSine(t: number) { return -1 * Math.cos(t * (Math.PI / 2)) + 1; }\r\n    // Slight deceleration at the end\r\n    public static easeOutSine(t: number) { return Math.sin(t * (Math.PI / 2)); }\r\n    // Slight acceleration at beginning and slight deceleration at end\r\n    public static easeInOutSine(t: number) { return -0.5 * (Math.cos(Math.PI * t) - 1); }\r\n    // Accelerating from zero velocity\r\n    public static easeInQuad(t: number) { return t * t; }\r\n    // Decelerating to zero velocity\r\n    public static easeOutQuad(t: number) { return t * (2 - t); }\r\n    // Acceleration until halfway, then deceleration\r\n    public static easeInOutQuad(t: number) { return t < 0.5 ? 2 * t * t : - 1 + (4 - 2 * t) * t; }\r\n    // Accelerating from zero velocity\r\n    public static easeInCubic(t: number) { return t * t * t; }\r\n    // Decelerating to zero velocity\r\n    public static easeOutCubic(t: number) { const t1 = t - 1; return t1 * t1 * t1 + 1; }\r\n    // Acceleration until halfway, then deceleration\r\n    public static easeInOutCubic(t: number) { return t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1; }\r\n    // Accelerating from zero velocity\r\n    public static easeInQuart(t: number) { return t * t * t * t; }\r\n    // Decelerating to zero velocity\r\n    public static easeOutQuart(t: number) { const t1 = t - 1; return 1 - t1 * t1 * t1 * t1; }\r\n    // Acceleration until halfway, then deceleration\r\n    public static easeInOutQuart(t: number) { const t1 = t - 1; return t < 0.5 ? 8 * t * t * t * t : 1 - 8 * t1 * t1 * t1 * t1; }\r\n    // Accelerating from zero velocity\r\n    public static easeInQuint(t: number) { return t * t * t * t * t; }\r\n    // Decelerating to zero velocity\r\n    public static easeOutQuint(t: number) { const t1 = t - 1; return 1 + t1 * t1 * t1 * t1 * t1; }\r\n    // Acceleration until halfway, then deceleration\r\n    public static easeInOutQuint(t: number) { const t1 = t - 1; return t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * t1 * t1 * t1 * t1 * t1; }\r\n    // Accelerate exponentially until finish\r\n    public static easeInExpo(t: number) { if (t === 0) { return 0; } return Math.pow(2, 10 * (t - 1)); }\r\n    // Initial exponential acceleration slowing to stop\r\n    public static easeOutExpo(t: number) { if (t === 1) { return 1; } return (-Math.pow(2, -10 * t) + 1); }\r\n    // Exponential acceleration and deceleration\r\n    public static easeInOutExpo(t: number) {\r\n        if (t === 0 || t === 1) { return t; }\r\n        const scaledTime = t * 2;\r\n        const scaledTime1 = scaledTime - 1;\r\n        if (scaledTime < 1) { return 0.5 * Math.pow(2, 10 * (scaledTime1)); } return 0.5 * (-Math.pow(2, -10 * scaledTime1) + 2);\r\n    }\r\n    // Increasing velocity until stop\r\n    public static easeInCirc(t: number) { const scaledTime = t / 1; return -1 * (Math.sqrt(1 - scaledTime * t) - 1); }\r\n    // Start fast, decreasing velocity until stop\r\n    public static easeOutCirc(t: number) { const t1 = t - 1; return Math.sqrt(1 - t1 * t1); }\r\n    // Fast increase in velocity, fast decrease in velocity\r\n    public static easeInOutCirc(t: number) {\r\n        const scaledTime = t * 2;\r\n        const scaledTime1 = scaledTime - 2;\r\n        if (scaledTime < 1) { return -0.5 * (Math.sqrt(1 - scaledTime * scaledTime) - 1); }\r\n        return 0.5 * (Math.sqrt(1 - scaledTime1 * scaledTime1) + 1);\r\n    }\r\n    // Slow movement backwards then fast snap to finish\r\n    public static easeInBack(t: number, magnitude: number = 1.70158) { return t * t * ((magnitude + 1) * t - magnitude); }\r\n    // Fast snap to backwards point then slow resolve to finish\r\n    public static easeOutBack(t: number, magnitude: number = 1.70158) {\r\n        const scaledTime = (t / 1) - 1; return (scaledTime * scaledTime * ((magnitude + 1) * scaledTime + magnitude)) + 1;\r\n    }\r\n    // Slow movement backwards, fast snap to past finish, slow resolve to finish\r\n    public static easeInOutBack(t: number, magnitude: number = 1.70158) {\r\n        const scaledTime = t * 2;\r\n        const scaledTime2 = scaledTime - 2;\r\n        const s = magnitude * 1.525;\r\n        if (scaledTime < 1) { return 0.5 * scaledTime * scaledTime * (((s + 1) * scaledTime) - s); }\r\n        return 0.5 * (scaledTime2 * scaledTime2 * ((s + 1) * scaledTime2 + s) + 2);\r\n    }\r\n    // Bounces slowly then quickly to finish\r\n    public static easeInElastic(t: number, magnitude: number = 0.7) {\r\n        if (t === 0 || t === 1) { return t; }\r\n        const scaledTime = t / 1;\r\n        const scaledTime1 = scaledTime - 1;\r\n        const p = 1 - magnitude;\r\n        const s = p / (2 * Math.PI) * Math.asin(1);\r\n        return -(Math.pow(2, 10 * scaledTime1) * Math.sin((scaledTime1 - s) * (2 * Math.PI) / p));\r\n    }\r\n    // Fast acceleration, bounces to zero\r\n    public static easeOutElastic(t: number, magnitude: number = 0.7) {\r\n        const p = 1 - magnitude;\r\n        const scaledTime = t * 2;\r\n        if (t === 0 || t === 1) { return t; }\r\n        const s = p / (2 * Math.PI) * Math.asin(1);\r\n        return (Math.pow(2, -10 * scaledTime) * Math.sin((scaledTime - s) * (2 * Math.PI) / p)) + 1;\r\n    }\r\n    // Slow start and end, two bounces sandwich a fast motion\r\n    public static easeInOutElastic(t: number, magnitude: number = 0.65) {\r\n        const p = 1 - magnitude;\r\n        if (t === 0 || t === 1) { return t; }\r\n        const scaledTime = t * 2;\r\n        const scaledTime1 = scaledTime - 1;\r\n        const s = p / (2 * Math.PI) * Math.asin(1);\r\n        if (scaledTime < 1) {\r\n            return -0.5 * (Math.pow(2, 10 * scaledTime1) * Math.sin((scaledTime1 - s) * (2 * Math.PI) / p));\r\n        } else { return (Math.pow(2, -10 * scaledTime1) * Math.sin((scaledTime1 - s) * (2 * Math.PI) / p) * 0.5) + 1; }\r\n    }\r\n    // Bounce to completion\r\n    public static easeOutBounce(t: number) {\r\n        const scaledTime = t / 1;\r\n        if (scaledTime < (1 / 2.75)) {\r\n            return 7.5625 * scaledTime * scaledTime;\r\n        } else if (scaledTime < (2 / 2.75)) {\r\n            const scaledTime2 = scaledTime - (1.5 / 2.75); return (7.5625 * scaledTime2 * scaledTime2) + 0.75;\r\n        } else if (scaledTime < (2.5 / 2.75)) {\r\n            const scaledTime2 = scaledTime - (2.25 / 2.75); return (7.5625 * scaledTime2 * scaledTime2) + 0.9375;\r\n        } else { const scaledTime2 = scaledTime - (2.625 / 2.75); return (7.5625 * scaledTime2 * scaledTime2) + 0.984375; }\r\n    }\r\n    // Bounce increasing in velocity until completion\r\n    public static easeInBounce(t: number) { return 1 - NumericalMotion.easeOutBounce(1 - t); }\r\n    // Bounce in and bounce out\r\n    public static easeInOutBounce(t: number) { if (t < 0.5) { return NumericalMotion.easeInBounce(t * 2) * 0.5; } return (NumericalMotion.easeOutBounce((t * 2) - 1) * 0.5) + 0.5; }\r\n    public static Easing() {\r\n        // let r0 =0\r\n        // let r1 =0\r\n        // if(this.r <= this.rOrigin) {\r\n        //     r0 = this.rOrigin;\r\n        //     r1 = this.rTaget;\r\n        // } else{\r\n        //     r1 = this.rOrigin;\r\n        //     r0 = this.rTaget;\r\n        // }\r\n        // this.vec * 0.95+(tVec * 0.05);\r\n        //     if(this.isAniScale) {\r\n        //         r * 0.95+(rt * 0.05);\r\n        //         if(r >rt) {\r\n        //             this.isAniScale=!this.isAniScale;\r\n        //         }\r\n        //     }\r\n    }\r\n    public static Update() {\r\n        NumericalMotion.t += 0.05;\r\n    }\r\n}","export class Deltatime {\r\n    public now: number;\r\n    public delta: number;\r\n    public frameRate: number;\r\n\r\n    private last: number = 0;\r\n    private timeLastRender: number;\r\n    msLoop: number;\r\n    constructor() {\r\n        //\r\n    }\r\n    public UpdateFPS() {\r\n        this.now = window.performance.now();\r\n        this.msLoop = this.now - this.last;\r\n        this.last = this.now;\r\n\r\n        this.delta = this.delta + Math.min(1, (this.msLoop) / 1000);\r\n\r\n        if (this.delta > this.frameRate) { this.delta = this.delta - this.frameRate; }\r\n\r\n        this.delta = (Date.now() - this.timeLastRender) / 1000;\r\n        this.timeLastRender = Date.now();\r\n        this.frameRate = (1 / this.delta);\r\n\r\n    }\r\n    public get dt() {\r\n        return this.delta;\r\n    }\r\n}","export enum APPS {\r\n    WALLPAPER2D = 'WALLPAPER2D',\r\n    ANNOTATION2D = 'ANNOTATION2D',\r\n    ANNOTATION3D = 'ANNOTATION3D',\r\n\r\n    WALLPAPER3D = 'WALLPAPER3D',\r\n    DRAWINGTOOL2D = 'DRAWINGTOOL2D',\r\n    DRAWINGTOOL3D = 'DRAWINGTOOL3D',\r\n}\r\nexport enum ADDONS {\r\n    SMARTDRAWING = 'SMARTDRAWING',\r\n    MAPFILTER = 'MAPFILTER',\r\n    MAPTICON = 'MAPTICON',\r\n    DRAWINGBLOCK = 'DRAWINGBLOCK',\r\n}\r\nexport enum ACTIVECOMMAND_MODE_N3D {\r\n    NONE = 'NONE', SELECT = 'SELECT', REMOVE = 'REMOVE',\r\n\r\n}\r\nexport enum ML_MODEL_TYPE {\r\n    NONE = 'NONE',\r\n    DEEP_LEARNING = 'DEEP_LEARNING'\r\n}\r\nexport enum ACTIVE_SKETCH_MODE {\r\n    ERASER = 'ERASER',\r\n    NONE = 'NONE',\r\n    SIMPLE_PENCIL = 'SIMPLE_PENCIL',\r\n    SIMPLE_MULT_PENCIL = 'SIMPLE_MULT_PENCIL',\r\n    BRUSH_PENCIL = 'BRUSH_PENCIL',\r\n    FUR_PENCIL = 'FUR_PENCIL',\r\n    FUR_PENCIL_TEXTURE = 'FUR_PENCIL_TEXTURE',\r\n    BRAID_PENCIL = 'BRAID_PENCIL',\r\n    STAR_PENCIL = 'STAR_PENCIL',\r\n    MULTIPLE_LINE_PENCIL = 'MULTIPLE_LINE_PENCIL',\r\n    RANDOM_RADIUS_PENCIL = 'RANDOM_RADIUS_PENCIL',\r\n    COLORED_PIXELS_PENCIL = 'COLORED_PIXELS_PENCIL',\r\n    PATTERN_BASED_PENCIL = 'PATTERN_BASED_PENCIL',\r\n    SHAPED_PENCIL = 'SHAPED_PENCIL'\r\n}\r\nexport enum PROJECTION_TYPE {\r\n    MERCATOR = 'MERCATOR',\r\n    SPHERICALPROJECTION = 'SPHERICALPROJECTION',\r\n    ORTHOGRAPHIC = 'ORTHOGRAPHIC',\r\n    CONIC_EQUAL_AREA = 'CONIC_EQUAL_AREA',\r\n    CONIC_EQUI_DISTANT = 'CONIC_EQUI_DISTANT',\r\n    EQUAL_EARTH = 'EQUAL_EARTH',\r\n    EQUI_RECTANGULAR = 'EQUI_RECTANGULAR',\r\n    GNOMONIC = 'GNOMONIC',\r\n    CONIC_CONFORMAL = 'CONIC_CONFORMAL',\r\n    STEREO_GRAPHIC = 'STEREO_GRAPHIC',\r\n    ALBERS_USA = 'ALBERS_USA',\r\n}\r\nexport enum ACTIVECOMMAND_MODE {\r\n    // NONE = 'NONE', SELECT = 'SELECT', REMOVE = 'REMOVE', SELECT_RECT = 'SELECT_RECT', SELECT_LASSO = 'SELECT_LASSO', MOVE_EASEING = 'MOVE_EASEING', UNDO = 'UNDO', REDO = 'REDO',\r\n    // // .............................. shape\r\n    // POINT_REGULAR = 'POINT_REGULAR', POINT_NUMBERED = 'POINT_NUMBERED',\r\n    // POLYLINE = 'POLYLINE', POLYLINE_CONSTRAINT = 'POLYLINE_CONSTRAINT',\r\n    // POLYGON = 'POLYGON', POLYGON_MULTIPLE = 'POLYGON_MULTIPLE', POLYGON_CONSTRAINT = 'POLYGON_CONSTRAINT',\r\n    // POLYLINE_BENDING = 'POLYLINE_BENDING', LINE_GRAPH = 'LINE_GRAPH',\r\n    // CIRCLE = 'CIRCLE', CIRCLE_CONSTRAINT_AREA = 'CIRCLE_CONSTRAINT_AREA', CIRCLE_CONSTRAINT_CIRCUMFERENCE = 'CIRCLE_CONSTRAINT_CIRCUMFERENCE',\r\n    // RECTANGLE = 'RECTANGLE',\r\n    // POINT_ICON = 'POINT_ICON', TEXT = 'TEXT', TEXT_LEADERLINE = 'TEXT_LEADERLINE',\r\n    // ARROW_SINGLE = 'ARROW_SINGLE', ARROW_DOUBLE = 'ARROW_DOUBLE',\r\n    // CURVE = 'CURVE', CURVE_OPEN = 'CURVE_OPEN', CURVE_CLOSE = 'CURVE_CLOSE',\r\n    // FREEHAND_POLYLINE = 'FREEHAND_POLYLINE', FREEHAND_CURVE = 'FREEHAND_CURVE',\r\n    // SMARTDRAWING = 'SMARTDRAWING', SMARTDRAWING_DEEPLEARNING = 'SMARTDRAWING_DEEPLEARNING',\r\n    // LINE = 'LINE',\r\n    // // .............................. geometry\r\n    // CPOINT_REGULAR = 'CPOINT_REGULAR', CPOINT_NUMBERED = 'CPOINT_NUMBERED',\r\n    // CLINE = 'CLINE', CPOLYLINE = 'CPOLYLINE', CPOLYGON = 'CPOLYGON', CLINE_TOOGLE = 'CLINE_TOOGLE',\r\n    // CARC = 'CARC', CCIRCLE = 'CCIRCLE', CRECTANGLE = 'CRECTANGLE', CNGON = 'CNGON', CSTAR = 'CSTAR',\r\n    // CCURVE = 'CCURVE', CCURVE_CLOSE = 'CCURVE_CLOSE',\r\n    // CFREEHAND_POLYLINE = 'CFREEHAND_POLYLINE', CFREEHAND_CURVE = 'CFREEHAND_CURVE', CFREEHAND_LINE = 'CFREEHAND_LINE', CFREEHAND_SMARTDRAWING = 'CFREEHAND_SMARTDRAWING',\r\n    // CFREEHAND_SMOOTH = 'CFREEHAND_SMOOTH', CRECTANGLE_CROP = 'CRECTANGLE_CROP',\r\n    // // .............................. internal\r\n    // CPOINT = 'CPOINT', CNODE = 'CNODE', CEDGE = 'CEDGE',\r\n\r\n    NONE = 'NONE', SELECT = 'SELECT', REMOVE = 'REMOVE', SELECT_RECT = 'SELECT_RECT', SELECT_LASSO = 'SELECT_LASSO', MOVE_EASEING = 'MOVE_EASEING', UNDO = 'UNDO', REDO = 'REDO',\r\n    // .............................. shape\r\n    POINT_REGULAR = 'POINT_REGULAR', POINT_NUMBERED = 'POINT_NUMBERED',\r\n    POLYLINE = 'POLYLINE', FREEHAND_POLYLINE_BENDING = 'FREEHAND_POLYLINE_BENDING', POLYLINE_CONSTRAINT = 'POLYLINE_CONSTRAINT',\r\n    POLYGON = 'POLYGON', POLYGON_GRAPH = 'POLYGON_GRAPH',\r\n    POLYGON_MULTIPLE = 'POLYGON_MULTIPLE', POLYGON_CONSTRAINT = 'POLYGON_CONSTRAINT',\r\n    POLYLINE_BENDING = 'POLYLINE_BENDING', LINE_GRAPH = 'LINE_GRAPH',\r\n    CIRCLE = 'CIRCLE', CIRCLE_CONSTRAINT_AREA = 'CIRCLE_CONSTRAINT_AREA', CIRCLE_CONSTRAINT_CIRCUMFERENCE = 'CIRCLE_CONSTRAINT_CIRCUMFERENCE',\r\n    RECTANGLE = 'RECTANGLE',\r\n    POINT_ICON = 'POINT_ICON', TEXT = 'TEXT', TEXT_LEADERLINE = 'TEXT_LEADERLINE',\r\n    ARROW_SINGLE = 'ARROW_SINGLE', ARROW_DOUBLE = 'ARROW_DOUBLE',\r\n    CURVE = 'CURVE', CURVE_OPEN = 'CURVE_OPEN', CURVE_CLOSE = 'CURVE_CLOSE',\r\n    FREEHAND_POLYLINE = 'FREEHAND_POLYLINE', FREEHAND_POLYGON = 'FREEHAND_POLYGON',\r\n    FREEHAND_CURVE = 'FREEHAND_CURVE', FREEHAND_CURVE_CLOSED = 'FREEHAND_CURVE_CLOSED',\r\n    SMARTDRAWING = 'SMARTDRAWING', SMARTDRAWING_DEEPLEARNING = 'SMARTDRAWING_DEEPLEARNING',\r\n    LINE = 'LINE',\r\n\r\n    APOINT = 'APOINT',\r\n    // .............................. geometry\r\n    CPOINT_REGULAR = 'CPOINT_REGULAR', CPOINT_NUMBERED = 'CPOINT_NUMBERED',\r\n    CLINE = 'CLINE', CPOLYLINE = 'CPOLYLINE', CPOLYGON = 'CPOLYGON', CLINE_TOOGLE = 'CLINE_TOOGLE',\r\n    CARC = 'CARC', CCIRCLE = 'CCIRCLE', CRECTANGLE = 'CRECTANGLE', CNGON = 'CNGON', CSTAR = 'CSTAR',\r\n    CCURVE = 'CCURVE', CCURVE_CLOSE = 'CCURVE_CLOSE',\r\n    CFREEHAND_POLYLINE = 'CFREEHAND_POLYLINE', CFREEHAND_CURVE = 'CFREEHAND_CURVE', CFREEHAND_LINE = 'CFREEHAND_LINE', CFREEHAND_SMARTDRAWING = 'CFREEHAND_SMARTDRAWING',\r\n\r\n    CFREEHAND_SMOOTH = 'CFREEHAND_SMOOTH', CRECTANGLE_CROP = 'CRECTANGLE_CROP',\r\n    // .............................. internal\r\n    CPOINT = 'CPOINT', CNODE = 'CNODE', CEDGE = 'CEDGE',\r\n\r\n    LINE_SPIKE = 'LINE_SPIKE', CIRCLE_TRAJECTORY = 'CIRCLE_TRAJECTORY', ARC_SPIKE = 'ARC_SPIKE',\r\n}\r\nexport enum GTYPE {\r\n    POINT_REGULAR = 'POINT_REGULAR', POINT_NUMBERED = 'POINT_NUMBERED', POINT_ICON = 'POINT_ICON',\r\n    POLYLINE = 'POLYLINE', POLYLINE_BENDING = 'POLYLINE_BENDING',\r\n    POLYGON = 'POLYGON', POLYGON_GRAPH = 'POLYGON_GRAPH', POLYGON_MULTIPLE = 'POLYGON_MULTIPLE',\r\n    CIRCLE = 'CIRCLE', RECTANGLE = 'RECTANGLE', AN_GON = 'AN_GON',\r\n    ARROW_SINGLE = 'ARROW_SINGLE', ARROW_DOUBLE = 'ARROW_DOUBLE', TEXT = 'TEXT', CATEXT = 'CATEXT', TEXT_LEADERLINE = 'TEXT_LEADERLINE',\r\n\r\n    APOINT = 'APOINT', AMIDPOINT = 'AMIDPOINT', ANODE = 'ANODE', APOINT_PATH = 'APOINT_PATH', ANODE_RECT = 'ANODE_RECT',\r\n    ANODE_CIRCLE = 'ANODE_CIRCLE', ANODE_NGON = 'ANODE_NGON', ANODE_TEXT = 'ANODE_TEXT',\r\n    AMIDPOINT_ALINE = 'AMIDPOINT_ALINE',\r\n\r\n    CURVE = 'CURVE', CURVE_OPEN = 'CURVE_OPEN', CURVE_CLOSE = 'CURVE_CLOSE',\r\n    FREEHAND_POLYLINE = 'FREEHAND_POLYLINE', FREEHAND_CURVE = 'FREEHAND_CURVE',\r\n    SMARTDRAWING = 'SMARTDRAWING',\r\n    ALINE = 'ALINE',\r\n\r\n    CPOINT = 'CPOINT', CMIDPOINT = 'CMIDPOINT', CNODE = 'CNODE', CNODE_RECT = 'CNODE_RECT', CNODE_CIRCLE = 'CNODE_CIRCLE', CNODE_NGON = 'CNODE_NGON', CNODE_TEXT = 'CNODE_TEXT',\r\n    CPOINT_REGULAR = 'CPOINT_REGULAR', CPOINT_NUMBERED = 'CPOINT_NUMBERED',\r\n    CLINE = 'CLINE', CEDGE = 'CEDGE',\r\n    CPOLYLINE = 'CPOLYLINE', CPOLYGON = 'CPOLYGON', CRECTANGLE = 'CRECTANGLE', CN_GON = 'CN_GON', CN_STAR = 'CN_STAR',\r\n    CARC = 'CARC', CCIRCLE = 'CCIRCLE', CCURVE = 'CCURVE', CCURVE_OPEN = 'CCURVE_OPEN', CCURVE_CLOSED = 'CCURVE_CLOSED',\r\n    CBLACKHOLE = 'CBLACKHOLE', CFREEHAND = 'CFREEHAND', COTHERS = 'COTHERS'\r\n}\r\nexport enum CURSOR {\r\n    DEFAULT = 'default',\r\n    AUTO = 'auto',\r\n    CROSSHAIR = 'crosshair',\r\n    MOVE = 'move',\r\n    POINTER = 'pointer',\r\n    TEXT = 'text',\r\n    WAIT = 'wait',\r\n    HELP = 'help',\r\n    PROGRESS = 'progress',\r\n}\r\n\r\nexport enum X_GTYPE {\r\n\r\n    X_NONE = 'X_NONE', X_REMOVE = 'X_REMOVE',\r\n    X_SELECT = 'X_SELECT', X_SELECT_RECT = 'X_SELECT_RECT', X_SELECT_LASSO = 'X_SELECT_LASSO', X_UNDO = 'X_UNDO', X_REDO = 'X_REDO',\r\n\r\n    X_ARROW_SINGLE = 'X_ARROW_SINGLE', X_ARROW_DOUBLE = 'X_ARROW_DOUBLE',\r\n\r\n    X_POINT_REGULAR = 'X_POINT_REGULAR', X_POINT_NUMBERED = 'X_POINT_NUMBERED',\r\n\r\n    X_POLYLINE = 'X_POLYLINE', X_FREEHAND_POLYLINE = 'X_FREEHAND_POLYLINE',\r\n\r\n    X_POLYGON = 'X_POLYGON',\r\n    X_CIRCLE = 'X_CIRCLE', X_RECTANGLE = 'X_RECTANGLE',\r\n\r\n    X_TEXT_LEADERLINE = 'X_TEXT_LEADERLINE',\r\n    // .............................. internal\r\n    X_POINT = 'X_POINT', X_NODE = 'X_NODE', X_EDGE = 'X_EDGE', X_POINT_ICON = 'X_POINT_ICON'\r\n\r\n    // POLYLINE = 'POLYLINE', X_POLYLINE_CONSTRAINT = 'POLYLINE_CONSTRAINT',\r\n    // POLYGON = 'POLYGON', X_POLYGON_MULTIPLE = 'POLYGON_MULTIPLE', X_POLYGON_CONSTRAINT = 'POLYGON_CONSTRAINT',\r\n    // POLYLINE_BENDING = 'POLYLINE_BENDING', X_LINE_GRAPH = 'LINE_GRAPH',\r\n    // , X_CIRCLE_CONSTRAINT_AREA = 'CIRCLE_CONSTRAINT_AREA', X_CIRCLE_CONSTRAINT_CIRCUMFERENCE = 'CIRCLE_CONSTRAINT_CIRCUMFERENCE',\r\n    //\r\n    // , X_TEXT = 'TEXT',\r\n    //\r\n    // CURVE = 'CURVE', X_CURVE_OPEN = 'CURVE_OPEN', X_CURVE_CLOSE = 'CURVE_CLOSE',\r\n    // FREEHAND_POLYLINE = 'FREEHAND_POLYLINE', X_FREEHAND_CURVE = 'FREEHAND_CURVE',\r\n    // SMARTDRAWING = 'SMARTDRAWING', X_SMARTDRAWING_DEEPLEARNING = 'SMARTDRAWING_DEEPLEARNING',\r\n    // LINE = 'LINE',\r\n\r\n    // .............................. geometry\r\n    // X_CLINE_TOOGLE = 'CLINE_TOOGLE',\r\n    // CARC = 'CARC', X_CCIRCLE = 'CCIRCLE', X_CRECTANGLE = 'CRECTANGLE', X_CNGON = 'CNGON', X_CSTAR = 'CSTAR',\r\n    // CCURVE = 'CCURVE', X_CCURVE_CLOSE = 'CCURVE_CLOSE',\r\n    // CFREEHAND_POLYLINE = 'CFREEHAND_POLYLINE', X_CFREEHAND_CURVE = 'CFREEHAND_CURVE', X_CFREEHAND_LINE = 'CFREEHAND_LINE', X_CFREEHAND_SMARTDRAWING = 'CFREEHAND_SMARTDRAWING',\r\n    // CFREEHAND_SMOOTH = 'CFREEHAND_SMOOTH', X_CRECTANGLE_CROP = 'CRECTANGLE_CROP',\r\n\r\n}\r\n\r\nexport enum ACTION_TYPE {\r\n    PointerOut = 'pointerOut',\r\n    SetDrawingMode = 'setDrawingMode',\r\n    ToggleMapfilter = 'toggleMapfilter',\r\n    ToggleQuickActions = 'toggleQuickActions',\r\n    ChangeTheme = 'changeTheme',\r\n    ToggleDrawingTooltips = 'toggleDrawingTooltips',\r\n    ToggleGrid = 'toggleGrid',\r\n    ToggleMeasure = 'toggleMeasure',\r\n    ShiftUnit = 'shiftUnit',\r\n    DumpIconsBase64s = 'dumpIconsBase64s',\r\n    AddIconBase64 = 'addIconBase64',\r\n    SelectIconBase64 = 'selectIconBase64',\r\n    // DumpIcons = 'dumpIcons',\r\n    // AddBase64 = 'addBase64',\r\n    // SelectBase64 = 'selectBase64',\r\n    InclusiveSelect = 'inclusiveSelect',\r\n    InclusiveDeselect = 'inclusiveDeselect',\r\n    ExclusiveSelect = 'exclusiveSelect',\r\n    ExclusiveDeselect = 'exclusiveDeselect',\r\n    ReorderNumberedPoints = 'reorderNumberedPoints',\r\n    Remove = 'remove',\r\n    RemoveSelected = 'removeSelected',\r\n    Update = 'update',\r\n    Enter = 'enter',\r\n    Leave = 'leave',\r\n    Show = 'show',\r\n    Hide = 'hide',\r\n    HidePopup = 'hidePopup',\r\n    ShowPopup = 'showPopup',\r\n    Dump = 'dump',\r\n    InitGhost = 'initGhost',\r\n    EnterGhost = 'enterGhost',\r\n    LeaveGhost = 'leaveGhost',\r\n    ShowGhostPopup = 'showGhostPopup',\r\n    HideGhostPopup = 'hideGhostPopup',\r\n    AddGhost = 'addGhost',\r\n    Add = 'add',\r\n    Transform = 'transform',\r\n    RemoveGhost = 'removeGhost',\r\n    ShowText = 'showText',\r\n    HideText = 'hideText',\r\n    StartEditingText = 'startEditingText',\r\n    EndEditingText = 'endEditingText'\r\n}\r\nexport enum TEXTALIGN {\r\n    START = 'start', END = 'end', LEFT = 'left', CENTER = 'center', RIGHT = 'right'\r\n}\r\nexport enum TEXTBOX {\r\n    WRAP = 'WRAP', LINEBREAK = 'LINEBREAK', NORMAL = 'NORMAL'\r\n}\r\nexport enum LINECAP {\r\n    ROUND = 'round',\r\n    BUTT = 'butt',\r\n    SQUARE = 'square'\r\n}\r\nexport enum FHTYPE {\r\n    CURVE = 'CURVE', CURVE_CLOSED = 'CURVE_CLOSED', LINE = 'LINE', PLINE = 'PLINE', PLINE_BENDING = 'PLINE_BENDING', PGON = 'PGON', SMOOTH = 'SMOOTH', SMDRAWING = 'SMDRAWING'\r\n}\r\nexport enum OPTIMIZER {\r\n    REGULAR = 'REGULAR', DOUGLAS_PEUCKER = 'DOUGLAS_PEUCKER',\r\n}\r\nexport enum VIDEO_SIZE {\r\n    FULL_HD = 'd',\r\n}\r\nexport enum GRAPHIC_MODE {\r\n    SVG = 'SVG', CANVAS = 'CANVAS', GL = 'GL'\r\n}\r\nexport enum CLOGTYPE {\r\n    COMMAND = 'COMMAND', OBJECT = 'OBJECT'\r\n}\r\nexport enum COMPILE_MODE {\r\n    PRODUCTION = 'PRODUCTION', DEVELOPMENT = 'DEVELOPMENT', LOCAL = 'LOCAL'\r\n}\r\nexport enum INTERACTION_MODE {\r\n    DRAWING = 'DRAWING', INTERACTIVE_VIEWER = 'INTERACTIVE_VIEWER', OBSERVE_VIEWER = 'OBSERVE_VIEWER'\r\n}\r\nexport enum RENDER_MODE {\r\n    DRAWING = 'DRAWING', INTERACTIVE_VIEWER = 'INTERACTIVE_VIEWER', OBSERVE_VIEWER = 'OBSERVE_VIEWER'\r\n}\r\nexport enum BROWSER_TYPE {\r\n    OPERA = 'Opera',\r\n    CHROME = 'Chrome',\r\n    SAFARI = 'Safari',\r\n    FIREFOX = 'Firefox',\r\n    IE = 'IE',\r\n    EDGE = 'Edge',\r\n    UNKNOWN = 'unknown',\r\n}\r\nexport enum PRESS_TYPE {\r\n    UP = 'UP', DOWN = 'DOWN'\r\n}\r\nexport enum CLICK_TYPE {\r\n    LEFT = 'LEFT', MIDDLE = 'MIDDLE', RIGHT = 'RIGHT', WHEEL = 'WHEEL',\r\n    DRAG = 'DRAG', DRAG_LEFT = 'DRAG_LEFT', DRAG_MIDDLE = 'DRAG_MIDDLE', DRAG_RIGHT = 'DRAG_RIGHT',\r\n    MOVE = 'MOVE', DOUBLE = 'DOUBLE', UP = 'UP',\r\n    DOWN = 'DOWN', DOWN_MIDDLE = 'DOWN_MIDDLE', DOWN_RIGHT = 'DOWN_RIGHT'\r\n}\r\nexport enum TOUCH_TYPE {\r\n    START = 'START', END = 'END', MOVE = 'MOVE', CANCEL = 'CANCEL'\r\n}\r\nexport enum EVENT_LISTENER_TYPE { NATIVE = 'NATIVE', JSAPI4X = 'JSAPI4X' }\r\n// ..........................................................................................\r\nexport enum CAMERA_TYPE_THREE {\r\n    PERSPECTIVE = 'PERSPECTIVE',\r\n    ORTHOGRAPHIC = 'ORTHOGRAPHIC',\r\n    STEREO = 'STEREO'\r\n}\r\nexport enum MAPFILTER_MODE {\r\n    CANVAS = 'CANVAS',\r\n    GL = 'GL'\r\n}","import { CLICK_TYPE } from '../../../NJSCore/Core/AppCore/Common/Enumeration';\r\nimport { ActiveCommandBase } from '../Core/ActiveCommand';\r\nexport class MouseEventData {\r\n  x: number = -1; y: number = -1; z: number = -1;\r\n  preX: number = -1; preY: number = -1; preZ: number = -1;\r\n  yGLPicking: number;\r\n  command: ActiveCommandBase;\r\n  CLICK_TYPE: CLICK_TYPE = CLICK_TYPE.MOVE;\r\n  isDown: boolean = false;\r\n  isDoubleClick: boolean = false;\r\n  isMove: boolean = false;\r\n  pressedShift: boolean = false;\r\n  pressedAlt: boolean = false;\r\n  pressedCtrl: boolean = false;\r\n\r\n  lat?: number = -1;\r\n  long?: number = -1;\r\n  wheel: number = 0;\r\n  preWheel: number = 0;\r\n\r\n  // premEvent: MouseEventData;\r\n  native: MouseEvent;\r\n  constructor() {\r\n    //\r\n  }\r\n  public DeepCopy() {\r\n    let mEvent = new MouseEventData();\r\n    mEvent.x = this.x; mEvent.y = this.y; mEvent.z = this.z; mEvent.preX = this.preX; mEvent.preY = this.preY; mEvent.preZ = this.preZ;\r\n    mEvent.pressedAlt = this.pressedAlt; mEvent.pressedShift = this.pressedShift; mEvent.pressedCtrl = this.pressedCtrl;\r\n    mEvent.isDoubleClick = this.isDoubleClick; mEvent.isDown = this.isDown; mEvent.isMove = this.isMove;\r\n    mEvent.lat = this.lat; mEvent.long = this.long; mEvent.wheel = this.wheel; mEvent.preWheel = this.preWheel;\r\n    mEvent.yGLPicking = this.yGLPicking;\r\n    mEvent.CLICK_TYPE = this.CLICK_TYPE;\r\n    mEvent.command = this.command;\r\n    mEvent.native = this.native;\r\n    return mEvent;\r\n  }\r\n}\r\nexport class MouseInteraction {\r\n  mouseEventDataPre: MouseEventData; // = new MouseEventData();\r\n\r\n  isEnable: boolean = true;\r\n\r\n  click: boolean = false;\r\n  prevent: boolean = false;\r\n  delay: number = 300;\r\n  timer: NodeJS.Timer | number;\r\n  down: boolean = false;\r\n  e: MouseEventData;\r\n  divHost: HTMLElement;\r\n  constructor(divHost: HTMLElement) {\r\n    this.divHost = divHost;\r\n    this.mouseEventDataPre = new MouseEventData();\r\n\r\n    this.InitNativeMouseEvent(this.divHost);\r\n    this.InitNativeMouseWheelEvent(this.divHost);\r\n  }\r\n  // ................................................................ event from native\r\n  InitNativeMouseWheelEvent(div: HTMLElement) {\r\n    div.onwheel = (e: WheelEvent) => { this.MouseWheel(e, e.deltaY); };\r\n  }\r\n  InitNativeMouseEvent(div?: HTMLElement | undefined) {\r\n    if (div === undefined || div === null) {\r\n      document.onclick = (e: MouseEvent) => {\r\n        this.timer = setTimeout(\r\n          () => {\r\n            if (!this.prevent) { this.MouseClick(e); }\r\n            this.prevent = false;\r\n          },\r\n          this.delay);\r\n      };\r\n      document.ondblclick = (e: MouseEvent) => {\r\n        clearTimeout(this.timer as NodeJS.Timer);\r\n        this.prevent = true;\r\n        this.MouseDoubleClick(e);\r\n      };\r\n      document.onmousedown = (e: MouseEvent) => { this.MouseDown(e); };\r\n      document.onmouseup = (e: MouseEvent) => { this.MouseUp(e); };\r\n      document.onmousemove = (e: MouseEvent) => { this.MouseMove(e); };\r\n    } else {\r\n      div.onclick = (e: MouseEvent) => {\r\n        this.timer = setTimeout(\r\n          () => {\r\n            if (!this.prevent) { this.MouseClick(e); }\r\n            this.prevent = false;\r\n          },\r\n          this.delay);\r\n      };\r\n      div.ondblclick = (e: MouseEvent) => {\r\n        clearTimeout(this.timer as number);\r\n        this.prevent = true;\r\n        this.MouseDoubleClick(e);\r\n      };\r\n      div.onmousedown = (e: MouseEvent) => { this.MouseDown(e); };\r\n      div.onmouseup = (e: MouseEvent) => { this.MouseUp(e); };\r\n      div.onmousemove = (e: MouseEvent) => { this.MouseMove(e); };\r\n    }\r\n  }\r\n  MouseDown(e: MouseEvent) {\r\n    this.click = true;\r\n    this.down = true;\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.DOWN;\r\n    mEvent.isDown = true;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  MouseClick(e: MouseEvent) {\r\n    if (!this.click) { return; }\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    if (e.button === 0) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.LEFT;\r\n    } else if (e.button === 1) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.MIDDLE;\r\n    } else if (e.button === 2) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.RIGHT;\r\n    }\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  MouseDoubleClick(e: MouseEvent) {\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.DOUBLE;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  MouseDrag(e: MouseEvent) {\r\n    this.click = false;\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.DRAG;\r\n    mEvent.isDown = true;\r\n    if (e.buttons === 1) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.DRAG;\r\n    } else if (e.buttons === 4) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.DRAG_MIDDLE;\r\n    } else if (e.buttons === 2) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.DRAG_RIGHT;\r\n    }\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  MouseMove(e: MouseEvent) {\r\n    if (this.down) { this.MouseDrag(e); return; }\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.MOVE;\r\n    mEvent.isDown = false;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  MouseUp(e: MouseEvent) {\r\n    this.down = false;\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.UP;\r\n    mEvent.isDown = false;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  MouseWheel(e: MouseEvent, v: number) {\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.wheel = v;\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.WHEEL;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  AppendDownEvent(e: MouseEvent) {\r\n    // let e: any = MouseEventListener.mouseClick;\r\n\r\n    // document.onmousedown = (e) => {\r\n    //   let mEvent = this.CommonEventBuilder(e);\r\n    //   if (e.button === 0) mEvent.CLICK_TYPE = CLICK_TYPE.LEFT;\r\n    //   else if (e.button === 1) mEvent.CLICK_TYPE = CLICK_TYPE.MIDDLE;\r\n    //   else if (e.button === 2) mEvent.CLICK_TYPE = CLICK_TYPE.RIGHT;\r\n    //   mEvent.isDown = true;\r\n    //   //mEvent.FROM = FROM.NATIVE;\r\n    //   mEvent.CLICK_TYPE = CLICK_TYPE.DOWN;\r\n    //\r\n    // };\r\n  }\r\n  AppendUpEvent() {\r\n    document.onmouseup = (e: MouseEvent) => {\r\n      let mEvent = this.CommonEventBuilder(e);\r\n      if (e.button === 0) {\r\n        mEvent.CLICK_TYPE = CLICK_TYPE.LEFT;\r\n      } else if (e.button === 1) {\r\n        mEvent.CLICK_TYPE = CLICK_TYPE.MIDDLE;\r\n      } else if (e.button === 2) {\r\n        mEvent.CLICK_TYPE = CLICK_TYPE.RIGHT;\r\n      }\r\n      mEvent.isDown = false;\r\n      // mEvent.FROM = FROM.NATIVE;\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.UP;\r\n      this.MouseEvenEmitting(mEvent);\r\n    };\r\n  }\r\n  // ................................................................ event from ArcGIS\r\n  CommonEventBuilder(e: MouseEvent): MouseEventData {\r\n    let mEvent: MouseEventData = new MouseEventData();\r\n    mEvent.preX = this.mouseEventDataPre.x;\r\n    mEvent.preY = this.mouseEventDataPre.y;\r\n    // mEvent.premEvent = this.mouseEventDataPre;\r\n\r\n    mEvent.pressedShift = e.shiftKey;\r\n    mEvent.pressedAlt = e.altKey;\r\n    mEvent.pressedCtrl = e.ctrlKey;\r\n\r\n    mEvent.x = e.offsetX;\r\n    mEvent.y = e.offsetY;\r\n    mEvent.preWheel = this.mouseEventDataPre.wheel;\r\n    mEvent.wheel = 0;\r\n    mEvent.native = e;\r\n    this.mouseEventDataPre = mEvent;\r\n    this.e = mEvent;\r\n    return mEvent;\r\n  }\r\n  MouseEvenEmitting(mouseEventData: MouseEventData) {\r\n    if (mouseEventData.isMove) {\r\n      // console.log(mouseEventData);\r\n    }\r\n    this.MouseEventEmittingBinding(mouseEventData);\r\n  }\r\n  MouseEventEmittingBinding(mouseEventData: MouseEventData) {\r\n    console.log('implmentation needed', mouseEventData);\r\n  }\r\n}","// https://developer.mozilla.org/en-US/docs/Web/API/Touch_events\r\nimport { ActiveCommandBase } from '../Core/ActiveCommand/ActiveCommandBase';\r\nimport { TOUCH_TYPE } from '../../../NJSCore/Core/AppCore/Common/Enumeration';\r\nexport class TouchEventData {\r\n    x: number = -1; y: number = -1; z: number = -1;\r\n    preX: number = -1; preY: number = -1; preZ: number = -1;\r\n    yGLPicking: number;\r\n    command: ActiveCommandBase;\r\n    TOUCH_TYPE: TOUCH_TYPE = TOUCH_TYPE.MOVE;\r\n\r\n    identifier: number;\r\n    // touchType: Touch['touchType'];\r\n\r\n    radiusX: number;\r\n    radiusY: number;\r\n    rotationAngle: number;\r\n    force: number;\r\n\r\n    color: string;\r\n    // tslint:disable-next-line:no-any\r\n    constructor() {\r\n        // console.trace();\r\n    }\r\n    public DeepCopy() {\r\n        const mEvent = new TouchEventData();\r\n        mEvent.x = this.x; mEvent.y = this.y; mEvent.z = this.z;\r\n        mEvent.preX = this.preX; mEvent.preY = this.preY; mEvent.preZ = this.preZ;\r\n\r\n        mEvent.yGLPicking = this.yGLPicking;\r\n        mEvent.TOUCH_TYPE = this.TOUCH_TYPE;\r\n        mEvent.command = this.command;\r\n        // mEvent.native = this.native;\r\n        return mEvent;\r\n    }\r\n}\r\nexport class TouchEventDataList {\r\n    // preEvent: TouchEventDataList;\r\n    native: MouseEvent;\r\n    eventList: TouchEventData[];\r\n    TOUCH_TYPE: TOUCH_TYPE = TOUCH_TYPE.MOVE;\r\n    // tslint:disable-next-line:no-any\r\n    constructor() {\r\n        this.eventList = [];\r\n    }\r\n    // Build(e: TouchEvent) {\r\n    // tslint:disable-next-line:no-any\r\n    public Build(e: any, tType: TOUCH_TYPE) {\r\n        for (let i = 0; i < e.touches.length; ++i) {\r\n            const tEvent = new TouchEventData();\r\n            tEvent.identifier = e.touches[i].identifier;\r\n\r\n            tEvent.TOUCH_TYPE = tType;\r\n\r\n            tEvent.radiusX = e.touches[i].radiusX;\r\n            tEvent.radiusY = e.touches[i].radiusY;\r\n\r\n            tEvent.rotationAngle = e.touches[i].rotationAngle;\r\n            tEvent.x = e.touches[i].clientX;\r\n            tEvent.y = e.touches[i].clientY;\r\n            tEvent.force = e.touches[i].force;\r\n\r\n            tEvent.color = this.ColorForTouch(e.touches[i]);\r\n            this.eventList.push(tEvent);\r\n        }\r\n        //    this.OngoingTouchIndexById()\r\n    }\r\n    public DeepCopy() {\r\n        // return\r\n    }\r\n    // private OngoingTouchIndexById(idToFind: number, ongoingTouches: TouchList) {\r\n    //     for (var i = 0; i < ongoingTouches.length; i++) {\r\n    //         var id = ongoingTouches[i].identifier;\r\n    //         if (id === idToFind) { return i; }\r\n    //     }\r\n    //     return -1;    // not found\r\n    // }\r\n    private ColorForTouch(touch: Touch) {\r\n        const r = touch.identifier % 16;\r\n        const g = Math.floor(touch.identifier / 3) % 16;\r\n        const b = Math.floor(touch.identifier / 7) % 16;\r\n        const rs = r.toString(16); // make it a hex digit\r\n        const gs = g.toString(16); // make it a hex digit\r\n        const bs = b.toString(16); // make it a hex digit\r\n        const color = '#' + rs + gs + bs;\r\n        // console.log('color for touch with identifier ' + touch.identifier + ' = ' + color);\r\n        return color;\r\n    }\r\n}\r\nexport class TouchInteraction {\r\n    public static touchEventDataPre: TouchEventDataList; // = new MouseEventData();\r\n\r\n    isEnable: boolean = true;\r\n\r\n    click: boolean = false;\r\n    prevent: boolean = false;\r\n    delay: number = 100;\r\n    timer: NodeJS.Timer | number;\r\n    down: boolean = false;\r\n    e: TouchEventData;\r\n    preEvent: TouchInteraction | undefined;\r\n    divHost: HTMLElement;\r\n    public static CommonEventBuilder(e: TouchEvent, type: TOUCH_TYPE): TouchEventDataList {\r\n        const mEvent: TouchEventDataList = new TouchEventDataList();\r\n        mEvent.TOUCH_TYPE = type;\r\n        mEvent.Build(e, type);\r\n\r\n        this.touchEventDataPre = mEvent;\r\n        return mEvent;\r\n    }\r\n    constructor(divHost: HTMLElement) {\r\n        this.divHost = divHost;\r\n        this.InitNativeTouchEvent(this.divHost);\r\n    }\r\n    public InitNativeTouchEvent(div: HTMLElement) {\r\n        div.ontouchstart = (e: TouchEvent) => {\r\n            const mEvent = TouchInteraction.CommonEventBuilder(e, TOUCH_TYPE.START);\r\n            this.TouchEventEmittingBinding(mEvent);\r\n        };\r\n        div.ontouchend = (e: TouchEvent) => {\r\n            const mEvent = TouchInteraction.CommonEventBuilder(e, TOUCH_TYPE.END);\r\n            this.TouchEventEmittingBinding(mEvent);\r\n        };\r\n        div.ontouchmove = (e: TouchEvent) => {\r\n            const mEvent = TouchInteraction.CommonEventBuilder(e, TOUCH_TYPE.MOVE);\r\n            this.TouchEventEmittingBinding(mEvent);\r\n        };\r\n        div.ontouchcancel = (e: TouchEvent) => {\r\n            const mEvent = TouchInteraction.CommonEventBuilder(e, TOUCH_TYPE.CANCEL);\r\n            this.TouchEventEmittingBinding(mEvent);\r\n        };\r\n    }\r\n    TouchEventEmittingBinding(mouseEventData: TouchEventDataList) {\r\n        console.log('implmentation needed', mouseEventData);\r\n    }\r\n}","//// reference\r\n// https://stackoverflow.com/questions/12024770/access-camera-from-a-browser\r\n// https://www.html5rocks.com/en/tutorials/getusermedia/intro/\r\n// https://www.youtube.com/watch?v=nCrQ1A2BEZ0\r\nexport const SIZE = { // https://en.wikipedia.org/wiki/Display_resolution\r\n    FULL_HD: [1920, 1080],\r\n    HD: [1280, 720],\r\n    NTSC: [720, 480],\r\n\r\n    WXGA: [1080, 720],\r\n    XGA: [1024, 768],\r\n    SVG: [800, 480]\r\n};\r\nexport class Camera {\r\n    public static id: number = 0;\r\n    public static FILTERS = [\r\n        'grayscale',\r\n        'sepia',\r\n        'blur',\r\n        'brightness',\r\n        'contrast',\r\n        'hue-rotate',\r\n        'hue-rotate2',\r\n        'hue-rotate3',\r\n        'saturate',\r\n        'invert',\r\n        ''\r\n    ];\r\n\r\n    video: HTMLVideoElement;\r\n    canvas: HTMLCanvasElement;\r\n    ctx: CanvasRenderingContext2D;\r\n\r\n    width: number = 400; // 1280; // 400;\r\n    height: number = 400; // 720; // 400;\r\n\r\n    mediaStream: MediaStream;\r\n\r\n    hostDiv: HTMLElement;\r\n    id: string;\r\n\r\n    public static GetCamera() {\r\n        // let canvas: HTMLCanvasElement = document.createElement('canvas') as HTMLCanvasElement;\r\n        // let ctx = canvas.getContext('2d');\r\n        // let videoUrl = window.URL; // || window.webkitURL;\r\n\r\n        // navigator.getUserMedia = navigator.get\r\n    }\r\n    constructor(div: HTMLElement) {\r\n        this.hostDiv = div;\r\n        this.width = div.clientWidth;\r\n        this.height = div.clientHeight;\r\n        this.id = 'njslab-web-core-camera' + Camera.id++;\r\n\r\n        const d = SIZE.FULL_HD;\r\n        // console.log(d);\r\n        // var constraints = {\r\n        //     audio: false,\r\n        //     video: {\r\n        //         facingMode: facingMode\r\n        //     }\r\n        // };\r\n\r\n        this.InitVideo(div);\r\n        this.InitMedia();\r\n    }\r\n    public SetSizeFromTemplate(size: number[]) {\r\n        this.width = size[0]; this.height = size[1];\r\n        this.video.style.width = size[0] + 'px'; this.video.style.height = size[1] + 'px';\r\n        this.hostDiv.style.width = size[0] + 'px'; this.hostDiv.style.height = size[1] + 'px';\r\n    }\r\n    public InitCanvas() {\r\n        const canvas = document.createElement('canvas');\r\n        if (canvas) {\r\n            this.canvas = canvas;\r\n            const ctx = this.canvas.getContext('2d');\r\n            if (ctx) { this.ctx = ctx; }\r\n        }\r\n    }\r\n    public InitVideo(div: HTMLElement) {\r\n        this.video = document.createElement('video');\r\n        this.video.id = this.id;\r\n        this.video.setAttribute('playsinline', '');\r\n        this.video.setAttribute('autoplay', '');\r\n        this.video.setAttribute('muted', '');\r\n        // this.video.className = Camera.FILTERS[2];\r\n        this.video.style.filter = 'blur(3px)';\r\n        this.video.style.filter = 'contrast(150%)';\r\n        this.video.style.width = this.width + 'px';\r\n        this.video.style.height = this.height + 'px';\r\n\r\n        div.appendChild(this.video);\r\n    }\r\n    public InitMedia() {\r\n        const constraints = {\r\n            video: {\r\n                facingMode: 'facingMode',\r\n                // width: Camera.SIZE.FULL_HD[0],\r\n                // height: Camera.SIZE.FULL_HD[1],\r\n                width: this.width,\r\n                height: this.height,\r\n            },\r\n            audio: false\r\n        };\r\n\r\n        if (this.HasGetUserMedia()) {\r\n            navigator.mediaDevices.getUserMedia(constraints).then((stream: MediaStream) => {\r\n                this.mediaStream = stream;\r\n                this.video.srcObject = this.mediaStream;\r\n            });\r\n        } else {\r\n            alert('getUserMedia() is not supported by your browser');\r\n        }\r\n    }\r\n    public GetImageData() {\r\n        this.ctx.drawImage(this.video, 0, 0, this.width, this.height);\r\n        let frame = this.ctx.getImageData(0, 0, this.width, this.height);\r\n        console.log(frame);\r\n    }\r\n    public Resize(width: number, height: number) {\r\n        this.width = width; this.height = height;\r\n        this.video.style.width = width + 'px';\r\n        this.video.style.height = height + 'px';\r\n    }\r\n    public HasGetUserMedia() {\r\n        return !!(navigator.mediaDevices && navigator.mediaDevices.getUserMedia);\r\n    }\r\n    public Dummy() {\r\n        //\r\n    }\r\n    public Dispose() {\r\n        // this.mediaStream.stop();\r\n        this.mediaStream.getTracks().forEach(track => track.stop());\r\n\r\n        // Array.from(document.getElementsByClassName(this.id)).forEach(\r\n        //     (element) => { //   (element, index, array) => {\r\n        //         this.hostDiv.removeChild(element);\r\n        //     }\r\n        // );\r\n\r\n        this.hostDiv.removeChild(this.video);\r\n    }\r\n}","export class NJSLoader {\r\n    public static path: string = '/njslabSandboxStatic';\r\n    public static async URL(url: string) {\r\n        return fetch(url)\r\n            .then((response: Response) => {\r\n                return response.text();\r\n            })\r\n            .catch((err: Error) => {\r\n                console.log(err);\r\n            });\r\n    }\r\n    public static async OpenOBJ(path: string) {\r\n        // if (njslabSandboxStatic.app) { if (njslabSandboxStatic.app.isProduction) { return; } }\r\n        let file = 'torus.obj';\r\n        return fetch(`${NJSLoader.path}/3dData/${file}`)\r\n            .then((response: Response) => {\r\n                return response.text();\r\n            })\r\n            // tslint:disable-next-line:no-any\r\n            .then((d: any) => {\r\n                // if (njslabSandboxStatic.app.appVisGL3D) {\r\n                //     njslabSandboxStatic.app.appVisGL3D.activeCommands.LoadOBJ(d);\r\n                // }\r\n            })\r\n            .catch((err: Error) => {\r\n                console.log(err);\r\n            });\r\n    }\r\n    public static async OpenOBJForExternalRenderer(path: string) {\r\n        // if (njslabSandboxStatic.app) { if (njslabSandboxStatic.app.isProduction) { return; } }\r\n        console.log(path);\r\n        return fetch(path, { mode: 'no-cors' })\r\n            .then((response: Response) => {\r\n                // console.log(response.text());\r\n                return response.text();\r\n            })\r\n            // tslint:disable-next-line:no-any\r\n            .then((d: any) => {\r\n                // if (njslabSandboxStatic.app.appVisGL3D) {\r\n                //     njslabSandboxStatic.app.appVisGL3D.activeCommands.LoadOBJ(d);\r\n                // }\r\n            })\r\n            .catch((err: Error) => {\r\n                console.log(err);\r\n            });\r\n    }\r\n    public static async OpenGeoJsonEx01(path: string) {\r\n        // if (njslabSandboxStatic.app) { if (njslabSandboxStatic.app.isProduction) { return; } }\r\n        let file = 'weektest.geojson';\r\n        return fetch(`${NJSLoader.path}/json/${file}`)\r\n            .then((response: Response) => {\r\n                return response.json();\r\n            })\r\n            // tslint:disable-next-line:no-any\r\n            .then((d: any) => {\r\n                // njslabSandboxStatic.app.dataUtilities.SetData(d);\r\n            })\r\n            .catch((err: Error) => {\r\n                console.log(err);\r\n            });\r\n    }\r\n    public static async OpenGeoJsonEx02(path: string) {\r\n        // if (njslabSandboxStatic.app) { if (njslabSandboxStatic.app.isProduction) { return; } }\r\n        let file = 'BusRoute.geojson';\r\n        return fetch(`${NJSLoader.path}/json/${file}`)\r\n            .then((response: Response) => {\r\n                return response.json();\r\n            })\r\n            // tslint:disable-next-line:no-any\r\n            .then((d: any) => {\r\n                // njslabSandboxStatic.app.dataUtilities.SetData(d);\r\n            })\r\n            .catch((err: Error) => {\r\n                console.log(err);\r\n            });\r\n    }\r\n    public static async OpenGeoJsonEx03(path: string) {\r\n        // if (njslabSandboxStatic.app) { if (njslabSandboxStatic.app.isProduction) { return; } }\r\n        let file = 'globeMap.geojson';\r\n        return fetch(`${NJSLoader.path}/json/${file}`)\r\n            .then((response: Response) => {\r\n                return response.json();\r\n            })\r\n            // tslint:disable-next-line:no-any\r\n            .then((d: any) => {\r\n                // njslabSandboxStatic.app.dataUtilities.SetData(d);\r\n            })\r\n            .catch((err: Error) => {\r\n                console.log(err);\r\n            });\r\n    }\r\n    public static async OpenGeoJson(file: string) {\r\n        // if (njslabSandboxStatic.app) { if (njslabSandboxStatic.app.isProduction) { return; } }\r\n        return fetch(`${NJSLoader.path}/json/${file}`)\r\n            .then((response: Response) => {\r\n                return response.json();\r\n            })\r\n            // tslint:disable-next-line:no-any\r\n            .then((d: any) => {\r\n                // njslabSandboxStatic.app.dataUtilities.SetData(d);\r\n                return d;\r\n            })\r\n            .catch((err: Error) => {\r\n                console.log(err);\r\n            });\r\n    }\r\n    public static async OpenJson(file: string) {\r\n        // if (njslabSandboxStatic.app) { if (njslabSandboxStatic.app.isProduction) { return; } }\r\n        return fetch(`${NJSLoader.path}/json/${file}`)\r\n            .then((response: Response) => {\r\n                return response.json();\r\n            })\r\n            // tslint:disable-next-line:no-any\r\n            .then((d: any) => {\r\n                // njslabSandboxStatic.app.dataUtilities.SetData(d);\r\n                return d;\r\n            })\r\n            .catch((err: Error) => {\r\n                console.log(err);\r\n            });\r\n    }\r\n    public static async OpenJsonAnnotationTheme(file: string) {\r\n        // if (njslabSandboxStatic.app) { if (njslabSandboxStatic.app.isProduction) { return; } }\r\n        return fetch(`${NJSLoader.path}/theme/${file}`)\r\n            .then((response: Response) => {\r\n                return response.json();\r\n            })\r\n            .catch((err: Error) => {\r\n                console.log(err);\r\n            });\r\n    }\r\n    public static async OpenThemeJSON(file: string) {\r\n        // if (njslabSandboxStatic.app) { if (njslabSandboxStatic.app.isProduction) { return; } }\r\n        return fetch(`${NJSLoader.path}/theme/${file}`)\r\n            .then((response: Response) => {\r\n                return response.json();\r\n            })\r\n            .catch((err: Error) => {\r\n                console.log(err);\r\n            });\r\n    }\r\n    public static async OpenDataJSON(file: string) {\r\n        return fetch(`${NJSLoader.path}/${file}`)\r\n            .then((response: Response) => {\r\n                return response.json();\r\n            })\r\n            .catch((err: Error) => {\r\n                console.log(err);\r\n            });\r\n    }\r\n    public static async OpenImg(path: string) {\r\n        // if (njslabSandboxStatic.app) { if (njslabSandboxStatic.app.isProduction) { return; } }\r\n        return fetch(`${NJSLoader.path}/img/${path}`)\r\n            .then((response: Response) => {\r\n                return response.blob();\r\n            })\r\n            // tslint:disable-next-line:no-any\r\n            .then((d: any) => {\r\n                const img = new Image();\r\n                const objectURL = URL.createObjectURL(d);\r\n                img.src = objectURL;\r\n                img.onload = () => {\r\n                    img.crossOrigin = 'anonymous';\r\n                    // njslabSandboxStatic.app.imageUtilities.SetData(img);\r\n                };\r\n                console.log(img);\r\n                return img;\r\n            })\r\n            .catch((err: Error) => {\r\n                console.log(err);\r\n            });\r\n\r\n    }\r\n    public static async LoadImg(path: string) {\r\n        return fetch(`${NJSLoader.path}/${path}`)\r\n            .then((response: Response) => {\r\n                return response.blob();\r\n            })\r\n            // tslint:disable-next-line:no-any\r\n            .then((d: any) => {\r\n                const objectURL = URL.createObjectURL(d);\r\n                return objectURL;\r\n            })\r\n            .catch((err: Error) => {\r\n                console.log(err);\r\n            });\r\n\r\n    }\r\n    public static async LoadSVG(path: string) {\r\n        return fetch(`${NJSLoader.path}/${path}`)\r\n            .then((response: Response) => {\r\n                return response.text();\r\n            }).catch((err: Error) => {\r\n                console.log(err);\r\n            });\r\n\r\n    }\r\n    public static async LoadSVGFromLocal(path: string) {\r\n        return fetch(`${NJSLoader.path}/images/${path}`)\r\n            .then((response: Response) => {\r\n                return response.text();\r\n            }).catch((err: Error) => {\r\n                console.log(err);\r\n            });\r\n\r\n    }\r\n    public static async LoadSVGFromHTTP(path: string) {\r\n        return fetch(path, { mode: 'no-cors' })\r\n            .then((response: Response) => {\r\n                return response.text();\r\n            }).catch((err: Error) => {\r\n                console.log(err);\r\n            });\r\n    }\r\n    public static async PointRegular() {\r\n        //\r\n    }\r\n\r\n    public static async OpenXML(path: string) {\r\n        // if (njslabSandboxStatic.app) { if (njslabSandboxStatic.app.isProduction) { return; } }\r\n        // let parser = new DOMParser();\r\n        // let response = await fetch(path);\r\n        // let text = await response.text();\r\n        // let xml = await parser.parseFromString(text, 'text/xml');\r\n        // let d = await this.XmlToJson(xml);\r\n        // return d;\r\n    }\r\n    public static async OpenCSV(path: string) {\r\n        /* */\r\n    }\r\n    public static async OpenTXT(path: string) {\r\n        /* */\r\n    }\r\n    // reference https://davidwalsh.name/convert-xml-json\r\n    // static XmlToJson(xml: XMLDocument) {\r\n    // let obj = new Object; // Create the return object\r\n    // if (xml.nodeType === 1) { // element\r\n    //     if (xml.[attributes].length > 0) {// do attributes\r\n    //         obj['@attributes'] = {};\r\n    //         for (let j = 0; j < xml.attributes.length; j++) {\r\n    //             let attribute = xml.attributes.item(j);\r\n    //             obj['@attributes'][attribute.nodeName] = attribute.nodeValue;\r\n    //         }\r\n    //     }\r\n    // } else if (xml.nodeType === 3) { // text\r\n    //     if (xml.nodeValue) { obj = xml.nodeValue; }\r\n    // }\r\n    // if (xml.hasChildNodes()) { // do children\r\n    //     for (let i = 0; i < xml.childNodes.length; i++) {\r\n    //         let item = xml.childNodes.item(i) as XMLDocument;\r\n    //         let nodeName = item.nodeName;\r\n    //         if (typeof (obj[nodeName]) === 'undefined') {\r\n    //             obj[nodeName] = this.XmlToJson(item);\r\n    //         } else {\r\n    //             if (typeof (obj[nodeName].push) === 'undefined') {\r\n    //                 let old = obj[nodeName];\r\n    //                 obj[nodeName] = [];\r\n    //                 obj[nodeName].push(old);\r\n    //             }\r\n    //             obj[nodeName].push(this.XmlToJson(item));\r\n    //         }\r\n    //     }\r\n    // }\r\n    // return obj;\r\n    // }\r\n    // static XmlToJson(xml: XMLDocument) {\r\n    //     let obj = new Object(); // Create the return object\r\n    //     if (xml.nodeType === 1) { // element\r\n    //         // tslint:disable-next-line:no-string-literal\r\n    //         if (xml['attributes'].length > 0) {// do attributes\r\n    //             obj['@attributes'] = {};\r\n    //             // tslint:disable-next-line:no-string-literal\r\n    //             for (let j = 0; j < xml['attributes'].length; j++) {\r\n    //                 // tslint:disable-next-line:no-string-literal\r\n    //                 let attribute = xml['attributes'].item(j);\r\n    //                 obj['@attributes'][attribute.nodeName] = attribute.nodeValue;\r\n    //             }\r\n    //         }\r\n    //     } else if (xml.nodeType === 3) { // text\r\n    //         if (xml.nodeValue) { obj = xml.nodeValue; }\r\n    //     }\r\n    //     if (xml.hasChildNodes()) { // do children\r\n    //         for (let i = 0; i < xml.childNodes.length; i++) {\r\n    //             // tslint:disable-next-line:no-any\r\n    //             let item = xml.childNodes.item(i) as any;\r\n    //             let nodeName = item.nodeName;\r\n    //             if (typeof (obj[nodeName]) === 'undefined') {\r\n    //                 obj[nodeName] = this.XmlToJson(item);\r\n    //             } else {\r\n    //                 if (typeof (obj[nodeName].push) === 'undefined') {\r\n    //                     let old = obj[nodeName];\r\n    //                     obj[nodeName] = [];\r\n    //                     obj[nodeName].push(old);\r\n    //                 }\r\n    //                 obj[nodeName].push(this.XmlToJson(item));\r\n    //             }\r\n    //         }\r\n    //     }\r\n    //     return obj;\r\n    // }\r\n    public static async GetObjectFromSVGPath(path: string) {\r\n        let parser = new DOMParser();\r\n        let response = await fetch(path);\r\n        let text = await response.text();\r\n        let xml = await parser.parseFromString(text, 'text/xml');\r\n        let d = this.XmlToJson(xml);\r\n        return d;\r\n    }\r\n    public static async GetObjectFromSVGImporting(content: string) {\r\n        let parser = new DOMParser();\r\n        let xml = await parser.parseFromString(content, 'text/xml');\r\n        let d = this.XmlToJson(xml);\r\n        return d;\r\n    }\r\n\r\n    public static XmlToJson(xml: XMLDocument) {\r\n        let obj = {}; // Create the return object\r\n        if (xml.nodeType === 1) { // element\r\n            // tslint:disable-next-line:no-string-literal\r\n            if (xml['attributes'].length > 0) {// do attributes\r\n                obj['@attributes'] = {};\r\n                // tslint:disable-next-line:no-string-literal\r\n                for (let j = 0; j < xml['attributes'].length; j++) {\r\n                    // tslint:disable-next-line:no-string-literal\r\n                    let attribute = xml['attributes'].item(j);\r\n                    obj['@attributes'][attribute.nodeName] = attribute.nodeValue;\r\n                }\r\n            }\r\n        } else if (xml.nodeType === 3) { // text\r\n            if (xml.nodeValue) { obj = xml.nodeValue; }\r\n        }\r\n        if (xml.hasChildNodes()) { // do children\r\n            for (let i = 0; i < xml.childNodes.length; i++) {\r\n                // tslint:disable-next-line:no-any\r\n                let item = xml.childNodes.item(i) as any;\r\n                let nodeName = item.nodeName;\r\n                if (typeof (obj[nodeName]) === 'undefined') {\r\n                    obj[nodeName] = this.XmlToJson(item);\r\n                } else {\r\n                    if (typeof (obj[nodeName].push) === 'undefined') {\r\n                        let old = obj[nodeName];\r\n                        obj[nodeName] = [];\r\n                        obj[nodeName].push(old);\r\n                    }\r\n                    obj[nodeName].push(this.XmlToJson(item));\r\n                }\r\n            }\r\n        }\r\n        return obj;\r\n    }\r\n    constructor() {/* */ }\r\n}","import { BROWSER_TYPE } from '../../../../NJSCore/Core/AppCore/Common/Enumeration';\r\nexport class BrowserUtility {\r\n    private _type: BROWSER_TYPE;\r\n    private _isMobile: boolean;\r\n\r\n    // ?product=shirt&color=blue&newuser&size=m\r\n    public static getAllUrlParams(url: string = window.location.search) {\r\n        let queryString = url ? url.split('?')[1] : window.location.search.slice(1);\r\n        let obj = {};\r\n\r\n        if (queryString) {\r\n            queryString = queryString.split('#')[0];\r\n            let arr = queryString.split('&');\r\n\r\n            for (let i = 0; i < arr.length; i++) {\r\n                let a = arr[i].split('=');\r\n                let paramName = a[0];\r\n                let paramValue = typeof (a[1]) === 'undefined' ? true : a[1];\r\n\r\n                paramName = paramName.toLowerCase();\r\n                if (typeof paramValue === 'string') paramValue = paramValue.toLowerCase();\r\n\r\n                if (paramName.match(/\\[(\\d+)?\\]$/)) {\r\n                    let key = paramName.replace(/\\[(\\d+)?\\]/, '');\r\n                    if (!obj[key]) obj[key] = [];\r\n\r\n                    if (paramName && paramName.match(/\\[\\d+\\]$/)) {\r\n                        if ((/\\[(\\d+)\\]/.exec(paramName)) !== null) {\r\n                            let index = /\\[(\\d+)\\]/.exec(paramName);\r\n                            if (index && index[1]) {\r\n                                obj[key][index] = paramValue;\r\n                            }\r\n                        }\r\n                    } else {\r\n                        obj[key].push(paramValue);\r\n                    }\r\n                } else {\r\n                    if (!obj[paramName]) {\r\n                        obj[paramName] = paramValue;\r\n                    } else if (obj[paramName] && typeof obj[paramName] === 'string') {\r\n                        obj[paramName] = [obj[paramName]];\r\n                        obj[paramName].push(paramValue);\r\n                    } else {\r\n                        obj[paramName].push(paramValue);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return obj;\r\n    }\r\n    constructor() {\r\n        this.DetectBrowser();\r\n        this.DetectIsMoile();\r\n        // console.debug(this.type, ', isMobile', this.isMobile);\r\n    }\r\n    private DetectBrowser() {\r\n        if ((navigator.userAgent.indexOf('Edge') !== -1)) {\r\n            this._type = BROWSER_TYPE.EDGE;\r\n            return;\r\n        }\r\n        if ((navigator.userAgent.indexOf('Opera') || navigator.userAgent.indexOf('OPR')) !== -1) {\r\n            this._type = BROWSER_TYPE.OPERA;\r\n        }\r\n        if (navigator.userAgent.indexOf('Chrome') !== -1) {\r\n            this._type = BROWSER_TYPE.CHROME;\r\n            return;\r\n        }\r\n        if (navigator.userAgent.indexOf('Safari') !== -1) {\r\n            this._type = BROWSER_TYPE.SAFARI;\r\n            return;\r\n        }\r\n        if (navigator.userAgent.indexOf('Firefox') !== -1) {\r\n            this._type = BROWSER_TYPE.FIREFOX;\r\n            return;\r\n            // } else if ((navigator.userAgent.indexOf('MSIE') !== -1) || (!!document.documentMode === true)) { // IF IE > 10\r\n        }\r\n        if ((navigator.userAgent.indexOf('MSIE') !== -1)) { // IF IE > 10\r\n            this._type = BROWSER_TYPE.IE;\r\n        }\r\n\r\n        // else {\r\n        this._type = BROWSER_TYPE.UNKNOWN;\r\n        // }\r\n    }\r\n    private DetectIsMoile() {\r\n        this._isMobile = false; // initiate as false\r\n        // device detection\r\n        // @ts-ignore\r\n        // eslint-disable-line\r\n        if (/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(navigator.userAgent.substr(0, 4))) {\r\n            this._isMobile = true;\r\n        }\r\n    }\r\n    public get type() {\r\n        return this._type;\r\n    }\r\n    public get isMobile() {\r\n        return this._isMobile;\r\n    }\r\n}","export class ArrayUtility {\r\n  public static FindIndexOfMax(array: number[]) {\r\n    let i: number = 1;\r\n    let mi: number = 0;\r\n    while (i < array.length) {\r\n      if (!(array[i] < array[mi])) { mi = i; }\r\n      i += 1;\r\n    }\r\n    return mi;\r\n  }\r\n  public static FindIndexOfMin(array: number[]) {\r\n    let i: number = 1;\r\n    let mi: number = 0;\r\n    while (i < array.length) {\r\n      if (!(array[i] > array[mi])) { mi = i; }\r\n      i += 1;\r\n    }\r\n    return mi;\r\n  }\r\n}\r\nexport class Print {\r\n  public static isPrint: boolean = true;\r\n  public static log(s: string) {\r\n    if (!Print.isPrint) { return; }\r\n    // console.log(s);\r\n  }\r\n}","export class Describe {\r\n    index: string;\r\n    data: number[];\r\n    count: number;\r\n    min: number;\r\n    max: number;\r\n    mean: number;\r\n    sum: number;\r\n    median: number;\r\n    variance: number;\r\n    STD: number;\r\n    toFixed: number;\r\n    constructor(data: number[], count: number, min: number, max: number, mean: number, sum: number, median: number, variance: number, STD: number, index: string) {\r\n        this.data = data;\r\n        this.count = count;\r\n        this.min = min;\r\n        this.max = max;\r\n        this.mean = mean;\r\n        this.sum = sum;\r\n        this.median = median;\r\n        this.variance = variance;\r\n        this.STD = STD;\r\n        this.index = index;\r\n        this.toFixed = 4;\r\n    }\r\n    ToString() {\r\n        const s: string[] = [];\r\n        s.push('index : ' + this.index);\r\n        s.push('count : ' + this.count);\r\n        s.push('min : ' + this.min.toFixed(this.toFixed));\r\n        s.push('max : ' + this.max.toFixed(this.toFixed));\r\n        s.push('mean : ' + this.mean.toFixed(this.toFixed));\r\n        s.push('sum : ' + this.sum.toFixed(this.toFixed));\r\n        s.push('median : ' + this.median.toFixed(this.toFixed));\r\n        s.push('variance : ' + this.variance.toFixed(this.toFixed));\r\n        s.push('STD : ' + this.STD.toFixed(this.toFixed));\r\n        return s;\r\n    }\r\n}\r\nexport class StatisticsUtility {\r\n\r\n    static DescribeNumeric(n: number[], index: string = 'null') {\r\n        let describe = new Describe(\r\n            n,\r\n            n.length,\r\n            StatisticsUtility.Min(n),\r\n            StatisticsUtility.Max(n),\r\n            StatisticsUtility.Mean(n),\r\n            StatisticsUtility.Sum(n),\r\n            StatisticsUtility.Median(n),\r\n            StatisticsUtility.Variance(n),\r\n            StatisticsUtility.StandardDeviation(n),\r\n            index\r\n        );\r\n        return describe;\r\n    }\r\n    static Min(n: number[]) { return Math.min(...n); }\r\n    static Max(n: number[]) { return Math.max(...n); }\r\n    static Mean(n: number[]) { return StatisticsUtility.Average(n); }\r\n    static Average(n: number[]) { let sum = StatisticsUtility.Sum(n); return sum / n.length; }\r\n    static Sum(n: number[]) {\r\n        let i = n.length;\r\n        let sum = 0.0;\r\n        while (i--) { sum += n[i]; }\r\n        return sum;\r\n    }\r\n    static Median(n: number[]) {\r\n        let nn = StatisticsUtility.SortAscending(n);\r\n        let half = Math.floor(nn.length / 2);\r\n        if (nn.length % 2) { return nn[half]; } else { return (nn[half - 1] + nn[half]) / 2.0; }\r\n    }\r\n    static SortAscending(n: number[]) {\r\n        return n.sort((a: number, b: number) => { return a - b; });\r\n    }\r\n    static SortDescending(n: number[]) {\r\n        return n.sort((b: number, a: number) => { return a - b; });\r\n    }\r\n    static Variance(n: number[]) {\r\n        let mean = StatisticsUtility.Mean(n);\r\n        let sum = 0;\r\n        for (let i = 0; i < n.length; ++i) {\r\n            if (n[i] < mean) { sum += Math.pow(mean - n[i], 2); } else { sum += Math.pow(mean - n[i], 2); }\r\n        }\r\n        return sum / (n.length - 1.0);\r\n    }\r\n    static StandardDeviation(n: number[]) {\r\n        let variance = StatisticsUtility.Variance(n);\r\n        return Math.sqrt(variance);\r\n    }\r\n\r\n    // ............................................................................å\r\n    static GetDataForHistDataFromNumeric(n: number[], bin: number = 5) {\r\n        let bins: number[][] = [];\r\n        let d = StatisticsUtility.SortAscending(n);\r\n        let domain = [d[0], d[d.length - 1]];\r\n        let interval = (domain[1] - domain[0]) / (bin - 1);\r\n        let start = 0;\r\n        for (let i = 0; i < bin; ++i) {\r\n            const maxNum = domain[0] + ((i + 1) * interval);\r\n            let data: number[] = [];\r\n            for (let j = start; j < n.length; ++j) {\r\n                if (n[j] < maxNum) { data.push(n[j]); } else { start = j; break; }\r\n            }\r\n            bins.push(data);\r\n        }\r\n        return bins;\r\n    }\r\n    public static GetIndexByDataForHistDataFromNumeric(n: number[][], v: number) {\r\n        for (let i = 0; i < n.length; ++i) {\r\n            for (let j = 0; j < n[i].length; ++j) {\r\n                if (v < n[i][j]) {\r\n                    return i;\r\n                }\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n}\r\n\r\n// // Copyright(C) 2015 NJ Namju Lee <nj.namju@gmail.com>\r\n\r\n// import numpy as np\r\n// import pandas as pd\r\n// import random\r\n// import sklearn as sk\r\n// from sklearn.neighbors import KNeighborsRegressor as KNN\r\n// from sklearn.cross_validation import train_test_split as sk_split\r\n// from sklearn.linear_model import LinearRegression as Lin_Reg\r\n// import time\r\n// import matplotlib\r\n// import matplotlib.pyplot as plt\r\n\r\n// import skLearnLib\r\n// import math\r\n\r\n// import scipy as sp\r\n// import itertools\r\n\r\n//     from statsmodels.regression.linear_model import OLS\r\n// # % matplotlib inline\r\n\r\n// ######################################################################################\r\n// # ** MAE ** is the easiest to understand, because it's the average error.\r\n// # ** MSE ** is more popular than MAE, because MSE \"punishes\" larger errors.\r\n// # ** RMSE ** is even more popular than MSE, because RMSE is interpretable in the \"y\" units.\r\n\r\n// def MAE_MeanAbsoluteError(xTrue, xPred):\r\n// from sklearn import metrics\r\n//     result = metrics.mean_absolute_error(xTrue, xPred)\r\n// return result\r\n// def MSE_MeanSquaredError(xTrue, xPred):\r\n// from sklearn import metrics\r\n//     result = metrics.mean_squared_error(xTrue, xPred)\r\n// return result\r\n// def RMSE_MeanSquaredError(xTrue, xPred):\r\n// from sklearn import metrics\r\n//     result = np.sqrt(metrics.mean_squared_error(xTrue, xPred))\r\n// return result\r\n// def GetR2Score(yTrue, yPred):\r\n// from sklearn.metrics import r2_score\r\n//     print r2_score(yTrue, yPred)\r\n// def PrintScore(yTrue, yPred):\r\n// print \"MAE_MeanAbsoluteError:\", MAE_MeanAbsoluteError(yTrue, yPred)\r\n// print \"MSE_MeanSquaredError:\", MSE_MeanSquaredError(yTrue, yPred)\r\n// print \"RMSE_MeanSquaredError:\", RMSE_MeanSquaredError(yTrue, yPred)\r\n// print \"GetR2Score:\", GetR2Score(yTrue, yPred)\r\n\r\n// ######################################################################################\r\n\r\n// def MSE_MeanSquaredErrorLoss(fullData, targetData): # common use\r\n// sum = RSS_ResidualSumofSquares(fullData, targetData)\r\n// return sum / len(fullData)\r\n// def MSE_MeanSquaredErrorLossForCategorical(fullData, targetData): # Categorical\r\n// sum = 0.0;\r\n// for i in range(len(fullData)):\r\n//     if (fullData[i] != targetData[i]): sum += 1\r\n// return sum / len(fullData)\r\n// def GetMean(dataArray):\r\n// return np.mean(dataArray)\r\n// #     theSum = 0.0\r\n// #     for d in dataArray: theSum += d\r\n// #     return theSum / len(dataArray)\r\n// def getMedian(dataArray):\r\n// return np.median(dataArray)\r\n// def RSS_ResidualSumofSquares(dataFull, missingFill): # residual standard error, RSE ??? --OLS(Ordinary Least Squares) Residual Sum of Squares(RSS)\r\n// sumSoFar = 0.0\r\n// for i in range(len(missingFill)):\r\n//     sumSoFar += (dataFull[i] - missingFill[i]) ** 2\r\n// return sumSoFar\r\n// def TSS_TotalSumOfSquare(fullData, targetData):\r\n// # meanVal = targetData.mean() # for numpy\r\n//     meanVal = GetMean(targetData) # manual\r\n// sumSoFar = 0.0\r\n// for i in range(len(targetData)):\r\n// # sumSoFar += (fullData.y[i] - meanVal) ** 2\r\n// sumSoFar += (fullData[i] - meanVal) ** 2\r\n// return sumSoFar\r\n// def R_Squared_CoefficientOfDetermination(fullData, targetData): # this is for regression\r\n//     RSS = RSS_ResidualSumofSquares(fullData, targetData)\r\n//     TSS = TSS_TotalSumOfSquare(fullData, targetData)\r\n//     return 1 - (RSS / TSS)\r\n// def R_Squared_CoefficientOfDeterminationBySKLearn(fullData, targetData):\r\n// return sk.metrics.r2_score(fullData, targetData)\r\n// # x = [1, 2, 3, 4, 5]\r\n// # y = [6, 7, 4, 3, 2]\r\n// # y_ = [5.5, 5.0, 5.0, 3.0, 3.5]\r\n// # print MSE_MeanSquaredErrorLoss(y, y_)\r\n// # print R_Squared_CoefficientOfDetermination(y, y_)\r\n// # print R_Squared_CoefficientOfDeterminationBySKLearn(y, y_)\r\n\r\n// def GetListFromPDColumn(pdCol):\r\n// temp = []\r\n// for d in pdCol: temp.append(d)\r\n// return temp;\r\n\r\n// def RSS(e): # e = Y - Y_hat\r\n// return np.sum(e ** 2)\r\n// def RSE(RSS, lengthYpredict): #  input lengthYpredict, return sigma\r\n// return np.sqrt(RSS / (lengthYpredict - 2));\r\n// def SIGMA(y, ylength): # Y - Y_hat\r\n// theRss = RSS(y);\r\n// return RSE(theRss, ylength);\r\n\r\n// def SIGMAFromList(y, y_hatList): # YTestList - Y_hatList\r\n// sig = []\r\n// for i in range(len(y_hatList)):\r\n// #         print  y[i]\r\n// sig.append(SIGMA(y[i] - y_hatList[i], len(y_hatList)))\r\n// return sig\r\n\r\n// def SE_b1(sigma, X):\r\n// np.sqrt(sigma ** 2 / np.sum((X - np.mean(X)) ** 2))\r\n// def SE_b1WithMatrix(sigma, X):\r\n// np.sqrt(sigma ** 2 / np.dot(np.sum((X - np.mean(X)), np.sum((X - np.mean(X))))))\r\n\r\n// def MaxAbsoluteDeviation(dataFull, dataPredict):\r\n// theMax = 0.0\r\n// for i in range(len(dataFull)):\r\n//     theNum = dataFull[i] - dataPredict[i]\r\n// if theMax < theNum: theMax = theNum\r\n// return theMax\r\n\r\n// def SumOfAbsoluteDeviations(dataFull, missingFill):\r\n// sumSoFar = 0.0\r\n// for i in range(len(missingFill)):\r\n//     sumSoFar += math.abs((dataFull[i] - missingFill[i]) ** 2)\r\n// return sumSoFar\r\n\r\n// def confInt(lstArray, percent):\r\n// num = len(lstArray)\r\n// uppercut = float((100 - percent) / 2)\r\n// cut = (num * (uppercut / 100))\r\n// return lstArray[cut: -cut]\r\n\r\n// def ComputeCorrelationCoefficients(xPanda): # Compute matrix of correlation coefficients\r\n// corr_matrix = np.corrcoef(xPanda.T)\r\n// return corr_matrix;\r\n// def VisHeatMapForCorrelationMatrix(corr_matrix): # Display heat map\r\n// fig, ax = plt.subplots(1, 1, figsize = (6, 6))\r\n// ax.pcolor(corr_matrix)\r\n// ax.set_title('Heatmap of correlation matrix')\r\n// plt.show()\r\n// # data = np.loadtxt('Z:/[09_HarvardGSD]/2016_3_Fall_CS109 DataScience/lab_files/Lab_4/datasets/dataset_1.txt', delimiter = ',', skiprows = 1)\r\n// # # Split predictors and response\r\n// # x = data[:, : -1]\r\n// # y = data[:, -1]\r\n// # corr_matrix = ComputeCorrelationCoefficients(x)\r\n// # VisHeatMapForCorrelationMatrix(corr_matrix)\r\n\r\n// ##..............................................data Generator for simple linear reg from lec 3\r\n// def GenerateDataLinearFun(N = 1000, beta0 = 2.2, beta1 = 3.0, sigma = 10.0, Xmax = 1.0):\r\n// epsilon = np.random.normal(0, sigma, N) # Random normally distributed points\r\n// X = np.linspace(0, Xmax, N)\r\n// Y = beta0 + beta1 * X + epsilon\r\n// return X, Y\r\n\r\n// def GenerateDataNotLinearFun(N = 1000, beta0 = 2.2, beta1 = 3.0, sigma = 1.0, Xmax = 1.0, alpha = 1):\r\n// epsilon = np.random.normal(0, sigma, N) # Random normally distributed points\r\n// X = np.linspace(0, Xmax, N)\r\n// Y = beta0 + beta1 * X + alpha * np.sin(6 * X) + epsilon\r\n// #Y = beta0 + beta1 * X + 4 * beta1 * (X > 0.5) + epsilon\r\n// #Y = beta0 + beta1 * X + alpha * X * X * X + epsilon\r\n// return X, Y\r\n\r\n// ##..............................................GetConfidenceInterval from lec 3\r\n// def GetConfidenceInterval(X, Y):\r\n// def FitLinearModelForCoefficients(X, Y):\r\n// # Estimate the coefficients\r\n// beta1 = np.sum((X - np.mean(X)) * (Y - np.mean(Y))) / np.sum((X - np.mean(X)) ** 2)\r\n// beta0 = np.mean(Y) - beta1 * np.mean(X)\r\n// return beta0, beta1\r\n// def PredictLinearModelForY(X, beta0, beta1):\r\n// Y = beta0 + beta1 * X\r\n// return Y\r\n// beta0_hat, beta1_hat = FitLinearModelForCoefficients(X, Y)\r\n// Y_hat = PredictLinearModelForY(X, beta0_hat, beta1_hat)\r\n// e = Y - Y_hat\r\n// RSS = np.sum(e ** 2)\r\n// RSE = np.sqrt(RSS / (len(X) - 2))\r\n// sigma = RSE\r\n// SE_b1 = np.sqrt(sigma ** 2 / np.sum((X - np.mean(X)) ** 2))\r\n// print(\"Standard error on beta1\", SE_b1)\r\n// print(\"Estimate value of beta1\", beta1_hat)\r\n// print(\"95% confidence interval is: [\", beta1_hat - 2 * SE_b1, beta1_hat + 2 * SE_b1, \"]\")\r\n// print(\"Correct value is: \", 3)\r\n// # N = 100000 # 10, 100, 100000\r\n// # x, y = GenerateDataLinearFun(N)\r\n// # GetConfidenceInterval(x, y)\r\n\r\n// def plotit(gamma):\r\n// def FitLinearModel(X, Y):\r\n// # Estimate the coefficients\r\n// beta1 = np.sum((X - np.mean(X)) * (Y - np.mean(Y))) / np.sum((X - np.mean(X)) ** 2)\r\n// beta0 = np.mean(Y) - beta1 * np.mean(X)\r\n// return beta0, beta1\r\n// def PredictLinearModel(X, beta0, beta1):\r\n// Y = beta0 + beta1 * X\r\n// return Y\r\n// # GENERATE DATA THAT ARE NOT FROM A LINEAR FUNCTION\r\n// N = 1000 # number of points\r\n// beta0 = 2.2; beta1 = 3.0\r\n// X, Y = GenerateDataNotLinearFun(N, beta0, beta1, sigma = 0.001, alpha = gamma)\r\n\r\n// beta0_hat, beta1_hat = FitLinearModel(X, Y)\r\n// print(\"estimated coefficients\", beta0_hat, beta1_hat)\r\n\r\n// # estimate y\r\n// Y_hat = PredictLinearModel(X, beta0_hat, beta1_hat)\r\n\r\n// # calculate the RSE, R2\r\n// RSS = np.sum((Y - Y_hat) ** 2)\r\n// RSE = np.sqrt(np.sum((Y - Y_hat) ** 2)) / (N - 2)\r\n// TSS = np.sum((Y - np.mean(Y)) ** 2)\r\n\r\n// plt.figure(figsize = (20, 12))\r\n// R2 = 1 - RSS / TSS\r\n// plt.plot(X, Y, 'b+')\r\n// plt.plot(X, Y_hat, label = \"Estimated\")\r\n// plt.plot(X, beta0 + beta1 * X + gamma * X * X * X, label = \"True Y, gamma=\" + str(gamma))\r\n// plt.legend(loc = 'best')\r\n// plt.xlabel('X')\r\n// plt.ylabel('Y')\r\n// plt.show()\r\n\r\n// print(\"RSE=\" + str(RSE))\r\n// print(\"R2=\" + str(R2))\r\n\r\n// # plotit(0.15) # -5 / 0.55 # define the non - linear\r\n\r\n// def GetSubsetOfPredicttorsByForward(xNumpyMatrix, yList):\r\n// x = xNumpyMatrix\r\n// y = yList\r\n// ### Best Subset Selection\r\n// min_bic = 1e10 # set some initial large value for min BIC score\r\n//     best_subset = []# best subset of predictors\r\n// print # total number of predictors\r\n// # Create all possible subsets of the set of 10 predictors\r\n// predictorSet = set(range(xNumpyMatrix.shape[1]))\r\n// print \"total number of predictor: \", len(predictorSet)\r\n\r\n// for sizeK in range(len(predictorSet)):\r\n// # Create all possible subsets of size 'size', using the 'combination' function from the 'itertools' library\r\n// subsetsSizeK = itertools.combinations(predictorSet, sizeK + 1)\r\n// maxRsquared = -1e10 # set some initial small value for max R ^ 2 score\r\n//         bestKsubset = []# best subset of predictors of size k\r\n// for predictor_subset in subsetsSizeK:\r\n// # Use only a subset of predictors in the training data\r\n// x_subset = x[:, predictor_subset]\r\n\r\n// # Fit and evaluate R ^ 2\r\n// model = OLS(y, x_subset)\r\n// results = model.fit()\r\n// r_squared = results.rsquared\r\n\r\n// # Update max R ^ 2 and best predictor subset of size k\r\n// # If current predictor subset has a higher R ^ 2 score than that of the best subset\r\n// # we've found so far, remember the current predictor subset as the best!\r\n// if (maxRsquared < r_squared):\r\n//     maxRsquared = r_squared\r\n// bestKsubset = predictor_subset[:]\r\n\r\n// # Use only the best subset of size k for the predictors\r\n//         x_subset = x[:, bestKsubset]\r\n\r\n// # Fit and evaluate BIC of the best subset of size k\r\n// model = OLS(y, x_subset)\r\n// results = model.fit()\r\n// bic = results.bic\r\n\r\n// # Update minimum BIC and best predictor subset\r\n// # If current predictor has a lower BIC score than that of the best subset\r\n// # we've found so far, remember the current predictor as the best!\r\n// if (bic < min_bic):\r\n//     min_bic = bic\r\n// best_subset = bestKsubset[:]\r\n// print 'Step-wise forward subset selection:'\r\n// return sorted(best_subset)\r\n// # # load data by Numpy\r\n// # dataFull = np.loadtxt(\"Z:/[09_HarvardGSD]/2016_3_Fall_CS109 DataScience/HW/HW_04/datasets/dataset_1.txt\", delimiter = \",\", skiprows = 1)\r\n// # # filter all X feature annd Y\r\n// # xDataList = dataFull[:,: -1]\r\n// # yData = dataFull[:, -1]\r\n// # bestSubsetForward = GetSubsetOfPredicttorsByForward(xDataList, yData);\r\n// # print bestSubsetForward\r\n\r\n// def GetSubsetOfPredicttorsByBackward(xNumpyMatrix, yList):\r\n// x = xNumpyMatrix\r\n// y = yList\r\n\r\n// ###  Step - wise Backward Selection\r\n// d = x.shape[1]# total no.of predictors\r\n// print \"total number of predictor: \", d\r\n// # Keep track of current set of chosen predictors\r\n// current_predictors = range(d)\r\n\r\n// # First, fit and evaluate BIC using all 'd' number of predictors\r\n// model = OLS(y, x)\r\n// results = model.fit()\r\n// bic_all = results.bic\r\n\r\n// # Set the minimum BIC score, initially, to the BIC score using all 'd' predictors\r\n// global_min_bic = bic_all\r\n// # Keep track of the best subset of predictors\r\n// best_subset = []\r\n\r\n// # Iterate over all possible subset sizes, d predictors to 1 predictor\r\n// for size in range(d - 1, 1, -1): # stop before 0 to avoid choosing an empty set of predictors\r\n// max_r_squared = -1e10 # set some initial small value for max R ^ 2\r\n//         worst_predictor = -1 # set some throwaway initial number for the worst predictor to remove\r\n// bic_without_worst_predictor = 1e10 # set some initial large value for min BIC score\r\n\r\n// # Iterate over current set of predictors(for potential elimination)\r\n//     for i in current_predictors:\r\n// # Create copy of current predictors, and remove predictor 'i'\r\n// temp = current_predictors[:]\r\n// temp.remove(i)\r\n\r\n// # Use only a subset of predictors in the training data\r\n// x_subset = x[:, temp]\r\n\r\n// # Fit and evaluate R ^ 2\r\n// model = OLS(y, x_subset)\r\n// results = model.fit()\r\n// r_squared = results.rsquared\r\n\r\n// # Check if we get a higher R ^ 2 value than than current max R ^ 2, if so, update\r\n//             if (r_squared > max_r_squared):\r\n//         max_r_squared = r_squared\r\n// worst_predictor = i\r\n// bic_without_worst_predictor = results.bic\r\n\r\n// # Remove worst predictor from current set of predictors\r\n// current_predictors.remove(worst_predictor)\r\n\r\n// # Check if BIC for the predictor we just removed is lower than\r\n// # the global minimum across all subset of predictors\r\n// if (bic_without_worst_predictor < global_min_bic):\r\n//     best_subset = current_predictors[:]\r\n// global_min_bic = bic_without_worst_predictor\r\n// print 'Step-wise backward subset selection:'\r\n// return sorted(best_subset)\r\n// # # load data by Numpy\r\n// # dataFull = np.loadtxt(\"Z:/[09_HarvardGSD]/2016_3_Fall_CS109 DataScience/HW/HW_04/datasets/dataset_1.txt\", delimiter = \",\", skiprows = 1)\r\n// # # filter all X feature annd Y\r\n// # xDataList = dataFull[:,: -1]\r\n// # yData = dataFull[:, -1]\r\n// # bestSubsetBackward = GetSubsetOfPredicttorsByBackward(xDataList, yData)\r\n// # print bestSubsetBackward\r\n\r\n// # s = pd.Series(list('abca'))\r\n// # print s\r\n\r\n// # print pd.get_dummies(s)\r\n\r\n// ################################################################# string to one hot encoding\r\n// def encode_categorical(array):\r\n// from sklearn import preprocessing\r\n//     if not array.dtype == np.dtype('float64'):\r\n// return preprocessing.LabelEncoder().fit_transform(array)\r\n//     else:\r\n// return array\r\n// data = dfSeoulRe.apply(encode_categorical)\r\n\r\n// ############################################################################################# feature selection\r\n// def StepWiseForwardSelection(x, y, data): #panda data frame\r\n// from statsmodels.regression.linear_model import OLS\r\n// ### Step - wise Forward Selection\r\n// d = x.shape[1]# total no.of predictors\r\n// # Keep track of current set of chosen predictors, and the remaining set of predictors\r\n// current_predictors = []\r\n// remaining_predictors = range(d)\r\n// # Set some initial large value for min BIC score for all possible subsets\r\n//     global_min_bic = 1e10\r\n// # Keep track of the best subset of predictors\r\n// best_subset = []\r\n// # Iterate over all possible subset sizes, 0 predictors to d predictors\r\n// for size in range(d):\r\n//     max_r_squared = -1e10 # set some initial small value for max R ^ 2\r\n//         best_predictor = -1 # set some throwaway initial number for the best predictor to add\r\n// bic_with_best_predictor = 1e10 # set some initial large value for BIC score\r\n// # Iterate over all remaining predictors to find best predictor to add\r\n// for i in remaining_predictors:\r\n// # Make copy of current set of predictors\r\n// temp = current_predictors[:]\r\n// # Add predictor 'i'\r\n// temp.append(i)\r\n// # Use only a subset of predictors in the training data\r\n// x_subset = x[:, temp]\r\n// # Add a column of ones\r\n// x_subset = np.hstack((x_subset, np.ones((x_subset.shape[0], 1))))\r\n// # Fit and evaluate R ^ 2\r\n// model = OLS(y, x_subset)\r\n// results = model.fit()\r\n// r_squared = results.rsquared\r\n// # Check if we get a higher R ^ 2 value than than current max R ^ 2, if so, update\r\n//             if (r_squared > max_r_squared):\r\n//         max_r_squared = r_squared\r\n// best_predictor = i\r\n// bic_with_best_predictor = results.bic\r\n// # Remove best predictor from remaining list, and add best predictor to current list\r\n// remaining_predictors.remove(best_predictor)\r\n// current_predictors.append(best_predictor)\r\n// # Check if BIC for with the predictor we just added is lower than\r\n// # the global minimum across all subset of predictors\r\n// if (bic_with_best_predictor < global_min_bic):\r\n//     best_subset = current_predictors[:]\r\n// global_min_bic = bic_with_best_predictor\r\n// print 'Step-wise forward subset selection:'\r\n// print sorted(best_subset) # add 1 as indices start from 0\r\n// forward = data.columns.values[sorted(best_subset)]\r\n// print forward\r\n// return forward\r\n\r\n// def StepWiseBackwardSelection(x, y, data): #panda data frame\r\n// from statsmodels.regression.linear_model import OLS\r\n// ###  Step - wise Backward Selection\r\n// d = x.shape[1]# total no.of predictors\r\n// # Keep track of current set of chosen predictors\r\n// current_predictors = range(d)\r\n// # First, fit and evaluate BIC using all 'd' number of predictors\r\n// model = OLS(y, x)\r\n// results = model.fit()\r\n// bic_all = results.bic\r\n// # Set the minimum BIC score, initially, to the BIC score using all 'd' predictors\r\n// global_min_bic = bic_all\r\n// # Keep track of the best subset of predictors\r\n// best_subset = []\r\n// # Iterate over all possible subset sizes, d predictors to 1 predictor\r\n// for size in range(d - 1, 0, -1): # stop before 0 to avoid choosing an empty set of predictors\r\n// max_r_squared = -1e10 # set some initial small value for max R ^ 2\r\n//         worst_predictor = -1 # set some throwaway initial number for the worst predictor to remove\r\n// bic_without_worst_predictor = 1e10 # set some initial large value for min BIC score\r\n// # Iterate over current set of predictors(for potential elimination)\r\n//     for i in current_predictors:\r\n// # Create copy of current predictors, and remove predictor 'i'\r\n// temp = current_predictors[:]\r\n// temp.remove(i)\r\n// # Use only a subset of predictors in the training data\r\n// x_subset = x[:, temp]\r\n// # Add a column of ones\r\n// x_subset = np.hstack((x_subset, np.ones((x_subset.shape[0], 1))))\r\n// # Fit and evaluate R ^ 2\r\n// model = OLS(y, x_subset)\r\n// results = model.fit()\r\n// r_squared = results.rsquared\r\n// # Check if we get a higher R ^ 2 value than than current max R ^ 2, if so, update\r\n//             if (r_squared > max_r_squared):\r\n//         max_r_squared = r_squared\r\n// worst_predictor = i\r\n// bic_without_worst_predictor = results.bic\r\n// # Remove worst predictor from current set of predictors\r\n// current_predictors.remove(worst_predictor)\r\n// # Check if BIC for the predictor we just removed is lower than\r\n// # the global minimum across all subset of predictors\r\n// if (bic_without_worst_predictor < global_min_bic):\r\n//     best_subset = current_predictors[:]\r\n// global_min_bic = bic_without_worst_predictor\r\n\r\n// print 'Step-wise backward subset selection:'\r\n// print sorted(best_subset)\r\n// backward = data.columns.values[sorted(best_subset)]\r\n// print backward\r\n// return backward\r\n\r\n// data = dfSeoulRe.convert_objects(convert_numeric = True)\r\n// x = data.values #.as_matrix()\r\n// y = data[\"building\"]\r\n// forward = StepWiseForwardSelection(x, y, segSeoul)\r\n// backward = StepWiseBackwardSelection(x, y, segSeoul)\r\n\r\n// import os\r\n// import pandas as pd\r\n// import numpy as np\r\n\r\n// # open data from the absolute path\r\n// def getPandasFromFile(path, fileName):\r\n// path = os.path.join(path, fileName)\r\n// return pd.read_csv(path)\r\n\r\n// def getNumpyFromFile(path, fileName):\r\n// path = os.path.join(path, fileName)\r\n// return np.genfromtxt(path, delimiter = ',')\r\n\r\n// def getPandasFromJson(json):\r\n// return pd.DataFrame(json)\r\n\r\n// def getPandasFromJson(list):\r\n// return pd.Series(list)\r\n\r\n// def split(dataset, m): # temp = split(dataFull, 80)[0].y\r\n// train = dataset.sample(frac = m * 0.01, random_state = 100)\r\n// test = dataset.drop(train.index)\r\n// trainNew = dataset.drop(test.index)\r\n// return trainNew, test\r\n\r\n// ########################################################################\r\n\r\n// def fillNull(Rdata, Rmissing_ind):\r\n// from copy import deepcopy\r\n//     temp = deepcopy(Rdata)\r\n// for i in Rmissing_ind:\r\n//     temp[\"y\"][i] = np.nan\r\n// return temp\r\n\r\n// def split(dataset, m):\r\n// train = dataset.sample(frac = m * 0.01, random_state = 100)\r\n// test = dataset.drop(train.index)\r\n// trainNew = dataset.drop(test.index)\r\n// return trainNew, test\r\n\r\n// fileName = 'dataset_HW1.txt'\r\n// path = \"Z:/[09_HarvardGSD]/2016_3_Fall_CS109 DataScience/lab_files/Lab_1/\"\r\n\r\n// df = getPandasFromFile(path, fileName)\r\n// print(df.head(3))\r\n// print(df.tail(3))\r\n// print \"this is df.describe\"\r\n// print(df.describe()) # The.describe() function returns all the descriptive stats for each column as a data frame object!\r\n// print(\"the size of data frame is \", df.shape[0])\r\n\r\n// selectedCol = df[range(1, df.shape[1] - 1)]# ignoring first and last colums\r\n// newCol = pd.DataFrame(columns = selectedCol.columns.values)\r\n// newCol.loc[\"min\"] = selectedCol.min()\r\n// newCol.loc[\"max\"] = selectedCol.max()\r\n// newCol.loc[\"range\"] = selectedCol.max() - selectedCol.min()\r\n// print newCol\r\n\r\n// newCol.loc[\"mean\"] = selectedCol.mean()\r\n// newCol.loc[\"median\"] = selectedCol.median()\r\n// newCol.loc[\"std\"] = selectedCol.std()\r\n// # print newCol\r\n\r\n// childrenData = df[df[\"patient_age\"] <= 17]\r\n// childrenStats = pd.DataFrame(columns = childrenData.columns.values)\r\n\r\n// theColumnRange = range(1, df.shape[1] - 1)\r\n// childrenStats = childrenStats[theColumnRange]\r\n// childrenStats.loc['child_max'] = childrenData[theColumnRange].max()\r\n// childrenStats.loc['child_min'] = childrenData[theColumnRange].min()\r\n// childrenStats.loc['child_range'] = childrenStats.values[0] - childrenStats.values[1]\r\n// childrenStats.loc['child_mean'] = childrenData[[1, 2, 4]].mean()\r\n// childrenStats.loc['child_median'] = childrenData[[1, 2, 4]].median()\r\n// childrenStats.loc['child_std'] = childrenData[[1, 2, 4]].std()\r\n// # print childrenStats\r\n\r\n// #  for women stats\r\n// adultWomenData = df[(df[\"patient_age\"] > 17) & (df[\"patient_gender\"] == \"female\")]\r\n// adultWomenStats = pd.DataFrame(columns = adultWomenData.columns.values)\r\n\r\n// theColumnRange = range(1, df.shape[1] - 1)\r\n// adultWomenStats = adultWomenStats[theColumnRange]\r\n// adultWomenStats.loc['adult_women_max'] = adultWomenData[theColumnRange].max() # going to be 0 index\r\n// adultWomenStats.loc['adult_women_min'] = adultWomenData[theColumnRange].min() # going to be 1 index\r\n// adultWomenStats.loc['adult_women_range'] = adultWomenStats.values[0] - adultWomenStats.values[1]\r\n// adultWomenStats.loc['adult_women_mean'] = adultWomenData[[1, 2, 4]].mean()\r\n// adultWomenStats.loc['adult_women_median'] = adultWomenData[[1, 2, 4]].median()\r\n// adultWomenStats.loc['adult_women_std'] = adultWomenData[[1, 2, 4]].std()\r\n// # print adultWomenStats\r\n\r\n// #  for women stats\r\n// adultMenData = df[(df[\"patient_age\"] > 17) & (df[\"patient_gender\"] == \"male\")]\r\n// adultMenStats = pd.DataFrame(columns = adultMenData.columns.values)\r\n\r\n// theColumnRange = range(1, df.shape[1] - 1)\r\n// adultMenStats = adultMenStats[theColumnRange]\r\n// adultMenStats.loc['adult_men_max'] = adultMenData[theColumnRange].max() # going to be 0 index\r\n// adultMenStats.loc['adult_men_min'] = adultMenData[theColumnRange].min() # going to be 1 index\r\n// adultMenStats.loc['adult_men_range'] = adultMenStats.values[0] - adultMenStats.values[1]\r\n// adultMenStats.loc['adult_men_mean'] = adultMenData[[1, 2, 4]].mean()\r\n// adultMenStats.loc['adult_men_median'] = adultMenData[[1, 2, 4]].median()\r\n// adultMenStats.loc['adult_men_std'] = adultMenData[[1, 2, 4]].std()\r\n// # print adultMenStats\r\n\r\n// print \"adultMenStats.iloc[0] to access or 'name' !!\"\r\n// print adultMenStats.iloc[0]\r\n\r\n// children = childrenData.shape[0]\r\n// adults = df.shape[0] - children\r\n// print \"the num of chil : \", children, \"the num of adults : \", adults\r\n\r\n// import matplotlib.pyplot as plt\r\n// fig = plt.figure(figsize = (10, 10))\r\n\r\n// ax1 = fig.add_subplot(221)\r\n// ax1.pie([children, adults],\r\n//     labels = ['children: ' + str(children), 'adults: ' + str(adults)],\r\n//     colors = ['red', 'gold'],\r\n//     autopct = '%1.1f%%', shadow = True, startangle = 90)\r\n\r\n// #women vs men pie chart\r\n// women = df[df['patient_gender'] == 'female'].shape[0]#number of women\r\n// men = df.shape[0] - women #men = total number - women\r\n\r\n// ax2 = fig.add_subplot(222)\r\n// ax2.pie([women, men],\r\n//     labels = ['women: ' + str(women), 'men: ' + str(men)],\r\n//     colors = ['lightskyblue', 'yellowgreen'],\r\n//     autopct = '%1.1f%%', shadow = True, startangle = 90)\r\n\r\n// numAdultWomen = adultWomenData.shape[0]\r\n// numAdultMen = adultMenData.shape[0]\r\n\r\n// ax3 = fig.add_subplot(223)\r\n// ax3.pie([numAdultMen, numAdultWomen],\r\n//     labels = ['adult men : ' + str(numAdultMen),\r\n//     'adult women : ' + str(numAdultWomen)],\r\n//     colors = ['lightblue', 'green'],\r\n//     autopct = \"%1.1f%%\",\r\n//     shadow = True,\r\n//     startangle = 90\r\n// )\r\n\r\n// plt.show()\r\n\r\n// def plotHist(axes, data, title, x_label, y_label, color):\r\n// axes.hist(data,\r\n//     100,\r\n//     normed = 1,\r\n//     facecolor = color,\r\n//     alpha = 0.75)\r\n\r\n// axes.set_title(title)\r\n// axes.set_xlabel(x_label)\r\n// axes.set_ylabel(y_label)\r\n// return axes\r\n\r\n// # print df['marker_1']\r\n\r\n// fig, ((ax1, ax2), (ax3, ax4), (ax5, ax6), (ax7, ax8)) = plt.subplots(4, 2, figsize = (15, 10))\r\n\r\n// ax1 = plotHist(ax1, df['marker_1'], \"histogram of marker 1\", 'frequency', \"marker 1 value\", \"green\")\r\n// ax2 = plotHist(ax2, df['marker_2'], \"histogram of marker 2\", 'frequency', \"marker 2 value\", \"red\")\r\n// ax3 = plotHist(ax3, childrenData['marker_1'], \"histogram of marker 1 for children\", 'frequency', \"marker 1 value\", \"green\")\r\n// ax4 = plotHist(ax4, childrenData['marker_2'], \"histogram of marker 2 for children\", 'frequency', \"marker 2 value\", \"red\")\r\n// ax5 = plotHist(ax5, adultWomenData['marker_1'], \"histogram of marker 1 for adult women\", 'frequency', \"marker 1 value\", \"green\")\r\n// ax6 = plotHist(ax6, adultWomenData['marker_2'], \"histogram of marker 2 for adult women\", 'frequency', \"marker 2 value\", \"red\")\r\n// ax7 = plotHist(ax7, adultMenData['marker_1'], \"histogram of marker 1 for adult men\", 'frequency', \"marker 1 value\", \"green\")\r\n// ax8 = plotHist(ax8, adultMenData['marker_2'], \"histogram of marker 2 for adult men\", 'frequency', \"marker 2 value\", \"red\")\r\n\r\n// plt.tight_layout()\r\n// plt.show()\r\n\r\n// def plot_scatter(axes, data, plot_title, x_lable, y_lable, groups):\r\n// import matplotlib.cm as cmx\r\n// import matplotlib.colors as colors\r\n// #set up color map(one color per group number)\r\n\r\n// #split[0, 1] in to as many parts as there are groups\r\n// group_numbers = np.linspace(0, 1, groups)\r\n// #get a color map\r\n// c_map = plt.get_cmap('rainbow')\r\n// #get a range of colors from color map\r\n// c_norm = colors.Normalize(vmin = 0, vmax = group_numbers[-1])\r\n// #get a map that maps a group number to a color\r\n// number_map = cmx.ScalarMappable(norm = c_norm, cmap = c_map)\r\n\r\n// #plot points colored by their group number\r\n// for group in xrange(groups):\r\n// #convert a group number into a color using our map\r\n// color = number_map.to_rgba(group_numbers[group])\r\n// #make a scatter plot of a specific group colored by its group number color\r\n// axes.scatter(data[data['subtype'] == group]['marker_1'],\r\n//     data[data['subtype'] == group]['marker_2'],\r\n//     c = color,\r\n//     alpha = 0.5)\r\n\r\n// axes.set_title(plot_title)\r\n// axes.set_xlabel(x_lable)\r\n// axes.set_ylabel(y_lable)\r\n\r\n// fig, ((ax1, ax2), (ax3, ax4)) = plt.subplots(2, 2, figsize = (10, 10))\r\n\r\n// plot_scatter(ax1, df, 'scatter plot of entire dataset', 'marker 1', 'marker 2', 4)\r\n// plot_scatter(ax2, childrenData, 'scatter plot of children', 'marker 1', 'marker 2', 4)\r\n// plot_scatter(ax3, adultWomenData, 'scatter plot of adult female', 'marker 1', 'marker 2', 4)\r\n// plot_scatter(ax4, adultMenData, 'scatter plot of adult male', 'marker 1', 'marker 2', 4)\r\n\r\n// plt.tight_layout()\r\n// plt.show()\r\n\r\n// dataFull = getPandasFromFile(\"dataset\", \"dataset_1_full.txt\")\r\n// #print split(full, 80)[0].y\r\n// #print split(full, 80)[1].y\r\n// temp = split(dataFull, 80)[0].y\r\n// idx = temp.index[2]\r\n// #print split(full, 80)[1]\r\n// #print idx\r\n// #print temp[idx]\r\n// print temp.values[: 5]\r\n// print temp.values[-5:]\r\n\r\n// a = temp.values[: 5]\r\n// b = temp.values[-5:]\r\n\r\n// print list(a) + list(b)\r\n\r\n// train = dataFull.sample(frac = 0.8, random_state = 100)\r\n// train = train.sort()\r\n// test = dataFull.drop(train.index)\r\n\r\n// import sys, time\r\n// import numpy as np\r\n// import pandas as pd\r\n\r\n// #############w##################################################### split data for train and test\r\n// def SplitDataWithSKLearn(X,y, testSize=0.2, randomState=4):\r\n//     from sklearn.cross_validation import train_test_split\r\n//     X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=testSize, random_state=randomState)\r\n//     print \"train, X length:\", len(X_train), \", Y length:\" , len(y_train)\r\n//     print \"test, X length:\", len(X_test), \", Y length:\" , len(y_test)\r\n//     return X_train, X_test, y_train, y_test\r\n\r\n// def split(dataset,m): # temp = split(dataFull,80)[0].y\r\n//     train = dataset.sample(frac=m*0.01,random_state=100)\r\n//     test = dataset.drop(train.index)\r\n//     trainNew = dataset.drop(test.index)\r\n//     return trainNew, test\r\n\r\n// def splitFromRandom(data):\r\n//     #find the number of records dataframe\r\n//     length = data.shape[0]\r\n//     #build a list of integer indices for records in dataframe\r\n//     indices = range(length)\r\n//     #randomly shuffle the indices\r\n//     np.random.shuffle(indices)\r\n\r\n//     #take 70% of the shuffled list of indices for training\r\n//     train_indices = indices[0:int(length * .7)]\r\n//     #take the remainder the shuffled list of indices for testing\r\n//     test_indices = indices[int(length * .7):]\r\n\r\n//     #get the records for the training indices\r\n//     train = data.iloc[train_indices, :]\r\n//     #get the records for the testing indices\r\n//     test = data.iloc[test_indices, :]\r\n//     return train, test\r\n// # df = pd.read_csv('Z:/[09_HarvardGSD]/2016_3_Fall_CS109 DataScience/HW/HW_01/dataset_HW1.txt')\r\n// # children_data = df[df['patient_age'] < 18]\r\n// # train, test = split(children_data)\r\n\r\n// def splitByRandom(data, percent): # 0.7\r\n//     #find the number of records dataframe\r\n//     length = data.shape[0]\r\n//     #build a list of integer indices for records in dataframe\r\n//     indices = range(length)\r\n//     #randomly shuffle the indices\r\n//     np.random.shuffle(indices)\r\n\r\n//     #take 70% of the shuffled list of indices for training\r\n//     train_indices = indices[0:int(length * percent)] # .7\r\n//     #take the remainder the shuffled list of indices for testing\r\n//     test_indices = indices[int(length * percent):] # .7\r\n\r\n//     #get the records for the training indices\r\n//     train = data.iloc[train_indices]\r\n//     #get the records for the testing indices\r\n//     test = data.iloc[test_indices]\r\n//     return train, test\r\n\r\n// def splitFromTopWithPercentage(dataset,percent): # temp = split(dataFull,80)[0].y\r\n//     theTotalLength = len(dataset.index.values)\r\n//     theLength = theTotalLength * percent / 100\r\n//     theInverseIndex = [i for i in range(theLength + 1, theTotalLength)]\r\n//     theIndex = [i for i in range(0, theLength + 1)]\r\n//     theFristData = dataset.drop(theInverseIndex, 0)\r\n//     theNextData = dataset.drop(theIndex, 0)\r\n//     return theFristData, theNextData\r\n\r\n// def splitFromTopWithPercentagePandasToNumpy(xDFforList, yDFforItem,percent): # pandasDF m 0.5%, 1 is maximum, let say 100%\r\n//     # Convert data frame to array\r\n//     x = xDFforList.values\r\n//     y = yDFforItem.values\r\n\r\n//     # ii. SPLIT TRAIN AND TEST SETS\r\n//     # No. of training points\r\n//     n = x.shape[0]\r\n//     n_train = int(np.round(n*percent)) # 0.25\r\n\r\n//     # First 25% train, remaining test\r\n//     x_train = x[0:n_train,:]\r\n//     y_train = y[0:n_train]\r\n//     x_test = x[n_train:,:]\r\n//     y_test = y[n_train:]\r\n\r\n// def GetDataBySplit(data , string):\r\n//     d = data.split(\",\")\r\n//     return d\r\n\r\n// def SortListOfList(d):\r\n//     d.sort(key=lambda x: x[0], reverse=True)\r\n//     return d\r\n\r\n// def dot_product(v1, v2):\r\n//     return sum(map(lambda x: x[0] * x[1], zip(v1, v2)))\r\n\r\n// def cosine_measure(v1, v2):\r\n//     prod = dot_product(v1, v2)\r\n//     len1 = math.sqrt(dot_product(v1, v1))\r\n//     len2 = math.sqrt(dot_product(v2, v2))\r\n//     return prod / (len1 * len2)\r\n\r\n// # print countdown(5);\r\n// def countdown(n):\r\n//     #print(\"QUIZ TIME\")\r\n//     for i in range(5*1,0, -1):\r\n//         time.sleep(1)\r\n//         sys.stdout.write(str(i)+' ')\r\n//         sys.stdout.flush()\r\n\r\n// ############################################################################ random sampling\r\n// def getRandomSamplingRowFromNumpy(data, num):\r\n//     return data[[ np.random.randint(0,num) for i in range(num)],:]\r\n// def getRandomSamplingDataMatricsFromRow(dataTrain, numList=200, numSample = 100 ):\r\n//     dataSmapleList = []\r\n//     for i in range(numList):\r\n//         dataSmapleList.append(getRandomSampleingRowFromNumpy(dataTrain, numSample))\r\n//     return dataSmapleList\r\n// def getRandomSamplingRowFromNumpy(data, num):\r\n//     return data[[ np.random.randint(0,num) for i in range(num)],:]\r\n// # data = np.array([[1,2,3],[4,5,6],[7,8,9]])\r\n// # print data\r\n// # print getRandomSampleingRowFromNumpy(data, 3)\r\n\r\n// def getColumnSortFromNumpyMatrix(dataArray):\r\n//     if type(dataArray) == np.ndarray :\r\n//         return np.sort(dataArray.T).T # transpose to compute sort\r\n//     else:\r\n//         dataArray = np.array(dataArray) # make the list numpy to transpose and sort\r\n//         return np.sort(dataArray.T).T # transpose to compute sort\r\n// def getRowSortFromNumpyMatrix(dataArray):\r\n//     if type(dataArray) == np.ndarray :\r\n//         return np.sort(dataArray) # transpose to compute sort\r\n//     else:\r\n//         dataArray = np.array(dataArray) # make the list numpy to transpose and sort\r\n//         return np.sort(dataArray) # transpose to compute sort\r\n\r\n// # dd = [[4,5,7], [7,3,1],[3,34,9]]\r\n// # dd = np.array(dd)\r\n// # print dd\r\n// # print getRowSortFromNumpyMatrix(dd);\r\n\r\n// #############################################################################\r\n\r\n// def GetSquareRamdaList(min, max):\r\n//     return [10 ** i for i in range(min, max+1)]\r\n\r\n// def fillNull(dataPandaDataFrame, dataListForMissing):\r\n//     from copy import deepcopy\r\n//     temp = deepcopy(dataPandaDataFrame)\r\n//     for i in dataListForMissing:\r\n//         temp[\"y\"][i] = np.nan\r\n//     return temp\r\n\r\n// def InsertNoneByRandom(data, percent): # 0.7\r\n//     # percent = 1.0 - percent\r\n//     newDF = data.copy(deep=True)\r\n//     dataLength = len(data)\r\n//     rndIndex  = np.random.choice(dataLength,int(dataLength * percent) )\r\n//     newDF.iloc[rndIndex] = np.nan# 'null'\r\n//     print \"The total length of old data:\", dataLength\r\n//     print \"The total length of new data:\", newDF.count()\r\n//     print \"the length of None in the new data:\", newDF.isnull().sum(),\"(\",percent,\"%)\"\r\n//     return newDF\r\n\r\n// def GetXYListFromPandaDataFrame(dataPD): # in Pandas List (multiple x and one y) to split and resort based on x column and y\r\n//     xList = []\r\n//     y = []\r\n//     length = dataPD.shape[1]\r\n//     for i, d in enumerate(dataPD.T.values):\r\n//         if( i < length-1): xList.append(d) # list for x columns\r\n//         else: y = d # a value for only one y\r\n//     return xList, y\r\n\r\n// def DeleteLastColFromPandaDataFrame(dataFullPD):\r\n//     indexCol = dataFull.columns.values\r\n//     return dataFull.drop(indexCol[-1], 1) # 0 for rows and 1 for columns\r\n// def SplitXYColumnFromPandaDataFrame(dataPD): # input as panda data frame out 1) x feature list, y feature item\r\n//     indexCol = dataPD.columns.values\r\n//     xlist = dataPD.drop(indexCol[-1:], 1)\r\n//     yItem = dataPD.drop(indexCol[:-1], 1)\r\n//     return xlist, yItem\r\n\r\n// def GetDummiesFromPandaDataFrame(dataPD):\r\n\r\n//     # Create a new data frame with first attribute\r\n//     x_df_expanded = pd.DataFrame({}) # first column is numerical\r\n//     # Iterate over all attributes\r\n//     for column in dataPD.columns:\r\n//         # Check if attribute is not categorical: either dtype is not object\r\n//         if (len(dataPD[column].unique())<8\r\n//         or (dataPD[column].dtype == np.dtype('object'))\r\n//         or (dataPD[column].dtype == np.dtype('string'))):\r\n//             encoding = pd.get_dummies(dataPD[column])\r\n//             x_df_expanded = pd.concat([x_df_expanded, encoding], axis=1)\r\n//         else:\r\n//             x_df_expanded = pd.concat([x_df_expanded, dataPD[column]], axis=1)\r\n//             # print encoding.iloc[:1].values\r\n//     return x_df_expanded\r\n\r\n// def GetCountForNullFromPandas(d):\r\n//     return d.isnull().sum()\r\n\r\n// # a = np.array([1,10,3,4,5,6])\r\n// # a = a.reshape((3,2))\r\n// # b = CopyNumpy(a);\r\n// # b[0][-1] = 99\r\n// # print a\r\n// # print b\r\n\r\n// ######\r\n// # print b + 2\r\n// # print b ** 2\r\n// # print b < 10\r\n\r\n// ######\r\n// # print b\r\n// # PrintNumpy(b)\r\n// # print GetColumnFromNumpy(b, 1 , False)\r\n\r\n// # print ComputeCutWithRangeNumpy(b, 3,10)\r\n// # print GetComparedWithMaxNumpy(b, 10)\r\n\r\n// ######\r\n// # dataWithNAN = np.array([1,2,3,np.NAN, 4])\r\n// # print ComputeCutWithNANNumpy(dataWithNAN)\r\n\r\n// ################################################## sort\r\n// # newData = [[10,7, 1],[8,3, 10], [23,4,9]]\r\n// # newData = np.array(newData)\r\n// # print newData\r\n// # newData1 = CopyNumpy(newData)\r\n// # newData1.sort()\r\n// # print newData1\r\n// # newData1[:,0].sort()\r\n// # print newData1\r\n\r\n// ################################################## data structure\r\n// def GetArrayFromMatrix(d):\r\n//     newD, = np.array(d.T)\r\n//     return newD\r\n// def GetMatrixFromArrayForSKLearn(d): # because we need to make a matrix for SK\r\n//     return d.reshape((len(d),1))\r\n\r\n// ################################################### customized K Fold\r\n// # this is list of list. first list contain individual KFold, in this case, 5 # the second index is about train and test, the length should be 2.\r\n// def GetDataFrameListFromKFold(dt, k,lamdaLst): # should be no remainder by k # return list of PandasDataFrames\r\n//     Kfold = []; tempFold = []; num = 0;\r\n//     totalLength = len(dt)\r\n//     theLength = totalLength/k\r\n//     for i in range(totalLength+1):\r\n//         if num == theLength+1:\r\n//             Kfold.append(tempFold)\r\n//             tempFold = []\r\n//             tempFold.append(i)\r\n//             num =1;\r\n//         elif i == totalLength:\r\n//               Kfold.append(tempFold)\r\n//         else:\r\n//             tempFold.append(i)\r\n//             num+=1\r\n//     dt = dt.T\r\n//     KfoldList = []\r\n//     for i in Kfold: KfoldList.append(dt[i].T)\r\n//     kfoldListOut = []\r\n//     for j in range(len(KfoldList)):\r\n//         theTrainDataFrame = []\r\n//         theTestDataFrame = []\r\n//         fold = []\r\n//         for i, d in enumerate(KfoldList):\r\n//             if(j == i): theTrainDataFrame = d\r\n//             else:theTestDataFrame.append(d)\r\n//         theTestDataFrame = pd.concat(theTestDataFrame)\r\n//         fold.append(theTrainDataFrame)\r\n//         fold.append(theTestDataFrame)\r\n//         kfoldListOut.append(fold)\r\n//     return kfoldListOut\r\n// # dataFrameListFromKFold = GetDataFrameListFromKFold(dataFullDummies, 5,listRamda) # dataFullDummies\r\n// # # this is list of list. first list contain individual KFold, in this case, 5 # the second index is about train and test, the length should be 2.\r\n// # print len(dataFrameListFromKFold)\r\n// # print len(dataFrameListFromKFold[0])\r\n\r\n// ################################################### customized Booststrapping\r\n// def Booststrapping(dataFrame, num_samples):\r\n//     indexCol = dataFrame.columns.values\r\n//     indexRow = dataFrame.index.values\r\n\r\n//     indexRow = np.random.permutation(len(indexRow))\r\n//     dataFrame = dataFrame.T\r\n//     return dataFrame[indexRow].T\r\n\r\n// def GetDataFrameListFromBooststrapping(dataFrame, num_samples, num_List):\r\n//     outList = []\r\n//     for i in range(num_List):\r\n//         outList.append(Booststrapping(dataFrame,num_samples))\r\n//     return outList\r\n\r\n// # print len(GetDataFrameListFromBooststrapping(dataFullDummies, 200, 5))\r\n\r\n// ################################################### customized Booststrapping\r\n// def GetSubsetOfPredicttorsByForward(xNumpyMatrix, yList):\r\n//     x = xNumpyMatrix\r\n//     y = yList\r\n\r\n//     ### Best Subset Selection\r\n//     min_bic = 1e10 # set some initial large value for min BIC score\r\n//     best_subset = [] # best subset of predictors\r\n\r\n//     # Create all possible subsets of the set of 10 predictors\r\n//     predictorSet = set(range(xNumpyMatrix.shape[1]))\r\n//     print \"total number of predictor: \",len(predictorSet)\r\n\r\n//     for sizeK in range(len(predictorSet)):\r\n//         # Create all possible subsets of size 'size', using the 'combination' function from the 'itertools' library\r\n//         subsetsSizeK = itertools.combinations(predictorSet, sizeK +1)\r\n//         maxRsquared = -1e10 # set some initial small value for max R^2 score\r\n//         bestKsubset = [] # best subset of predictors of size k\r\n//         for predictor_subset in subsetsSizeK:\r\n//             # Use only a subset of predictors in the training data\r\n//             x_subset = x[:, predictor_subset]\r\n\r\n//             # Fit and evaluate R^2\r\n//             model = OLS(y, x_subset)\r\n//             results = model.fit()\r\n//             r_squared = results.rsquared\r\n\r\n//             # Update max R^2 and best predictor subset of size k\r\n//             # If current predictor subset has a higher R^2 score than that of the best subset\r\n//             # we've found so far, remember the current predictor subset as the best!\r\n//             if(maxRsquared < r_squared ):\r\n//                 maxRsquared = r_squared\r\n//                 bestKsubset = predictor_subset[:]\r\n\r\n//         # Use only the best subset of size k for the predictors\r\n//         x_subset = x[:, bestKsubset]\r\n\r\n//         # Fit and evaluate BIC of the best subset of size k\r\n//         model = OLS(y, x_subset)\r\n//         results = model.fit()\r\n//         bic = results.bic\r\n\r\n//         # Update minimum BIC and best predictor subset\r\n//         # If current predictor has a lower BIC score than that of the best subset\r\n//         # we've found so far, remember the current predictor as the best!\r\n//         if(bic < min_bic):\r\n//             min_bic = bic\r\n//             best_subset = bestKsubset[:]\r\n//     print 'Step-wise forward subset selection:'\r\n//     return sorted(best_subset)\r\n// # bestSubsetForward = GetSubsetOfPredicttorsByForward(xDataList, yData)\r\n// # print bestSubsetForward\r\n// def GetSubsetOfPredicttorsByBackward(xNumpyMatrix, yList):\r\n//     x = xNumpyMatrix\r\n//     y = yList\r\n\r\n//     ###  Step-wise Backward Selection\r\n//     d = x.shape[1] # total no. of predictors\r\n//     print \"total number of predictor: \",d\r\n//     # Keep track of current set of chosen predictors\r\n//     current_predictors = range(d)\r\n\r\n//     # First, fit and evaluate BIC using all 'd' number of predictors\r\n//     model = OLS(y, x)\r\n//     results = model.fit()\r\n//     bic_all = results.bic\r\n\r\n//     # Set the minimum BIC score, initially, to the BIC score using all 'd' predictors\r\n//     global_min_bic = bic_all\r\n//     # Keep track of the best subset of predictors\r\n//     best_subset = []\r\n\r\n//     # Iterate over all possible subset sizes, d predictors to 1 predictor\r\n//     for size in range(d - 1, 1, -1): # stop before 0 to avoid choosing an empty set of predictors\r\n//         max_r_squared = -1e10 # set some initial small value for max R^2\r\n//         worst_predictor = -1 # set some throwaway initial number for the worst predictor to remove\r\n//         bic_without_worst_predictor = 1e10 # set some initial large value for min BIC score\r\n\r\n//         # Iterate over current set of predictors (for potential elimination)\r\n//         for i in current_predictors:\r\n//             # Create copy of current predictors, and remove predictor 'i'\r\n//             temp = current_predictors[:]\r\n//             temp.remove(i)\r\n\r\n//             # Use only a subset of predictors in the training data\r\n//             x_subset = x[:, temp]\r\n\r\n//             # Fit and evaluate R^2\r\n//             model = OLS(y, x_subset)\r\n//             results = model.fit()\r\n//             r_squared = results.rsquared\r\n\r\n//             # Check if we get a higher R^2 value than than current max R^2, if so, update\r\n//             if(r_squared > max_r_squared):\r\n//                 max_r_squared = r_squared\r\n//                 worst_predictor = i\r\n//                 bic_without_worst_predictor = results.bic\r\n\r\n//         # Remove worst predictor from current set of predictors\r\n//         current_predictors.remove(worst_predictor)\r\n\r\n//         # Check if BIC for the predictor we just removed is lower than\r\n//         # the global minimum across all subset of predictors\r\n//         if(bic_without_worst_predictor < global_min_bic):\r\n//             best_subset = current_predictors[:]\r\n//             global_min_bic = bic_without_worst_predictor\r\n//     print 'Step-wise backward subset selection:'\r\n//     return sorted(best_subset)\r\n// # bestSubsetBackward = GetSubsetOfPredicttorsByBackward(xDataList, yData)\r\n// # print bestSubsetBackward\r\n\r\n// # [[1,1] , [ 1,1,] .... ]\r\n// def split2dData(data, percent=0.7):\r\n//     section = int(len(data) * percent)\r\n//     train = data[:section,:]\r\n//     test = data[section:,:]\r\n//     return train, test\r\n// def split1dData(data, percent=0.7):\r\n//     section = int(len(data) * percent)\r\n//     train = data[:section]\r\n//     test = data[section:]\r\n//     return train, test\r\n\r\n// def split(dataset,m):\r\n//     train=dataset.sample(frac=m*0.01,random_state=100)\r\n//     test=dataset.drop(train.index)\r\n//     trainNew=dataset.drop(test.index)\r\n//     return trainNew, test\r\n\r\n// # dataTrain, dataTest  = split(dataFull, 70)\r\n\r\n// #### Let's put our function definitions in one cell, for readability  from HW 01\r\n\r\n// #--------  split\r\n// #input: data (dataframe)\r\n// #output: train (dataframe), test (dataframe)\r\n\r\n// def split(data):\r\n//     #find the number of records dataframe\r\n//     length = data.shape[0]\r\n//     #build a list of integer indices for records in dataframe\r\n//     indices = range(length)\r\n//     #randomly shuffle the indices\r\n//     np.random.shuffle(indices)\r\n\r\n//     #take 70% of the shuffled list of indices for training\r\n//     train_indices = indices[0:int(length * .7)]\r\n//     #take the remainder the shuffled list of indices for testing\r\n//     test_indices = indices[int(length * .7):]\r\n\r\n//     #get the records for the training indices\r\n//     train = data.iloc[train_indices, :]\r\n//     #get the records for the testing indices\r\n//     test = data.iloc[test_indices, :]\r\n\r\n//     return train, test\r\n\r\n// #--------  classify\r\n// #input: train (dataframe), test (dataframe)\r\n// #output: predicted_subtypes (numpy array)\r\n\r\n// def classify(train, test):\r\n//     #create dataframe with just biometric and disease subtype info\r\n//     biometric_df = train[['marker_1', 'marker_2', 'subtype']]\r\n\r\n//     #group the records in dataframe by 'subtype' and compute mean\r\n//     mean_df = biometric_df.groupby('subtype').mean()\r\n\r\n//     #converts row labels like 0.0, 1.0 to string (this will save us indexing headaches)\r\n//     mean_df.index = mean_df.index.map(str)\r\n\r\n//     #iterate through the rows in the mean dataframe\r\n//     for index, mean in mean_df.iterrows():\r\n//         #for each cluster mean, store the distance between all test points and mean\r\n//         #in new column labeled by the cluster number\r\n//         test.loc[:, index] = ((test['marker_1'] - mean['marker_1'])**2\r\n//                               + (test['marker_2'] - mean['marker_2'])**2)\r\n\r\n//     #now the dataframe \"test\" has four new columns: 0, 1, 2, 3\r\n//     #the n-th value in the 0 column represents the distance btw the\r\n//     #n-th data point and the 0-th cluster mean\r\n\r\n//     #get the columns from test that are store the distances to the cluster means\r\n//     distances = test[mean_df.index]\r\n\r\n//     #for each record, get the labels on the column that stores the minimum distance\r\n//     predicted_subtypes = distances.idxmin(axis=1).values\r\n\r\n//     #converts row labels like 0.0, 1.0 from string back to float (to make arithmetic easier)\r\n//     predicted_subtypes = predicted_subtypes.astype(float)\r\n//     return predicted_subtypes\r\n\r\n// #--------  evaluate\r\n// #input: predicted_subtypes (array), true_subtypes (array)\r\n// #output: percent_correct (float)\r\n\r\n// def evaluate(predicted_subtypes, true_subtypes):\r\n//     #subtract the array of predicted subtypes and the array of true subtypes\r\n//     comparison = predicted_subtypes - true_subtypes\r\n\r\n//     #when the predicted value is different from the true value, that entry is non-zero\r\n//     #we set all non-zero entries (wrong predictions) to 1\r\n//     comparison[comparison != 0] = 1\r\n\r\n//     #the total number of wrong predictions is the sum of the array (where entries have a 1\r\n//     #for wrong and 0 for right)\r\n//     total_wrong = comparison.sum()\r\n\r\n//     right_percent = (len(comparison) - total_wrong) / (len(comparison) * 1.0)\r\n\r\n//     return right_percent\r\n\r\n// def GetColArrayFromList(d):\r\n//     d = pd.DataFrame(d);\r\n//     d = np.array(d.as_matrix())\r\n//     return d\r\n\r\n// ##################################################################################### Pandas use case\r\n// ############################################################################# Pandas utilities\r\n\r\n// def PandasUtility():\r\n//     import pandas as pd\r\n//     df = pd.read_csv('Z:/[09_HarvardGSD]/2016_3_Fall_CS109 DataScience/HW/HW_01/dataset_HW1.txt')\r\n//     print 'number of patients:', df.shape[0]\r\n//     df.head(n=5) #print first 5 rows of dataframe\r\n//     df_cols_1_to_4 = df[range(1, 5)]  #choose columns 1, 2, 3, 4 (ignoring columns 0 and 4)\r\n//     column_names = df_cols_1_to_4.columns.values #get column names from important_column dataframe\r\n//     stats = pd.DataFrame(columns=column_names) #create pandas dataframe with column names given by column_names\r\n//     stats.loc['max'] = df_cols_1_to_4.max() #create a row called 'max' and store max values from the columns of important_columns\r\n//     stats.loc['min'] = df_cols_1_to_4.min() #create a row called 'min' and store min values from the columns of important_columns\r\n//     stats.loc['range'] = df_cols_1_to_4.max() - df_cols_1_to_4.min()    #create a row called 'range' and store range of values from the columns of important_columns\r\n//     stats.head(n=5)\r\n//     df_cols_1_2_4 = df[[1, 2, 4]]\r\n//     stats.loc['mean'] = df_cols_1_2_4.mean()\r\n//     stats.loc['median'] = df_cols_1_2_4.median()\r\n//     stats.loc['std'] = df_cols_1_2_4.std()\r\n//     print stats\r\n\r\n//     #Create three different datasets by filtering our entire set\r\n//     children_data = df[df['patient_age'] < 18]\r\n//     adult_women_data = df[(df['patient_age'] > 17) & (df['patient_gender'] == 'female')]\r\n//     adult_male_data = df[(df['patient_age'] > 17) & (df['patient_gender'] == 'male')]\r\n\r\n//     #create dataframe with select column names (just like before)\r\n//     column_names = children_data[range(1, 5)].columns.values\r\n//     child_stats = pd.DataFrame(columns=column_names)\r\n\r\n//     #add a row for each stat (just like before)\r\n//     child_stats.loc['child_max'] = children_data[range(1, 5)].max()\r\n//     child_stats.loc['child_min'] = children_data[range(1, 5)].min()\r\n//     child_stats.loc['child_range'] = children_data[range(1, 5)].max() - children_data[range(1, 5)].min()\r\n\r\n//     child_stats.loc['child_mean'] = children_data[[1, 2, 4]].mean()\r\n//     child_stats.loc['child_median'] = children_data[[1, 2, 4]].median()\r\n//     child_stats.loc['child_std'] = children_data[[1, 2, 4]].std()\r\n//     print child_stats\r\n\r\n//     #create dataframe with select column names (just like before)\r\n//     column_names = adult_women_data[range(1, 5)].columns.values\r\n//     adult_women_stats = pd.DataFrame(columns=column_names)\r\n\r\n//     #add a row for each stat (just like before)\r\n//     adult_women_stats.loc['adult_f_max'] = adult_women_data[range(1, 5)].max()\r\n//     adult_women_stats.loc['adult_f_min'] = adult_women_data[range(1, 5)].min()\r\n//     adult_women_stats.loc['adult_f_range'] = adult_women_data[range(1, 5)].max() - adult_women_data[range(1, 5)].min()\r\n\r\n//     adult_women_stats.loc['adult_f_mean'] = adult_women_data[[1, 2, 4]].mean()\r\n//     adult_women_stats.loc['adult_f_median'] = adult_women_data[[1, 2, 4]].median()\r\n//     adult_women_stats.loc['adult_f_std'] = adult_women_data[[1, 2, 4]].std()\r\n//     print adult_women_stats\r\n\r\n//     #create dataframe with select column names (just like before)\r\n//     column_names = adult_male_data[range(1, 5)].columns.values\r\n//     adult_male_stats = pd.DataFrame(columns=column_names)\r\n\r\n//     #add a row for each stat (just like before)\r\n//     adult_male_stats.loc['adult_m_max'] = adult_male_data[range(1, 5)].max()\r\n//     adult_male_stats.loc['adult_m_min'] = adult_male_data[range(1, 5)].min()\r\n//     adult_male_stats.loc['adult_m_range'] = adult_male_data[range(1, 5)].max() - adult_male_data[range(1, 5)].min()\r\n\r\n//     adult_male_stats.loc['adult_m_mean'] = adult_male_data[[1, 2, 4]].mean()\r\n//     adult_male_stats.loc['adult_m_median'] = adult_male_data[[1, 2, 4]].median()\r\n//     adult_male_stats.loc['adult_m_std'] = adult_male_data[[1, 2, 4]].std()\r\n//     print adult_male_stats\r\n\r\n//     ###################################\r\n//     xTemp = csvData[\"x\"].as_matrix()\r\n//     yTemp = csvData[\"y\"].as_matrix()\r\n\r\n//     print np.min(xTemp), np.max(xTemp)\r\n//     print np.min(yTemp), np.max(yTemp)\r\n\r\n//     x_Value = [coef_x_mean - 15.5 , coef_x_mean + 15.5]\r\n\r\n//     xplt = df['x'].convert_objects(convert_numeric=True)\r\n//     yplt = df['y'].convert_objects(convert_numeric=True)\r\n//     zplt = df['z'].convert_objects(convert_numeric=True)\r\n\r\n//     col_1 = pd.Series(tlst)\r\n//     col_2 = pd.Series(xlst)\r\n//     col_3 = pd.Series(ylst)\r\n//     col_4 = pd.Series(zlst)\r\n//     df = pd.DataFrame({\"t\":col_1,\"x\":col_2,\"y\":col_3,\"z\":col_4})\r\n//     df.tail(3)\r\n\r\n//     data = data.replace('_', np.nan)\r\n\r\n//     # dorp column if there is no data because we have more than 400 column...\r\n//     complete_cols = [column for column in data.columns if len(data[column][data[column].isnull()]) == 0]\r\n//     data = data[complete_cols]\r\n\r\n//     # Converted columns to floating point\r\n//     for feature_name in to_float:\r\n//         data[feature_name] = data[feature_name].astype(float)\r\n\r\n//     # Columns between POP901 to AC2 should all be float\r\n//     index1 = data.columns.get_loc(\"POP901\")\r\n//     index2 = data.columns.get_loc(\"AC2\")\r\n//     for i in range(index1, index2 + 1):\r\n//         print i\r\n//         data.iloc[:, i] = data.iloc[:, i].astype(float)\r\n\r\n//     # replace data in pandas\r\n//     d = data.replace(\"_\" , np.nan)\r\n//     print d.head(3)\r\n\r\n// # PandasUtility()\r\n\r\n// def GetListFromPDColumn(pdCol):\r\n//     temp = []\r\n//     for d in pdCol:temp.append(d)\r\n//     return temp;\r\n// def RemoveRowWithNAN(data):\r\n//     data = data.dropna(axis=0, how='any', thresh=None, subset=None, inplace=False)\r\n//     return data.reset_index()\r\n// #     return data\r\n// def RemoveColumnsWithNull(data, num):\r\n// #     complete_cols = [column for column in data.columns if len(data[column][data[column].isnull()]) == 0]\r\n//     complete_cols = [column for column in data.columns if len(data[column][data[column].isnull()]) < num]\r\n//     return data[complete_cols]\r\n// def ReomveRowwithNANWithNum(data):\r\n//     data = data.dropna(thresh=None)\r\n//     return data\r\n// def GetNumpyColumnFromIndex(theDF):\r\n//     theD = pd.DataFrame(theDF.values);\r\n//     return theD.as_matrix()\r\n// def CheckPandasNAN(data):\r\n//     theResult = pd.isnull(data)\r\n//     count = 0;\r\n//     for i in theResult:\r\n//         if(i == True): count+=1\r\n//     return \"the number of NAN is :\" , count\r\n// def GetPandasRemoveNoneColumn(data):\r\n//     data = data.replace(\"_\" , np.nan)\r\n//     complete_cols = [column for column in data.columns if len(data[column][data[column].isnull()]) == 0]\r\n//     return data[complete_cols]\r\n\r\n// def ConvertFloatColumn(data, feature_name): # convert to float in the column\r\n//     data[feature_name] = data[feature_name].astype(float)\r\n//     return data\r\n// def ConvertFloatColumns(data, index1, index2): # convert to float between index 1 and 2\r\n//     for i in range(index1, index2):\r\n//         data.iloc[:, i] = data.iloc[:, i].astype(float)\r\n//     return data\r\n// def GetColumnIndex(data, start, end):\r\n//     index1 = data.columns.get_loc(start)\r\n//     index2 = data.columns.get_loc(end)+1\r\n//     return [index1, index2]\r\n// def encode_categorical(array):\r\n//     from sklearn import preprocessing\r\n//     if not array.dtype == np.dtype('float64'):\r\n//         return preprocessing.LabelEncoder().fit_transform(array)\r\n//     else:\r\n//         return array\r\n\r\n// data = pd.read_csv('Z:/[09_HarvardGSD]/2016_3_Fall_CS109 DataScience/lab_files/Lab_10/datasets/dataset.txt', low_memory=False)\r\n// # print data.shape; # (8928, 377)\r\n// data = GetPandasRemoveNoneColumn(data)\r\n// # print data.shape; # (8928, 316)\r\n// # print type(data[\"WWIIVETS\"][5]) # <type 'numpy.float64'>\r\n// data = ConvertFloatColumn(data, \"WWIIVETS\")\r\n// # print type(data[\"WWIIVETS\"][5]) # <type 'numpy.float64'>\r\n\r\n// theIndex = ['POP901', 'AC2']\r\n// theIndex = GetColumnIndex(data, theIndex[0], theIndex[1])\r\n// # print theIndex # [12, 295]\r\n\r\n// data = ConvertFloatColumns(data, theIndex[0], theIndex[1])\r\n\r\n// categorical = (data.dtypes.values != np.dtype('float64'))\r\n// # print categorical\r\n// data = data.apply(encode_categorical) # Encode all labels\r\n// # print data\r\n\r\n// # Get numpy array from data\r\n// x = data.values[:, :-1]\r\n// y = data.values[:, -1]\r\n\r\n// # Apply one hot endcoing\r\n// from sklearn import preprocessing\r\n// encoder = preprocessing.OneHotEncoder(categorical_features=categorical[:-1], sparse=False)  # Last value in mask is y\r\n// x = encoder.fit_transform(x)\r\n\r\n// #Threshold for class 0\r\n// threshold = 7\r\n\r\n// from sklearn.cross_validation import train_test_split\r\n// x_train, x_test, y_train_val, y_test_val = train_test_split(x, y, test_size=0.6, random_state=42)\r\n\r\n// y_train = np.copy(y_train_val)\r\n// y_test = np.copy(y_test_val)\r\n\r\n// y_train[y_train_val > threshold] = 1\r\n// y_train[y_train_val <= threshold] = 0\r\n\r\n// y_test[y_test_val > threshold] = 1\r\n// y_test[y_test_val <= threshold] = 0\r\n\r\n// cost_per_donor = 7\r\n\r\n// #Print some useful info for our test, train sets\r\n// print 'train data: ', x_train.shape\r\n// print 'test data: ', x_test.shape\r\n// print 'train class 0: {}, train class 1: {}'.format(len(y_train[y_train == 0]), len(y_train[y_train == 1]))\r\n// print 'test class 0: {}, test class 1: {}'.format(len(y_test[y_test == 0]), len(y_test[y_test == 1]))\r\n\r\n// def DropRowByNameWithCondition(d , colIndexVal, condition): # when image type less than 2, drop\r\n//     d = d[d[colIndexVal] < condition]\r\n//     return d\r\n// # dfSeoul = DropRowByNameWithCondition(dfSeoul, \"imgTypeNum\" , 2)\r\n\r\n// def DropCol(d, colsValue):\r\n//     d.drop(colsValue, axis=1, inplace=True)\r\n//     return d\r\n// def DropColByName(d, colIndexVal):\r\n//     d = d.drop(colIndexVal, axis=1)\r\n//     return d\r\n// def DropColByNames(d, features = []):\r\n//     for i in features\r\n//         DropColByName(d,i)\r\n//     return d\r\n// dfSeoul = DropColByName(dfSeoul, \"imgType\")\r\n\r\n// def SumTwoColumns(d, col0, col1):\r\n//     d[col0] += d[col1]\r\n//     return DropCol(d, col1)\r\n// def DropCol(d, colsValue):\r\n//     d.drop(colsValue, axis=1, inplace=True)\r\n//     return d\r\n\r\n// def SplitPDRow(dataFrame, theLength):\r\n//     return dataFrame.iloc[:theLength,:]\r\n\r\n// def ConvertDataFrameObjects(theDf):\r\n//     data = theDf.convert_objects(convert_numeric=True)\r\n//     return data\r\n\r\n// def ConcatDataFrame(d0, d1):\r\n//     pd.concat( [data['zestimate_amount'],data['zestimate_valuation_range_high'],data['zestimate_valuationRange_low'],\r\n//                 data['zestimate_value_change'],data['zestimate_percentile']],axis=1)\r\n\r\n// ##################################################################################### Numpy use case\r\n// ############################################################################# numpy utilities\r\n\r\n// def printNumpy(n):\r\n//     if type(n) == np.ndarray:\r\n//         print \"ndim: \", n.ndim\r\n//         print \"shape: \", n.shape\r\n//         print \"dType: \", n.dtype\r\n//     else:\r\n//         print \"this is not a numpy array\"\r\n// def reshape(n,dim):\r\n//     reShape = n.reshape(dim) #return is going to be reshaped by the dim\r\n//     return reShape\r\n// def copyNumpy(n):\r\n//     theCopy = n.copy();\r\n//     return theCopy\r\n\r\n// def computeCutWithNANNumpy(n):\r\n//     return np.isnan(n)\r\n\r\n// def getColumnFromNumpy(n , numCol = 0, reshape = False):\r\n//     if (reshape):\r\n//         return n[:,numCol].reshape((n.size/2,1))\r\n//     else:\r\n//         return n[:,numCol]\r\n// def computeCutWithRangeNumpy(n, theMin, theMax):\r\n//     return n.clip((theMin, theMax))\r\n// def getComparedWithMaxNumpy(n, num):return n < num\r\n// def getComparedWithMinNumpy(n, num):return n > num\r\n// def getMean(n):return n.mean()\r\n// def getMin(n):return n.min()\r\n// def getMax(n):return n.max()\r\n\r\n// def getArange(d):\r\n//     return np.arange(d.min(), d.max() )\r\n// def getRange(d):\r\n//     return [d.min(), d.max()]\r\n// def getStandardDeviationByNumpy(d): # using numpy\r\n//     return np.std(d)\r\n// def getVarianceByNumpy(d): # using numpy\r\n//     return np.var(d)\r\n// def getVariance(d): # same as above but hardcode\r\n//     theAver = np.mean(d)\r\n//     theSum = 0.0;\r\n//     for i in d:\r\n//         theSum += np.absolute( i - theAver ) ** 2\r\n//     return (theSum / (len(d)))\r\n// def getStandardDeviation(d):\r\n//     return np.sqrt(getVariance(d));\r\n// # a = np.array([1,10,3,4,5,6])\r\n// # print getStandardDeviationByNumpy(a);\r\n// # print getStandardDeviation(a);\r\n\r\n// def NumpyForUtility(data):# from HW 01\r\n//     print 'data dimensions:', data.shape\r\n//     print data[:3, :]\r\n\r\n//     print 'birth weight range:', data[:, 0].min(), '-', data[:, 0].max()\r\n//     print 'femur length range:', data[:, 1].min(), '-', data[:, 1].max()\r\n//     print 'maternal age range:', data[:, 2].min(), '-', data[:, 2].max()\r\n\r\n//     group1 = data[data[:, 2] < 18]\r\n//     group2 = data[(data[:, 2] < 35) & (data[:, 2] > 17)]\r\n//     group3 = data[data[:, 2] > 34]\r\n\r\n//     print 'Sizes of groups I, II and III: {}, {}, {}'.format(group1.shape[0],\r\n//                                                              group2.shape[0],\r\n//                                                              group3.shape[0])\r\n\r\n//     print 'Mean birth weights of groups I, II and III: {}, {}, {}'.format(round(group1[:, 0].mean(), 2),\r\n//                                                                           round(group2[:, 0].mean(), 2),\r\n//                                                                           round(group3[:, 0].mean(), 2))\r\n\r\n//     print 'Mean femure lengths of groups I, II and III: {}, {}, {}'.format(group1[:, 1].mean(),\r\n//                                                                            group2[:, 1].mean(),\r\n//                                                                            group3[:, 1].mean())\r\n\r\n//     np.random.permutation(10) # array([1, 7, 4, 3, 0, 9, 2, 5, 8, 6])\r\n//     np.random.permutation([1, 4, 9, 12, 15]) # array([15,  1,  9,  4, 12])\r\n\r\n//     arr = np.arange(9).reshape((3, 3))\r\n//     np.random.permutation(arr)\r\n//                                     # array([[6, 7, 8],\r\n//                                     #        [0, 1, 2],\r\n//                                     #        [3, 4, 5]])\r\n\r\n//     # give us percentage\r\n//     a = np.array([0,1,2,3,4,5,6,7,8,9,10]);\r\n//     conf_int_right = np.percentile(a, 99)\r\n//     print conf_int_right\r\n\r\n//     conf_int_left = np.percentile(x_C_lst, 5)\r\n//     conf_int_right = np.percentile(x_C_lst, 95)\r\n\r\n//     Na = np.linspace(5, 10, num=10) # Return evenly spaced numbers over a specified interval.\r\n//     # pinrt = [  5. 5.55555556   6.11111111   6.66666667   7.22222222  7.77777778   8.33333333   8.88888889   9.44444444  10.        ]\r\n\r\n//     # sort\r\n//     names_df.sort(columns=\"COLUMNINDEX\", ascending = False)\r\n//     #Sort our list of movie info by like-percentage, in descending order\r\n//     sorted_likability = sorted(likability, key=lambda t: t[3], reverse=True)\r\n\r\n//     # shuffle the data\r\n//     nfldata = nfldata.reindex(np.random.permutation(nfldata.index))\r\n// # print 360.0 / 6.0\r\n// # print [(365.0 / (6.0-1)) * i for i in range(6)]\r\n\r\n// def numpypandas():\r\n//     # data split and drop\r\n//     Y = df['quality'].values\r\n//     df_tmp = df.drop('chlorides',1)\r\n//     Y = np.array([1 if y>=7 else 0 for y in Y])\r\n//     X = df_tmp.as_matrix()\r\n//     df['target'] = (df['quality'].values >=7)*1\r\n\r\n// ##################################################################### data generator\r\n// import numpy as np\r\n// import matplotlib.pyplot as plt\r\n// # %matplotlib inline\r\n// from sklearn.linear_model import LinearRegression as Lin_Reg\r\n\r\n// ## GENERATE ANOTHER DATASET AND EXAMINE RESIDUALS\r\n// def GenerateDataLinearFun(N=1000, beta0=2.2, beta1=3.0, sigma=10.0, Xmax=1.0):\r\n//     epsilon=np.random.normal(0,sigma,N) # Random normally distributed points\r\n//     X = np.linspace(0,Xmax, N)\r\n//     Y = beta0 + beta1 * X + epsilon\r\n//     return X, Y\r\n\r\n// def GenerateDataNotLinearFun(N=1000, beta0=2.2, beta1=3.0, sigma=1.0, Xmax=1.0, alpha=1):\r\n//     epsilon=np.random.normal(0,sigma,N) # Random normally distributed points\r\n//     X = np.linspace(0,Xmax, N)\r\n//     Y = beta0 + beta1 * X + alpha* np.sin(6*X)+ epsilon\r\n//     #Y = beta0 + beta1 * X +4*beta1*(X>0.5) + epsilon\r\n//     #Y = beta0 + beta1 * X + alpha * X*X*X + epsilon\r\n//     return X, Y\r\n\r\n// def VisScatter(axes, x, y, theAlpha=0.5, theColor=\"green\", theTitle=\"scatter\", theXLabel=\"xAxis\", theYLabel=\"yAxis\",):\r\n//     axes.scatter( x, y, alpha=theAlpha, color=theColor)\r\n//     axes.show()\r\n//     # axes.set_title(theTitle)\r\n//     # axes.set_xlabel(theXLabel)\r\n//     # axes.set_ylabel(theYLabel)\r\n\r\n// # x,y = GenerateDataLinearFun(N=900, sigma=2.1)\r\n// x,y = GenerateDataNotLinearFun(N=900, sigma=2.1)\r\n// title = \"d\"\r\n// VisScatter( plt, x, y, theAlpha=0.5, theColor=\"green\" , theTitle=\"KNN in \" + title, theXLabel = \"resultKnnByMSE\", theYLabel=\"\")\r\n// print type(x)\r\n\r\n// def VisPCA(x):\r\n//     from mpl_toolkits.mplot3d import Axes3D\r\n//     import matplotlib.mlab as mlab\r\n//     import matplotlib.pyplot as plt\r\n//     from sklearn.decomposition import PCA\r\n//     #Apply PCA to data and get the top 3 axes of maximum variation\r\n//     pca = PCA(n_components=3)\r\n//     pca.fit(x)\r\n//     #Project to the data onto the three axes\r\n//     x_reduced = pca.transform(x)\r\n//     #Visualized our reduced data\r\n//     fig = plt.figure(figsize=(15, 5))\r\n//     ax1 = fig.add_subplot(1, 2, 1,  projection='3d')\r\n//     ax1.scatter(x_reduced[y==0, 0], x_reduced[y==0, 1], x_reduced[y==0, 2], c='b', color='b', label='0')\r\n//     ax1.scatter(x_reduced[y==1, 0], x_reduced[y==1, 1], x_reduced[y==1, 2], c='r', color='r', label='1')\r\n//     ax1.scatter(x_reduced[y==3, 0], x_reduced[y==3, 1], x_reduced[y==3, 2], c='g', color='g', label='3')\r\n//     ax1.set_xlabel('Component 1')\r\n//     ax1.set_ylabel('Component 2')\r\n//     ax1.set_zlabel('Component 3')\r\n//     ax1.set_title('data projected onto the first 3 PCA components')\r\n//     ax1.legend()\r\n//     #Apply PCA to data and get the top 2 axes of maximum variation\r\n//     pca = PCA(n_components=2)\r\n//     pca.fit(x)\r\n//     #Project to the data onto the three axes\r\n//     x_reduced = pca.transform(x)\r\n//     #Visualized our reduced data\r\n//     ax2 = fig.add_subplot(1, 2, 2)\r\n//     ax2.scatter(x_reduced[y==0, 0], x_reduced[y==0, 1], c='b', color='b', label='0')\r\n//     ax2.scatter(x_reduced[y==1, 0], x_reduced[y==1, 1], c='r', color='r', label='1')\r\n//     ax2.scatter(x_reduced[y==3, 0], x_reduced[y==3, 1], c='g', color='g', label='3')\r\n//     ax2.set_xlabel('Component 1')\r\n//     ax2.set_ylabel('Component 2')\r\n//     ax2.set_title('data projected onto the first 2 PCA components')\r\n//     ax2.legend()\r\n//     plt.tight_layout()\r\n//     plt.show()\r\n\r\n// def ApplyPCA(x, nComponents = 3):\r\n//     from sklearn.decomposition import PCA\r\n//     pca = PCA(n_components=nComponents)\r\n//     pca.fit(x)\r\n//     x_reduced = pca.transform(x)\r\n//     return x_reduced\r\n\r\n// ############################################################################\r\n// ############################################################################\r\n// ############################################################################\r\n// ############################################################################\r\n// ############################################################################\r\n// ############################################################################  data pre-processing\r\n\r\n// def RemoveRowWithNAN(data):\r\n//     data = data.dropna(axis=0, how='any', thresh=None, subset=None, inplace=False)\r\n//     return data.reset_index()\r\n//     # data.dropna(axis=0,subset=['RoomType','Price','Bathrooms'],inplace=True)\r\n\r\n// def RemoveColumnsWithNull(data, num):\r\n// #     complete_cols = [column for column in data.columns if len(data[column][data[column].isnull()]) == 0]\r\n//     complete_cols = [column for column in data.columns if len(data[column][data[column].isnull()]) < num]\r\n//     return data[complete_cols]\r\n// def ReomveRowwithNANWithNum(data):\r\n//     data = data.dropna(thresh=None)\r\n//     return data\r\n\r\n// ################################################################## get data for example\r\n// def GetDataIris():\r\n//     from sklearn.datasets import load_iris\r\n//     iris = load_iris()\r\n//     X = iris.data\r\n//     y = iris.target\r\n//     return X, y\r\n// # X , y = GetDataIris()\r\n// # X_new = [[3, 5, 4, 2], [5, 4, 3, 2]]\r\n\r\n// import numpy as np\r\n// import matplotlib.pyplot as plt\r\n// from sklearn import linear_model, datasets\r\n","import { StatisticsUtility, Describe } from './Core/StatisticsUtility';\r\n\r\n// import { CHistogram } from '../../AppDrawingBlock/CChart/CHistogram';\r\n// import { CDescribe } from '../../AppDrawingBlock/CChart/CDescribe';\r\n// import { CScatter } from '../../AppDrawingBlock/CChart/CScatter';\r\n// import { CLineChart } from '../../AppDrawingBlock/CChart/CLineChart';\r\n// import { CAreaChart } from '../../AppDrawingBlock/CChart/CAreaChart';\r\n\r\nexport class NGeoJSON {\r\n\r\n    static geoJsonGeoType = ['Point', 'MultiPoint', 'LineString', 'MultiLineString', 'Polygon', 'MultiPolygon', 'GeometryCollection'];\r\n    // tslint:disable-next-line:no-any\r\n    dJson: any;\r\n    // tslint:disable-next-line:no-any\r\n    dMat: any;\r\n    // tslint:disable-next-line:no-any\r\n    index: any;\r\n    dHist: number[][];\r\n    dDescribe: string[];\r\n    dT: number[];\r\n    dA: number[];\r\n    dB: number[];\r\n    dC: number[];\r\n    dD: number[];\r\n    dE: number[];\r\n    dF: number[];\r\n    // tslint:disable-next-line:no-any\r\n    static GetIndexFromGeoJson(d: any) {\r\n        // tslint:disable-next-line:no-any\r\n        let geometryGeoJson: any = [], propertiesGeoJson: any = [];\r\n        Object.keys(d).forEach((key) => {\r\n            if (key === 'features') {\r\n                let theData = d[key];\r\n                for (let data of theData) {\r\n                    geometryGeoJson = data.geometry;\r\n                    propertiesGeoJson = data.properties;\r\n                    break;\r\n                }\r\n            }\r\n        });\r\n        let index: string[] = [];\r\n        Object.keys(geometryGeoJson).forEach((key) => { index.push(key); });\r\n        Object.keys(propertiesGeoJson).forEach((key) => { index.push(key); });\r\n        return index;\r\n    }\r\n    // tslint:disable-next-line:no-any\r\n    static GetDataWithIndexFromGeoJson(d: any): any {\r\n        let needIndex = true;\r\n        // tslint:disable-next-line:no-any\r\n        let dSet: any = [];\r\n        Object.keys(d).forEach((key) => {\r\n            if (key === 'features') {\r\n                let theData = d[key];\r\n                for (let data of theData) {\r\n                    // tslint:disable-next-line:no-any\r\n                    let theIndex: any = [];\r\n                    // tslint:disable-next-line:no-any\r\n                    let item: any = [];\r\n                    // eslint-disable-next-line no-loop-func\r\n                    Object.keys(data).forEach((objKey) => {\r\n                        Object.keys(data[objKey]).forEach((subKey) => {\r\n                            let theItem = data[objKey][subKey];\r\n                            if (typeof (theItem) === 'string' && theItem.length === 1) { return; }\r\n                            if (needIndex) { theIndex.push(subKey); }\r\n                            item.push(theItem);\r\n                        });\r\n                    });\r\n                    if (needIndex) {\r\n                        dSet.push(theIndex);\r\n                        needIndex = false;\r\n                    }\r\n                    dSet.push(item);\r\n                }\r\n                return dSet;\r\n            }\r\n        });\r\n        return dSet;\r\n    }\r\n    // tslint:disable-next-line:no-any\r\n    constructor(d: any) {\r\n        this.dJson = d;\r\n        this.dMat = NGeoJSON.GetDataWithIndexFromGeoJson(d);\r\n        this.index = this.dMat[0];\r\n\r\n        this.dDescribe = this.GetDescribeByCol(this.index[0]).ToString();\r\n        this.dHist = this.GetHistByCol(this.index[0]);\r\n\r\n        // CHistogram.dHist = this.dHist;\r\n        // CDescribe.dDescribe = this.dDescribe;\r\n\r\n        console.log(this.dJson);\r\n        console.log(this.index);\r\n        console.log(this.dDescribe);\r\n        console.log(this.dMat);\r\n\r\n        // https://earthquake.usgs.gov/earthquakes/feed/v1.0/geojson_detail.php\r\n\r\n        this.dT = this.GetColbyIndex('time'); //  rms sig nst dmin tz mag time\r\n        this.dA = this.GetColbyIndex(this.index[0]); // rms sig nst dmin tz\r\n        this.dB = this.GetColbyIndex('rms'); // rms sig nst dmin tz\r\n        this.dC = this.GetColbyIndex('sig'); // rms sig nst dmin tz\r\n\r\n        this.dD = this.GetColbyIndex('nst'); // rms sig nst dmin tz mag time\r\n        this.dE = this.GetColbyIndex('mag'); // rms sig nst dmin tz mag time\r\n        this.dF = this.GetColbyIndex('dmin'); // rms sig nst dmin tz mag time\r\n\r\n        console.log(this.dD);\r\n        // CScatter.dA = this.dA;\r\n        // CScatter.dB = this.dB;\r\n        // CScatter.dC = this.dC;\r\n\r\n        // CLineChart.dA = this.dT;\r\n        // CLineChart.dB = this.dD;\r\n\r\n        // CAreaChart.dT = this.dT;\r\n        // CAreaChart.dA = this.dD;\r\n        // CAreaChart.dB = this.dE;\r\n        // CAreaChart.dC = this.dF;\r\n    }\r\n    GetDataByIndex(colIndex: string) {\r\n        let item = this.index.indexOf(colIndex);\r\n        // tslint:disable-next-line:no-any\r\n        let d: any = [];\r\n        for (let i = 1; i < this.dMat.length; ++i) {\r\n            d.push(this.dMat[i][item]);\r\n        }\r\n        return d;\r\n    }\r\n    GetColbyIndex(colIndex: string) {\r\n        return this.GetDataByIndex(colIndex);\r\n    }\r\n    GetDescribeByCol(colIndex: string): Describe {\r\n        let data = this.GetDataByIndex(colIndex);\r\n        return StatisticsUtility.DescribeNumeric(data, colIndex);\r\n    }\r\n    GetHistByCol(colIndex: string, numBin: number = 20): number[][] {\r\n        let data = this.GetDataByIndex(colIndex);\r\n        return StatisticsUtility.GetDataForHistDataFromNumeric(data, numBin);\r\n    }\r\n\r\n}","import { StatisticsUtility, Describe } from './Core/StatisticsUtility';\r\n\r\n// import { CHistogram } from '../../AppDrawingBlock/CChart/CHistogram';\r\n// import { CDescribe } from '../../AppDrawingBlock/CChart/CDescribe';\r\n// import { CScatter } from '../../AppDrawingBlock/CChart/CScatter';\r\n// import { CLineChart } from '../../AppDrawingBlock/CChart/CLineChart';\r\n// import { CAreaChart } from '../../AppDrawingBlock/CChart/CAreaChart';\r\n\r\nexport class NGeoJSONPolygon {\r\n    static d: number[];\r\n    static geoJsonGeoType = ['Point', 'MultiPoint', 'LineString', 'MultiLineString', 'Polygon', 'MultiPolygon', 'GeometryCollection'];\r\n    // tslint:disable-next-line:no-any\r\n    dJson: any;\r\n    // tslint:disable-next-line:no-any\r\n    dMat: any;\r\n    // tslint:disable-next-line:no-any\r\n    index: any;\r\n    dHist: number[][];\r\n    dDescribe: string[];\r\n    dT: number[];\r\n    dA: number[];\r\n    dB: number[];\r\n    dC: number[];\r\n    dD: number[];\r\n    dE: number[];\r\n    dF: number[];\r\n    posLn: number[];\r\n    // tslint:disable-next-line:no-any\r\n    static GetIndexFromGeoJson(d: any) {\r\n        // tslint:disable-next-line:no-any\r\n        let geometryGeoJson: any = [], propertiesGeoJson: any = [];\r\n        Object.keys(d).forEach((key) => {\r\n            if (key === 'features') {\r\n                let theData = d[key];\r\n                for (let data of theData) {\r\n                    geometryGeoJson = data.geometry;\r\n                    propertiesGeoJson = data.properties;\r\n                    break;\r\n                }\r\n            }\r\n        });\r\n        let index: string[] = [];\r\n        Object.keys(geometryGeoJson).forEach((key) => { index.push(key); });\r\n        Object.keys(propertiesGeoJson).forEach((key) => { index.push(key); });\r\n        return index;\r\n    }\r\n    // tslint:disable-next-line:no-any\r\n    static GetDataWithIndexFromGeoJson(d: any): any {\r\n        let needIndex = true;\r\n        // tslint:disable-next-line:no-any\r\n        let dSet: any = [];\r\n        Object.keys(d).forEach((key) => {\r\n            if (key === 'features') {\r\n                let theData = d[key];\r\n                for (let data of theData) {\r\n                    // tslint:disable-next-line:no-any\r\n                    let theIndex: any = [];\r\n                    // tslint:disable-next-line:no-any\r\n                    let item: any = [];\r\n                    // eslint-disable-next-line no-loop-func\r\n                    Object.keys(data).forEach((objKey) => {\r\n                        Object.keys(data[objKey]).forEach((subKey) => {\r\n                            let theItem = data[objKey][subKey];\r\n                            if (typeof (theItem) === 'string' && theItem.length === 1) { return; }\r\n                            if (needIndex) { theIndex.push(subKey); }\r\n                            item.push(theItem);\r\n                            // return 0\r\n                        });\r\n                        // return 0\r\n                    });\r\n                    if (needIndex) {\r\n                        dSet.push(theIndex);\r\n                        needIndex = false;\r\n                    }\r\n                    dSet.push(item);\r\n                }\r\n                return dSet;\r\n            }\r\n        });\r\n        return dSet;\r\n    }\r\n    // tslint:disable-next-line:no-any\r\n    constructor(d: any) {\r\n        this.dJson = d;\r\n        this.dMat = NGeoJSONPolygon.GetDataWithIndexFromGeoJson(d);\r\n        this.index = this.dMat[0];\r\n        console.log(this.index);\r\n        this.posLn = this.GetPTFloat32Array();\r\n        NGeoJSONPolygon.d = this.posLn;\r\n\r\n        // console.log(this.dJson);\r\n        // console.log(this.index);\r\n        // console.log(this.dDescribe);\r\n        // console.log(this.dMat);\r\n\r\n        // https://earthquake.usgs.gov/earthquakes/feed/v1.0/geojson_detail.php\r\n\r\n        // this.dT = this.GetColbyIndex('coordinates'); //  rms sig nst dmin tz mag time\r\n        // this.dA = this.GetColbyIndex(this.index[0]); // rms sig nst dmin tz\r\n        // this.dB = this.GetColbyIndex('rms'); // rms sig nst dmin tz\r\n        // this.dC = this.GetColbyIndex('sig'); // rms sig nst dmin tz\r\n\r\n        // this.dD = this.GetColbyIndex('nst'); // rms sig nst dmin tz mag time\r\n        // this.dE = this.GetColbyIndex('mag'); // rms sig nst dmin tz mag time\r\n        // this.dF = this.GetColbyIndex('dmin'); // rms sig nst dmin tz mag time\r\n\r\n        // console.log(this.dD);\r\n        // CScatter.dA = this.dA;\r\n        // CScatter.dB = this.dB;\r\n        // CScatter.dC = this.dC;\r\n\r\n        // CLineChart.dA = this.dT;\r\n        // CLineChart.dB = this.dD;\r\n\r\n        // CAreaChart.dT = this.dT;\r\n        // CAreaChart.dA = this.dD;\r\n        // CAreaChart.dB = this.dE;\r\n        // CAreaChart.dC = this.dF;\r\n    }\r\n    GetPTFloat32Array() {\r\n        let n = [1];\r\n        let d = this.GetDataByIndex(this.index[this.index.length - 1]);\r\n        // console.log(d);\r\n        let ddd = 0;\r\n        for (let k = 0; k < d.length; ++k) {\r\n\r\n            if (Array.isArray(d[k])) {\r\n                //\r\n\r\n                // if()\r\n                for (let j = 0; j < d[k].length; ++j) {\r\n                    // console.log(d[k][j]);\r\n                    if (Array.isArray(d[k][j])) {\r\n                        for (let i = 0; i < d[k][j].length; ++i) {\r\n\r\n                            if (Array.isArray(d[k][j][i])) {\r\n                                for (let e = 0; e < d[k][j][i].length; ++e) {\r\n                                    n.push(d[k][j][i][e][0], d[k][j][i][e][1], 10.5);\r\n                                }\r\n                            }\r\n                            // console.log(d[k][j][i][1], d[k][j][i][0], 0);\r\n                        }\r\n\r\n                        if (ddd++ > 100) {\r\n                            // break;\r\n                        }\r\n                    } else {\r\n                        //\r\n                    }\r\n                }\r\n            }\r\n            // break;\r\n        }\r\n        n.shift();\r\n        console.log(n);\r\n        return n;\r\n    }\r\n    GetDataByIndex(colIndex: string) {\r\n        let item = this.index.indexOf(colIndex);\r\n        let d = [];\r\n        for (let i = 1; i < this.dMat.length; ++i) {\r\n            d.push(this.dMat[i][item]);\r\n        }\r\n        return d;\r\n    }\r\n    GetColbyIndex(colIndex: string) {\r\n        return this.GetDataByIndex(colIndex);\r\n    }\r\n    GetDescribeByCol(colIndex: string): Describe {\r\n        let data = this.GetDataByIndex(colIndex);\r\n        return StatisticsUtility.DescribeNumeric(data, colIndex);\r\n    }\r\n    GetHistByCol(colIndex: string, numBin: number = 20): number[][] {\r\n        let data = this.GetDataByIndex(colIndex);\r\n        return StatisticsUtility.GetDataForHistDataFromNumeric(data, numBin);\r\n    }\r\n\r\n}","import { StatisticsUtility } from './Core/StatisticsUtility';\r\n\r\nexport class NGeoJSONFeatureService {\r\n\r\n    static geoJsonGeoType = ['Point', 'MultiPoint', 'LineString', 'MultiLineString', 'Polygon', 'MultiPolygon', 'GeometryCollection'];\r\n    // tslint:disable-next-line:no-any\r\n    dJson: any;\r\n    // tslint:disable-next-line:no-any\r\n    dMat: any;\r\n    // tslint:disable-next-line:no-any\r\n    index: string[];\r\n    dHist: number[][];\r\n    dDescribe: string[];\r\n    // tslint:disable-next-line:no-any\r\n    array: {} = {};\r\n    arrayVis: {} = {};\r\n\r\n    static GetHistByCol(d: number[], numBin: number = 20): number[][] {\r\n        // let data = this.GetDataByIndex(colIndex);\r\n        return StatisticsUtility.GetDataForHistDataFromNumeric(d, numBin);\r\n    }\r\n\r\n    // tslint:disable-next-line:no-any\r\n    static GetIndexFromGeoJson(d: any) {\r\n        // tslint:disable-next-line:no-any\r\n        let geometryGeoJson: any = [], propertiesGeoJson: any = [];\r\n        Object.keys(d).forEach((key) => {\r\n            if (key === 'features') {\r\n                let theData = d[key];\r\n                for (let data of theData) {\r\n                    geometryGeoJson = data.geometry;\r\n                    propertiesGeoJson = data.properties;\r\n                    break;\r\n                }\r\n            }\r\n        });\r\n        let index: string[] = [];\r\n        Object.keys(geometryGeoJson).forEach((key) => { index.push(key); });\r\n        Object.keys(propertiesGeoJson).forEach((key) => { index.push(key); });\r\n        return index;\r\n    }\r\n    // tslint:disable-next-line:no-any\r\n    static GetDataWithIndexFromGeoJson(d: any): any {\r\n        let needIndex = true;\r\n        // tslint:disable-next-line:no-any\r\n        let dSet: any = [];\r\n        Object.keys(d).forEach((key) => {\r\n            if (key === 'features') {\r\n                let theData = d[key];\r\n                for (let data of theData) {\r\n                    // tslint:disable-next-line:no-any\r\n                    let theIndex: any = [];\r\n                    // tslint:disable-next-line:no-any\r\n                    let item: any = [];\r\n                    // eslint-disable-next-line no-loop-func\r\n                    Object.keys(data).forEach((objKey) => {\r\n                        Object.keys(data[objKey]).forEach((subKey) => {\r\n                            let theItem = data[objKey][subKey];\r\n                            if (typeof (theItem) === 'string' && theItem.length === 1) { return; }\r\n                            if (needIndex) { theIndex.push(subKey); }\r\n                            item.push(theItem);\r\n                        });\r\n                    });\r\n                    if (needIndex) {\r\n                        dSet.push(theIndex);\r\n                        needIndex = false;\r\n                    }\r\n                    dSet.push(item);\r\n                }\r\n                return dSet;\r\n            }\r\n        });\r\n        return dSet;\r\n    }\r\n    // tslint:disable-next-line:no-any\r\n    constructor(d: any) {\r\n        this.dJson = d;\r\n        this.dMat = NGeoJSONFeatureService.GetDataWithIndexFromGeoJson(d);\r\n        this.index = this.dMat[0];\r\n        this.Init();\r\n    }\r\n    Init() {\r\n        // this.dDescribe = this.GetDescribeByCol(this.index[0]).ToString();\r\n        // this.dHist = this.GetHistByCol(this.index[0]);\r\n\r\n        // https://earthquake.usgs.gov/earthquakes/feed/v1.0/geojson_detail.php\r\n        for (let i of this.index) { this.array[i] = this.GetColbyIndex(i); }\r\n\r\n        console.log(this.array);\r\n\r\n        // tslint:disable-next-line:no-string-literal\r\n        this.array['timeConverted'] = this.ConvertTime(this.array['Time_UT_']); // \"Time_UT_ // time_\r\n        this.ComputeTimelineIndex();\r\n\r\n        // tslint:disable-next-line:no-string-literal\r\n        let indexArray: number[] = []; for (let i = 0; i < this.array['timeConverted'].length; ++i) { indexArray.push(i); }\r\n\r\n        this.ComputeArrayVis(indexArray);\r\n        console.log(this);\r\n    }\r\n    ComputeArrayVis(indexArray: number[]) {\r\n        this.arrayVis = {};\r\n        for (let o of this.index) {\r\n            this.arrayVis[o] = [];\r\n            for (let i of indexArray) {\r\n                this.arrayVis[o].push(this.array[o][i]);\r\n            }\r\n        }\r\n    }\r\n    GetHistByCol(colIndex: string, numBin: number = 20): number[][] {\r\n        let data = this.GetDataByIndex(colIndex);\r\n        return StatisticsUtility.GetDataForHistDataFromNumeric(data, numBin);\r\n    }\r\n    GetDataByIndex(colIndex: string) {\r\n        let item = this.index.indexOf(colIndex);\r\n        // tslint:disable-next-line:no-any\r\n        let d: any = [];\r\n        for (let i = 1; i < this.dMat.length; ++i) {\r\n            d.push(this.dMat[i][item]);\r\n        }\r\n        return d;\r\n    }\r\n    GetColbyIndex(colIndex: string) {\r\n        return this.GetDataByIndex(colIndex);\r\n    }\r\n    private ConvertTime(d: number[]) {\r\n        let minYear = Number.MAX_SAFE_INTEGER;\r\n        let maxYear = Number.MIN_SAFE_INTEGER;\r\n        let dateArray: number[][] = [];\r\n        for (let i = 0; i < d.length; ++i) {\r\n            let date = new Date(+d[i]).toLocaleDateString().split('/');\r\n\r\n            if (minYear > +date[2]) { minYear = +date[2]; }\r\n            if (maxYear < +date[2]) { maxYear = +date[2]; }\r\n\r\n            dateArray.push([+date[0], +date[1], +date[2]]);\r\n        }\r\n        // tslint:disable-next-line:no-string-literal\r\n        this.array['yearDomain'] = [minYear, maxYear];\r\n        return dateArray;\r\n    }\r\n    private ComputeTimelineIndex() {\r\n        let timeLineIndex = {};\r\n        // tslint:disable-next-line:no-string-literal\r\n        this.array['timeLineIndexArryForKey'] = [];\r\n        // tslint:disable-next-line:no-string-literal\r\n        for (let j = this.array['yearDomain'][0]; j <= this.array['yearDomain'][1]; ++j) {\r\n            for (let i = 1; i < 13; ++i) {\r\n                let d: string = j + '_' + i;\r\n                timeLineIndex[d] = [];\r\n                // tslint:disable-next-line:no-string-literal\r\n                this.array['timeLineIndexArryForKey'].push(d);\r\n            }\r\n        }\r\n        // tslint:disable-next-line:no-string-literal\r\n        this.array['timeLineIndex'] = timeLineIndex;\r\n\r\n        // tslint:disable-next-line:no-string-literal\r\n        for (let i = 0; i < this.array['timeConverted'].length; ++i) {\r\n            // tslint:disable-next-line:no-string-literal\r\n            let d: string = this.array['timeConverted'][i][2] + '_' + this.array['timeConverted'][i][0];\r\n            // tslint:disable-next-line:no-string-literal\r\n            this.array['timeLineIndex'][d].push(i);\r\n        }\r\n        console.log(this);\r\n        // console.log\r\n    }\r\n    // GetDescribeByCol(colIndex: string): Describe {\r\n    //     let data = this.GetDataByIndex(colIndex);\r\n    //     return StatisticsUtility.DescribeNumeric(data, colIndex);\r\n    // }\r\n\r\n}","import { NVector3 } from '../../../';\r\n\r\nimport { PixelMap } from './PixelMap';\r\nimport { VoxelMap } from './VoxelMap';\r\nimport { MGridHex } from './MGridHex';\r\nexport class Pixel {\r\n    static ID = 0;\r\n\r\n    map: PixelMap | VoxelMap | MGridHex;\r\n    vec: NVector3;\r\n    norV: NVector3;\r\n    nPix: Pixel[] = [];\r\n    recVec: NVector3[];\r\n    i: number = -1;\r\n    j: number = -1;\r\n    k: number = -1;\r\n    u: number = -1;\r\n    v: number = -1;\r\n    id: number;\r\n    data: {};\r\n\r\n    static GetID() { return Pixel.ID++; }\r\n\r\n    constructor(map: PixelMap | VoxelMap | MGridHex, v: NVector3 = new NVector3(0, 0, 0)) {\r\n        this.map = map;\r\n        this.vec = v;\r\n        this.nPix = [];\r\n        this.recVec = [];\r\n        this.i = -1;\r\n        this.j = -1;\r\n        this.k = -1;\r\n        this.id = Pixel.GetID();\r\n        this.data = {};\r\n    }\r\n    ToString() {\r\n        let temp = 'Pixel' + this.id;\r\n        console.log(temp);\r\n        return temp;\r\n    }\r\n    Update() {\r\n        /* */\r\n    }\r\n    Render() {\r\n        /* */\r\n    }\r\n}\r\n","import { NVector3 } from '../../../';\r\n\r\n// import { Pixel } from './Pixel';\r\n// function NDataPixelInit() {\r\n// \tconsole.log('NDataPixel is init...');\r\n// \tpMap = new PixelMapGlobe();\r\n// \tpMap.rx = 10;\r\n// \tpMap.ry = 10;\r\n// \tpMap.p0 = new NPoint3d(-10, -10,0);\r\n// \tpMap.p1 = new NPoint3d(10,10,0);\r\n// \tpMap.Init();\r\n\r\n// \tpMap.VisCenterPoints();\r\n// \tpMap.VisLineGrid();\r\n// \tpMap.VisMeshGrid();\r\n// };\r\n\r\n/////////////////// PixelMapGlobe class\r\nexport class PixelMapGlobe {\r\n\r\n    public listPixel: Pixel[] = [];\r\n    public rx: number = 0;\r\n    public ry: number = 0;\r\n    public radius: number = 0;\r\n    public ddx: number = 0.0;\r\n    public ddy: number = 0.0;\r\n    public v0: NVector3 = NVector3.Origin();\r\n    public v1: NVector3 = NVector3.Origin();\r\n\r\n    constructor(rx: number = 36, ry: number = 18, radius: number = 100) {\r\n        this.rx = rx;\r\n        this.ry = ry;\r\n        this.radius = radius;\r\n        this.ddx = 0.0;\r\n        this.ddy = 0.0;\r\n        // this.v0 = v0;\r\n        // this.v1 = v1;\r\n        // this.Built();\r\n        this.Init();\r\n    }\r\n    Init() {\r\n        this.ddx = Math.PI * 2 / this.rx;\r\n        this.ddy = Math.PI / this.ry;\r\n        console.log('ddx is ' + this.ddx + '. ddy is ' + this.ddx);\r\n        console.log('Pixe Map was executed...');\r\n        this.InitGrid();\r\n    }\r\n    InitGrid() {\r\n        let vv = 0;\r\n        for (let y = 0; y < Math.PI; y += this.ddy) {\r\n            let uu = 0;\r\n            for (let x = 0; x < Math.PI * 2; x += this.ddx) {\r\n\r\n                let px = new Pixel(this);\r\n                px.i = uu; px.j = vv;\r\n                px.u = uu; px.v = vv;\r\n                let pos = this.RemapToShpere(x, y);\r\n                px.vec = new NVector3(pos[0], pos[1], pos[2]);\r\n                px.norV = NVector3.Normalize(px.vec);\r\n\r\n                pos = this.RemapToShpere(x - this.ddx * 0.5, y - this.ddy * 0.5);\r\n                px.recVec.push(new NVector3(pos[0], pos[1], pos[2]));\r\n\r\n                pos = this.RemapToShpere(x + this.ddx * 0.5, y - this.ddy * 0.5);\r\n                px.recVec.push(new NVector3(pos[0], pos[1], pos[2]));\r\n\r\n                pos = this.RemapToShpere(x + this.ddx * 0.5, y + this.ddy * 0.5);\r\n                px.recVec.push(new NVector3(pos[0], pos[1], pos[2]));\r\n\r\n                pos = this.RemapToShpere(x - this.ddx * 0.5, y + this.ddy * 0.5);\r\n                px.recVec.push(new NVector3(pos[0], pos[1], pos[2]));\r\n\r\n                // px.recVec.push(new NVector3(xx - this.ddx * 0.5, yy - this.ddy * 0.5, zz));\r\n                // px.recVec.push(new NVector3(xx + this.ddx * 0.5, yy - this.ddy * 0.5, zz));\r\n                // px.recVec.push(new NVector3(xx + this.ddx * 0.5, yy + this.ddy * 0.5, zz));\r\n                // px.recVec.push(new NVector3(xx - this.ddx * 0.5, yy + this.ddy * 0.5, zz));\r\n                // console.log(zz);\r\n\r\n                this.listPixel.push(px);\r\n                uu++;\r\n            }\r\n            vv++;\r\n        }\r\n        this.InitGridNeighbor();\r\n    }\r\n    RemapToShpere(x: number, y: number) {\r\n        return [this.radius * Math.cos(x) * Math.sin(y),\r\n        this.radius * Math.sin(x) * Math.sin(y),\r\n        this.radius * Math.cos(y)];\r\n    }\r\n    InitGridNeighbor() {\r\n        for (let j = 0; j < this.ry; ++j) {\r\n            for (let i = 0; i < this.rx; ++i) {\r\n                let k = j * this.rx + i;\r\n                let px0 = this.listPixel[k];\r\n                if (i > 0) { px0.nPix.push(this.listPixel[k - 1]); }\r\n                if (i < this.rx - 1) { px0.nPix.push(this.listPixel[k + 1]); }\r\n                if (j > 0) { px0.nPix.push(this.listPixel[k - this.rx]); }\r\n                if (j < this.ry - 1) { px0.nPix.push(this.listPixel[k + this.rx]); }\r\n                if ((i > 0) && (j < this.ry - 1)) { px0.nPix.push(this.listPixel[k + this.rx - 1]); }\r\n                if ((i > 0) && (j > 0)) { px0.nPix.push(this.listPixel[k - this.rx - 1]); }\r\n                if ((i < this.rx - 1) && (j < this.ry - 1)) { px0.nPix.push(this.listPixel[k + this.rx + 1]); }\r\n                if ((i < this.rx - 1) && (j > 0)) { px0.nPix.push(this.listPixel[k - this.rx + 1]); }\r\n            }\r\n        }\r\n        console.log('done for computing neighbors ');\r\n    }\r\n    GetPixelAtPoint(pt: NVector3) {\r\n        let pixelMap = this;\r\n        let dp = new NVector3(pt.x - pixelMap.v0.x, pt.y - pixelMap.v0.y, pt.z - pixelMap.v0.z);\r\n        let i = Math.round(dp.x / pixelMap.ddx);\r\n        let j = Math.round(dp.y / pixelMap.ddy);\r\n        if (i >= pixelMap.rx) { i = pixelMap.rx - 1; }\r\n        if (j >= pixelMap.ry) { j = pixelMap.ry - 1; }\r\n        if (i < 0) { i = 0; }\r\n        if (j < 0) { j = 0; }\r\n        return pixelMap.listPixel[j * pixelMap.rx + i];\r\n    }\r\n    ////////////////// event\r\n    MouseMove(x: number, y: number, z: number) {\r\n        let pixelMap = this;\r\n        console.log('mouseMove x:' + x + ', y:' + y + ', z:' + z);\r\n        let cpt = pixelMap.GetPixelAtPoint(new NVector3(x, y, z));\r\n        console.log(cpt.nPix);\r\n        // VisBufferPointsFromVecs(cpt.ptsCenter, 100);\r\n    }\r\n    onDocumentMouseMove() {\r\n        console.log('move');\r\n    }\r\n    onmouseenter() {\r\n        console.log('enter');\r\n    }\r\n    ////////////////// visualization\r\n    CVisLineGrid(ctx: CanvasRenderingContext2D) {\r\n        let pixelMap = this;\r\n        for (let i = 0; i < pixelMap.listPixel.length; ++i) {\r\n            let color = '#ff0000';\r\n            // console.log('d');\r\n            ctx.lineWidth = 0.5;\r\n            ctx.beginPath();\r\n            ctx.moveTo(pixelMap.listPixel[i].recVec[0].x, pixelMap.listPixel[i].recVec[0].y);\r\n            // console.log(pixelMap.listPixel[i].recVec)\r\n            for (let j = 1; j < pixelMap.listPixel[i].recVec.length; ++j) {\r\n                ctx.lineTo(pixelMap.listPixel[i].recVec[j].x, pixelMap.listPixel[i].recVec[j].y);\r\n                // console.log(pixelMap.listPixel[i].nPix[j].vec.x, pixelMap.listPixel[i].nPix[j].vec.y);\r\n\r\n            }\r\n            ctx.closePath();\r\n            ctx.strokeStyle = color; // ColorUtility.HexToCanvasColor(color, 1);\r\n            ctx.stroke();\r\n            // ctx.fill();\r\n        }\r\n    }\r\n    VisMeshGrid() {\r\n        let pixelMap = this;\r\n        for (let i = 0; i < pixelMap.listPixel.length; ++i) {\r\n            // VisMeshRectFromFourVecs(pixelMap.listPixel[i].ptsRectLst);\r\n        }\r\n    }\r\n    VisCenterPoints() {\r\n        let pixelMap = this;\r\n        let pts: NVector3[] = [];\r\n        for (let i = 0; i < pixelMap.listPixel.length; ++i) {\r\n            pts.push(pixelMap.listPixel[i].vec);\r\n        }\r\n        // VisBufferPointsFromVecs(pts);\r\n    }\r\n    Render(ctx: CanvasRenderingContext2D) {\r\n        /* */\r\n    }\r\n    GetTriFloatArray() { return new Float32Array(this.GetTriArray()); }\r\n    GetTriArray() {\r\n        let array: number[] = [];\r\n        let p = NVector3.origin;\r\n        for (let i = 0; i < this.listPixel.length; ++i) {\r\n            p = this.listPixel[i].recVec[0]; array.push(p.x, p.y, p.z);\r\n            p = this.listPixel[i].recVec[3]; array.push(p.x, p.y, p.z);\r\n            p = this.listPixel[i].recVec[2]; array.push(p.x, p.y, p.z);\r\n            p = this.listPixel[i].recVec[0]; array.push(p.x, p.y, p.z);\r\n            p = this.listPixel[i].recVec[2]; array.push(p.x, p.y, p.z);\r\n            p = this.listPixel[i].recVec[1]; array.push(p.x, p.y, p.z);\r\n\r\n        }\r\n        return array;\r\n    }\r\n    GetPtFloatArray() { return new Float32Array(this.GetPtArray()); }\r\n    GetPtArray() {\r\n        let array: number[] = [];\r\n        for (let i = 0; i < this.listPixel.length; ++i) {\r\n            let p = this.listPixel[i].vec;\r\n            array.push(p.x, p.y, p.z);\r\n        }\r\n        return array;\r\n    }\r\n    GetNormalFloatArray() { return new Float32Array(this.GetNormalArray()); }\r\n    GetNormalArray() {\r\n        let array: number[] = [];\r\n        let p = NVector3.origin;\r\n        for (let i = 0; i < this.listPixel.length; ++i) {\r\n            p = this.listPixel[i].recVec[0]; p.Normalize(); array.push(p.x, p.y, p.z);\r\n            p = this.listPixel[i].recVec[3]; p.Normalize(); array.push(p.x, p.y, p.z);\r\n            p = this.listPixel[i].recVec[2]; p.Normalize(); array.push(p.x, p.y, p.z);\r\n            p = this.listPixel[i].recVec[0]; p.Normalize(); array.push(p.x, p.y, p.z);\r\n            p = this.listPixel[i].recVec[2]; p.Normalize(); array.push(p.x, p.y, p.z);\r\n            p = this.listPixel[i].recVec[1]; p.Normalize(); array.push(p.x, p.y, p.z);\r\n\r\n        }\r\n        return array;\r\n    }\r\n    GetTexCoordinFloatArray() { return new Float32Array(this.GetTexCoordinArray()); }\r\n    GetTexCoordinArray() {\r\n        let array: number[] = [];\r\n        // let p = NVector3.origin;\r\n\r\n        for (let i = 0; i < this.listPixel.length; ++i) {\r\n            let u = this.listPixel[i].u / (this.rx - 1);\r\n            let v = this.listPixel[i].v / (this.ry - 1);\r\n\r\n            array.push(u, v);\r\n            array.push(u, v + this.ddy);\r\n            array.push(u + this.ddx, v + this.ddy);\r\n            array.push(u, v);\r\n            array.push(u + this.ddx, v + this.ddy);\r\n            array.push(u + this.ddx, v);\r\n\r\n            // px.recVec.push(new NVector3(xx - this.ddx * 0.5, yy - this.ddy * 0.5, zz));\r\n            // px.recVec.push(new NVector3(xx + this.ddx * 0.5, yy - this.ddy * 0.5, zz));\r\n            // px.recVec.push(new NVector3(xx + this.ddx * 0.5, yy + this.ddy * 0.5, zz));\r\n            // px.recVec.push(new NVector3(xx - this.ddx * 0.5, yy + this.ddy * 0.5, zz));\r\n        }\r\n        console.log('pppp');\r\n        console.log(array);\r\n        return array;\r\n    }\r\n}\r\n\r\nexport class Pixel {\r\n    static ID = 0;\r\n\r\n    map: PixelMapGlobe;\r\n    vec: NVector3;\r\n    norV: NVector3;\r\n    nPix: Pixel[] = [];\r\n    recVec: NVector3[];\r\n    i: number = -1;\r\n    j: number = -1;\r\n    k: number = -1;\r\n    u: number = -1;\r\n    v: number = -1;\r\n    id: number;\r\n    color: number[] = [];\r\n    data: {};\r\n\r\n    static GetID() { return Pixel.ID++; }\r\n\r\n    constructor(map: PixelMapGlobe, v: NVector3 = new NVector3(0, 0, 0)) {\r\n        this.map = map;\r\n        this.vec = v;\r\n        this.nPix = [];\r\n        this.recVec = [];\r\n        this.i = -1;\r\n        this.j = -1;\r\n        this.k = -1;\r\n        this.id = Pixel.GetID();\r\n        this.data = {};\r\n    }\r\n    ToString() {\r\n        let temp = 'Pixel' + this.id;\r\n        console.log(temp);\r\n        return temp;\r\n    }\r\n    Update() {\r\n        /* */\r\n    }\r\n    Render() {\r\n        /* */\r\n    }\r\n}","import { NVector3 } from '../../../';\r\n// import { ALine } from '../../../../Applications/AppsWrapper/AppDrawing/Canvas/CAnnotation/ALine';\r\n// import { ADrawingPreset } from '../../../../Applications/AppsWrapper/AppDrawing/Canvas/CAnnotation/ADrawingPreset';\r\n// import { CLine } from '../../../../Applications/AppsWrapper/AppDrawing/Canvas/CGeometry/CLine';\r\n// import { ACircle } from '../../../../Applications/AppsWrapper/AppDrawing/Canvas/CAnnotation/ACircle';\r\n\r\n// import { NumericalMotion } from '../../Utilities/NumericalMotion';\r\n\r\nexport enum ANODE_TYPE {\r\n    DEFAULT = 'DEFAULT',\r\n    START = 'START',\r\n    END = 'END',\r\n}\r\n\r\nexport class ANode {\r\n    vec: NVector3;\r\n    edges: AEdge[];\r\n    nNodes: ANode[];\r\n    id: number;\r\n\r\n    raidus: number = 35;\r\n\r\n    t: number = 0.0;\r\n    temp: number = -1;\r\n\r\n    type: ANODE_TYPE;\r\n    isVisited: boolean;\r\n\r\n    otherValue: number = 0;\r\n\r\n    constructor(id: number, v: NVector3) {\r\n        this.id = id;\r\n        this.vec = v;\r\n        this.edges = [];\r\n        this.nNodes = [];\r\n        this.isVisited = false;\r\n        this.type = ANODE_TYPE.DEFAULT;\r\n    }\r\n    isEqual(v: NVector3) {\r\n        if (this.vec === v) { return true; }\r\n        if (NVector3.Distance(this.vec, v) < 0.5) { return true; }\r\n        return false;\r\n    }\r\n    Render(ctx: CanvasRenderingContext2D) {\r\n        // console.log('dd');\r\n        ctx.fillStyle = '#000000';\r\n        ctx.beginPath();\r\n        ctx.arc(this.vec.x, this.vec.y, 8, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n\r\n        ctx.fillStyle = '#ffffff';\r\n        ctx.textAlign = 'center';\r\n        ctx.fillText('n' + this.id.toString(), this.vec.x, this.vec.y + 3.5);\r\n        // this.t += 0.05;\r\n    }\r\n    RnnderNodeArea(ctx: CanvasRenderingContext2D) {\r\n\r\n        let ra = this.raidus + Math.cos(this.t) * 5;\r\n        if (this.type === ANODE_TYPE.START || this.type === ANODE_TYPE.END) {\r\n            ctx.fillStyle = 'rgba(0,255,0,0.3)';\r\n        } else {\r\n            ctx.fillStyle = 'rgba(0,0,0,0.3)';\r\n        }\r\n        ctx.beginPath();\r\n        ctx.arc(this.vec.x, this.vec.y, ra, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    }\r\n}\r\nexport class AEdge {\r\n    n0: ANode;\r\n    n1: ANode;\r\n    vec: NVector3;\r\n    id: number;\r\n    constructor(id: number, n0: ANode, n1: ANode) {\r\n        this.id = id;\r\n        this.n0 = n0; n0.edges.push(this);\r\n        this.n1 = n1; n1.edges.push(this);\r\n    }\r\n    Render(ctx: CanvasRenderingContext2D) {\r\n        this.ComputeCenter();\r\n        ctx.fillStyle = '#000000';\r\n        ctx.beginPath();\r\n        ctx.arc(this.vec.x, this.vec.y, 14, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n\r\n        ctx.fillStyle = '#ffffff';\r\n        ctx.textAlign = 'center';\r\n        ctx.fillText('E ' + this.id.toString(), this.vec.x, this.vec.y + 3.5);\r\n    }\r\n    RenderDim(ctx: CanvasRenderingContext2D) {\r\n        // this.ComputeCenter();\r\n        // ctx.fillStyle = '#000000';\r\n        // ctx.beginPath();\r\n        // ctx.arc(this.vec.x, this.vec.y, 14, 0, Math.PI * 2);\r\n        // ctx.closePath();\r\n        // ctx.fill();\r\n\r\n        // ctx.fillStyle = '#ffffff';\r\n        // ctx.textAlign = 'center';\r\n        // ctx.fillText('E ' + this.id.toString(), this.vec.x, this.vec.y + 3.5);\r\n        if (this.n0.vec.x < this.n1.vec.x) {\r\n            // ADrawingPreset.LineDim(ctx, 0, this.n0.vec.x, this.n0.vec.y - 4, this.n1.vec.x, this.n1.vec.y, CLine.DistancefromGeoV(this.n0.vec, this.n1.vec));\r\n        } else {\r\n            // ADrawingPreset.LineDim(ctx, 0, this.n1.vec.x, this.n1.vec.y - 4, this.n0.vec.x, this.n0.vec.y, CLine.DistancefromGeoV(this.n0.vec, this.n1.vec));\r\n        }\r\n    }\r\n    private ComputeCenter() {\r\n        this.vec = NVector3.MidVec(this.n0.vec, this.n1.vec);\r\n    }\r\n}\r\n\r\nexport class ALineGraph {\r\n\r\n    nodes: ANode[];\r\n    edges: AEdge[];\r\n\r\n    p0: NVector3;\r\n    p1: NVector3;\r\n\r\n    startNode: ANode;\r\n    endNode: ANode;\r\n\r\n    path: ANode[];\r\n\r\n    constructor() {\r\n        this.edges = [];\r\n        this.nodes = [];\r\n    }\r\n    // tslint:disable-next-line:no-any\r\n    BuildByALines(lns: any) { // ALine[]) {\r\n        if (lns.length === 0) { return; }\r\n        let lines = lns;\r\n        let idNode = 0;\r\n        // console.log('==================================');\r\n        // console.log('input length of line:', lns.length);\r\n        let nodes: ANode[] = [];\r\n        nodes.push(new ANode(idNode++, lines[0].p0.vec));\r\n        nodes.push(new ANode(idNode++, lines[0].p1.vec));\r\n        for (let i = 1; i < lines.length; ++i) {\r\n            let isContainN0 = true, isContainN1 = true;\r\n            for (let j = 0; j < nodes.length; ++j) {\r\n                if (nodes[j].isEqual(lines[i].p0.vec)) { isContainN0 = false; }\r\n                if (nodes[j].isEqual(lines[i].p1.vec)) { isContainN1 = false; }\r\n            }\r\n            if (isContainN0) { nodes.push(new ANode(idNode++, lines[i].p0.vec)); }\r\n            if (isContainN1) { nodes.push(new ANode(idNode++, lines[i].p1.vec)); }\r\n\r\n        }\r\n        this.nodes = nodes;\r\n\r\n        this.edges = [];\r\n        for (let i = 0; i < lines.length; ++i) {\r\n            let n0: ANode | undefined;\r\n            let n1: ANode | undefined;\r\n            for (let j = 0; j < nodes.length; ++j) {\r\n                if (nodes[j].isEqual(lines[i].p0.vec)) { n0 = nodes[j]; }\r\n                if (nodes[j].isEqual(lines[i].p1.vec)) { n1 = nodes[j]; }\r\n            }\r\n            if (n0 && n1) {\r\n                this.edges.push(new AEdge(i, n0, n1));\r\n            }\r\n        }\r\n        this.ComputeNeighborNode();\r\n    }\r\n    ComputeNeighborNode() {\r\n        for (const n of this.nodes) {\r\n            for (const e of n.edges) {\r\n                if (n !== e.n0) { n.nNodes.push(e.n0); }\r\n                if (n !== e.n1) { n.nNodes.push(e.n1); }\r\n            }\r\n        }\r\n    }\r\n    ComputePathFinding(v0: NVector3, v1: NVector3) {\r\n        this.p0 = v0;\r\n        this.p1 = v1;\r\n        this.startNode = this.FindClosestNodeByVec(v0);\r\n        this.startNode.type = ANODE_TYPE.START;\r\n        this.endNode = this.FindClosestNodeByVec(v1);\r\n        this.endNode.type = ANODE_TYPE.END;\r\n        console.log(this.startNode, this.endNode);\r\n    }\r\n    UpdatePathFinding() {\r\n        this.ResetPath();\r\n        if (this.p0 && this.p1) {\r\n            this.ComputePathFinding(this.p0, this.p1);\r\n            this.path = this.ComputeShortestPath();\r\n        }\r\n    }\r\n    FindClosestNodeByVec(v: NVector3) {\r\n        // let i = this.nodes.length - 1;\r\n        let minDis = Number.MAX_SAFE_INTEGER;\r\n        let si = -1;\r\n        for (let i = 0; i < this.nodes.length; ++i) {\r\n            let dis = this.nodes[i].vec.Distance(v);\r\n            if (dis < minDis) { minDis = dis; si = i; }\r\n        }\r\n        return this.nodes[si];\r\n    }\r\n    Cost(current: ANode, other: ANode) {\r\n        // let v = current.vec;\r\n        let dis = NVector3.Distance(current.vec, other.vec);\r\n\r\n        let isInside = false;\r\n        // for (let i = 0; i < ACircle.list.length; ++i) {\r\n        //     let cirDis = NVector3.Distance(ACircle.list[i].GetCenterVec(), v);\r\n        //     // console.log(cirDis, ACircle.list[i].r0);\r\n        //     if (cirDis < ACircle.list[i].r0) {\r\n        //         isInside = true;\r\n        //     }\r\n        // }\r\n        if (isInside) {\r\n            console.log(current.id);\r\n            current.temp += 1000000;\r\n            return dis;\r\n        } else {\r\n            return dis;\r\n        }\r\n    }\r\n    DFS(index: number) {\r\n        if (this.nodes[index]) { return; }\r\n        this.nodes[index].isVisited = true;\r\n        for (let j = 0; j < this.nodes[index].nNodes.length; ++j) {\r\n            // do\r\n            const ni = this.nodes[index][j];\r\n            this.DFS(ni);\r\n        }\r\n    }\r\n    BFS(index: number) {\r\n        let front: ANode[] = [];\r\n        front.push(this.nodes[index]);\r\n        this.nodes[index].isVisited = true;\r\n        for (let i = 0; i < 20000; ++i) {\r\n            if (front.length === 0) { break; }\r\n            const current = front[0];\r\n            front.shift();\r\n            let safeguard = 0;\r\n            for (let np of current.nNodes) {\r\n\r\n                if (!np.isVisited) {\r\n\r\n                    // do\r\n                    front.push(np);\r\n\r\n                    np.isVisited = true;\r\n                }\r\n\r\n                // const newcost = this.Cost(current, np);\r\n                // const newtemp = current.temp + newcost; // + current.otherValue;\r\n                // if (np.temp === -1.0 || newtemp < np.temp) { // when we need this condition -> np.temp > newtemp ?\r\n                //     np.temp = newtemp;\r\n                //     front.push(np);\r\n\r\n                // }\r\n\r\n                if (++safeguard > 100) { break; }\r\n            }\r\n        }\r\n\r\n    }\r\n    ComputeShortestPath() { // , Graph: ALineGraph, transitionCostDelegate: cost): ANode[] { //, PixelMap pMap, transitionCostDelegate cost) {\r\n\r\n        let nFirst: ANode = this.startNode; // this.FindClosestNodeByVec(this.p0);\r\n        let nEnd: ANode = this.endNode; // this.FindClosestNodeByVec(this.p1);\r\n\r\n        // declaration of path list\r\n        let path: ANode[] = [];\r\n\r\n        // reset the temp value\r\n        for (let n of this.nodes) { n.temp = -1.0; }\r\n\r\n        // declaration of front list\r\n        let front: ANode[] = [];\r\n        front.push(nFirst);\r\n        nFirst.temp = 0.0;\r\n\r\n        // forward propagate\r\n        for (let i = 0; i < 20000; ++i) {\r\n            if (front.length === 0) { break; }\r\n            const current = front[0];\r\n            front.shift();\r\n\r\n            let safeguard = 0;\r\n            for (let np of current.nNodes) {\r\n                const newcost = this.Cost(current, np);\r\n                const newtemp = current.temp + newcost; // + current.otherValue;\r\n                if (np.temp === -1.0 || newtemp < np.temp) { // when we need this condition -> np.temp > newtemp ?\r\n                    np.temp = newtemp;\r\n                    front.push(np);\r\n\r\n                }\r\n                if (++safeguard > 100) { break; }\r\n            }\r\n        }\r\n\r\n        // // backward propagate\r\n        if (nEnd.temp !== -1.0) {\r\n            path.push(nEnd);\r\n            let current = nEnd;\r\n            for (let i = 0; i < 20000; ++i) {\r\n                let smallest = current;\r\n                for (let np of current.nNodes) {\r\n                    if (np.temp < smallest.temp) { smallest = np; }\r\n                }\r\n                if (smallest === current) { break; } // which means that?\r\n                current = smallest;\r\n                path.push(current);\r\n                if (current === nFirst) { break; }\r\n            }\r\n        }\r\n        console.log(path);\r\n        this.path = path;\r\n        return path;\r\n    }\r\n\r\n    Print() {\r\n        console.log('number of edge', this.edges.length);\r\n        console.log('number of node:', this.nodes.length);\r\n        for (let n of this.nodes) {\r\n            let stringEdge = '';\r\n            for (let i = 0; i < n.edges.length; ++i) {\r\n                stringEdge += 'E_' + n.edges[i].id + ' ';\r\n            }\r\n\r\n            console.log('N_' + n.id, ' = [', stringEdge, ']');\r\n        }\r\n    }\r\n    Render(ctx: CanvasRenderingContext2D) {\r\n        // console.log('graphic');\r\n        this.RnnderNodeArea(ctx);\r\n        this.RenderNode(ctx);\r\n        this.RenderEdge(ctx);\r\n        this.RenderDim(ctx);\r\n\r\n        this.RenderPath(ctx);\r\n    }\r\n    RnnderNodeArea(ctx: CanvasRenderingContext2D) {\r\n        for (let n of this.nodes) {\r\n            n.RnnderNodeArea(ctx);\r\n        }\r\n    }\r\n    RenderNode(ctx: CanvasRenderingContext2D) {\r\n        for (let n of this.nodes) {\r\n            n.Render(ctx);\r\n        }\r\n    }\r\n    RenderEdge(ctx: CanvasRenderingContext2D) {\r\n        for (let e of this.edges) {\r\n            e.Render(ctx);\r\n        }\r\n    }\r\n    RenderDim(ctx: CanvasRenderingContext2D) {\r\n        for (let e of this.edges) {\r\n            e.RenderDim(ctx);\r\n        }\r\n    }\r\n    RenderPath(ctx: CanvasRenderingContext2D) {\r\n        if (this.path && this.path.length > 0) {\r\n            ctx.lineWidth = 10;\r\n            ctx.beginPath();\r\n            ctx.strokeStyle = 'rgba(255,0,0,0.5)';\r\n            ctx.moveTo(this.path[0].vec.x, this.path[0].vec.y);\r\n            for (let i = 1; i < this.path.length; ++i) {\r\n                ctx.lineTo(this.path[i].vec.x, this.path[i].vec.y);\r\n            }\r\n            ctx.stroke();\r\n        }\r\n    }\r\n    private ResetPath() {\r\n        for (let i = 0; i < this.nodes.length; ++i) { this.nodes[i].type = ANODE_TYPE.DEFAULT; }\r\n    }\r\n}","import { NVector3 } from '../../../';\r\n// import { CVPoint } from '../../AppVisaulization/Canvas/CVisualization/CVPoint';\r\nexport class DataPixel {\r\n    i: number;\r\n    j: number;\r\n    nPix: DataPixel[];\r\n    bVec: NVector3[];\r\n    vec: NVector3;\r\n    pMap: DataPixelMap;\r\n    data: NVector3[];\r\n    isVisited: boolean;\r\n    isGetData: boolean;\r\n    temp: number;\r\n    constructor(pMap: DataPixelMap, v: NVector3) {\r\n        this.pMap = pMap;\r\n        this.nPix = [];\r\n        this.bVec = [];\r\n        this.vec = v;\r\n        this.data = [];\r\n        this.isVisited = false;\r\n        this.isGetData = true;\r\n    }\r\n    GetData() {\r\n        if (this.isGetData) { return this.data.length; }\r\n        return 0;\r\n    }\r\n    SumDataByNPix(vecs: NVector3[]) {\r\n        // let sum = 0;\r\n        // for (let i = 0; i < this.nPix.length; ++i) {\r\n        //     if (!NVector3.IsInsideOfVecs(this.vec, vecs)) { continue; }\r\n        //     if (!this.nPix[i].isVisited) {\r\n        //         sum += this.nPix[i].data.length;\r\n        //         this.nPix[i].isVisited = true;\r\n        //     }\r\n        // }\r\n        // return sum;\r\n    }\r\n}\r\nexport class DataPixelMap {\r\n    public static list: DataPixelMap[] = [];\r\n\r\n    listPixel: DataPixel[] = [];\r\n    rx: number = 0;\r\n    ry: number = 0;\r\n    ddx: number = 0.0;\r\n    ddy: number = 0.0;\r\n    offScale: number;\r\n    d: number[][];\r\n    minV: NVector3;\r\n    maxV: NVector3;\r\n    minData: number;\r\n    maxData: number;\r\n    v0: NVector3 = NVector3.Origin();\r\n    v1: NVector3 = NVector3.Origin();\r\n\r\n    static Add(g: DataPixelMap) { DataPixelMap.list.push(g); }\r\n    static Remove(g: DataPixelMap) { DataPixelMap.list.splice(DataPixelMap.list.indexOf(g), 1); }\r\n\r\n    // static GetPixelMap(rect: CRectangle) {\r\n    //     let pMap = new DataPixelMap(rect.pts[1].vec, rect.pts[3].vec, 20, 20);\r\n    //     pMap.Init();\r\n    // }\r\n\r\n    constructor(d: number[][]) {\r\n        this.d = d;\r\n        this.ComputeMinMaxPos();\r\n        this.Init(this.minV, this.maxV, 100, 100);\r\n        this.InitGrid();\r\n        this.InitGridNeighbor();\r\n        // this.ComputePixelOff();\r\n        this.PushDataToPixel(this.d);\r\n        this.ComputeMinMaxValue(this.d);\r\n    }\r\n    ComputeMinMaxPos() {\r\n        let minX = Number.MAX_SAFE_INTEGER; // 1000;\r\n        let maxX = Number.MIN_SAFE_INTEGER; // -1000;\r\n        let minY = Number.MAX_SAFE_INTEGER; // 1000;\r\n        let maxY = Number.MIN_SAFE_INTEGER; // -1000;\r\n        // console.log(minX, maxX);\r\n        let i = this.d.length;\r\n        while (i--) {\r\n            let x = this.d[i][1]; let y = this.d[i][0];\r\n            if (x === 0 || y === 0) { continue; }\r\n            // if (-72 < x && x < -70 && 40 < y && y < 43) {\r\n            if (minX > x) { minX = x; } if (minY > y) { minY = y; }\r\n            if (maxX < x) { maxX = x; } if (maxY < y) { maxY = y; }\r\n            // }\r\n        }\r\n        this.minV = new NVector3(minX, minY, 0);\r\n        this.maxV = new NVector3(maxX, maxY, 0);\r\n        // new CVPoint(this.minV.x, this.minV.y, this.minV.z, 20);\r\n        // new CVPoint(this.maxV.x, this.maxV.y, this.maxV.z, 20);\r\n    }\r\n    Init(v0: NVector3, v1: NVector3, rx: number = 20, ry: number = 20) {\r\n        this.offScale = 0.9;\r\n        this.rx = rx;\r\n        this.ry = ry;\r\n        this.ddx = 0.0;\r\n        this.ddy = 0.0;\r\n        this.v0 = v0;\r\n        this.v1 = v1;\r\n        this.ddx = (this.v1.x - this.v0.x) / (this.rx - 1.0);\r\n        this.ddy = (this.v1.y - this.v0.y) / (this.ry - 1.0);\r\n        console.debug('ddx is ' + this.ddx + '. ddy is ' + this.ddx);\r\n        console.debug('Pixe Map was executed...');\r\n        // DataPixelMap.Add(this);\r\n        // CVisualization.Add(this);\r\n    }\r\n    InitGrid() {\r\n        console.debug(this.rx, this.ry);\r\n        for (let j = 0; j < this.ry; ++j) {\r\n            for (let i = 0; i < this.rx; ++i) {\r\n                let x = this.v0.x + i * this.ddx;\r\n                let y = this.v0.y + j * this.ddy;\r\n                let px = new DataPixel(this, new NVector3(x, y, 0));\r\n                // new CVPoint(x, y, 0, 2);\r\n                px.i = i; px.j = j;\r\n                px.bVec.push(new NVector3(x - this.ddx * 0.5, y - this.ddy * 0.5, 0.0));\r\n                px.bVec.push(new NVector3(x + this.ddx * 0.5, y - this.ddy * 0.5, 0.0));\r\n                px.bVec.push(new NVector3(x + this.ddx * 0.5, y + this.ddy * 0.5, 0.0));\r\n                px.bVec.push(new NVector3(x - this.ddx * 0.5, y + this.ddy * 0.5, 0.0));\r\n                // console.debug(px);\r\n                this.listPixel.push(px);\r\n            }\r\n        }\r\n    }\r\n    InitGridNeighbor() {\r\n        for (let j = 0; j < this.ry; ++j) {\r\n            for (let i = 0; i < this.rx; ++i) {\r\n                let k = j * this.rx + i;\r\n                let px0 = this.listPixel[k];\r\n                if (i > 0) { px0.nPix.push(this.listPixel[k - 1]); }\r\n                if (i < this.rx - 1) { px0.nPix.push(this.listPixel[k + 1]); }\r\n                if (j > 0) { px0.nPix.push(this.listPixel[k - this.rx]); }\r\n                if (j < this.ry - 1) { px0.nPix.push(this.listPixel[k + this.rx]); }\r\n                if ((i > 0) && (j < this.ry - 1)) { px0.nPix.push(this.listPixel[k + this.rx - 1]); }\r\n                if ((i > 0) && (j > 0)) { px0.nPix.push(this.listPixel[k - this.rx - 1]); }\r\n                if ((i < this.rx - 1) && (j < this.ry - 1)) { px0.nPix.push(this.listPixel[k + this.rx + 1]); }\r\n                if ((i < this.rx - 1) && (j > 0)) { px0.nPix.push(this.listPixel[k - this.rx + 1]); }\r\n            }\r\n        }\r\n        console.debug('done for computing neighbors ');\r\n    }\r\n    ComputePixelOff() {\r\n        let i = this.listPixel.length;\r\n        while (i--) {\r\n            let cv = NVector3.GetCenterVecFromVecs(this.listPixel[i].bVec);\r\n            this.listPixel[i].vec = cv;\r\n            for (let j = 0; j < this.listPixel[i].bVec.length; ++j) {\r\n                let tv = this.listPixel[i].bVec[j];\r\n                let x = ((tv.x - cv.x) * this.offScale) + cv.x;\r\n                let y = ((tv.y - cv.y) * this.offScale) + cv.y;\r\n                this.listPixel[i].bVec[j] = new NVector3(x, y, 0);\r\n            }\r\n        }\r\n    }\r\n    PushDataToPixel(d: number[][]) {\r\n        let i = this.d.length;\r\n        while (i--) {\r\n            let v = new NVector3(this.d[i][1], this.d[i][0], 0);\r\n            let p = this.GetPixelAtPoint(v);\r\n            p.data.push(v);\r\n        }\r\n        console.log(this);\r\n    }\r\n    ComputeMinMaxValue(d: number[][]) {\r\n        this.minData = Number.MAX_SAFE_INTEGER; this.maxData = Number.MIN_SAFE_INTEGER;\r\n        for (let i = 0; i < this.listPixel.length; ++i) {\r\n            let n = this.listPixel[i].data.length;\r\n            if (n < this.minData) { this.minData = n; }\r\n            if (n > this.maxData) { this.maxData = n; }\r\n        }\r\n    }\r\n    GetPixelAtPoint(geoPt: NVector3) {\r\n\r\n        // console.log(geoPt);\r\n        let pixelMap = this;\r\n        let dp = new NVector3(geoPt.x - pixelMap.v0.x, geoPt.y - pixelMap.v0.y, geoPt.z - pixelMap.v0.z);\r\n        let i = Math.round(dp.x / pixelMap.ddx); let j = Math.round(dp.y / pixelMap.ddy);\r\n        if (i >= pixelMap.rx) { i = pixelMap.rx - 1; }\r\n        if (j >= pixelMap.ry) { j = pixelMap.ry - 1; }\r\n        if (i < 0) { i = 0; }\r\n        if (j < 0) { j = 0; }\r\n        return pixelMap.listPixel[j * pixelMap.rx + i];\r\n    }\r\n    GetDataAtPoint(pt: NVector3) {\r\n        let p = this.GetPixelAtPoint(pt);\r\n        return p.data.length;\r\n    }\r\n    GetDataAtByVecs(v: NVector3, vecs: NVector3[]) {\r\n        let p = this.GetPixelAtPoint(v);\r\n        p.SumDataByNPix(vecs);\r\n\r\n        return p.data.length;\r\n    }\r\n    ForwardPropagation(p: NVector3, vecs: NVector3[]) {\r\n        let pixs: DataPixel[] = [];\r\n        pixs.push(this.GetPixelAtPoint(p));\r\n\r\n        // let k = this.listPixel.length;\r\n        // while (k--) this.listPixel[k].isVisited = false;\r\n\r\n        let sum = 0;\r\n        for (let i = 0; i < 100; ++i) {\r\n            // while (true) {\r\n            if (pixs.length === 0) { break; }\r\n\r\n            let currentP = pixs[0];\r\n            pixs.shift();\r\n\r\n            for (let np of currentP.nPix) {\r\n\r\n                // console.log(np.vec);\r\n                // console.log(vecs[0])\r\n                if (NVector3.IsInsideOfVecs(np.vec, vecs)) {\r\n                    //   if (!np.isVisited) {\r\n                    pixs.push(np);\r\n                    sum += np.GetData();\r\n                    np.isVisited = true;\r\n                    // console.log(sum);\r\n                    // }\r\n\r\n                }\r\n\r\n                // if (currentP.nPix[j].isVisited) { continue; }\r\n                // if (NVector3.IsInsideOfVecs(currentP.nPix[j].vec, vecs)) {\r\n\r\n                //     // console.log(pixs.length);\r\n                //     if (!currentP.nPix[j].isVisited) {\r\n                //         sum += currentP.nPix[j].data.length;\r\n                //         currentP.nPix[j].isVisited = true;\r\n                //     }\r\n                //     pixs.push(currentP.nPix[j]);\r\n\r\n                // }\r\n            }\r\n        }\r\n\r\n        // let sum = 0;\r\n        // for (let i = 0; i < 1000; ++i) {\r\n        //     // while (true) {\r\n        //     if (pixs.length === 0) { break; }\r\n        //     let currentP = pixs[0];\r\n        //     pixs.shift();\r\n        //     for (let j = 0; j < currentP.nPix.length; ++j) {\r\n        //         if (currentP.nPix[j].isVisited) { continue; }\r\n        //         if (NVector3.IsInsideOfVecs(currentP.nPix[j].vec, vecs)) {\r\n\r\n        //             // console.log(pixs.length);\r\n        //             if (!currentP.nPix[j].isVisited) {\r\n        //                 sum += currentP.nPix[j].data.length;\r\n        //                 currentP.nPix[j].isVisited = true;\r\n        //             }\r\n        //             pixs.push(currentP.nPix[j]);\r\n\r\n        //         }\r\n        //     }\r\n\r\n        // }\r\n\r\n        // if (sum === 0) sum = 0.2;\r\n        // else sum += 0.2;\r\n        return sum;\r\n    }\r\n    LogUpdate(d: string) {\r\n        // CGeometry.app.cUIController.dataInspector.UpdateDataLog(d);\r\n\r\n    }\r\n    // event\r\n    Query(x: number, y: number, z: number) {\r\n        //\r\n    }\r\n    onDocumentMouseMove() {\r\n        console.debug('move');\r\n    }\r\n    onmouseenter() {\r\n        console.debug('enter');\r\n    }\r\n    // visualization\r\n    // CVisPixels(ctx: CanvasRenderingContext2D) {\r\n    //     for (let i = 0; i < this.listPixel.length; ++i) {\r\n    //         this.listPixel[i].RenderPost(ctx);\r\n    //     }\r\n    // };\r\n    VisMeshGrid() {\r\n        // for (let i = 0; i < pixelMap.listPixel.length; ++i) {\r\n        //     // VisMeshRectFromFourVecs(pixelMap.listPixel[i].ptsRectLst);\r\n        // }\r\n    }\r\n    VisCenterPoints() {\r\n        // let pts: NVector3[] = [];\r\n        // for (let i = 0; i < this.listPixel.length; ++i) {\r\n        //     // pts.push(pixelMap.listPixel[i].vec);\r\n        // }\r\n        // VisBufferPointsFromVecs(pts);\r\n    }\r\n    // UpdatePre() {\r\n    //     let i = this.listPixel.length;\r\n    //     while (i--) {\r\n    //         this.listPixel[i].IsHover = false;\r\n    //         this.listPixel[i].isVisit = false;\r\n    //     }\r\n    //     i = this.listPixel.length;\r\n    //     while (i--) this.listPixel[i].UpdateWithMouseInteraction(CGeometry.app.activeCommands.m.x, CGeometry.app.activeCommands.m.y);\r\n    // }\r\n    UpdatePost() {\r\n        // let i = this.listPixel.length;\r\n        // while (i--) {\r\n        //     this.listPixel[i].IsHover = false;\r\n        //     this.listPixel[i].isVisit = false;\r\n        // }\r\n    }\r\n    // ...................................................................\r\n\r\n}\r\n","\r\nconst themeRed = require('./theme/red.json');\r\nconst themePurple = require('./theme/purple.json');\r\nconst themeBlue = require('./theme/blue.json');\r\nconst themeGreen = require('./theme/green.json');\r\nconst themeOrange = require('./theme/orange.json');\r\nconst themeGray = require('./theme/gray.json');\r\nconst themeDarkgray = require('./theme/darkGray.json');\r\nconst themeBlack = require('./theme/black.json');\r\n\r\nexport class Asset {\r\n    // tslint:disable-next-line:no-any\r\n    themeRed: any; themePurple: any; themeBlue: any; themeGreen: any; themeOrange: any; themeGray: any; themeDarkgray: any; themeBlack: any;\r\n    constructor() {\r\n        this.ImportAssets();\r\n    }\r\n    async ImportAssets() {\r\n        this.themeRed = themeRed;\r\n        this.themePurple = themePurple;\r\n        this.themeBlue = themeBlue;\r\n        this.themeGreen = themeGreen;\r\n        this.themeOrange = themeOrange;\r\n        this.themeGray = themeGray;\r\n        this.themeDarkgray = themeDarkgray;\r\n        this.themeBlack = themeBlack;\r\n    }\r\n}","\r\nimport { MouseEventData, CLICK_TYPE } from '../../../';\r\n\r\nimport { NUI } from '../NUI';\r\nimport { IndependentPanelWrapper } from '../WrapperIndependentPanel/IndependentPanelWrapper';\r\n\r\nexport class ActiveCommand {\r\n    nUI: NUI;\r\n    independentPanelWrapper: IndependentPanelWrapper;\r\n    constructor(nUI: NUI) {\r\n        this.nUI = nUI;\r\n        this.independentPanelWrapper = nUI.independentPanelWrapper;\r\n    }\r\n    MouseEventController(e: MouseEventData) {\r\n\r\n        if (e.CLICK_TYPE === CLICK_TYPE.LEFT) {\r\n            this.MouseLeftClickPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.MIDDLE) {\r\n            this.MouseMiddleClickPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.DOWN_RIGHT) {\r\n            this.MouseRightClickPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.DOUBLE) {\r\n            this.MouseDoubleClickPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.MOVE) {\r\n            this.MouseMovePre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.DRAG) {\r\n            this.MouseDragPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.DOWN) {\r\n            this.MouseDownPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.WHEEL) {\r\n            this.MouseWheelPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.UP) { this.MouseUpPre(e); return; }\r\n    }\r\n\r\n    // .......................................................\r\n    MouseDown(e: MouseEventData) {/* */ }\r\n    MouseDownPre(e: MouseEventData) {\r\n        this.nUI.independentPanelWrapper.MouseDown(e);\r\n\r\n        this.nUI.pullDownMenuWrapper.MouseDown(e);\r\n\r\n        this.MouseDown(e);\r\n    }\r\n    MouseLeftClick(e: MouseEventData) {/* */ }\r\n    MouseLeftClickPre(e: MouseEventData) {\r\n        // console.log(\"left click\");\r\n        this.MouseLeftClick(e);\r\n    }\r\n    MouseMiddleClick(e: MouseEventData) {/* */ }\r\n    MouseMiddleClickPre(e: MouseEventData) {\r\n\r\n        this.MouseMiddleClick(e);\r\n    }\r\n    MouseRightClick(e: MouseEventData) { /* */ }\r\n    MouseRightClickPre(e: MouseEventData) {\r\n\r\n        this.MouseRightClick(e);\r\n    }\r\n    MouseUp(e: MouseEventData) { /* */ }\r\n    MouseUpPre(e: MouseEventData) {\r\n\r\n        this.MouseUp(e);\r\n\r\n    }\r\n    MouseDoubleClick(e: MouseEventData) {/* */ }\r\n    MouseDoubleClickPre(e: MouseEventData) {\r\n        // console.log(\"d click\");\r\n        this.MouseDoubleClick(e);\r\n    }\r\n    MouseMove(e: MouseEventData) {/* */ }\r\n    MouseMovePre(e: MouseEventData) {\r\n\r\n        this.nUI.pullDownMenuWrapper.MouseMove(e);\r\n\r\n        this.nUI.independentPanelWrapper.MouseMove(e);\r\n\r\n        this.MouseMove(e);\r\n    }\r\n    MouseDrag(e: MouseEventData) {/* */ }\r\n    MouseDragPre(e: MouseEventData) {\r\n\r\n        this.nUI.independentPanelWrapper.MouseDrag(e);\r\n\r\n        // console.log(\"drag\");\r\n        this.MouseDrag(e);\r\n    }\r\n    MouseWheel(e: MouseEventData) {/* */ }\r\n    MouseWheelPre(e: MouseEventData) {\r\n\r\n        // console.log(\"drag\");\r\n        this.MouseWheel(e);\r\n    }\r\n}","export class ControllerTheme {\r\n\r\n    static ThemePulldown = {\r\n        colBG: '#ffffff',\r\n\r\n        colSection: '#777777',\r\n        colText: '#333333',\r\n        colTextHover: '#ffffff',\r\n        colTextDisable: '#cccccc',\r\n\r\n        colSelectedBG: '#ff0000',\r\n        colSelectedText: '#ffffff',\r\n\r\n        widthEach: 250,\r\n        heightEach: 20,\r\n\r\n        textYOff: 15,\r\n        font: 'normal 11px arial',\r\n\r\n        animationSpeed: 0.195,\r\n\r\n        textAlign: 'left',\r\n\r\n        toolbarBG: '#cccccc',\r\n        toolbarFG: '#ffffff'\r\n    };\r\n\r\n    colBG: string = '#fffffe';\r\n    colSection: string = '#777777';\r\n    colText: string = '#333333';\r\n    colTextHover: string = '#ffffff';\r\n    colTextDisable: string = '#bbbbbb';\r\n\r\n    colSelectedBG: string = '#ff0000';\r\n    colSelectedText: string = '#ffffff';\r\n\r\n    widthEach: number = 230;\r\n    heightEach: number = 22;\r\n\r\n    textYOff: number = 20 - 5;\r\n    font: string = 'normal 11px arial'; // 100 Sans-serif //\r\n    textAlign: string = 'start';\r\n\r\n    animationSpeed: number = 0.138;\r\n\r\n    toolbarBG: string = '#cccccc';\r\n    toolbarFG: string = '#ffffff';\r\n\r\n    textBaseline: string = 'alphabetic';\r\n\r\n    constructor() {\r\n        // let json = JSON.parse(PulldownMenuStyle.ThemePulldown);\r\n    }\r\n    // tslint:disable-next-line:no-any\r\n    ShiftTheme(v: any) {\r\n        this.colBG = v.colBG;\r\n        this.colSection = v.colSection;\r\n        this.colText = v.colText;\r\n        this.colTextHover = v.colTextHover;\r\n        this.colTextDisable = v.colTextDisable;\r\n\r\n        this.colSelectedBG = v.colSelectedBG;\r\n        this.colSelectedText = v.colSelectedText;\r\n\r\n        this.widthEach = v.widthEach;\r\n        this.heightEach = v.heightEach;\r\n\r\n        this.textYOff = v.textYOff;\r\n        this.font = v.font;\r\n        this.textAlign = v.textAlign;\r\n\r\n        this.toolbarBG = v.toolbarBG;\r\n        this.toolbarFG = v.toolbarFG;\r\n    }\r\n}","import { MouseEventData } from '../../../../';\r\n\r\nimport { SubMenuCommonFly } from '../Menu/Common/SubMenuCommonFly';\r\nimport { PullDownMenuWrapper } from '../PullDownMenuWrapper';\r\nimport { MenuBase } from '../Menu/Common/Base/MenuBase';\r\n\r\n// import { GraphicApp } from '../../../../index';\r\nexport class MenuRenderer {\r\n    menus: MenuBase[] = [];\r\n    capture: MenuBase | undefined;\r\n    captureFlyout: SubMenuCommonFly | undefined;\r\n    isShow: boolean = false;\r\n    isActivated: boolean = false;\r\n    isStillCapturedFly: boolean = true;\r\n\r\n    pullDownMenuWrapper: PullDownMenuWrapper;\r\n\r\n    constructor(pullDownMenuWrapper: PullDownMenuWrapper) {\r\n        this.pullDownMenuWrapper = pullDownMenuWrapper;\r\n        this.menus = [];\r\n    }\r\n    Add(m: MenuBase) {\r\n        this.menus.push(m);\r\n    }\r\n    RemoveAll() {\r\n        this.menus = [];\r\n    }\r\n    Remove(m: MenuBase) {\r\n        this.menus.splice(this.menus.indexOf(m), 1);\r\n    }\r\n    Render(ctx: CanvasRenderingContext2D) {\r\n        if (!this.isShow) { return; }\r\n        for (let i = 0; i < this.menus.length; ++i) { this.menus[i].Render(ctx); }\r\n    }\r\n    set Capture(v: MenuBase | undefined) {\r\n        if (v) {\r\n            v.isCaptured = true;\r\n            this.capture = v;\r\n        } else {\r\n            if (this.capture) {\r\n                this.capture.isCaptured = false;\r\n            }\r\n        }\r\n    }\r\n    get Capture() {\r\n        return this.capture;\r\n    }\r\n    ShowMenu(v: boolean) {\r\n        this.isShow = v;\r\n    }\r\n    Reset() {\r\n        for (let i = 0; i < this.menus.length; ++i) {\r\n            this.menus[i].IsHover = false;\r\n        }\r\n        this.isActivated = false;\r\n        // this.pullDownMenu.stopPropagation22 = true;\r\n    }\r\n    MouseMove(e: MouseEventData) {\r\n        if (!this.isShow || !this.isActivated) { return; }\r\n        // if (PullDownMenuWrapper.pullDownMenuWrapper) {\r\n        //     if (!PullDownMenuWrapper.pullDownMenuWrapper.isActivated) { return; }\r\n        // }\r\n        let num = 0;\r\n        for (let i = 0; i < this.menus.length; ++i) {\r\n            if (this.menus[i].IsMouseInside(e.x, e.y)) {\r\n                this.menus[i].IsHover = true;\r\n                // this.pullDownMenu.nUI.pullDownMenuWrapper.stoppropagation = false;\r\n                num++;\r\n            }\r\n        }\r\n        // if (!isStillCapturedFly) {\r\n        if (num !== 0) {\r\n            for (let i = 0; i < this.menus.length; ++i) {\r\n                if (this.menus[i].IsMouseInside(e.x, e.y)) {\r\n                    this.menus[i].IsHover = true;\r\n                } else {\r\n                    this.menus[i].IsHover = false;\r\n                }\r\n            }\r\n        }\r\n        // }\r\n    }\r\n    MouseDown(e: MouseEventData) {\r\n        if (!this.isShow) { return; }\r\n        if (!this.isActivated) { this.isActivated = true; }\r\n\r\n        for (let i = 0; i < this.menus.length; ++i) {\r\n            if (this.menus[i].isHover) {\r\n                this.menus[i].MouseDown();\r\n                this.ClickForStopPropagation();\r\n            }\r\n        }\r\n\r\n        let num = 0;\r\n        for (let i = 0; i < this.menus.length; ++i) {\r\n            if (this.menus[i].IsMouseInside(e.x, e.y)) {\r\n                num++;\r\n            }\r\n        }\r\n\r\n        if (num === 0) {\r\n            this.Reset();\r\n        } else {\r\n            for (let i = 0; i < this.menus.length; ++i) {\r\n                if (this.menus[i].IsMouseInside(e.x, e.y)) {\r\n                    this.menus[i].IsHover = true;\r\n                } else {\r\n                    this.menus[i].IsHover = false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    ClickForStopPropagation() {\r\n        this.pullDownMenuWrapper.stopPropagation = true;\r\n    }\r\n}","\r\nimport { NVector3 } from '../../../../';\r\nimport { MouseEventData } from '../../../../IO/EventInteraction/MouseInteraction';\r\nimport { NUI } from '../../NUI';\r\nexport abstract class UIWrapperBase {\r\n    vec: NVector3;\r\n    width: number = 0;\r\n    height: number = 0;\r\n    nUI: NUI;\r\n    // modifyPanel: ModifyPanel;\r\n    isHidden: boolean;\r\n    isActivated: boolean = false;\r\n    constructor() {\r\n\r\n        // this.modifyPanel = new ModifyPanel(10, 600);\r\n        this.isHidden = true;\r\n        // this.Init();\r\n    }\r\n    Resize(width: number, height: number) {\r\n        this.width = width;\r\n    }\r\n    IsHiddenToggle() {\r\n        this.isHidden = !this.isHidden;\r\n        // this.modifyPanel.IsHidden = this.isHidden;\r\n        // this.\r\n    }\r\n    MouseMove(e: MouseEventData) {\r\n        /* */\r\n    }\r\n    MouseDown(e: MouseEventData) {\r\n        /* */\r\n    }\r\n    RenderPost(ctx: CanvasRenderingContext2D) {\r\n        /* */\r\n    }\r\n    Reset() {\r\n        /* */\r\n    }\r\n    ShowMenu(v: boolean) {\r\n        /* */\r\n    }\r\n    Destroy() {\r\n        /* */\r\n    }\r\n}","import { NVector3 } from '../../../../../../';\r\nimport { PullDownMenuWrapper } from '../../../PullDownMenuWrapper';\r\nexport abstract class MenuBase {\r\n    pullDownMenuWrapper: PullDownMenuWrapper;\r\n    title: string;\r\n    width: number;\r\n    height: number;\r\n    vec: NVector3;\r\n    vecSub: NVector3;\r\n    boundarVecs: NVector3[];\r\n    boundarVecsSub: NVector3[];\r\n    isHover: boolean = false;\r\n    isHide: boolean = false;\r\n    isSelected: boolean = false;\r\n    isCaptured: boolean = false;\r\n    constructor(pullDownMenuWrapper: PullDownMenuWrapper) {\r\n        this.pullDownMenuWrapper = pullDownMenuWrapper;\r\n        this.vec = NVector3.Origin();\r\n        this.vecSub = NVector3.Origin();\r\n        this.pullDownMenuWrapper.menuRenderer.Add(this);\r\n    }\r\n    get IsHover() {\r\n        return this.isHover;\r\n    }\r\n    set IsHover(v: boolean) {\r\n        this.isHover = v;\r\n    }\r\n    public ComputeBoundary() {\r\n        this.boundarVecs = [];\r\n        this.boundarVecs.push(new NVector3(this.vec.x, this.vec.y, this.vec.z));\r\n        this.boundarVecs.push(new NVector3(this.vec.x + this.width, this.vec.y, this.vec.z));\r\n        this.boundarVecs.push(new NVector3(this.vec.x + this.width, this.vec.y + this.height, this.vec.z));\r\n        this.boundarVecs.push(new NVector3(this.vec.x, this.vec.y + this.height, this.vec.z));\r\n        return this.boundarVecs;\r\n    }\r\n    public IsMouseInside(x: number, y: number) {\r\n        return NVector3.IsInsideOfVecs(new NVector3(x, y), this.ComputeBoundary());\r\n    }\r\n    public MouseDown() {\r\n        /* */\r\n    }\r\n    public Render(ctx: CanvasRenderingContext2D) {\r\n        this.ComputeBoundary();\r\n        this.RenderPost(ctx);\r\n    }\r\n    public Remove() {\r\n        this.pullDownMenuWrapper.menuRenderer.Remove(this);\r\n    }\r\n    public abstract RenderPost(ctx: CanvasRenderingContext2D): void;\r\n}","import { NVector3 } from '../../../../../';\r\nimport { MenuBase } from './Base/MenuBase';\r\n// import {MenuPreset} from '../Core/MenuPreset';\r\nimport { PullDownMenuWrapper } from '../../PullDownMenuWrapper';\r\nexport class MenuBar extends MenuBase {\r\n    // pullDownMenuWrapper: PullDownMenuWrapper;\r\n\r\n    constructor(pullDownMenuWrapper: PullDownMenuWrapper, width: number, height: number) {\r\n        super(pullDownMenuWrapper);\r\n        // this.pullDownMenuWrapper = pullDownMenuWrapper;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.vec = new NVector3(this.pullDownMenuWrapper.vec.x, this.pullDownMenuWrapper.vec.y);\r\n\r\n    }\r\n    public RenderPost(ctx: CanvasRenderingContext2D) {\r\n        // MenuPreset.RoundedRectFill\r\n        ctx.fillStyle = this.pullDownMenuWrapper.theme.colBG;\r\n        ctx.beginPath();\r\n        ctx.rect(this.vec.x, 0, this.width, this.vec.y + this.height);\r\n        // ctx.rect(this.vec.x, this.vec.y, this.width, this.height);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    }\r\n}","import { NVector3 } from '../../../../';\r\n\r\nexport class MenuPreset {\r\n\r\n    static RoundedRectFill(ctx: CanvasRenderingContext2D, colBG: string, vs: NVector3[], r: number, xOff: number = 0, isShadow: boolean = true) {\r\n        // let color = s.backgroundColor;\r\n        let radius = r; // parseFloat(s.borderRadius);\r\n        // console.log(color);\r\n        // ctx.save();\r\n        ctx.lineWidth = 2; // parseFloat(s.lineWidth);\r\n        ctx.beginPath();\r\n\r\n        ctx.moveTo(vs[0].x + xOff + radius, vs[0].y);\r\n        ctx.lineTo(vs[1].x - xOff - radius, vs[1].y);\r\n\r\n        ctx.arcTo(vs[1].x - xOff, vs[1].y, vs[1].x - xOff, vs[1].y + radius, radius);\r\n        ctx.lineTo(vs[2].x - xOff, vs[2].y - radius);\r\n\r\n        ctx.arcTo(vs[2].x - xOff, vs[2].y, vs[2].x - xOff - radius, vs[2].y, radius);\r\n        ctx.lineTo(vs[3].x + xOff + radius, vs[3].y);\r\n\r\n        ctx.arcTo(vs[3].x + xOff, vs[3].y, vs[3].x + xOff, vs[3].y - radius, radius);\r\n        ctx.lineTo(vs[0].x + xOff, vs[0].y + radius);\r\n        ctx.arcTo(vs[0].x + xOff, vs[0].y, vs[0].x + xOff + radius, vs[0].y, radius);\r\n        ctx.closePath();\r\n        ctx.strokeStyle = '#494949'; // ; CBlockDrawingPreset.theme.mainMenuNormal; //  '#494949'; // s.strokeStyle;\r\n        ctx.fillStyle = colBG;\r\n\r\n        if (isShadow) {\r\n            ctx.shadowBlur = 4;\r\n            ctx.shadowColor = 'rgba(0,0,0,0.3)';\r\n            ctx.shadowOffsetY = 2;\r\n            ctx.shadowOffsetX = 2;\r\n        } else {\r\n            ctx.shadowBlur = 0;\r\n            ctx.shadowOffsetY = 0;\r\n            ctx.shadowOffsetX = 0;\r\n        }\r\n\r\n        ctx.fill();\r\n        ctx.restore();\r\n    }\r\n    static RoundedRectFillWithCol(ctx: CanvasRenderingContext2D, vs: NVector3[], r: number, col: string = '#999999', xOff: number = 0, isShadow: boolean = true) {\r\n        // let color = s.backgroundColor;\r\n        let radius = r; // parseFloat(s.borderRadius);\r\n        // console.log(color);\r\n        // ctx.save();\r\n        ctx.lineWidth = 2; // parseFloat(s.lineWidth);\r\n        ctx.beginPath();\r\n\r\n        ctx.moveTo(vs[0].x + xOff + radius, vs[0].y);\r\n        ctx.lineTo(vs[1].x - xOff - radius, vs[1].y);\r\n\r\n        ctx.arcTo(vs[1].x - xOff, vs[1].y, vs[1].x - xOff, vs[1].y + radius, radius);\r\n        ctx.lineTo(vs[2].x - xOff, vs[2].y - radius);\r\n\r\n        ctx.arcTo(vs[2].x - xOff, vs[2].y, vs[2].x - xOff - radius, vs[2].y, radius);\r\n        ctx.lineTo(vs[3].x + xOff + radius, vs[3].y);\r\n\r\n        ctx.arcTo(vs[3].x + xOff, vs[3].y, vs[3].x + xOff, vs[3].y - radius, radius);\r\n        ctx.lineTo(vs[0].x + xOff, vs[0].y + radius);\r\n        ctx.arcTo(vs[0].x + xOff, vs[0].y, vs[0].x + xOff + radius, vs[0].y, radius);\r\n        ctx.closePath();\r\n        ctx.strokeStyle = '#494949'; // s.strokeStyle;\r\n        ctx.fillStyle = col;\r\n\r\n        if (isShadow) {\r\n            ctx.shadowBlur = 4;\r\n            ctx.shadowColor = 'rgba(0,0,0,0.3)';\r\n            ctx.shadowOffsetY = 2;\r\n            ctx.shadowOffsetX = 2;\r\n        } else {\r\n            ctx.shadowBlur = 0;\r\n            ctx.shadowOffsetY = 0;\r\n            ctx.shadowOffsetX = 0;\r\n        }\r\n\r\n        ctx.fill();\r\n        ctx.restore();\r\n    }\r\n    static SectionLine(ctx: CanvasRenderingContext2D, v: NVector3, width: number, offY: number) {\r\n        ctx.strokeStyle = '#777777';\r\n        ctx.lineWidth = 0.1;\r\n        ctx.beginPath();\r\n        ctx.moveTo(v.x, v.y + offY);\r\n        ctx.lineTo(v.x + width, v.y + offY);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n    }\r\n    constructor() {/* */ }\r\n}","import { NVector3 } from '../../../../../';\r\nimport { PullDownMenuWrapper } from '../../PullDownMenuWrapper';\r\nimport { MenuBase } from './Base/MenuBase';\r\nimport { SubMenuIconCommon } from './SubMenuIconCommon';\r\nimport { MenuPreset } from '../../Core/MenuPreset';\r\n// import { MenuRenderer } from '../../Core/MenuRenderer';\r\nexport class MenuCommon extends MenuBase {\r\n    title: string;\r\n    menus: SubMenuIconCommon[] = [];\r\n\r\n    heightSub: number;\r\n    widthSub: number;\r\n\r\n    // tslint:disable-next-line:no-any\r\n    ac: any;\r\n\r\n    isClick: boolean = false;\r\n    // tslint:disable-next-line:no-any\r\n    constructor(pullDownMenuWrapper: PullDownMenuWrapper, ac: any) {\r\n        super(pullDownMenuWrapper);\r\n        this.ac = ac;\r\n    }\r\n    public AddApp(v: string) {\r\n        //\r\n    }\r\n    public MouseDown() {\r\n        for (let i = 0; i < this.menus.length; ++i) {\r\n            if (this.menus[i].isHover) {\r\n                this.menus[i].MouseDown();\r\n            }\r\n        }\r\n    }\r\n    public get IsHover() {\r\n        return this.isHover;\r\n    }\r\n    public set IsHover(v: boolean) {\r\n        this.isHover = v;\r\n\r\n        for (let i = 0; i < this.menus.length; ++i) {\r\n            this.menus[i].isHide = !v;\r\n        }\r\n\r\n    }\r\n    public IsMouseInside(x: number, y: number) {\r\n        return NVector3.IsInsideOfVecs(new NVector3(x, y), this.ComputeBoundary());\r\n    }\r\n    public RenderPost(ctx: CanvasRenderingContext2D): void {\r\n\r\n        this.ComputeBoundary();\r\n\r\n        if (this.isHover) {\r\n            MenuPreset.RoundedRectFill(ctx, this.pullDownMenuWrapper.theme.colSelectedBG, this.boundarVecs, 0);\r\n            ctx.fillStyle = this.pullDownMenuWrapper.theme.colTextHover;\r\n            //  MenuRenderer.captureFlyout = undefined;\r\n        } else {\r\n            ctx.fillStyle = this.pullDownMenuWrapper.theme.colText;\r\n        }\r\n        ctx.shadowBlur = 0;\r\n        ctx.shadowOffsetY = 0;\r\n        ctx.shadowOffsetX = 0;\r\n        // ctx.textBaseline =  this.pullDownMenuWrapper.theme.textBaseline as CanvasTextBaseline; // 'middle';\r\n        // ctx.textAlign = this.pullDownMenuWrapper.theme.textAlign as CanvasTextAlign;\r\n        ctx.font = this.pullDownMenuWrapper.theme.font;\r\n        ctx.fillText(this.title, this.vec.x + this.pullDownMenuWrapper.textOffX, this.vec.y + this.pullDownMenuWrapper.textOffY);\r\n\r\n        if (this.isHover) {\r\n            if (!this.isClick) {\r\n                this.ClickForStopPropagation();\r\n                this.isClick = true;\r\n            }\r\n\r\n            // console.log(this);\r\n            MenuPreset.RoundedRectFillWithCol(ctx, NVector3.GetBoundaryByVecWidthHeight(this.vecSub, this.widthSub, this.heightSub), 3, this.pullDownMenuWrapper.theme.colBG);\r\n            for (let i = 0; i < this.menus.length; ++i) {\r\n                this.menus[i].RenderPost(ctx);\r\n            }\r\n        } else {\r\n            this.isClick = false;\r\n        }\r\n    }\r\n    public ClickForStopPropagation() {\r\n        this.pullDownMenuWrapper.stopPropagation = true;\r\n    }\r\n    public AddMenu(subMenu: string, title: string, fn: () => void) {\r\n        //\r\n    }\r\n}","import { NVector3, NumericalMotion } from '../../../../../';\r\nimport { MenuCommon } from './MenuCommon';\r\nimport { MenuPreset } from '../../Core/MenuPreset';\r\nexport class SubMenuIconCommon {\r\n    vec: NVector3;\r\n    boundarVecs: NVector3[];\r\n    menu: MenuCommon;\r\n    menus: SubMenuIconCommon[] = [];\r\n    title: string;\r\n    height: number;\r\n    width: number;\r\n    isHide: boolean;\r\n    isHover: boolean;\r\n    isClickable: boolean = true;\r\n    t: number = 0;\r\n    constructor(menu: MenuCommon, title: string, yOff: number) {\r\n        this.menu = menu;\r\n        this.title = title;\r\n        this.vec = new NVector3(this.menu.vec.x, this.menu.vec.y + yOff);\r\n        this.height = this.menu.pullDownMenuWrapper.theme.heightEach;\r\n        this.width = this.menu.pullDownMenuWrapper.theme.widthEach;\r\n    }\r\n    ComputeBoundary() {\r\n        this.boundarVecs = [];\r\n        this.boundarVecs.push(new NVector3(this.vec.x, this.vec.y, this.vec.z));\r\n        this.boundarVecs.push(new NVector3(this.vec.x + this.width, this.vec.y, this.vec.z));\r\n        this.boundarVecs.push(new NVector3(this.vec.x + this.width, this.vec.y + this.height, this.vec.z));\r\n        this.boundarVecs.push(new NVector3(this.vec.x, this.vec.y + this.height, this.vec.z));\r\n        return this.boundarVecs;\r\n    }\r\n    MouseInside(x: number, y: number) {\r\n        return NVector3.IsInsideOfVecs(new NVector3(x, y), this.ComputeBoundary());\r\n    }\r\n    MouseDown() {\r\n        if (!this.isClickable) { return; }\r\n        this.MouseDownPost();\r\n        // this.menu.pullDownMenuWrapper.stopPropagation22 = true;\r\n    }\r\n    MouseDownPost() {\r\n        /* */\r\n    }\r\n    RenderPost(ctx: CanvasRenderingContext2D): void {\r\n        if (this.isHide) { return; }\r\n        if (this.MouseInside(this.menu.pullDownMenuWrapper.mouse.x, this.menu.pullDownMenuWrapper.mouse.y)) {\r\n            this.isHover = true;\r\n            this.t += this.menu.pullDownMenuWrapper.theme.animationSpeed;\r\n            this.menu.pullDownMenuWrapper.menuRenderer.captureFlyout = undefined;\r\n        } else {\r\n            this.t = 0;\r\n            this.isHover = false;\r\n        }\r\n\r\n        if (this.isClickable) {\r\n            if (this.isHover) {\r\n                if (this.t > 1) { this.t = 1.0; }\r\n                MenuPreset.RoundedRectFill(ctx, this.menu.pullDownMenuWrapper.theme.colSelectedBG, NVector3.GetBoundaryByVecWidthHeight(this.vec, this.width * NumericalMotion.EaseOutQuad(this.t), this.height), 0);\r\n                ctx.fillStyle = this.menu.pullDownMenuWrapper.theme.colTextHover;\r\n            } else {\r\n                ctx.fillStyle = this.menu.pullDownMenuWrapper.theme.colText;\r\n            }\r\n        } else {\r\n            ctx.fillStyle = this.menu.pullDownMenuWrapper.theme.colTextDisable;\r\n        }\r\n\r\n        ctx.shadowBlur = 0;\r\n        ctx.shadowOffsetY = 0;\r\n        ctx.shadowOffsetX = 0;\r\n        ctx.font = this.menu.pullDownMenuWrapper.theme.font;\r\n        // ctx.textAlign = this.menu.pullDownMenuWrapper.theme.textAlign;\r\n        ctx.fillText(this.title, this.vec.x + this.menu.pullDownMenuWrapper.textOffX, this.vec.y + this.menu.pullDownMenuWrapper.textOffY);\r\n    }\r\n}","import { NVector3 } from '../../../../../';\r\nimport { SubMenuIconCommon } from './SubMenuIconCommon';\r\nimport { MenuCommon } from './MenuCommon';\r\nimport { MenuPreset } from '../../Core/MenuPreset';\r\nexport class SubMenuCommonSection extends SubMenuIconCommon {\r\n    vec: NVector3;\r\n    boundarVecs: NVector3[];\r\n    // menu: MenuCommon;\r\n    title: string;\r\n    height: number;\r\n    width: number;\r\n    isHide: boolean;\r\n    isHover: boolean;\r\n    offY: number;\r\n    constructor(menu: MenuCommon, title: string, yOff: number) {\r\n        super(menu, title, yOff);\r\n        this.menu = menu;\r\n        this.title = title;\r\n        this.vec = new NVector3(this.menu.vec.x, this.menu.vec.y + yOff);\r\n        this.height = this.menu.pullDownMenuWrapper.theme.heightEach;\r\n        this.width = this.menu.pullDownMenuWrapper.theme.widthEach;\r\n        this.offY = this.height * 0.5;\r\n    }\r\n    RenderPost(ctx: CanvasRenderingContext2D): void {\r\n        if (this.isHide) { return; }\r\n        MenuPreset.SectionLine(ctx, this.vec, this.width, this.offY);\r\n    }\r\n}","import { NVector3, NumericalMotion } from '../../../../../';\r\nimport { PullDownMenuWrapper } from '../../PullDownMenuWrapper';\r\nimport { SubMenuIconCommon } from './SubMenuIconCommon';\r\nimport { SubMenuCommonFly } from './SubMenuCommonFly';\r\n// import { MenuBase } from './Base/MenuBase';\r\n// import {SubMenuIconCommon} from './SubMenuIconCommon';\r\nimport { MenuPreset } from '../../Core/MenuPreset';\r\nexport class SubMenuIconFlyCommon extends SubMenuIconCommon {\r\n\r\n    pullDownMenuWrapper: PullDownMenuWrapper;\r\n\r\n    title: string;\r\n    menus: SubMenuIconCommon[] = [];\r\n\r\n    heightSub: number;\r\n    widthSub: number;\r\n\r\n    vecSub: NVector3;\r\n\r\n    isClickable: boolean = true;\r\n\r\n    constructor(menu: SubMenuCommonFly, title: string, yOff: number) {\r\n        super(menu.menu, title, yOff);\r\n        this.vec = new NVector3(this.menu.vec.x + this.menu.pullDownMenuWrapper.theme.widthEach, yOff);\r\n        this.height = this.menu.pullDownMenuWrapper.theme.heightEach;\r\n        this.width = this.menu.pullDownMenuWrapper.theme.widthEach;\r\n    }\r\n    MouseDown() {\r\n        if (!this.isClickable) { return; }\r\n        this.MouseDownPost();\r\n    }\r\n    MouseDownPost() {\r\n        /* */\r\n    }\r\n    get IsHover() {\r\n        return this.isHover;\r\n    }\r\n    set IsHover(v: boolean) {\r\n        this.isHover = v;\r\n\r\n        for (let i = 0; i < this.menus.length; ++i) {\r\n            this.menus[i].isHide = !v;\r\n        }\r\n\r\n    }\r\n    RenderPost(ctx: CanvasRenderingContext2D): void {\r\n\r\n        this.ComputeBoundary();\r\n        // console.log(this);\r\n        if (this.MouseInside(this.menu.pullDownMenuWrapper.mouse.x, this.menu.pullDownMenuWrapper.mouse.y)) {\r\n            this.isHover = true;\r\n            this.t += this.menu.pullDownMenuWrapper.theme.animationSpeed;\r\n            // MenuRenderer.captureFlyout = this;\r\n        } else {\r\n            this.t = 0;\r\n            // if (MenuRenderer.captureFlyout === undefined) {\r\n            this.isHover = false;\r\n            // }\r\n        }\r\n        if (this.isClickable) {\r\n            if (this.isHover) {\r\n                if (this.t > 1) { this.t = 1.0; }\r\n                MenuPreset.RoundedRectFill(ctx, this.menu.pullDownMenuWrapper.theme.colSelectedBG, NVector3.GetBoundaryByVecWidthHeight(this.vec, this.width * NumericalMotion.EaseOutQuad(this.t), this.height), 0);\r\n                ctx.fillStyle = this.menu.pullDownMenuWrapper.theme.colTextHover;\r\n            } else {\r\n                ctx.fillStyle = this.menu.pullDownMenuWrapper.theme.colText;\r\n            }\r\n        } else {\r\n            ctx.fillStyle = this.menu.pullDownMenuWrapper.theme.colTextDisable;\r\n        }\r\n        ctx.shadowBlur = 0;\r\n        ctx.shadowOffsetY = 0;\r\n        ctx.shadowOffsetX = 0;\r\n        ctx.font = this.menu.pullDownMenuWrapper.theme.font;\r\n        // ctx.textAlign = this.menu.pullDownMenuWrapper.theme.textAlign;\r\n        ctx.fillText(this.title, this.vec.x + this.menu.pullDownMenuWrapper.textOffX, this.vec.y + this.menu.pullDownMenuWrapper.textOffY);\r\n\r\n        if (this.isHover) {\r\n            // console.log(this);\r\n            // MenuPreset.RoundedRectFillWithCol(ctx, NVector3.GetBoundaryByVecWidthHeight(this.vec, this.width, this.height), 3, this.menu.pullDownMenuWrapper.theme.colBG);\r\n\r\n        }\r\n    }\r\n}","import { NVector3, NumericalMotion } from '../../../../../';\r\nimport { SubMenuIconCommon } from './SubMenuIconCommon';\r\nimport { MenuCommon } from './MenuCommon';\r\nimport { MenuPreset } from '../../Core/MenuPreset';\r\n// import { MenuRenderer } from '../../Core/MenuRenderer';\r\n\r\nexport class SubMenuCommonFly extends SubMenuIconCommon {\r\n    vec: NVector3;\r\n    boundarVecs: NVector3[];\r\n\r\n    vecSub: NVector3 = NVector3.Origin();\r\n    widthSub: number;\r\n    heightSub: number;\r\n\r\n    title: string;\r\n    height: number;\r\n    width: number;\r\n    isHide: boolean;\r\n    isHover: boolean;\r\n    offY: number;\r\n\r\n    isClickable: boolean = true;\r\n\r\n    constructor(menu: MenuCommon, title: string, yOff: number) {\r\n        super(menu, title, yOff);\r\n        this.menu = menu;\r\n        this.title = title;\r\n        this.vec = new NVector3(this.menu.vec.x, this.menu.vec.y + yOff);\r\n        this.height = this.menu.pullDownMenuWrapper.theme.heightEach;\r\n        this.width = this.menu.pullDownMenuWrapper.theme.widthEach;\r\n        this.offY = this.height * 0.5;\r\n        this.Init();\r\n    }\r\n    Init() {\r\n        this.widthSub = this.menu.pullDownMenuWrapper.theme.widthEach;\r\n        this.vecSub = new NVector3(this.vec.x + this.menu.pullDownMenuWrapper.theme.widthEach + 1, this.vec.y + 1);\r\n    }\r\n    MouseDown() {\r\n        for (let i = 0; i < this.menus.length; ++i) {\r\n            if (this.menus[i].isHover) {\r\n                this.menus[i].MouseDown();\r\n            }\r\n        }\r\n    }\r\n    MouseInside(x: number, y: number) {\r\n        return NVector3.IsInsideOfVecs(new NVector3(x, y), this.ComputeBoundary());\r\n    }\r\n    RenderPost(ctx: CanvasRenderingContext2D): void {\r\n        if (this.isHide) { return; }\r\n        if (this.MouseInside(this.menu.pullDownMenuWrapper.mouse.x, this.menu.pullDownMenuWrapper.mouse.y)) {\r\n            this.isHover = true;\r\n\r\n            if (this.menu.pullDownMenuWrapper.nUI.pullDownMenuWrapper.menuRenderer.captureFlyout && this.menu.pullDownMenuWrapper.nUI.pullDownMenuWrapper.menuRenderer.captureFlyout !== this) {\r\n                this.menu.pullDownMenuWrapper.nUI.pullDownMenuWrapper.menuRenderer.captureFlyout.isHover = false;\r\n            }\r\n            this.menu.pullDownMenuWrapper.nUI.pullDownMenuWrapper.menuRenderer.captureFlyout = this;\r\n        } else {\r\n            if (this.menu.pullDownMenuWrapper.nUI.pullDownMenuWrapper.menuRenderer.captureFlyout === undefined) {\r\n                this.isHover = false;\r\n            }\r\n        }\r\n\r\n        if (this.isHover) {\r\n            this.t += this.menu.pullDownMenuWrapper.theme.animationSpeed;\r\n            if (this.t > 1) { this.t = 1.0; }\r\n            MenuPreset.RoundedRectFill(ctx, this.menu.pullDownMenuWrapper.theme.colSelectedBG, NVector3.GetBoundaryByVecWidthHeight(this.vec, this.width * NumericalMotion.EaseOutQuad(this.t), this.height), 0);\r\n\r\n            if (this.isClickable) {\r\n                ctx.fillStyle = this.menu.pullDownMenuWrapper.theme.colTextHover;\r\n            } else {\r\n                ctx.fillStyle = this.menu.pullDownMenuWrapper.theme.colTextDisable;\r\n            }\r\n        } else {\r\n            this.t = 0;\r\n            if (this.isClickable) {\r\n                ctx.fillStyle = this.menu.pullDownMenuWrapper.theme.colText;\r\n            } else {\r\n                ctx.fillStyle = this.menu.pullDownMenuWrapper.theme.colTextDisable;\r\n            }\r\n        }\r\n        ctx.shadowBlur = 0;\r\n        ctx.shadowOffsetY = 0;\r\n        ctx.shadowOffsetX = 0;\r\n        ctx.font = this.menu.pullDownMenuWrapper.theme.font;\r\n        // ctx.textAlign = this.menu.pullDownMenuWrapper.theme.textAlign;\r\n        ctx.fillText(this.title, this.vec.x + this.menu.pullDownMenuWrapper.textOffX, this.vec.y + this.menu.pullDownMenuWrapper.textOffY);\r\n\r\n        if (this.isHover) {\r\n            this.heightSub = this.menu.pullDownMenuWrapper.theme.heightEach * this.menus.length;\r\n            MenuPreset.RoundedRectFillWithCol(ctx, NVector3.GetBoundaryByVecWidthHeight(this.vecSub, this.widthSub, this.heightSub), 3, this.menu.pullDownMenuWrapper.theme.colBG);\r\n\r\n            for (let i = 0; i < this.menus.length; ++i) {\r\n                this.menus[i].RenderPost(ctx);\r\n            }\r\n        }\r\n    }\r\n}","import { NVector3 } from '../../../../..';\r\n\r\n// import { NJSWebCore } from '../../../../../../NJSWebCore';\r\n\r\nimport { PullDownMenuWrapper } from '../../PullDownMenuWrapper';\r\n\r\nimport { MenuCommon } from '../Common/MenuCommon';\r\nimport { SubMenuCommonSection } from '../Common/SubMenuCommonSection';\r\nimport { SubMenuIconCommon } from '../Common/SubMenuIconCommon';\r\nimport { SubMenuIconFlyCommon } from '../Common/SubMenuIconFlyCommon';\r\nimport { SubMenuCommonFly } from '../Common/SubMenuCommonFly';\r\n\r\nexport class MenuNCanvas extends MenuCommon {\r\n\r\n    pullDownMenuWrapper: PullDownMenuWrapper;\r\n\r\n    title: string;\r\n    // tslint:disable-next-line:no-any\r\n    constructor(pullDownMenuWrapper: PullDownMenuWrapper, ac: any, title: string, xOff: number) {\r\n        super(pullDownMenuWrapper, ac);\r\n        this.pullDownMenuWrapper = pullDownMenuWrapper;\r\n        this.vec = new NVector3(this.pullDownMenuWrapper.vec.x + xOff, this.pullDownMenuWrapper.vec.y);\r\n        this.height = this.pullDownMenuWrapper.height;\r\n        this.title = title;\r\n        this.width = (this.pullDownMenuWrapper.textOffX * 2) + (this.title.length * 6);\r\n        this.Init();\r\n    }\r\n    Init() {\r\n        this.AppendCommand();\r\n        this.heightSub = this.pullDownMenuWrapper.theme.heightEach * this.menus.length;\r\n        this.widthSub = this.pullDownMenuWrapper.theme.widthEach;\r\n        this.vecSub = new NVector3(this.vec.x, this.vec.y + this.pullDownMenuWrapper.bar.height + 1);\r\n    }\r\n    AppendCommand() {\r\n        // const ac = this.pullDownMenuWrapper.viewUIWrapper.viewController.model.controllerCoreWrapper.activeCommandController;\r\n        let numInterval = 0, numSubInterval = 0;\r\n        let m = new SubMenuIconCommon(this, 'dummy', this.pullDownMenuWrapper.bar.height);\r\n        // .............................................................................................................................. sub flyout menu\r\n        m = new SubMenuIconCommon(this, 'About NCanvas App', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        // m.isClickable = false;\r\n        m.MouseDownPost = () => {\r\n            // if (this.pullDownMenuWrapper.viewController.NJSWebCore.viewController) { this.pullDownMenuWrapper.viewController.NJSWebCore.viewController.indePanel.activeCommand.AboutDrawingTool(); }\r\n            // this.pullDownMenuWrapper.viewController.NJSWebCore.ACController.Stoppropagation = true; this.pullDownMenuWrapper.Reset();\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        this.menus.push(m);\r\n\r\n        this.menus.push(new SubMenuCommonSection(this, 'section', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++));\r\n\r\n        m = new SubMenuCommonFly(this, 'Files', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        m.isClickable = false;\r\n        let mFly = m as SubMenuCommonFly; numSubInterval = 0;\r\n        let subM = new SubMenuIconFlyCommon(mFly, 'Open', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.isClickable = false;\r\n        subM.MouseDownPost = () => {\r\n            // this.pullDownMenuWrapper.viewUIWrapper.viewController.model.appCoreWrapper.appAccessibility.mode = INTERACTION_MODE.DRAWING;\r\n\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Save', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.isClickable = false;\r\n        subM.MouseDownPost = () => {\r\n\r\n            // this.pullDownMenuWrapper.viewUIWrapper.viewController.model.appCoreWrapper.appAccessibility.mode = INTERACTION_MODE.INTERACTIVE_VIEWER;\r\n\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Download', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.isClickable = false;\r\n        subM.MouseDownPost = () => {\r\n\r\n            // this.pullDownMenuWrapper.viewUIWrapper.viewController.model.appCoreWrapper.appAccessibility.mode = INTERACTION_MODE.OBSERVE_VIEWER;\r\n\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n        this.menus.push(m);\r\n\r\n        this.menus.push(new SubMenuCommonSection(this, 'section', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++));\r\n\r\n        // .............................................................................................................................. sub flyout menu\r\n        m = new SubMenuCommonFly(this, 'Helpers', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        m.isClickable = false;\r\n        mFly = m as SubMenuCommonFly; numSubInterval = 0;\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Log', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.isClickable = false;\r\n        subM.MouseDownPost = () => {\r\n            // if (this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool) { this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool.activeCommandController.ShiftLog(); }\r\n            // ac.ShiftLog();\r\n            //  this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Unit', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n            // if (this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool) { this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool.activeCommandController.ShiftUnit(); }\r\n            // ac.ShiftUnit();\r\n            //  this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'View cropping', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n            // if (this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool) { this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool.activeCommandController.SetActiveCommand(ACTIVECOMMAND_MODE.CRECTANGLE_CROP); }\r\n            // ac.SetActiveCommand(ACTIVECOMMAND_MODE.CRECTANGLE_CROP);\r\n            //  this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n        this.menus.push(m);\r\n\r\n        this.menus.push(new SubMenuCommonSection(this, 'section', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++));\r\n\r\n        m = new SubMenuIconCommon(this, 'Save and capture screen as an image', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        m.isClickable = false;\r\n        m.MouseDownPost = () => {\r\n            // if (this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool) { this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool.SaveImg(); }\r\n            // ac.save();\r\n            //  this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        this.menus.push(m);\r\n\r\n        m = new SubMenuIconCommon(this, 'Quit', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        m.isClickable = false;\r\n        m.MouseDownPost = () => {\r\n            // if (this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool) { this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool.Destroy(); }\r\n            //  this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        this.menus.push(m);\r\n    }\r\n\r\n}","import { NVector3 } from '../../../../../';\r\nimport { PullDownMenuWrapper } from '../../PullDownMenuWrapper';\r\nimport { SubMenuIconCommon } from './SubMenuIconCommon';\r\nimport { SubMenuCommonFly } from './SubMenuCommonFly';\r\nimport { MenuPreset } from '../../Core/MenuPreset';\r\nexport class SubMenuIconFlyCommonSection extends SubMenuIconCommon {\r\n    pullDownMenuWrapper: PullDownMenuWrapper;\r\n\r\n    title: string;\r\n    menus: SubMenuIconCommon[] = [];\r\n\r\n    heightSub: number;\r\n    widthSub: number;\r\n\r\n    vecSub: NVector3;\r\n    offY: number;\r\n    constructor(menu: SubMenuCommonFly, title: string, yOff: number) {\r\n        super(menu.menu, title, yOff);\r\n        this.vec = new NVector3(this.menu.vec.x + this.menu.pullDownMenuWrapper.theme.widthEach, yOff);\r\n        this.height = this.menu.pullDownMenuWrapper.theme.heightEach;\r\n        this.width = this.menu.pullDownMenuWrapper.theme.widthEach;\r\n        this.offY = this.height * 0.5;\r\n    }\r\n    MouseDown() {\r\n        for (let i = 0; i < this.menus.length; ++i) {\r\n            if (this.menus[i].isHover) {\r\n                this.menus[i].MouseDown();\r\n            }\r\n        }\r\n    }\r\n    get IsHover() {\r\n        return this.isHover;\r\n    }\r\n    set IsHover(v: boolean) {\r\n        this.isHover = v;\r\n        for (let i = 0; i < this.menus.length; ++i) {\r\n            this.menus[i].isHide = !v;\r\n        }\r\n    }\r\n    RenderPost(ctx: CanvasRenderingContext2D): void {\r\n        if (this.isHide) { return; }\r\n        MenuPreset.SectionLine(ctx, this.vec, this.width, this.offY);\r\n    }\r\n}","import { NVector3 } from '../../../../..';\r\nimport { PullDownMenuWrapper } from '../../PullDownMenuWrapper';\r\nimport { MenuCommon } from '../Common/MenuCommon';\r\nimport { SubMenuCommonSection } from '../Common/SubMenuCommonSection';\r\nimport { SubMenuIconCommon } from '../Common/SubMenuIconCommon';\r\nimport { SubMenuIconFlyCommon } from '../Common/SubMenuIconFlyCommon';\r\nimport { SubMenuIconFlyCommonSection } from '../Common/SubMenuIconFlyCommonSection';\r\nimport { SubMenuCommonFly } from '../Common/SubMenuCommonFly';\r\n\r\nexport class MenuNCanvasVisualization extends MenuCommon {\r\n\r\n    pullDownMenuWrapper: PullDownMenuWrapper;\r\n\r\n    title: string;\r\n\r\n    // tslint:disable-next-line:no-any\r\n    constructor(pullDownMenuWrapper: PullDownMenuWrapper, ac: any, title: string, xOff: number) {\r\n        super(pullDownMenuWrapper, ac);\r\n        // this.pullDownMenuWrapper = pullDownMenuWrapper;\r\n        this.vec = new NVector3(this.pullDownMenuWrapper.vec.x + xOff, this.pullDownMenuWrapper.vec.y);\r\n        this.height = this.pullDownMenuWrapper.height;\r\n        this.title = title;\r\n        this.width = (this.pullDownMenuWrapper.textOffX * 2) + (this.title.length * 6);\r\n        this.Init();\r\n    }\r\n    Init() {\r\n        this.AppendCommand();\r\n        this.heightSub = this.pullDownMenuWrapper.theme.heightEach * this.menus.length;\r\n        this.widthSub = this.pullDownMenuWrapper.theme.widthEach;\r\n        this.vecSub = new NVector3(this.vec.x, this.vec.y + this.pullDownMenuWrapper.bar.height + 1);\r\n    }\r\n    AppendCommand() {\r\n        // const ac = this.pullDownMenuWrapper.viewUIWrapper.viewController.model.controllerCoreWrapper.activeCommandController;\r\n        let numInterval = 0, numSubInterval = 0;\r\n        let m = new SubMenuIconCommon(this, 'dummy', this.pullDownMenuWrapper.bar.height);\r\n        // .............................................................................................................................. sub flyout menu\r\n        m = new SubMenuIconCommon(this, 'About Canvas Visualization Environment', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        // m.isClickable = false;\r\n        m.MouseDownPost = () => {\r\n            // if (this.pullDownMenuWrapper.viewController.njslabSandbox.viewController) { this.pullDownMenuWrapper.viewController.njslabSandbox.viewController.indePanel.activeCommand.AboutDrawingTool(); }\r\n            // this.pullDownMenuWrapper.viewController.njslabSandbox.ACController.Stoppropagation = true; this.pullDownMenuWrapper.Reset();\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        this.menus.push(m);\r\n\r\n        this.menus.push(new SubMenuCommonSection(this, 'section', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++));\r\n\r\n        m = new SubMenuIconCommon(this, 'Load Visualization Environment ', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        m.MouseDownPost = () => {\r\n            this.ac.ShfitScene('canvasVisualization');\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        this.menus.push(m);\r\n\r\n        this.menus.push(new SubMenuCommonSection(this, 'section', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++));\r\n\r\n        m = new SubMenuCommonFly(this, 'Definition', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n\r\n        let mFly = m as SubMenuCommonFly; numSubInterval = 0;\r\n        let subM = new SubMenuIconFlyCommon(mFly, 'Gaussian Distribution', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n            this.ac.LoadDefinition('canvasVisualization', 'GaussianDistribution');\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Point ex 01', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n            this.pullDownMenuWrapper.nUI.independentPanelWrapper.activeCommand.AboutAnnotation();\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Point ex 02', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n            this.ac.LoadDefinition('canvasVisualization', '1');\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Point ex 03', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n            this.ac.LoadDefinition('canvasVisualization', '2');\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        m.menus.push(new SubMenuIconFlyCommonSection(mFly, 'section', m.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++));\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Line ex 01', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n            this.ac.LoadDefinition('canvasVisualization', '3');\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Line ex 02', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n            this.ac.LoadDefinition('canvasVisualization', '4');\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        m.menus.push(new SubMenuIconFlyCommonSection(mFly, 'section', m.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++));\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'gaussian distribution 1', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n            this.ac.LoadDefinition('canvasVisualization', '5');\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'gaussian distribution 2', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n            this.ac.LoadDefinition('canvasVisualization', '6');\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n        this.menus.push(m);\r\n\r\n        // ................................................................\r\n\r\n        this.menus.push(new SubMenuCommonSection(this, 'section', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++));\r\n\r\n        m = new SubMenuIconCommon(this, 'Option', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        m.isClickable = false;\r\n        m.MouseDownPost = () => {\r\n\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        this.menus.push(m);\r\n    }\r\n\r\n}","import { NVector3 } from '../../../../..';\r\n\r\nimport { PullDownMenuWrapper } from '../../PullDownMenuWrapper';\r\n\r\nimport { MenuCommon } from '../Common/MenuCommon';\r\nimport { SubMenuCommonSection } from '../Common/SubMenuCommonSection';\r\nimport { SubMenuIconCommon } from '../Common/SubMenuIconCommon';\r\nimport { SubMenuIconFlyCommon } from '../Common/SubMenuIconFlyCommon';\r\nimport { SubMenuIconFlyCommonSection } from '../Common/SubMenuIconFlyCommonSection';\r\nimport { SubMenuCommonFly } from '../Common/SubMenuCommonFly';\r\n\r\nexport class MenuNCreativeCoding extends MenuCommon {\r\n\r\n    pullDownMenuWrapper: PullDownMenuWrapper;\r\n\r\n    title: string;\r\n\r\n    // tslint:disable-next-line:no-any\r\n    ac: any;\r\n\r\n    // tslint:disable-next-line:no-any\r\n    constructor(pullDownMenuWrapper: PullDownMenuWrapper, ac: any, title: string, xOff: number) {\r\n        super(pullDownMenuWrapper, ac);\r\n        this.pullDownMenuWrapper = pullDownMenuWrapper;\r\n        this.vec = new NVector3(this.pullDownMenuWrapper.vec.x + xOff, this.pullDownMenuWrapper.vec.y);\r\n        this.height = this.pullDownMenuWrapper.height;\r\n        this.title = title;\r\n        this.width = (this.pullDownMenuWrapper.textOffX * 2) + (this.title.length * 6);\r\n        this.Init();\r\n    }\r\n    Init() {\r\n        this.AppendCommand();\r\n        this.heightSub = this.pullDownMenuWrapper.theme.heightEach * this.menus.length;\r\n        this.widthSub = this.pullDownMenuWrapper.theme.widthEach;\r\n        this.vecSub = new NVector3(this.vec.x, this.vec.y + this.pullDownMenuWrapper.bar.height + 1);\r\n    }\r\n    AppendCommand() {\r\n        // const ac = this.pullDownMenuWrapper.viewUIWrapper.viewController.model.controllerCoreWrapper.activeCommandController;\r\n        let numInterval = 0, numSubInterval = 0;\r\n        let m = new SubMenuIconCommon(this, 'dummy', this.pullDownMenuWrapper.bar.height);\r\n        // .............................................................................................................................. sub flyout menu\r\n        m = new SubMenuIconCommon(this, 'About Creative Coding Environment', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        // m.isClickable = false;\r\n        m.MouseDownPost = () => {\r\n            this.pullDownMenuWrapper.nUI.independentPanelWrapper.activeCommand.AboutAnnotation();\r\n            // if (this.pullDownMenuWrapper.viewController.njslabSandbox.viewController) { this.pullDownMenuWrapper.viewController.njslabSandbox.viewController.indePanel.activeCommand.AboutDrawingTool(); }\r\n            // this.pullDownMenuWrapper.viewController.njslabSandbox.ACController.Stoppropagation = true; this.pullDownMenuWrapper.Reset();\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        this.menus.push(m);\r\n\r\n        this.menus.push(new SubMenuCommonSection(this, 'section', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++));\r\n\r\n        m = new SubMenuIconCommon(this, 'Load Creative Coding Environment ', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        m.MouseDownPost = () => {\r\n            this.ac.ShfitScene('creativeCoding');\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        this.menus.push(m);\r\n\r\n        this.menus.push(new SubMenuCommonSection(this, 'section', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++));\r\n\r\n        // .............................................................................................................................. sub flyout menu\r\n        m = new SubMenuCommonFly(this, 'Definition', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n\r\n        let mFly = m as SubMenuCommonFly; numSubInterval = 0;\r\n        let subM = new SubMenuIconFlyCommon(mFly, 'Blank', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n            this.ac.LoadDefinition('creativeCoding', 'Blank');\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        // ...............................................................................\r\n        m.menus.push(new SubMenuIconFlyCommonSection(mFly, 'section', m.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++));\r\n        subM = new SubMenuIconFlyCommon(mFly, 'BallBounce', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n            this.ac.LoadDefinition('creativeCoding', 'BallBounce');\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'BallBounceClass', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n            this.ac.LoadDefinition('creativeCoding', 'BallBounceClass');\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'CircleGrid', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n            this.ac.LoadDefinition('creativeCoding', 'CircleGrid');\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        // ...............................................................................\r\n        m.menus.push(new SubMenuIconFlyCommonSection(mFly, 'section', m.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++));\r\n        subM = new SubMenuIconFlyCommon(mFly, 'CircleGridAttractors 1', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n            this.ac.LoadDefinition('creativeCoding', 'CircleGridAttractors1');\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'CircleGridAttractors 2', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n            this.ac.LoadDefinition('creativeCoding', 'CircleGridAttractors2');\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        // ...............................................................................\r\n        m.menus.push(new SubMenuIconFlyCommonSection(mFly, 'section', m.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++));\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Line 1', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n            this.ac.LoadDefinition('creativeCoding', 'Line');\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Line2', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n\r\n            this.ac.LoadDefinition('creativeCoding', 'Line2');\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        // ...............................................................................\r\n        m.menus.push(new SubMenuIconFlyCommonSection(mFly, 'section', m.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++));\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Boid System 01', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n            this.ac.LoadDefinition('creativeCoding', 'BoidSystem01');\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Boid System 02', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n\r\n            this.ac.LoadDefinition('creativeCoding', 'BoidSystem02');\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Boid System 03', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n\r\n            this.ac.LoadDefinition('creativeCoding', 'BoidSystem03');\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Boid System 04', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n\r\n            this.ac.LoadDefinition('creativeCoding', 'BoidSystem04');\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        m.menus.push(new SubMenuIconFlyCommonSection(mFly, 'section', m.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++));\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Dynamic System 01', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n\r\n            this.ac.LoadDefinition('creativeCoding', 'DynamicSystem01');\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Dynamic System 02', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n\r\n            this.ac.LoadDefinition('creativeCoding', 'DynamicSystem02');\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Dynamic System 03', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n\r\n            this.ac.LoadDefinition('creativeCoding', 'DynamicSystem03');\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        m.menus.push(new SubMenuIconFlyCommonSection(mFly, 'section', m.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++));\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'OOP 01', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n\r\n            this.ac.LoadDefinition('creativeCoding', 'OOP01');\r\n        };\r\n        m.menus.push(subM);\r\n        this.menus.push(m);\r\n\r\n        // ................................................................\r\n        this.menus.push(new SubMenuCommonSection(this, 'section', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++));\r\n\r\n        m = new SubMenuIconCommon(this, 'Option', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        m.isClickable = false;\r\n        m.MouseDownPost = () => {\r\n\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        this.menus.push(m);\r\n    }\r\n}","import { NVector3 } from '../../../../..';\r\n\r\nimport { PullDownMenuWrapper } from '../../PullDownMenuWrapper';\r\n\r\nimport { MenuCommon } from '../Common/MenuCommon';\r\nimport { SubMenuCommonSection } from '../Common/SubMenuCommonSection';\r\nimport { SubMenuIconCommon } from '../Common/SubMenuIconCommon';\r\nimport { SubMenuIconFlyCommon } from '../Common/SubMenuIconFlyCommon';\r\nimport { SubMenuIconFlyCommonSection } from '../Common/SubMenuIconFlyCommonSection';\r\nimport { SubMenuCommonFly } from '../Common/SubMenuCommonFly';\r\n\r\nexport class MenuNDrawingBlock extends MenuCommon {\r\n\r\n    pullDownMenuWrapper: PullDownMenuWrapper;\r\n\r\n    title: string;\r\n\r\n    // tslint:disable-next-line:no-any\r\n    ac: any;\r\n\r\n    // tslint:disable-next-line:no-any\r\n    constructor(pullDownMenuWrapper: PullDownMenuWrapper, ac: any, title: string, xOff: number) {\r\n        super(pullDownMenuWrapper, ac);\r\n        this.pullDownMenuWrapper = pullDownMenuWrapper;\r\n        this.vec = new NVector3(this.pullDownMenuWrapper.vec.x + xOff, this.pullDownMenuWrapper.vec.y);\r\n        this.height = this.pullDownMenuWrapper.height;\r\n        this.title = title;\r\n        this.width = (this.pullDownMenuWrapper.textOffX * 2) + (this.title.length * 6);\r\n        this.Init();\r\n    }\r\n    Init() {\r\n        this.AppendCommand();\r\n        this.heightSub = this.pullDownMenuWrapper.theme.heightEach * this.menus.length;\r\n        this.widthSub = this.pullDownMenuWrapper.theme.widthEach;\r\n        this.vecSub = new NVector3(this.vec.x, this.vec.y + this.pullDownMenuWrapper.bar.height + 1);\r\n    }\r\n    AppendCommand() {\r\n        // const ac = this.pullDownMenuWrapper.viewUIWrapper.viewController.model.controllerCoreWrapper.activeCommandController;\r\n        let numInterval = 0, numSubInterval = 0;\r\n        let m = new SubMenuIconCommon(this, 'dummy', this.pullDownMenuWrapper.bar.height);\r\n        // .............................................................................................................................. sub flyout menu\r\n        m = new SubMenuIconCommon(this, 'About Drawing Block', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        // m.isClickable = false;\r\n        m.MouseDownPost = () => {\r\n            this.pullDownMenuWrapper.nUI.independentPanelWrapper.activeCommand.AboutAnnotation();\r\n            // if (this.pullDownMenuWrapper.viewController.njslabSandbox.viewController) { this.pullDownMenuWrapper.viewController.njslabSandbox.viewController.indePanel.activeCommand.AboutDrawingTool(); }\r\n            // this.pullDownMenuWrapper.viewController.njslabSandbox.ACController.Stoppropagation = true; this.pullDownMenuWrapper.Reset();\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        this.menus.push(m);\r\n\r\n        this.menus.push(new SubMenuCommonSection(this, 'section', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++));\r\n\r\n        m = new SubMenuIconCommon(this, 'Load Creative Coding Environment ', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        m.MouseDownPost = () => {\r\n            this.ac('creativeCoding');\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        this.menus.push(m);\r\n\r\n        this.menus.push(new SubMenuCommonSection(this, 'section', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++));\r\n\r\n        // .............................................................................................................................. sub flyout menu\r\n        m = new SubMenuCommonFly(this, 'Definition', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n\r\n        let mFly = m as SubMenuCommonFly; numSubInterval = 0;\r\n        let subM = new SubMenuIconFlyCommon(mFly, 'Blank', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n            this.ac('creativeCoding@Blank');\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        // ...............................................................................\r\n        m.menus.push(new SubMenuIconFlyCommonSection(mFly, 'section', m.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++));\r\n        subM = new SubMenuIconFlyCommon(mFly, 'BallBounce', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n            this.ac('creativeCoding@BallBounce');\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Line2', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n\r\n            this.ac('creativeCoding@Line2');\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        // ...............................................................................\r\n        m.menus.push(new SubMenuIconFlyCommonSection(mFly, 'section', m.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++));\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Boid System 01', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n            this.ac('creativeCoding@BoidSystem01');\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        m.menus.push(new SubMenuIconFlyCommonSection(mFly, 'section', m.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++));\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'OOP 01', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n\r\n            this.ac('creativeCoding@OOP01');\r\n        };\r\n        m.menus.push(subM);\r\n        this.menus.push(m);\r\n\r\n        // ................................................................\r\n        this.menus.push(new SubMenuCommonSection(this, 'section', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++));\r\n\r\n        m = new SubMenuIconCommon(this, 'Option', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        m.isClickable = false;\r\n        m.MouseDownPost = () => {\r\n\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        this.menus.push(m);\r\n    }\r\n}","import { NVector3 } from '../../../../..';\r\n\r\nimport { PullDownMenuWrapper } from '../../PullDownMenuWrapper';\r\n\r\nimport { MenuCommon } from '../Common/MenuCommon';\r\nimport { SubMenuCommonSection } from '../Common/SubMenuCommonSection';\r\nimport { SubMenuIconCommon } from '../Common/SubMenuIconCommon';\r\nimport { SubMenuIconFlyCommon } from '../Common/SubMenuIconFlyCommon';\r\nimport { SubMenuIconFlyCommonSection } from '../Common/SubMenuIconFlyCommonSection';\r\nimport { SubMenuCommonFly } from '../Common/SubMenuCommonFly';\r\n// import { ACTIVECOMMANDMODE } from '../../../../AppDrawing/Core/CActiveCommandController';\r\n\r\n// import { CPolyline } from '../../../../AppDrawing/Canvas/CGeometry/CPolyline';\r\n// import { CRectangle } from '../../../../AppDrawing/Canvas/CGeometry/CRectangle';\r\n\r\nexport class MenuNImage extends MenuCommon {\r\n\r\n    pullDownMenuWrapper: PullDownMenuWrapper;\r\n\r\n    title: string;\r\n\r\n    // tslint:disable-next-line:no-any\r\n    constructor(pullDownMenuWrapper: PullDownMenuWrapper, ac: any, title: string, xOff: number) {\r\n        super(pullDownMenuWrapper, ac);\r\n        this.pullDownMenuWrapper = pullDownMenuWrapper;\r\n        this.vec = new NVector3(this.pullDownMenuWrapper.vec.x + xOff, this.pullDownMenuWrapper.vec.y);\r\n        this.height = this.pullDownMenuWrapper.height;\r\n        this.title = title;\r\n        this.width = (this.pullDownMenuWrapper.textOffX * 2) + (this.title.length * 5);\r\n        this.Init();\r\n    }\r\n    Init() {\r\n        this.AppendCommand();\r\n        this.heightSub = this.pullDownMenuWrapper.theme.heightEach * this.menus.length;\r\n        this.widthSub = this.pullDownMenuWrapper.theme.widthEach;\r\n        this.vecSub = new NVector3(this.vec.x, this.vec.y + this.pullDownMenuWrapper.bar.height + 1);\r\n    }\r\n    AppendCommand() {\r\n        let numInterval = 0, numSubInterval = 0;\r\n        let m = new SubMenuIconCommon(this, 'dummy', this.pullDownMenuWrapper.bar.height);\r\n\r\n        // .............................................................................................................................. sub flyout menu\r\n        m = new SubMenuIconCommon(this, 'Abbout NImage', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        // m.isClickable = false;\r\n        m.MouseDownPost = () => {\r\n            this.pullDownMenuWrapper.nUI.independentPanelWrapper.activeCommand.AboutNImage();\r\n        };\r\n        this.menus.push(m);\r\n\r\n        this.menus.push(new SubMenuCommonSection(this, 'section', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++));\r\n\r\n        m = new SubMenuIconCommon(this, 'Open File', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        // m.isClickable = false;\r\n        m.MouseDownPost = () => {\r\n            this.ac.OpenImg();\r\n            // this.pullDownMenuWrapper.viewController.njslabSandbox.viewController.indePanel.activeCommand.AboutVisCanvas();\r\n\r\n        };\r\n        this.menus.push(m);\r\n\r\n        this.menus.push(new SubMenuCommonSection(this, 'section', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++));\r\n\r\n        m = new SubMenuIconCommon(this, 'Save', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        m.MouseDownPost = () => {\r\n            // this.ac.SetActiveCommand(ACTIVE_SKETCH_MODE.ERASER);\r\n        };\r\n        this.menus.push(m);\r\n\r\n        this.menus.push(new SubMenuCommonSection(this, 'section', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++));\r\n\r\n        // .............................................................................................................................. sub flyout menu\r\n        m = new SubMenuCommonFly(this, 'Adjustment', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        let mFly = m as SubMenuCommonFly; numSubInterval = 0;\r\n\r\n        let subM = new SubMenuIconFlyCommon(mFly, 'Option', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.isClickable = false;\r\n        subM.MouseDownPost = () => {\r\n            // if (this.pullDownMenuWrapper.viewController.njslabSandbox.appDrawingBlock) {\r\n            //     this.pullDownMenuWrapper.viewController.njslabSandbox.appDrawingBlock.activeCommandDrawingBlock.GetGeometryRPoint();\r\n            // }\r\n            //  this.pullDownMenuWrapper.viewController.njslabSandbox.ACController.Stoppropagation = true;this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n        m.menus.push(new SubMenuIconFlyCommonSection(mFly, 'section', m.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++));\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Brightness/Contrast...', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.isClickable = false;\r\n        subM.MouseDownPost = () => {\r\n            // this.ac.SetActiveCommand(ACTIVE_SKETCH_MODE.SIMPLE_PENCIL);\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Hue/Saturation...', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.isClickable = false;\r\n        subM.MouseDownPost = () => {\r\n            // this.ac.SetActiveCommand(ACTIVE_SKETCH_MODE.MULTIPLE_LINE_PENCIL);\r\n        };\r\n        m.menus.push(subM);\r\n        this.menus.push(m);\r\n\r\n        // ..............................................................................................................................\r\n        this.menus.push(new SubMenuCommonSection(this, 'section', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++));\r\n\r\n        m = new SubMenuIconCommon(this, 'Setting', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        m.isClickable = false;\r\n        m.MouseDownPost = () => {\r\n            console.log('Setting!!');\r\n\r\n        };\r\n        this.menus.push(m);\r\n\r\n        m = new SubMenuIconCommon(this, 'Blending', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        m.isClickable = false;\r\n        m.MouseDownPost = () => {\r\n            console.log('Reset!!');\r\n\r\n        };\r\n        this.menus.push(m);\r\n\r\n        m = new SubMenuIconCommon(this, 'Capture screen', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        m.isClickable = false;\r\n        m.MouseDownPost = () => {\r\n            console.log('Reset!!');\r\n\r\n        };\r\n        this.menus.push(m);\r\n\r\n        m = new SubMenuIconCommon(this, 'Reset', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        m.isClickable = false;\r\n        m.MouseDownPost = () => {\r\n\r\n            // this.pullDownMenuWrapper.viewController.njslabSandbox.appVisCanvas.activeCommands.RemoveAllGeo();\r\n\r\n        };\r\n        this.menus.push(m);\r\n    }\r\n\r\n}","import { NVector3 } from '../../../../..';\r\n\r\n// import { NJSWebCore } from '../../../../../../NJSWebCore';\r\n\r\nimport { PullDownMenuWrapper } from '../../PullDownMenuWrapper';\r\n\r\nimport { MenuCommon } from '../Common/MenuCommon';\r\nimport { SubMenuCommonSection } from '../Common/SubMenuCommonSection';\r\nimport { SubMenuIconCommon } from '../Common/SubMenuIconCommon';\r\nimport { SubMenuIconFlyCommon } from '../Common/SubMenuIconFlyCommon';\r\nimport { SubMenuCommonFly } from '../Common/SubMenuCommonFly';\r\n\r\nexport class MenuNAlgorithmEnv extends MenuCommon {\r\n\r\n    pullDownMenuWrapper: PullDownMenuWrapper;\r\n\r\n    title: string;\r\n    // tslint:disable-next-line:no-any\r\n    constructor(pullDownMenuWrapper: PullDownMenuWrapper, ac: any, title: string, xOff: number) {\r\n        super(pullDownMenuWrapper, ac);\r\n        this.pullDownMenuWrapper = pullDownMenuWrapper;\r\n        this.vec = new NVector3(this.pullDownMenuWrapper.vec.x + xOff, this.pullDownMenuWrapper.vec.y);\r\n        this.height = this.pullDownMenuWrapper.height;\r\n        this.title = title;\r\n        this.width = (this.pullDownMenuWrapper.textOffX * 2) + (this.title.length * 6);\r\n        this.Init();\r\n    }\r\n    Init() {\r\n        this.AppendCommand();\r\n        this.heightSub = this.pullDownMenuWrapper.theme.heightEach * this.menus.length;\r\n        this.widthSub = this.pullDownMenuWrapper.theme.widthEach;\r\n        this.vecSub = new NVector3(this.vec.x, this.vec.y + this.pullDownMenuWrapper.bar.height + 1);\r\n    }\r\n    AppendCommand() {\r\n        // const ac = this.pullDownMenuWrapper.viewUIWrapper.viewController.model.controllerCoreWrapper.activeCommandController;\r\n        let numInterval = 0, numSubInterval = 0;\r\n        let m = new SubMenuIconCommon(this, 'dummy', this.pullDownMenuWrapper.bar.height);\r\n        // .............................................................................................................................. sub flyout menu\r\n        m = new SubMenuIconCommon(this, 'About Algorithm Env App', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        // m.isClickable = false;\r\n        m.MouseDownPost = () => {\r\n            // if (this.pullDownMenuWrapper.viewController.NJSWebCore.viewController) { this.pullDownMenuWrapper.viewController.NJSWebCore.viewController.indePanel.activeCommand.AboutDrawingTool(); }\r\n            // this.pullDownMenuWrapper.viewController.NJSWebCore.ACController.Stoppropagation = true; this.pullDownMenuWrapper.Reset();\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        this.menus.push(m);\r\n\r\n        this.menus.push(new SubMenuCommonSection(this, 'section', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++));\r\n\r\n        m = new SubMenuCommonFly(this, 'Files', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        m.isClickable = false;\r\n        let mFly = m as SubMenuCommonFly; numSubInterval = 0;\r\n        let subM = new SubMenuIconFlyCommon(mFly, 'Open', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.isClickable = false;\r\n        subM.MouseDownPost = () => {\r\n            // this.pullDownMenuWrapper.viewUIWrapper.viewController.model.appCoreWrapper.appAccessibility.mode = INTERACTION_MODE.DRAWING;\r\n\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Save', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.isClickable = false;\r\n        subM.MouseDownPost = () => {\r\n\r\n            // this.pullDownMenuWrapper.viewUIWrapper.viewController.model.appCoreWrapper.appAccessibility.mode = INTERACTION_MODE.INTERACTIVE_VIEWER;\r\n\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Download', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.isClickable = false;\r\n        subM.MouseDownPost = () => {\r\n\r\n            // this.pullDownMenuWrapper.viewUIWrapper.viewController.model.appCoreWrapper.appAccessibility.mode = INTERACTION_MODE.OBSERVE_VIEWER;\r\n\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n        this.menus.push(m);\r\n\r\n        this.menus.push(new SubMenuCommonSection(this, 'section', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++));\r\n\r\n        // .............................................................................................................................. sub flyout menu\r\n        m = new SubMenuCommonFly(this, 'definition', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        m.isClickable = true;\r\n        // mFly = m as SubMenuCommonFly; numSubInterval = 0;\r\n        // subM = new SubMenuIconFlyCommon(mFly, 'Log', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        // subM.isClickable = true;\r\n        // m.menus.push(subM);\r\n        this.menus.push(m);\r\n\r\n        // .............................................................................................................................. sub flyout menu\r\n        m = new SubMenuCommonFly(this, 'Helpers', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        m.isClickable = false;\r\n        mFly = m as SubMenuCommonFly; numSubInterval = 0;\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Log', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.isClickable = false;\r\n        subM.MouseDownPost = () => {\r\n            // if (this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool) { this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool.activeCommandController.ShiftLog(); }\r\n            // ac.ShiftLog();\r\n            //  this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Unit', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n            // if (this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool) { this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool.activeCommandController.ShiftUnit(); }\r\n            // ac.ShiftUnit();\r\n            //  this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'View cropping', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n            // if (this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool) { this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool.activeCommandController.SetActiveCommand(ACTIVECOMMAND_MODE.CRECTANGLE_CROP); }\r\n            // ac.SetActiveCommand(ACTIVECOMMAND_MODE.CRECTANGLE_CROP);\r\n            //  this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n        this.menus.push(m);\r\n\r\n        this.menus.push(new SubMenuCommonSection(this, 'section', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++));\r\n\r\n        m = new SubMenuIconCommon(this, 'Save and capture screen as an image', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        m.isClickable = false;\r\n        m.MouseDownPost = () => {\r\n            // if (this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool) { this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool.SaveImg(); }\r\n            // ac.save();\r\n            //  this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        this.menus.push(m);\r\n\r\n        m = new SubMenuIconCommon(this, 'Quit', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        m.isClickable = false;\r\n        m.MouseDownPost = () => {\r\n            // if (this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool) { this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool.Destroy(); }\r\n            //  this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        this.menus.push(m);\r\n    }\r\n    public AddMenu(subMenu: string, title: string, fn: () => void) {\r\n        for (let i = 0; i < this.menus.length; ++i) {\r\n            if (this.menus[i].title === subMenu) {\r\n                const mFly = this.menus[i] as SubMenuCommonFly;\r\n                const subM = new SubMenuIconFlyCommon(mFly, title, mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * mFly.menus.length);\r\n                subM.isClickable = true;\r\n                subM.MouseDownPost = fn;\r\n                mFly.menus.push(subM);\r\n            }\r\n        }\r\n    }\r\n\r\n}","import { NVector3 } from '../../../../../..';\r\n\r\n// import { NJSWebCore } from '../../../../../../NJSWebCore';\r\n\r\nimport { PullDownMenuWrapper } from '../../../PullDownMenuWrapper';\r\n\r\nimport { MenuCommon } from '../../Common/MenuCommon';\r\nimport { SubMenuCommonSection } from '../../Common/SubMenuCommonSection';\r\nimport { SubMenuIconCommon } from '../../Common/SubMenuIconCommon';\r\nimport { SubMenuIconFlyCommon } from '../../Common/SubMenuIconFlyCommon';\r\nimport { SubMenuCommonFly } from '../../Common/SubMenuCommonFly';\r\nimport { SubMenuIconFlyCommonSection } from '../../Common/SubMenuIconFlyCommonSection';\r\n\r\nexport class MenuNTFCustom extends MenuCommon {\r\n\r\n    pullDownMenuWrapper: PullDownMenuWrapper;\r\n\r\n    title: string;\r\n    numInterval: number;\r\n    numSubInterval: number;\r\n    // .........................................\r\n    projectMLProject: SubMenuCommonFly;\r\n    projectMLProjectNumSubInterval: number = 0;\r\n\r\n    // .........................................\r\n    projectTFProject: SubMenuCommonFly;\r\n    projectTFProjectNumSubInterval: number = 0;\r\n    // .........................................\r\n    // tslint:disable-next-line:no-any\r\n    constructor(pullDownMenuWrapper: PullDownMenuWrapper, ac: any, title: string, xOff: number) {\r\n        super(pullDownMenuWrapper, ac);\r\n        this.pullDownMenuWrapper = pullDownMenuWrapper;\r\n        this.vec = new NVector3(this.pullDownMenuWrapper.vec.x + xOff, this.pullDownMenuWrapper.vec.y);\r\n        this.height = this.pullDownMenuWrapper.height;\r\n        this.title = title;\r\n        this.width = (this.pullDownMenuWrapper.textOffX * 2) + (this.title.length * 6);\r\n        this.Init();\r\n    }\r\n    public Init() {\r\n        this.AppendCommand();\r\n        this.heightSub = this.pullDownMenuWrapper.theme.heightEach * this.menus.length;\r\n        this.widthSub = this.pullDownMenuWrapper.theme.widthEach;\r\n        this.vecSub = new NVector3(this.vec.x, this.vec.y + this.pullDownMenuWrapper.bar.height + 1);\r\n    }\r\n    public AddApp(v: string) {\r\n        const action = v.split('@');\r\n        let subM;\r\n        switch (action[0]) {\r\n            case 'mlProject':\r\n                if (action[1] === '--') {\r\n                    this.projectMLProject.menus.push(new SubMenuIconFlyCommonSection(this.projectMLProject, 'section', this.projectMLProject.vec.y + this.pullDownMenuWrapper.theme.heightEach * this.projectMLProjectNumSubInterval++));\r\n                } else {\r\n                    subM = new SubMenuIconFlyCommon(this.projectMLProject, action[1], this.projectMLProject.vec.y + this.pullDownMenuWrapper.theme.heightEach * this.projectMLProjectNumSubInterval++);\r\n                    subM.isClickable = true;\r\n                    subM.MouseDownPost = () => {\r\n                        this.ac.LoadDefinition(action[1]);\r\n                    };\r\n                    this.projectMLProject.menus.push(subM);\r\n                }\r\n                break;\r\n            case 'tfProject':\r\n                if (action[1] === '--') {\r\n                    this.projectTFProject.menus.push(new SubMenuIconFlyCommonSection(this.projectTFProject, 'section', this.projectTFProject.vec.y + this.pullDownMenuWrapper.theme.heightEach * this.projectTFProjectNumSubInterval++));\r\n                } else {\r\n                    subM = new SubMenuIconFlyCommon(this.projectTFProject, action[1], this.projectTFProject.vec.y + this.pullDownMenuWrapper.theme.heightEach * this.projectTFProjectNumSubInterval++);\r\n                    subM.isClickable = true;\r\n                    subM.MouseDownPost = () => {\r\n                        this.ac.LoadDefinition(action[1]);\r\n                    };\r\n                    this.projectTFProject.menus.push(subM);\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    public AppendCommand() {\r\n        // const ac = this.pullDownMenuWrapper.viewUIWrapper.viewController.model.controllerCoreWrapper.activeCommandController;\r\n        this.numInterval = 0; this.numSubInterval = 0;\r\n        let m = new SubMenuIconCommon(this, 'dummy', this.pullDownMenuWrapper.bar.height);\r\n        // .............................................................................................................................. sub flyout menu\r\n        m = new SubMenuIconCommon(this, 'About TF App', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * this.numInterval++);\r\n        // m.isClickable = false;\r\n        m.MouseDownPost = () => {\r\n            // if (this.pullDownMenuWrapper.viewController.NJSWebCore.viewController) { this.pullDownMenuWrapper.viewController.NJSWebCore.viewController.indePanel.activeCommand.AboutDrawingTool(); }\r\n            // this.pullDownMenuWrapper.viewController.NJSWebCore.ACController.Stoppropagation = true; this.pullDownMenuWrapper.Reset();\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        this.menus.push(m);\r\n\r\n        this.menus.push(new SubMenuCommonSection(this, 'section', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * this.numInterval++));\r\n\r\n        // ............................................................ Project ML\r\n        m = new SubMenuCommonFly(this, 'Project ML Project', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * this.numInterval++);\r\n        m.isClickable = true;\r\n        this.projectMLProject = m as SubMenuCommonFly;\r\n        this.menus.push(m);\r\n\r\n        this.menus.push(new SubMenuCommonSection(this, 'section', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * this.numInterval++));\r\n\r\n        // .............................................................................................................................. sub flyout menu\r\n\r\n        m = new SubMenuCommonFly(this, 'Project TF', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * this.numInterval++);\r\n        m.isClickable = true;\r\n        this.projectTFProject = m as SubMenuCommonFly;\r\n        this.menus.push(m);\r\n\r\n        this.menus.push(new SubMenuCommonSection(this, 'section', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * this.numInterval++));\r\n\r\n        // .............................................................................................................................. sub flyout menu\r\n        m = new SubMenuCommonFly(this, 'Helpers', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * this.numInterval++);\r\n        m.isClickable = false;\r\n        let mFly = m as SubMenuCommonFly; this.numSubInterval = 0;\r\n        let subM = new SubMenuIconFlyCommon(mFly, 'Log', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * this.numSubInterval++);\r\n        subM.isClickable = false;\r\n        subM.MouseDownPost = () => {\r\n            // if (this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool) { this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool.activeCommandController.ShiftLog(); }\r\n            // ac.ShiftLog();\r\n            //  this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Unit', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * this.numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n            // if (this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool) { this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool.activeCommandController.ShiftUnit(); }\r\n            // ac.ShiftUnit();\r\n            //  this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'View cropping', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * this.numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n            // if (this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool) { this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool.activeCommandController.SetActiveCommand(ACTIVECOMMAND_MODE.CRECTANGLE_CROP); }\r\n            // ac.SetActiveCommand(ACTIVECOMMAND_MODE.CRECTANGLE_CROP);\r\n            //  this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n        this.menus.push(m);\r\n\r\n        this.menus.push(new SubMenuCommonSection(this, 'section', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * this.numInterval++));\r\n\r\n        m = new SubMenuIconCommon(this, 'Save and capture screen as an image', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * this.numInterval++);\r\n        m.isClickable = false;\r\n        m.MouseDownPost = () => {\r\n            // if (this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool) { this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool.SaveImg(); }\r\n            // ac.save();\r\n            //  this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        this.menus.push(m);\r\n\r\n        this.menus.push(new SubMenuCommonSection(this, 'section', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * this.numInterval++));\r\n\r\n        m = new SubMenuCommonFly(this, 'Playground', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * this.numInterval++);\r\n        m.isClickable = true;\r\n        mFly = m as SubMenuCommonFly; this.numSubInterval = 0;\r\n        subM = new SubMenuIconFlyCommon(mFly, 'TF PG 01', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * this.numSubInterval++);\r\n        subM.isClickable = true;\r\n        subM.MouseDownPost = () => {\r\n            this.ac.LoadDefinition('TFPlayground01');\r\n        };\r\n        m.menus.push(subM);\r\n        subM = new SubMenuIconFlyCommon(mFly, 'LinearRegression', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * this.numSubInterval++);\r\n        subM.isClickable = true;\r\n        subM.MouseDownPost = () => {\r\n            this.ac.LoadDefinition('project01');\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'LinearRegression, GD', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * this.numSubInterval++);\r\n        subM.isClickable = true;\r\n        subM.MouseDownPost = () => {\r\n            this.ac.LoadDefinition('project02');\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'LinearRegression, GD', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * this.numSubInterval++);\r\n        subM.isClickable = true;\r\n        subM.MouseDownPost = () => {\r\n            this.ac.LoadDefinition('project03');\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'LinearRegression, GD', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * this.numSubInterval++);\r\n        subM.isClickable = true;\r\n        subM.MouseDownPost = () => {\r\n            this.ac.LoadDefinition('project04');\r\n        };\r\n        m.menus.push(subM);\r\n        this.menus.push(m);\r\n\r\n        this.menus.push(new SubMenuCommonSection(this, 'section', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * this.numInterval++));\r\n\r\n        m = new SubMenuIconCommon(this, 'Quit', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * this.numInterval++);\r\n        m.isClickable = false;\r\n        m.MouseDownPost = () => {\r\n            // if (this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool) { this.pullDownMenuWrapper.viewController.NJSWebCore.appDrawingTool.Destroy(); }\r\n            //  this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        this.menus.push(m);\r\n\r\n    }\r\n\r\n}","import { NVector3 } from '../../../../..';\r\nimport { PullDownMenuWrapper } from '../../PullDownMenuWrapper';\r\nimport { MenuCommon } from '../Common/MenuCommon';\r\nimport { SubMenuCommonSection } from '../Common/SubMenuCommonSection';\r\nimport { SubMenuIconCommon } from '../Common/SubMenuIconCommon';\r\nimport { SubMenuIconFlyCommon } from '../Common/SubMenuIconFlyCommon';\r\nimport { SubMenuCommonFly } from '../Common/SubMenuCommonFly';\r\nexport class MenuNJSLabCoreSandbox extends MenuCommon {\r\n    pullDownMenuWrapper: PullDownMenuWrapper;\r\n    title: string;\r\n    // tslint:disable-next-line:no-any\r\n    constructor(pullDownMenuWrapper: PullDownMenuWrapper, ac: any, title: string, xOff: number) {\r\n        super(pullDownMenuWrapper, ac);\r\n        this.pullDownMenuWrapper = pullDownMenuWrapper;\r\n        this.vec = new NVector3(this.pullDownMenuWrapper.vec.x + xOff, this.pullDownMenuWrapper.vec.y);\r\n        this.height = this.pullDownMenuWrapper.height;\r\n        this.title = title;\r\n        this.width = (this.pullDownMenuWrapper.textOffX * 2) + (this.title.length * 6);\r\n        this.Init();\r\n    }\r\n    Init() {\r\n        this.AppendCommand();\r\n        this.heightSub = this.pullDownMenuWrapper.theme.heightEach * this.menus.length;\r\n        this.widthSub = this.pullDownMenuWrapper.theme.widthEach;\r\n        this.vecSub = new NVector3(this.vec.x, this.vec.y + this.pullDownMenuWrapper.bar.height + 1);\r\n    }\r\n    AppendCommand() {\r\n        // const ac = this.pullDownMenuWrapper.viewUIWrapper.viewController.model.controllerCoreWrapper.activeCommandController;\r\n        let numInterval = 0, numSubInterval = 0;\r\n        let m = new SubMenuIconCommon(this, 'dummy', this.pullDownMenuWrapper.bar.height);\r\n        // .............................................................................................................................. sub flyout menu\r\n        m = new SubMenuIconCommon(this, 'About NCanvas App', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        // m.isClickable = false;\r\n        m.MouseDownPost = () => {\r\n            // if (this.pullDownMenuWrapper.viewController.njslabWebCoreSandbox.viewController) { this.pullDownMenuWrapper.viewController.njslabWebCoreSandbox.viewController.indePanel.activeCommand.AboutDrawingTool(); }\r\n            // this.pullDownMenuWrapper.viewController.njslabWebCoreSandbox.ACController.Stoppropagation = true; this.pullDownMenuWrapper.Reset();\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        this.menus.push(m);\r\n\r\n        this.menus.push(new SubMenuCommonSection(this, 'section', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++));\r\n\r\n        m = new SubMenuCommonFly(this, 'Files', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        m.isClickable = false;\r\n        let mFly = m as SubMenuCommonFly; numSubInterval = 0;\r\n        let subM = new SubMenuIconFlyCommon(mFly, 'Open', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.isClickable = false;\r\n        subM.MouseDownPost = () => {\r\n            // this.pullDownMenuWrapper.viewUIWrapper.viewController.model.appCoreWrapper.appAccessibility.mode = INTERACTION_MODE.DRAWING;\r\n\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Save', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.isClickable = false;\r\n        subM.MouseDownPost = () => {\r\n\r\n            // this.pullDownMenuWrapper.viewUIWrapper.viewController.model.appCoreWrapper.appAccessibility.mode = INTERACTION_MODE.INTERACTIVE_VIEWER;\r\n\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Download', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.isClickable = false;\r\n        subM.MouseDownPost = () => {\r\n\r\n            // this.pullDownMenuWrapper.viewUIWrapper.viewController.model.appCoreWrapper.appAccessibility.mode = INTERACTION_MODE.OBSERVE_VIEWER;\r\n\r\n            // this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n        this.menus.push(m);\r\n\r\n        this.menus.push(new SubMenuCommonSection(this, 'section', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++));\r\n\r\n        // .............................................................................................................................. sub flyout menu\r\n        m = new SubMenuCommonFly(this, 'Helpers', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        m.isClickable = false;\r\n        mFly = m as SubMenuCommonFly; numSubInterval = 0;\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Log', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.isClickable = false;\r\n        subM.MouseDownPost = () => {\r\n            // if (this.pullDownMenuWrapper.viewController.njslabWebCoreSandbox.appDrawingTool) { this.pullDownMenuWrapper.viewController.njslabWebCoreSandbox.appDrawingTool.activeCommandController.ShiftLog(); }\r\n            // ac.ShiftLog();\r\n            //  this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'Unit', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n            // if (this.pullDownMenuWrapper.viewController.njslabWebCoreSandbox.appDrawingTool) { this.pullDownMenuWrapper.viewController.njslabWebCoreSandbox.appDrawingTool.activeCommandController.ShiftUnit(); }\r\n            // ac.ShiftUnit();\r\n            //  this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n\r\n        subM = new SubMenuIconFlyCommon(mFly, 'View cropping', mFly.vec.y + this.pullDownMenuWrapper.theme.heightEach * numSubInterval++);\r\n        subM.MouseDownPost = () => {\r\n            // if (this.pullDownMenuWrapper.viewController.njslabWebCoreSandbox.appDrawingTool) { this.pullDownMenuWrapper.viewController.njslabWebCoreSandbox.appDrawingTool.activeCommandController.SetActiveCommand(ACTIVECOMMAND_MODE.CRECTANGLE_CROP); }\r\n            // ac.SetActiveCommand(ACTIVECOMMAND_MODE.CRECTANGLE_CROP);\r\n            //  this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        m.menus.push(subM);\r\n        this.menus.push(m);\r\n\r\n        this.menus.push(new SubMenuCommonSection(this, 'section', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++));\r\n\r\n        m = new SubMenuIconCommon(this, 'Save and capture screen as an image', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        m.isClickable = false;\r\n        m.MouseDownPost = () => {\r\n            // if (this.pullDownMenuWrapper.viewController.njslabWebCoreSandbox.appDrawingTool) { this.pullDownMenuWrapper.viewController.njslabWebCoreSandbox.appDrawingTool.SaveImg(); }\r\n            // ac.save();\r\n            //  this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        this.menus.push(m);\r\n\r\n        m = new SubMenuIconCommon(this, 'Quit', this.pullDownMenuWrapper.bar.height + this.pullDownMenuWrapper.theme.heightEach * numInterval++);\r\n        m.isClickable = false;\r\n        m.MouseDownPost = () => {\r\n            // if (this.pullDownMenuWrapper.viewController.njslabWebCoreSandbox.appDrawingTool) { this.pullDownMenuWrapper.viewController.njslabWebCoreSandbox.appDrawingTool.Destroy(); }\r\n            //  this.pullDownMenuWrapper.stoppropagation = false; this.pullDownMenuWrapper.Reset();\r\n        };\r\n        this.menus.push(m);\r\n    }\r\n\r\n}","import { NVector3 } from '../../../';\r\nimport { MouseEventData } from '../../../IO/EventInteraction/MouseInteraction';\r\nimport { NUI } from '../NUI';\r\nimport { MenuRenderer } from './Core/MenuRenderer';\r\nimport { UIWrapperBase } from '../Core/Base/UIWrapperBase';\r\nimport { ControllerTheme } from '../Core/ControllerTheme';\r\nimport { MenuBar } from './Menu/Common/MenuBar';\r\nimport { MenuCommon } from './Menu/Common/MenuCommon';\r\n\r\nimport { MenuNCanvas } from './Menu/Menu/MenuNCanvas';\r\nimport { MenuNCanvasVisualization } from './Menu/Menu/MenuNCanvasVisualization';\r\nimport { MenuNCreativeCoding } from './Menu/Menu/MenuNCreativeCoding';\r\nimport { MenuNDrawingBlock } from './Menu/Menu/MenuNDrawingBlock';\r\nimport { MenuNImage } from './Menu/Menu/MenuNImage';\r\nimport { MenuNAlgorithmEnv } from './Menu/Menu/MenuNAlgorithmEnv';\r\n\r\n\r\n// import { MenuNTF } from './Menu/Menu/Env/MenuNTF';\r\nimport { MenuNTFCustom } from './Menu/Menu/Env/MenuNTFCustom';\r\n\r\nimport { MenuNJSLabCoreSandbox } from './Menu/Menu/MenuNJSLabCoreSandbox';\r\nexport class PullDownMenuWrapper extends UIWrapperBase {\r\n\r\n    menuOff: number = 10;\r\n    textOffX: number = 12;\r\n    textOffY: number = 10;\r\n\r\n    theme: ControllerTheme;\r\n    bar: MenuBar;\r\n\r\n    menus: MenuCommon[] = [];\r\n    menuRenderer: MenuRenderer;\r\n    mouse: NVector3;\r\n\r\n    menuTemp: MenuCommon;\r\n\r\n    constructor(nUI: NUI, x: number = 0, y: number = 0, width: number = 0, height: number = 0) {\r\n        super();\r\n        this.nUI = nUI;\r\n        this.theme = this.nUI.theme;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.vec = new NVector3(x, y);\r\n\r\n        this.textOffY = this.theme.textYOff;\r\n        this.menuRenderer = new MenuRenderer(this);\r\n\r\n        this.bar = new MenuBar(this, this.width, this.height);\r\n        this.mouse = new NVector3(0, 0);\r\n        this.BuildMenuPre();\r\n    }\r\n    BuildMenuPre() {\r\n        this.menuTemp = new MenuNJSLabCoreSandbox(this, {}, 'NJSCoreSandbox', this.menuOff); this.menus.push(this.menuTemp);\r\n        // this.menuTemp = new MenuLink(this, {}, 'Help', this.menus[this.menus.length - 1].vec.x + this.menus[this.menus.length - 1].width); this.menus.push(this.menuTemp);\r\n\r\n    }\r\n    // tslint:disable-next-line:no-any\r\n    BuildMenuContent(app: string, ac: any) {\r\n        // this.menus[this.menus.length - 1].Remove();\r\n        // this.menus.pop();\r\n\r\n        switch (app) {\r\n            case 'NCanvas':\r\n                this.menuTemp = new MenuNCanvas(this, ac, 'NCanvas', this.menus[this.menus.length - 1].vec.x + this.menus[this.menus.length - 1].width); this.menus.push(this.menuTemp);\r\n                this.menuTemp = new MenuNCanvasVisualization(this, ac, 'Visualization', this.menus[this.menus.length - 1].vec.x + this.menus[this.menus.length - 1].width); this.menus.push(this.menuTemp);\r\n                this.menuTemp = new MenuNCreativeCoding(this, ac, 'Creative Coding', this.menus[this.menus.length - 1].vec.x + this.menus[this.menus.length - 1].width); this.menus.push(this.menuTemp);\r\n                // this.menuTemp = new MenuVisMapCanvas(this, ac, 'VisMap', this.menus[this.menus.length - 1].vec.x + this.menus[this.menus.length - 1].width); this.menus.push(this.menuTemp);\r\n                break;\r\n            // eslint-disable-next-line no-duplicate-case\r\n            case 'NCanvas':\r\n                this.menuTemp = new MenuNCanvas(this, ac, 'NCanvas', this.menus[this.menus.length - 1].vec.x + this.menus[this.menus.length - 1].width); this.menus.push(this.menuTemp);\r\n                this.menuTemp = new MenuNCanvasVisualization(this, ac, 'Visualization', this.menus[this.menus.length - 1].vec.x + this.menus[this.menus.length - 1].width); this.menus.push(this.menuTemp);\r\n                this.menuTemp = new MenuNCreativeCoding(this, ac, 'Creative Coding', this.menus[this.menus.length - 1].vec.x + this.menus[this.menus.length - 1].width); this.menus.push(this.menuTemp);\r\n                // this.menuTemp = new MenuVisMapCanvas(this, ac, 'VisMap', this.menus[this.menus.length - 1].vec.x + this.menus[this.menus.length - 1].width); this.menus.push(this.menuTemp);\r\n                break;\r\n            case 'appThreeEnv':\r\n                this.menuTemp = new MenuNImage(this, ac, 'NImage', this.menus[this.menus.length - 1].vec.x + this.menus[this.menus.length - 1].width); this.menus.push(this.menuTemp);\r\n                break;\r\n            case 'NTF':\r\n                // this.menuTemp = new MenuNTF(this, ac, 'NTF', this.menus[this.menus.length - 1].vec.x + this.menus[this.menus.length - 1].width); this.menus.push(this.menuTemp);\r\n                this.menuTemp = new MenuNTFCustom(this, ac, 'NTF', this.menus[this.menus.length - 1].vec.x + this.menus[this.menus.length - 1].width); this.menus.push(this.menuTemp);\r\n                break;\r\n            case 'NDrawingBlock':\r\n                this.menuTemp = new MenuNDrawingBlock(this, ac, 'NDrawing Block', this.menus[this.menus.length - 1].vec.x + this.menus[this.menus.length - 1].width); this.menus.push(this.menuTemp);\r\n                break;\r\n            case 'AlgorithmEnv':\r\n                this.menuTemp = new MenuNAlgorithmEnv(this, ac, 'AlgorithmEnv', this.menus[this.menus.length - 1].vec.x + this.menus[this.menus.length - 1].width); this.menus.push(this.menuTemp);\r\n                // this.menuTemp = new MenuNCanvasVisualization(this, ac, 'Visualization', this.menus[this.menus.length - 1].vec.x + this.menus[this.menus.length - 1].width); this.menus.push(this.menuTemp);\r\n                // this.menuTemp = new MenuNCreativeCoding(this, ac, 'Creative Coding', this.menus[this.menus.length - 1].vec.x + this.menus[this.menus.length - 1].width); this.menus.push(this.menuTemp);\r\n                // this.menuTemp = new MenuVisMapCanvas(this, ac, 'VisMap', this.menus[this.menus.length - 1].vec.x + this.menus[this.menus.length - 1].width); this.menus.push(this.menuTemp);\r\n                break;\r\n            default: break;\r\n            // this.menuTemp = new MenuEnvironment(this, 'Environment', this.menus[this.menus.length - 1].vec.x + this.menus[this.menus.length - 1].width); this.menus.push(this.menuTemp);\r\n            // this.menuTemp = new MenuCanvasVisualization(this, 'Visualization', this.menus[this.menus.length - 1].vec.x + this.menus[this.menus.length - 1].width); this.menus.push(this.menuTemp);\r\n            // this.menuTemp = new MenuCreativeCoding(this, 'Creative Coding', this.menus[this.menus.length - 1].vec.x + this.menus[this.menus.length - 1].width); this.menus.push(this.menuTemp);\r\n        }\r\n        // this.menuTemp = new MenuLink(this, {}, 'Help', this.menus[this.menus.length - 1].vec.x + this.menus[this.menus.length - 1].width); this.menus.push(this.menuTemp);\r\n\r\n    }\r\n    AddMenu(app: string, subMenu: string, title: string, fn: () => void) {\r\n        for (let i = 0; i < this.menus.length; ++i) {\r\n            if (this.menus[i].title === app) {\r\n                this.menus[i].AddMenu(subMenu, title, fn);\r\n            }\r\n        }\r\n    }\r\n    RemoveMenu(m: MenuCommon) {\r\n        m.Remove();\r\n        this.menus.splice(this.menus.indexOf(m), 1);\r\n    }\r\n    Resize(width: number, height: number) {\r\n        this.width = width;\r\n        this.bar.width = width;\r\n    }\r\n    RenderPost(ctx: CanvasRenderingContext2D) {\r\n        /* */\r\n    }\r\n    MouseMove(e: MouseEventData) {\r\n        // if (this.isHidden) { return; }\r\n        // console.log('ddd');\r\n        // console.log('move');\r\n        this.mouse.x = e.x; this.mouse.y = e.y;\r\n        this.menuRenderer.MouseMove(e);\r\n    }\r\n    MouseDown(e: MouseEventData) {\r\n        this.menuRenderer.MouseDown(e);\r\n    }\r\n    Reset() {\r\n        this.menuRenderer.Reset();\r\n    }\r\n    ShowMenu(v: boolean) {\r\n        this.menuRenderer.ShowMenu(v);\r\n    }\r\n    Destroy() {\r\n        this.menuRenderer.RemoveAll();\r\n    }\r\n    set stopPropagation(v: boolean) {\r\n        this.nUI.stopPropagation = v; // .viewController.viewAppCoreWrapper.viewIOWrapper.eventInteraction.stopPropagation = v;\r\n    }\r\n}","\r\nimport { MouseEventData } from '../../../../';\r\nimport { IndePanelBase } from '../Panel/Common/base/base/IndePanelBase';\r\nimport { IndependentPanelWrapper } from '../IndependentPanelWrapper';\r\nexport class IndePanelRender {\r\n    list: IndePanelBase[] = [];\r\n\r\n    isShow: boolean = false;\r\n    isStillCapturedFly: boolean = true;\r\n\r\n    independentPanelWrapper: IndependentPanelWrapper;\r\n    isHidden: boolean = false;\r\n    capture: IndePanelBase | undefined = undefined;\r\n\r\n    constructor(independentPanelWrapper: IndependentPanelWrapper) {\r\n        this.independentPanelWrapper = independentPanelWrapper;\r\n    }\r\n    get IsHidden() { return this.isHidden; }\r\n    set IsHidden(v: boolean) { this.isHidden = v; }\r\n    RemoveAllCapturedBlock() {\r\n        if (this.capture === undefined) { return; }\r\n        this.capture.Remove();\r\n    }\r\n    CheckOvered(e: MouseEventData) {\r\n        let i = this.list.length;\r\n        let mouseHoverUI = false;\r\n        while (i--) {\r\n            if (this.list[i].isHidden) { continue; }\r\n            if (this.list[i].IsMouseInside(e.x, e.y)) {\r\n                this.list[i].IsHover = true;\r\n                mouseHoverUI = true;\r\n            } else {\r\n                this.list[i].IsHover = false;\r\n            }\r\n        }\r\n        if (mouseHoverUI) {\r\n            // this.independentPanelWrapper.stoppropagation = true;\r\n        } else {\r\n            // this.independentPanelWrapper.stoppropagation = false;\r\n        }\r\n    }\r\n    FindAtPoint(e: MouseEventData) {\r\n        let i = this.list.length;\r\n        while (i--) {\r\n            if (this.list[i].isHidden) { continue; }\r\n            if (this.list[i].IsMouseInside(e.x, e.y)) {\r\n                return this.list[i];\r\n            }\r\n        }\r\n        return undefined;\r\n    }\r\n    MouseDown(e: MouseEventData) {\r\n        if (this.isHidden) { return; }\r\n        let ui = this.FindAtPoint(e);\r\n        if (ui !== undefined) {\r\n            this.independentPanelWrapper.enablePan = false;\r\n            ui.MouseDown();\r\n            this.capture = ui;\r\n        } else {\r\n            this.capture = undefined;\r\n        }\r\n    }\r\n    MouseRight(e: MouseEventData) {\r\n        if (this.isHidden) { return; }\r\n        let ui = this.FindAtPoint(e);\r\n        if (ui !== undefined) {\r\n            this.independentPanelWrapper.enablePan = false;\r\n            ui.MouseRight(e);\r\n            this.capture = ui;\r\n        } else {\r\n            this.capture = undefined;\r\n        }\r\n    }\r\n    MouseDrag(e: MouseEventData) {\r\n        if (this.isHidden) { return; }\r\n        if (this.capture !== undefined) {\r\n            // this.independentPanelWrapper.stoppropagation = true;\r\n            this.capture.MouseDrag(e);\r\n        }\r\n    }\r\n    MouseDouble(e: MouseEventData) {\r\n        if (this.isHidden) { return; }\r\n        let ui = this.FindAtPoint(e);\r\n        if (ui !== undefined) {\r\n            this.independentPanelWrapper.enablePan = false;\r\n            ui.MouseDouble(e);\r\n            // this.capture = ui;\r\n        }\r\n        // if (this.capture !== undefined) { }\r\n    }\r\n    MouseMove(e: MouseEventData) {\r\n        if (this.isHidden) { return; }\r\n        this.CheckOvered(e);\r\n        this.FindAtPoint(e);\r\n    }\r\n    MouseUp(e: MouseEventData) {\r\n        if (this.isHidden) { return; }\r\n        if (this.capture !== undefined) {\r\n            this.capture.MouseUp(e);\r\n            // this.capture = undefined;\r\n        }\r\n        // this.independentPanelWrapper.stoppropagation = false;\r\n        this.independentPanelWrapper.enablePan = true;\r\n    }\r\n    Render(ctx: CanvasRenderingContext2D) {\r\n        if (this.isHidden) { return; }\r\n        for (let i = 0; i < this.list.length; ++i) {\r\n            this.list[i].Render(ctx);\r\n        }\r\n        // ToolbarRender.Render(ctx);\r\n        // MenuRenderer.Render(ctx);\r\n        // console.log(IndePanelRender.list.length);\r\n    }\r\n    // .........................................................\r\n    Add(g: IndePanelBase) {\r\n        this.list.push(g);\r\n    }\r\n    Remove(g: IndePanelBase) {\r\n        this.list.splice(this.list.indexOf(g), 1);\r\n    }\r\n    RemoveAll() {\r\n        this.list = [];\r\n    }\r\n\r\n    ShowMenu(v: boolean) {\r\n        this.isShow = v;\r\n    }\r\n    Reset() {\r\n        for (let i = 0; i < this.list.length; ++i) {\r\n            this.list[i].IsHover = false;\r\n        }\r\n    }\r\n    // MouseMove(e: MouseEventData) {\r\n    //     // console.log(this.list);\r\n    //     if (!this.isShow) { return; }\r\n    //     for (let i = 0; i < this.list.length; ++i) {\r\n    //         if (this.list[i].IsMouseInside(e.x, e.y)) {\r\n    //             this.list[i].IsHover = true;\r\n    //         } else {\r\n    //             this.list[i].IsHover = false;\r\n    //         }\r\n    //     }\r\n    // }\r\n    // MouseDown(e: MouseEventData) {\r\n    //     if (!this.isShow) { return; }\r\n    //     this.MouseMove(e);\r\n\r\n    //     for (let i = 0; i < this.list.length; ++i) {\r\n    //         if (this.list[i].IsHover) {\r\n    //             this.list[i].MouseDown();\r\n    //         }\r\n    //     }\r\n    // }\r\n}","import { NVector3 } from '../../../../../';\r\nimport { MouseEventData } from '../../../../../IO/EventInteraction/MouseInteraction';\r\n\r\nimport { IndependentPanelWrapper } from '../../IndependentPanelWrapper';\r\nimport { ColorUtility } from '../../../../../Core/NColor/';\r\n\r\nimport { IndePanelPreset } from '../../Core/IndePanelPreset';\r\n\r\nimport { IndePanelBase } from './base/base/IndePanelBase';\r\n\r\nimport { BtnClose } from './base/BtnClose';\r\nimport { BtnMinimize } from './base/BtnMinimize';\r\nimport { BtnHam } from './base/BtnHam';\r\nimport { BtnResize } from './base/BtnResize';\r\n\r\nimport { BodyDiv } from './base/BodyDiv';\r\nimport { IndeSubPanel } from './base/IndeSubPanel';\r\n\r\nexport class IndependentPanel extends IndePanelBase {\r\n    independentPanelWrapper: IndependentPanelWrapper;\r\n    divInput: HTMLTextAreaElement;\r\n\r\n    btnClose: BtnClose;\r\n    btnMini: BtnMinimize;\r\n    btnHam: BtnHam;\r\n    btnResize: BtnResize;\r\n\r\n    bodyDiv: BodyDiv;\r\n    subMenu: IndeSubPanel;\r\n\r\n    subs: IndePanelBase[] = [];\r\n\r\n    _content: string;\r\n\r\n    constructor(independentPanelWrapper: IndependentPanelWrapper, x: number = 0, y: number = 0, width: number = 300, height: number = 170, divNeeded: boolean = false) {\r\n        super(independentPanelWrapper);\r\n        this.independentPanelWrapper = independentPanelWrapper;\r\n        this.title = 'njslabSandbox V3';\r\n        this.width = width;\r\n        this.height = height;\r\n        if (x === 0 && y === 0) {\r\n            this.vec.x = (independentPanelWrapper.width * 0.5) - (this.width * 0.5);\r\n            this.vec.y = (independentPanelWrapper.height * 0.5) - (this.height * 0.5);\r\n        } else {\r\n            this.vec.x = x;\r\n            this.vec.y = y;\r\n        }\r\n        this.filletR = 7;\r\n        this.InitTop();\r\n        if (divNeeded) {\r\n            this.bodyDiv = new BodyDiv(this, this.vec.x, this.vec.y + this.HeadHeight, this.width, this.height - this.HeadHeight);\r\n            // this.bodyDiv.divText.style.background = 'red';\r\n        }\r\n    }\r\n    get IsMinimized() {\r\n        return this.isMinimized;\r\n    }\r\n    set IsMinimized(v: boolean) {\r\n        this.isMinimized = v;\r\n        this.btnResize.isHidden = v;\r\n        if (this.bodyDiv) { this.bodyDiv.Hide(v); }\r\n    }\r\n    get Width() {\r\n        return this.width;\r\n    }\r\n    set Width(v: number) {\r\n        let off = v - this.width;\r\n        this.width = v;\r\n        this.btnHam.vec.x += off;\r\n        this.subMenu.vec.x += off;\r\n        if (this.bodyDiv) { this.bodyDiv.Width = v; }\r\n    }\r\n    get Height() {\r\n        return this.height;\r\n    }\r\n    set Height(v: number) {\r\n        this.height = v;\r\n        if (this.bodyDiv) { this.bodyDiv.Height = v; }\r\n        // this.subMenu\r\n    }\r\n    get content() {\r\n        return this._content;\r\n    }\r\n    set content(v: string) {\r\n        this._content = v;\r\n        if (this.bodyDiv) { this.bodyDiv.content = v; }\r\n    }\r\n    get HasSubMenu() {\r\n        return this.hasSubMenu;\r\n    }\r\n    set HasSubMenu(v: boolean) {\r\n        this.hasSubMenu = v;\r\n        this.subMenu.IsHidden = !v;\r\n    }\r\n    InitTop() {\r\n        this.btnClose = new BtnClose(this, this.vec.x, this.vec.y);\r\n        this.btnMini = new BtnMinimize(this, this.vec.x + 25, this.vec.y);\r\n        this.btnHam = new BtnHam(this, this.vec.x - 25 + this.width, this.vec.y);\r\n        this.btnResize = new BtnResize(this, this.vec.x + this.width - 10, this.vec.y + this.height - 10, 10, 10);\r\n\r\n        this.subMenu = new IndeSubPanel(this);\r\n        this.subs.push(this.btnClose, this.btnMini, this.btnHam);\r\n    }\r\n    Translate(e: MouseEventData): void {\r\n        if (!this.isMoveable) { return; }\r\n        let xo = e.x - e.preX;\r\n        let yo = e.y - e.preY;\r\n        this.vec.x += xo;\r\n        this.vec.y += yo;\r\n        for (let i = 0; i < this.boundarVecs.length; ++i) { this.boundarVecs[i].x += xo; this.boundarVecs[i].y += yo; }\r\n        for (let i = 0; i < this.subs.length; ++i) { this.subs[i].Translate(e); }\r\n        this.btnResize.vec.x += xo;\r\n        this.btnResize.vec.y += yo;\r\n        this.subMenu.Translate(xo, yo);\r\n        if (this.bodyDiv) { this.bodyDiv.Translate(xo, yo); }\r\n\r\n    }\r\n    Remove() {\r\n        for (let i = 0; i < this.subs.length; ++i) { this.subs[i].Remove(); }\r\n        if (this.bodyDiv) { this.bodyDiv.Remove(); }\r\n        this.btnResize.Remove();\r\n        this.independentPanelWrapper.indePanelRender.Remove(this);\r\n        this.RemovePost();\r\n    }\r\n    RenderPost(ctx: CanvasRenderingContext2D): void {\r\n        // console.log(IndePanelRender.length);\r\n        // this.vec.x = this.mainPanel.vec.x + this.xOff;\r\n        // this.vec.y = this.mainPanel.vec.y + this.yOff;\r\n        this.ComputeBoundary();\r\n\r\n        let color;\r\n        // if (this.isOver) {\r\n        //     color = ColorUtility.HexToCanvasColor(IndePanelPreset.theme.mainMenuOver, this.transparent);\r\n        // } else {\r\n        color = ColorUtility.HexToCanvasColor(IndePanelPreset.theme.mainMenuNormal, this.transparent);\r\n        // }\r\n        if (this.isMinimized) {\r\n            IndePanelPreset.TopRoundedRectFill(ctx, this.title, NVector3.GetBoundaryByVecWidthHeight(this.vec, this.width, this.HeadHeight), this.filletR, 0, this.isOver, this.isSelected, this.theme.colSelectedBG, false);\r\n\r\n        } else {\r\n            IndePanelPreset.RoundedRectFillWithColorMainMenu(ctx, this.title, this.boundarVecs, this.filletR, 0, this.isOver, this.isSelected, color);\r\n            IndePanelPreset.TopRoundedRectFill(ctx, this.title, NVector3.GetBoundaryByVecWidthHeight(this.vec, this.width, this.HeadHeight), this.filletR, 0, this.isOver, this.isSelected, this.theme.colSelectedBG, false);\r\n        }\r\n        this.RenderHeadTitle(ctx);\r\n        if (!this.isMinimized) {\r\n            this.RenderBodyContent(ctx);\r\n        }\r\n        if (this.hasSubMenu) {\r\n            this.subMenu.RenderPost(ctx);\r\n        }\r\n        this.RenderBtnHorizontal(ctx);\r\n    }\r\n    RenderBtnHorizontal(ctx: CanvasRenderingContext2D) {\r\n        /* */\r\n    }\r\n    RenderHeadTitle(ctx: CanvasRenderingContext2D) {\r\n        ctx.save();\r\n        // if (this.isOver) {\r\n        //     ctx.fillStyle = IndePanelPreset.theme.mainMenuNormal;\r\n        // } else {\r\n        ctx.fillStyle = '#ffffff';\r\n        // }\r\n        ctx.textBaseline = 'top';\r\n        ctx.textAlign = 'center';\r\n        ctx.font = '100 12px Arial';\r\n        ctx.shadowBlur = 0;\r\n        // ctx.shadowColor = 'rgba(0,0,0,0.3)';\r\n        ctx.shadowOffsetY = 0;\r\n        ctx.shadowOffsetX = 0;\r\n        ctx.fillText(this.title, this.vec.x + (this.width * 0.5), this.vec.y + (this.HeadHeight * 0.5) - 7);\r\n\r\n        ctx.restore();\r\n    }\r\n    RenderBodyContent(ctx: CanvasRenderingContext2D) {\r\n        // ctx.save();\r\n        // // if (this.isOver) {\r\n        // //     ctx.fillStyle = IndePanelPreset.theme.mainMenuNormal;\r\n        // // } else {\r\n        // ctx.fillStyle = '#000000';\r\n        // // }\r\n        // ctx.textBaseline = 'top';\r\n        // ctx.textAlign = 'center';\r\n        // ctx.font = '100 9px Sans-serif';\r\n        // ctx.fillText(this.content, this.vec.x + (this.width * 0.5), this.vec.y + (this.height * 0.5) - 5);\r\n\r\n        // ctx.shadowBlur = 0;\r\n        // // ctx.shadowColor = 'rgba(0,0,0,0.3)';\r\n        // ctx.shadowOffsetY = 0;\r\n        // ctx.shadowOffsetX = 0;\r\n\r\n        // ctx.restore();\r\n    }\r\n}\r\n\r\n// InitCanvas(hostDiv: HTMLElement) {\r\n//     this.canvas = document.createElement('canvas');\r\n//     this.canvas.style.position = 'absolute';\r\n//     this.canvas.style.zIndex = '0';\r\n//     hostDiv.appendChild(this.canvas);\r\n\r\n//     this.canvas.id = 'NCanvasRenderer';\r\n//     this.canvas.className = 'njslabSandboxStaticCanvasRenderer';\r\n//     this.canvas.style.pointerEvents = 'none';\r\n//     this.ctx = this.canvas.getContext('2d') as CanvasRenderingContext2D;\r\n\r\n//     this.canvas.width = hostDiv.clientWidth; // hostDivForSize.clientWidth;\r\n//     this.canvas.height = hostDiv.clientHeight; // hostDivForSize.clientHeight;\r\n\r\n//     this.btnResize.ResizePropagation = (width: number, height: number) => {\r\n//         this.canvas.width = width; // hostDivForSize.clientWidth;\r\n//         this.canvas.height = height; // hostDivForSize.clientHeight;\r\n//     };\r\n//     this.Loop(this.ctx);\r\n// }\r\n// Loop(ctx: CanvasRenderingContext2D) {\r\n//     ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n//     requestAnimationFrame(() => { this.Loop(ctx); });\r\n//     this.Render(ctx);\r\n// }\r\n// Render(ctx: CanvasRenderingContext2D) {\r\n//     console.log('implementation needed');\r\n// }","import { IndependentPanelWrapper } from '../IndependentPanelWrapper';\r\nimport { IndependentPanel } from '../Panel/Common/IndependentPanel';\r\nexport class ActiveCommand {\r\n    independentPanel: IndependentPanelWrapper;\r\n    constructor(independentPanel: IndependentPanelWrapper) {\r\n        this.independentPanel = independentPanel;\r\n    }\r\n    AboutWhatisTheProduct() {\r\n        let d = new IndependentPanel(this.independentPanel, 0, 0, 450, 300, true);\r\n        d.title = 'What is this Product?';\r\n        d.content = `Before you read this document, we would like to point out something behind it,\r\n                     which is our motivation and mission. The mission is to think about how to bridge and\r\n                     encourage people, who have no idea about data and visualization, to use and create map with GIS data activly.`;\r\n        d.btnHam.isHidden = true;\r\n    }\r\n    AboutApps() {\r\n        let d = new IndependentPanel(this.independentPanel, 0, 0, 450, 300, true);\r\n        d.title = 'About Apps';\r\n        d.content = 'The content will be updated soon.';\r\n        d.btnHam.isHidden = true;\r\n    }\r\n    AboutViewer() {\r\n        let d = new IndependentPanel(this.independentPanel, 0, 0, 300, 170, true);\r\n        d.title = 'Viewer App';\r\n        d.content = 'The content will be updated soon.';\r\n        d.btnHam.isHidden = true;\r\n    }\r\n    // ....................................................\r\n    AboutDrawingTool() {\r\n        let d = new IndependentPanel(this.independentPanel, 0, 0, 300, 170, true);\r\n        d.title = 'Drawing Tool App';\r\n        d.content = 'The content will be updated soon.';\r\n        d.btnHam.isHidden = true;\r\n    }\r\n    AboutAnnotation() {\r\n        let d = new IndependentPanel(this.independentPanel, 0, 0, 300, 170, true);\r\n        d.title = 'Annotation Tool App';\r\n        d.content = 'The content will be updated soon.';\r\n        d.btnHam.isHidden = true;\r\n    }\r\n    AboutNSketch() {\r\n        let d = new IndependentPanel(this.independentPanel, 0, 0, 300, 170, true);\r\n        d.title = 'NSketch App';\r\n        d.content = 'The content will be updated soon.';\r\n        d.btnHam.isHidden = true;\r\n    }\r\n    AboutMapfilter() {\r\n        let d = new IndependentPanel(this.independentPanel, 0, 0, 300, 170, true);\r\n        d.title = 'Mapfilter App';\r\n        d.content = 'The content will be updated soon.';\r\n        d.btnHam.isHidden = true;\r\n    }\r\n    AboutWallPaperGL() {\r\n        let d = new IndependentPanel(this.independentPanel, 0, 0, 300, 170, true);\r\n        d.title = 'WallPaperGL App';\r\n        d.content = 'The content will be updated soon.';\r\n        d.btnHam.isHidden = true;\r\n    }\r\n    AboutNLearning() {\r\n        let d = new IndependentPanel(this.independentPanel, 0, 0, 300, 170, true);\r\n        d.title = 'NLearning App';\r\n        d.content = 'The content will be updated soon.';\r\n        d.btnHam.isHidden = true;\r\n    }\r\n    AboutSmartDrawing() {\r\n        let d = new IndependentPanel(this.independentPanel, 0, 0, 300, 170, true);\r\n        d.title = 'Smart Drawing Addon';\r\n        d.content = 'The content will be updated soon.';\r\n        d.btnHam.isHidden = true;\r\n    }\r\n    AboutVoiceController() {\r\n        let d = new IndependentPanel(this.independentPanel, 0, 0, 300, 170, true);\r\n        d.title = 'Voice Controller';\r\n        d.content = 'The content will be updated soon.';\r\n        d.btnHam.isHidden = true;\r\n    }\r\n    AboutMapticon() {\r\n        let d = new IndependentPanel(this.independentPanel, 0, 0, 300, 170, true);\r\n        d.title = 'Mapticon Addon';\r\n        d.content = 'The content will be updated soon.';\r\n        d.btnHam.isHidden = true;\r\n    }\r\n    AboutBlock() {\r\n        let d = new IndependentPanel(this.independentPanel, 0, 0, 300, 170, true);\r\n        d.title = 'Drawing Block App';\r\n        d.content = 'The content will be updated soon.';\r\n        d.btnHam.isHidden = true;\r\n    }\r\n    AboutNGlobe() {\r\n        let d = new IndependentPanel(this.independentPanel, 0, 0, 300, 170, true);\r\n        d.title = 'NGlobe';\r\n        d.content = 'The content will be updated soon.';\r\n        d.btnHam.isHidden = true;\r\n    }\r\n    AboutNTerrain() {\r\n        let d = new IndependentPanel(this.independentPanel, 0, 0, 300, 170, true);\r\n        d.title = 'NTerrain';\r\n        d.content = 'The content will be updated soon.';\r\n        d.btnHam.isHidden = true;\r\n    }\r\n    ABoutNDynamics() {\r\n        let d = new IndependentPanel(this.independentPanel, 0, 0, 300, 170, true);\r\n        d.title = 'NDynamics';\r\n        d.content = 'The content will be updated soon.';\r\n        d.btnHam.isHidden = true;\r\n    }\r\n    ABoutNRhino3d() {\r\n        let d = new IndependentPanel(this.independentPanel, 0, 0, 300, 170, true);\r\n        d.title = 'NRhino3d';\r\n        d.content = 'The content will be updated soon.';\r\n        d.btnHam.isHidden = true;\r\n    }\r\n    // ....................................................\r\n    AboutVisCanvas() {\r\n        let d = new IndependentPanel(this.independentPanel, 0, 0, 300, 170, true);\r\n        d.title = 'Visualization Canvas App';\r\n        d.content = 'The content will be updated soon.';\r\n        d.btnHam.isHidden = true;\r\n    }\r\n    AboutVisGL() {\r\n        let d = new IndependentPanel(this.independentPanel, 0, 0, 300, 170, true);\r\n        d.title = 'Visualization GL App';\r\n        d.content = 'The content will be updated soon.';\r\n        d.btnHam.isHidden = true;\r\n    }\r\n    AboutVisGL3D() {\r\n        let d = new IndependentPanel(this.independentPanel, 0, 0, 300, 170, true);\r\n        d.title = 'Visualization GL3D App';\r\n        d.content = 'The content will be updated soon.';\r\n        d.btnHam.isHidden = true;\r\n    }\r\n    AboutVRAR() {\r\n        let d = new IndependentPanel(this.independentPanel, 0, 0, 300, 170, true);\r\n        d.title = 'GraphicApp VR & AR App';\r\n        d.content = 'The content will be updated soon.';\r\n        d.btnHam.isHidden = true;\r\n    }\r\n    AboutGL3d() {\r\n        let d = new IndependentPanel(this.independentPanel, 0, 0, 300, 170, true);\r\n        d.title = 'GraphicApp GL3d App';\r\n        d.content = 'The content will be updated soon.';\r\n        d.btnHam.isHidden = true;\r\n    }\r\n    AboutNImage() {\r\n        let d = new IndependentPanel(this.independentPanel, 0, 0, 300, 170, true);\r\n        d.title = 'GraphicApp NImage App';\r\n        d.content = 'The content will be updated soon.';\r\n        d.btnHam.isHidden = true;\r\n    }\r\n    AboutNWallpaper() {\r\n        let d = new IndependentPanel(this.independentPanel, 0, 0, 300, 170, true);\r\n        d.title = 'GraphicApp NWallpaper App';\r\n        d.content = 'The content will be updated soon.';\r\n        d.btnHam.isHidden = true;\r\n    }\r\n    AboutNMedia() {\r\n        let d = new IndependentPanel(this.independentPanel, 0, 0, 300, 170, true);\r\n        d.title = 'NMedia & NController';\r\n        d.content = 'These apps are addons in njslabSandbox. NMedia is enable to us to access multimedia dvices like camera or voice, and NController provides with abilities to take advantage of extra dvices: HTC Vive, Leap Motion, or Kinect.';\r\n        d.btnHam.isHidden = true;\r\n    }\r\n}","import { NVector3 } from '../../../Core/CoreGeometry/NGeometry/NVector3';\r\nimport { MouseEventData } from '../../../IO/EventInteraction/MouseInteraction';\r\nimport { NUI } from '../NUI';\r\nimport { IndePanelRender } from './Core/IndePanelRender';\r\nimport { UIWrapperBase } from '../Core/Base/UIWrapperBase';\r\nimport { ControllerTheme } from '../Core/ControllerTheme';\r\nimport { ActiveCommand } from './Core/ActiveCommand';\r\nexport class IndependentPanelWrapper extends UIWrapperBase {\r\n\r\n    menuOff: number = 10;\r\n    textOffX: number = 12;\r\n    textOffY: number = 10;\r\n\r\n    nUI: NUI;\r\n    theme: ControllerTheme;\r\n\r\n    m: NVector3;\r\n    indePanelRender: IndePanelRender;\r\n\r\n    isActivated: boolean = false;\r\n    activeCommand: ActiveCommand;\r\n\r\n    constructor(nUI: NUI, x: number = 0, y: number = 0, width: number = 0, height: number = 0) {\r\n        super();\r\n        this.nUI = nUI;\r\n        this.theme = this.nUI.theme;\r\n        this.width = width;\r\n        this.height = height;\r\n        this.vec = new NVector3(x, y);\r\n\r\n        // console.log(this.width, this.height);\r\n\r\n        this.textOffY = this.theme.textYOff;\r\n\r\n        this.m = new NVector3(0, 0);\r\n        this.indePanelRender = new IndePanelRender(this);\r\n\r\n        this.Init();\r\n    }\r\n    Init() {\r\n        this.activeCommand = new ActiveCommand(this);\r\n    }\r\n    Resize(width: number, height: number) {\r\n        //\r\n    }\r\n    RenderPost(ctx: CanvasRenderingContext2D) {\r\n        /* */\r\n    }\r\n    MouseMove(e: MouseEventData) {\r\n        // console.log(e);\r\n        this.m.x = e.x; this.m.y = e.y;\r\n        this.indePanelRender.MouseMove(e);\r\n    }\r\n    MouseDrag(e: MouseEventData) {\r\n        this.indePanelRender.MouseDrag(e);\r\n    }\r\n    MouseDown(e: MouseEventData) {\r\n        this.indePanelRender.MouseDown(e);\r\n\r\n    }\r\n    Reset() {\r\n        this.indePanelRender.Reset();\r\n    }\r\n    ShowMenu(v: boolean) {\r\n        this.indePanelRender.ShowMenu(v);\r\n    }\r\n    Destroy() {\r\n        this.indePanelRender.RemoveAll();\r\n    }\r\n    set stopPropagation(v: boolean) {\r\n        this.nUI.stopPropagation = v;  // this.nUI.viewController.viewAppCoreWrapper.viewIOWrapper.eventInteraction.stopPropagation = v;\r\n    }\r\n    set enablePan(v: boolean) {\r\n        this.nUI.enablePan = v;\r\n        // this.viewUIWrapper.viewController.viewAppCoreWrapper.viewIOWrapper.  = v;\r\n    }\r\n}","import { NUI } from '../NUI';\r\n\r\nexport class UICanvas {\r\n    nUI: NUI;\r\n    uiCanvas: HTMLCanvasElement;\r\n    ctx: CanvasRenderingContext2D;\r\n    isActive: boolean = true;\r\n    constructor(nUI: NUI) {\r\n        this.nUI = nUI;\r\n        this.InitCanvas();\r\n    }\r\n    public ResizeCanvas(width: number, height: number) {\r\n        this.ctx.canvas.width = width;\r\n        this.ctx.canvas.height = height;\r\n    }\r\n    private InitCanvas() {\r\n        this.uiCanvas = document.createElement('canvas');\r\n        this.uiCanvas.id = 'njscore-web-ui';\r\n        this.uiCanvas.className = 'njscore-web-ui';\r\n        this.uiCanvas.style.position = 'absolute';\r\n        this.uiCanvas.style.pointerEvents = 'none';\r\n        this.uiCanvas.style.zIndex = '10';\r\n        this.uiCanvas.width = this.nUI.divHost.clientWidth;\r\n        this.uiCanvas.height = this.nUI.divHost.clientHeight;\r\n\r\n        this.nUI.divHost.appendChild(this.uiCanvas);\r\n        const ctx = this.uiCanvas.getContext('2d');\r\n        if (ctx) { this.ctx = ctx; }\r\n        this.Loop();\r\n    }\r\n    private Loop() {\r\n        if (!this.isActive) { this.ctx.clearRect(0, 0, this.uiCanvas.width, this.uiCanvas.height); return; }\r\n        // console.log(this.uiCanvas.width);\r\n        requestAnimationFrame(() => (this.Loop()));\r\n        this.ctx.clearRect(0, 0, this.uiCanvas.width, this.uiCanvas.height);\r\n\r\n        this.Render(this.ctx);\r\n    }\r\n    Render(ctx: CanvasRenderingContext2D) {\r\n        //\r\n    }\r\n}","import { MouseEventData } from '../../IO/EventInteraction/MouseInteraction';\r\n\r\nimport { Asset } from './AssetWrapper';\r\n\r\nimport { ActiveCommand } from './Core/ActiveCommand';\r\nimport { ControllerTheme } from './Core/ControllerTheme';\r\nimport { PullDownMenuWrapper } from './WrapperPullDownMenu/PullDownMenuWrapper';\r\nimport { IndependentPanelWrapper } from './WrapperIndependentPanel/IndependentPanelWrapper';\r\nimport { UICanvas } from './Core/UICanvas';\r\n\r\nexport class NUI {\r\n    asset: Asset;\r\n    theme: ControllerTheme;\r\n    themeType: string = 'default';\r\n    activeCommand: ActiveCommand;\r\n\r\n    independentPanelWrapper: IndependentPanelWrapper;\r\n    pullDownMenuWrapper: PullDownMenuWrapper;\r\n\r\n    divHost: HTMLElement;\r\n    width: number;\r\n    height: number;\r\n\r\n    indepCanvas: UICanvas;\r\n    pullDownCanvas: UICanvas;\r\n\r\n    private _stopPropagation: boolean = false;\r\n\r\n    constructor(divHost: HTMLElement, needUI: boolean = true) {\r\n        this.divHost = divHost;\r\n        this.width = this.divHost.clientWidth;\r\n        this.height = this.divHost.clientHeight;\r\n        // console.log(needUI);\r\n        this.asset = new Asset();\r\n        this.theme = new ControllerTheme();\r\n\r\n        this.activeCommand = new ActiveCommand(this);\r\n\r\n        this.independentPanelWrapper = new IndependentPanelWrapper(this, 0, 0, this.width, this.height);\r\n        this.indepCanvas = new UICanvas(this);\r\n        if (needUI) {\r\n            this.indepCanvas.Render = (ctx: CanvasRenderingContext2D) => this.independentPanelWrapper.indePanelRender.Render(ctx);\r\n        }\r\n\r\n        this.pullDownMenuWrapper = new PullDownMenuWrapper(this, 0, 0, this.width, 25);\r\n        this.pullDownCanvas = new UICanvas(this);\r\n        if (this.pullDownCanvas.uiCanvas.style.zIndex) {\r\n            const zIndex = `${((+this.pullDownCanvas.uiCanvas.style.zIndex) + 1)}`;\r\n            if (zIndex) { this.pullDownCanvas.uiCanvas.style.zIndex = zIndex; }\r\n        }\r\n        if (needUI) {\r\n            this.pullDownCanvas.Render = (ctx: CanvasRenderingContext2D) => this.pullDownMenuWrapper.menuRenderer.Render(ctx);\r\n        }\r\n        this.pullDownMenuWrapper.ShowMenu(true);\r\n\r\n    }\r\n    public ShiftTheme(v: string) {\r\n        if (v === 'red') { this.theme.ShiftTheme(this.asset.themeRed); this.themeType = 'red'; return; }\r\n        if (v === 'blue') { this.theme.ShiftTheme(this.asset.themeBlue); this.themeType = 'blue'; return; }\r\n        if (v === 'purple') { this.theme.ShiftTheme(this.asset.themePurple); this.themeType = 'purple'; return; }\r\n        if (v === 'green') { this.theme.ShiftTheme(this.asset.themeGreen); this.themeType = 'green'; return; }\r\n        if (v === 'orange') { this.theme.ShiftTheme(this.asset.themeOrange); this.themeType = 'orange'; return; }\r\n        if (v === 'gray') { this.theme.ShiftTheme(this.asset.themeGray); this.themeType = 'gray'; return; }\r\n        if (v === 'darkGray') { this.theme.ShiftTheme(this.asset.themeDarkgray); this.themeType = 'darkGray'; return; }\r\n        if (v === 'black') { this.theme.ShiftTheme(this.asset.themeBlack); this.themeType = 'black'; return; }\r\n    }\r\n    public MouseInteractionMenu(m: MouseEventData) {\r\n        this.activeCommand.MouseEventController(m);\r\n    }\r\n    public Resize(width: number, height: number) {\r\n        this.indepCanvas.ResizeCanvas(width, height);\r\n        this.independentPanelWrapper.Resize(width, height);\r\n        this.pullDownCanvas.ResizeCanvas(width, height);\r\n        this.pullDownMenuWrapper.Resize(width, height);\r\n    }\r\n    public set stopPropagation(v: boolean) {\r\n        this._stopPropagation = v;\r\n\r\n        if (v) {\r\n            // console.log(v);\r\n            this.BindingStoppropagation(v);\r\n            setTimeout(() => {\r\n                this._stopPropagation = false;\r\n                this.BindingStoppropagation(false);\r\n            }, 500);\r\n        }\r\n    }\r\n    public get stopPropagation() {\r\n        return this._stopPropagation;\r\n    }\r\n    public BindingStoppropagation(v: boolean) {\r\n        //\r\n    }\r\n    public set enablePan(v: boolean) {\r\n        this.BindingEnablePan(v);\r\n    }\r\n    public BindingEnablePan(v: boolean) {\r\n        //\r\n    }\r\n    // tslint:disable-next-line:no-any\r\n    public BindingActiveCommandController(app: string, ac: any) {\r\n        this.pullDownMenuWrapper.BuildMenuContent(app, ac);\r\n    }\r\n    public Destroy() {\r\n        this.indepCanvas.isActive = false;\r\n        this.pullDownCanvas.isActive = false;\r\n    }\r\n}\r\n","import { COMPILE_MODE } from './Enumeration';\r\nexport class AppProperties {\r\n    isStandalone: boolean = false;\r\n    compileMode: COMPILE_MODE = COMPILE_MODE.DEVELOPMENT;\r\n    constructor() {\r\n        //\r\n    }\r\n}","import { NVector3 } from '../../';\r\nexport class CanvasDrawing {\r\n    public static LineByVecs(ctx: CanvasRenderingContext2D, v0: NVector3, v1: NVector3, width: number = 1, fill: string = '#ff0000') {\r\n        ctx.strokeStyle = fill;\r\n        ctx.lineWidth = width;\r\n        ctx.beginPath();\r\n        ctx.moveTo(v0.x, v0.y);\r\n        ctx.lineTo(v1.x, v1.y);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n    }\r\n    public static Line(ctx: CanvasRenderingContext2D, x0: number, y0: number, x1: number, y1: number, width: number = 1, fill: string = '#ff0000') {\r\n        ctx.strokeStyle = fill;\r\n        ctx.lineWidth = width;\r\n        ctx.beginPath();\r\n        ctx.moveTo(x0, y0);\r\n        ctx.lineTo(x1, y1);\r\n        ctx.closePath();\r\n        ctx.stroke();\r\n    }\r\n    public static Point(ctx: CanvasRenderingContext2D, x: number, y: number, r: number = 5, fill: string = '#ff0000') {\r\n        ctx.fillStyle = fill;\r\n        ctx.beginPath();\r\n        ctx.arc(x, y, r, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    }\r\n    public static PointByNVec(ctx: CanvasRenderingContext2D, v: NVector3, r: number = 5, fill: string = '#ff0000') {\r\n        ctx.fillStyle = fill;\r\n        ctx.beginPath();\r\n        ctx.arc(v.x, v.y, r, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    }\r\n    public static PointByNVecAni(ctx: CanvasRenderingContext2D, v: NVector3, r: number = 5, t: number, fill: string = '#ff0000') {\r\n        ctx.fillStyle = fill;\r\n        ctx.beginPath();\r\n        ctx.arc(v.x, v.y, r + (1 + Math.sin(t)) * 2, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    }\r\n\r\n    // .....................................................\r\n    public static GridLineOrigin(ctx: CanvasRenderingContext2D, xNum: number = 10, yNum: number = 10, xOff: number = 20, yOff: number = 20) {\r\n        const xStart = - ((xNum * xOff) * 0.5);\r\n        const yStart = - ((yNum * yOff) * 0.5);\r\n\r\n        ctx.lineWidth = 0.1;\r\n\r\n        for (let y = 0; y <= yNum; ++y) {\r\n            // for (let x = 0; x <= xNum; ++x) {\r\n            //     ctx.beginPath();\r\n            //     ctx.arc(xStart + (xOff * x), yStart + (yOff * y), 1, 0, Math.PI * 2);\r\n            //     ctx.closePath();\r\n            //     ctx.fill();\r\n            // }\r\n            ctx.beginPath();\r\n            ctx.moveTo(xStart, yStart + (yOff * y));\r\n            ctx.lineTo((xNum * xOff) * 0.5, yStart + (yOff * y));\r\n            ctx.closePath();\r\n            ctx.stroke();\r\n\r\n            ctx.beginPath();\r\n            ctx.moveTo(xStart + (xOff * y), yStart);\r\n            ctx.lineTo(yStart + (yOff * y), (yNum * yOff) * 0.5);\r\n            ctx.closePath();\r\n            ctx.stroke();\r\n        }\r\n\r\n    }\r\n    public static GridPointOrigin(ctx: CanvasRenderingContext2D, xNum: number = 10, yNum: number = 10, xOff: number = 20, yOff: number = 20) {\r\n        const xStart = - ((xNum * xOff) * 0.5);\r\n        const yStart = - ((yNum * yOff) * 0.5);\r\n        // console.log(xStart, yStart);\r\n        ctx.lineWidth = 0.1;\r\n\r\n        for (let y = 0; y <= yNum; ++y) {\r\n            for (let x = 0; x <= xNum; ++x) {\r\n                ctx.beginPath();\r\n                ctx.arc(xStart + (xOff * x), yStart + (yOff * y), 1, 0, Math.PI * 2);\r\n                ctx.closePath();\r\n                ctx.fill();\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n    constructor() {\r\n        //\r\n    }\r\n}","export class CanvasLoopController {\r\n    numStopFrame: number;\r\n    private _level: number = -1;\r\n    private _stop: boolean = false;\r\n    private numRender: number = 0;\r\n    constructor(numStopFrame: number) {\r\n        this.numStopFrame = numStopFrame;\r\n    }\r\n    public get stop() {\r\n        return this._stop;\r\n    }\r\n    public set stop(v: boolean) {\r\n        this.numRender = 0;\r\n        this._stop = v;\r\n    }\r\n    public TimerForStop() {\r\n        this.numRender++;\r\n        // console.log(this.numRender);\r\n        if (this.numRender > this.numStopFrame) { this.numRender = 0; this.stop = true; }\r\n    }\r\n    public Reset() {\r\n        this._level = -1;\r\n    }\r\n    public get level() {\r\n        return this._level;\r\n    }\r\n    public set level(v: number) {\r\n        this._level = v;\r\n    }\r\n}"],"names":["IndePanelPreset","static","ctx","vs","r","xOff","fillCol","strokeCol","radius","lineWidth","beginPath","moveTo","x","y","lineTo","arcTo","closePath","strokeStyle","fillStyle","shadowBlur","shadowColor","shadowOffsetY","shadowOffsetX","fill","r0","r1","r2","r3","isShadow","radius0","radius1","radius2","radius3","text","color","save","textBaseline","textAlign","fillText","restore","title","constructor","theme","BodyDiv","zIndex","toString","host","width","height","vec","divAnchor","div","divHost","xOff0","yOff0","xOff1","yOff1","_textAlign","_textCol","_content","this","NVector3","independentPanelWrapper","nUI","GetDivBaseContainer","textCol","v","style","Width","UpdateSize","Height","content","textContent","Hide","Remove","Translate","xo","yo","left","top","HeadHeight","removeChild","document","createElement","position","pointerEvents","id","padding","paddingLeft","wordWrap","overflow","font","fontWeight","lineHeight","appendChild","BtnClose","IndePanelBase","indePanelBase","super","MouseDown","stopPropagation","RenderPost","RenderTitle","isOver","BtnHam","HasSubMenu","MouseDrag","e","Move","theHeight","stroke","BtnMinimize","IsMinimized","isMinimized","rect","BtnResize","cUI","isMoveable","preX","preY","xx","yy","minWidth","minHeight","ResizePropagation","i","boundarVecs","length","isHidden","IndeSubMenu","indeSubPanel","independentPanel","list","strings","stringSlice","index","textHeight","TranslateByXY","divInput","value","BindingMouseDownPost","ExecuteCommand","IsHover","colBG","colSelectedBG","FragmentText","slice","maxWidth","words","split","lines","line","measureText","tmp","splice","shift","push","IndeSubPanel","yOff","Add","IsHidden","divID","hasSubMenu","isSelected","filletR","colorBase","colorOver","colorText","isRender","transparent","colorTop","indePanelRender","setTopColorTheme","asset","themeBlack","themeDarkgray","themeGray","themeOrange","themeGreen","themePurple","themeBlue","themeRed","RemovePost","DeepCopy","Dummy","IsSelected","GetBoundaryVecs","theWidth","v0","v1","ComputeBoundary","z","ComputeBoundaryHead","ComputeBoundaryPanel","IsMouseInside","IsMouseInsidePanel","HideToogle","console","log","MouseUp","MouseDouble","MouseRight","Render","long","lat","ele","proX","proY","proZ","out","a","b","lats","longs","latsSum","longSum","curAng","curLat","curLon","latOrigin","lonOrigin","angles","Array","j","Math","abs","atan","PI","l","k","sum1","sum2","t","s","v2","toFixed","sqrt","len","area","dis","Number","MAX_SAFE_INTEGER","distance","Distance","n","zOff","gV0","gV1","dLat","dLon","sin","cos","atan2","long0","lat0","long1","lat1","KMeterFromGeoGPSPos","addition","KMeterFromGPSPos","lng","Get1KM_Long_ByGeoUnit","la","Get1KM_lat_ByGeoUnit","pt","attractor","strength","falloff","dist","Sub","Length","exp","Unitize","Mult","Explosion","rotor","Origin","DotProduct","Normalize","acos","GetCosAngleByTwoVectors","GetAngleByTwoVectorsRadian","origin","GetAngleByTwoVectors","dot","cp","GetCenterVecFromVecs","m","boundary","GetBoundingVecs","GetCloseVec","p0","p1","vecsBound","OnLine","pp1","IsInsideOfVecs","listOfVec","nv0","nv1","boundarVecsSub","xMin","yMin","zMin","xMax","MIN_SAFE_INTEGER","yMax","zMax","minX","MAX_VALUE","minY","minZ","maxX","MIN_VALUE","maxY","maxZ","tor","vecs","d","inside","mv","tv","p","q","val","max","min","q1","p2","q2","o1","orientation","o2","o3","o4","onSegment","xi","yi","xj","yj","w","h","ConvexHull","sort","lower","Cross","pop","upper","O","A","B","ax","ay","az","bx","by","bz","CheckLineIntersection","p3","denominator","numerator1","numerator2","onLine0","onLine1","result","u","res","newres","dir","temp","MoveVec","angle","cptToLocal","cptToWorld","MoveVecs","RotateVecs","RotateVec","nv","c","newVes","eps","v3","isNaN","between","alt","isModified","isVisited","parent","Set","Scale","DivByVal","DivByVec","Negate","Equals","Clone","other","IsOverlap","DistanceByArray","Distance2","CrossProduct","SquareLength","FadeExp","attr","dVal","GetAngle","GetAngleDegree","ToJSON","ToString","ToFloat32Array","Float32Array","COLORBLENDING","COLOR_HEX","ColorUtility","num","modeListGL","g","vis","visibility","toHex","decimalValue","places","undefined","hex","next","hexidecimal","floor","hi","f","round","RGBToHex","random","map","join","thecol","isGray","replace","parseInt","substring","substr","toUpperCase","lightness","rgb","HexToRGBANormalized","hsl","RGB2HSL","HSL2RGB","visiblity","col","L","pow","R","G","labA","labB","deltaL","deltaA","deltaB","c1","deltaC","deltaH","deltaLKlsl","deltaCkcsc","deltaHkhsh","threshold","high","low","hue2rgb","pp","qq","colA","colB","factor","cA","cB","steps","step","interpolatedColors","InterpolateColor","rgb0","rgb1","RBGToArray","match","vA","vB","blend","HexToRGBA","hsv","RGB2HSV","HSVtoRGB","brightness","contrast","lut","adjust","img","imgOut","ImageData","BrightnessContrastLUT","data","Hue","Saturation","Lightness","hls","Threshold","gray","modeList","ColorPreset","shadow","UNIT_LENGTH","UNIT","MathUtility","series","range","theStep","CValue","valueOut","domain","GetDomain","OldMin","OldMax","NewMin","NewMax","Remap","doubleList","Min","Max","indices","originWidth","originHeight","newWidth","newHeight","lon1","lat2","lon2","meter","from","to","NANOMETER","MICROMETER","MILLIMETER","CENTIMETER","METER","INCH","FOOT","YARD","MILE","KILOMETER","unitLength","degrees","radians","total","GetRandomIntInclusive","array","Date","getTime","edge1","edge2","x0","y0","x1","y1","px","py","dx","dy","before","after","atPoint","fitCount","newData","springFactor","ceil","LinearInterpolate","circumference","DEG2RAD","RAD2DEG","GeometryBase","NLine","lns","ln","others","newLns","nLns","over","DistanceToPoint","aa","bb","PointCloseToLine","GetLog","Error","NVectorUtility","xNum","yNum","vertexs","xd","yd","theY","theX","zNum","z0","z1","zd","zi","theZ","xInterval","yInterval","minV","maxV","ln0","xs","ys","circleVer","iter","zo","zz","pts","start","end","sAngle","eAngle","xInteral","yInteral","offset","theta","phi","goePos","zElevation","scaleZ","zVal","nVecs","GetPoint3dProjectedToGlobeByVec","elevation","NumericalMotion","t1","scaledTime","scaledTime1","magnitude","scaledTime2","asin","easeOutBounce","easeInBounce","Deltatime","now","delta","frameRate","last","timeLastRender","msLoop","UpdateFPS","window","performance","dt","APPS","ADDONS","ACTIVECOMMAND_MODE_N3D","ML_MODEL_TYPE","ACTIVE_SKETCH_MODE","PROJECTION_TYPE","ACTIVECOMMAND_MODE","GTYPE","CURSOR","X_GTYPE","ACTION_TYPE","TEXTALIGN","TEXTBOX","LINECAP","FHTYPE","OPTIMIZER","VIDEO_SIZE","GRAPHIC_MODE","CLOGTYPE","COMPILE_MODE","INTERACTION_MODE","RENDER_MODE","BROWSER_TYPE","PRESS_TYPE","CLICK_TYPE","TOUCH_TYPE","EVENT_LISTENER_TYPE","CAMERA_TYPE_THREE","MAPFILTER_MODE","MouseEventData","preZ","yGLPicking","command","isDown","isDoubleClick","isMove","pressedShift","pressedAlt","pressedCtrl","wheel","preWheel","native","mEvent","TouchEventData","MOVE","identifier","radiusX","radiusY","rotationAngle","force","TouchEventDataList","eventList","Build","tType","touches","tEvent","clientX","clientY","ColorForTouch","touch","TouchInteraction","type","touchEventDataPre","isEnable","click","prevent","delay","timer","down","preEvent","InitNativeTouchEvent","ontouchstart","CommonEventBuilder","START","TouchEventEmittingBinding","ontouchend","END","ontouchmove","ontouchcancel","CANCEL","mouseEventData","Camera","video","canvas","mediaStream","hostDiv","clientWidth","clientHeight","InitVideo","InitMedia","SetSizeFromTemplate","size","InitCanvas","getContext","setAttribute","filter","constraints","facingMode","audio","HasGetUserMedia","navigator","mediaDevices","getUserMedia","then","stream","srcObject","alert","GetImageData","drawImage","frame","getImageData","Resize","Dispose","getTracks","forEach","track","stop","FILTERS","NJSLoader","url","fetch","response","catch","err","path","mode","json","file","blob","Image","objectURL","URL","createObjectURL","src","onload","crossOrigin","parser","DOMParser","xml","parseFromString","XmlToJson","obj","nodeType","attribute","item","nodeName","nodeValue","hasChildNodes","childNodes","old","BrowserUtility","location","search","queryString","arr","paramName","paramValue","toLowerCase","key","exec","_type","_isMobile","DetectBrowser","DetectIsMoile","userAgent","indexOf","OPERA","IE","UNKNOWN","FIREFOX","SAFARI","CHROME","EDGE","test","isMobile","Print","isPrint","Describe","count","mean","sum","median","variance","STD","StatisticsUtility","Mean","Sum","Median","Variance","StandardDeviation","Average","nn","SortAscending","half","bin","bins","interval","maxNum","NGeoJSON","geometryGeoJson","propertiesGeoJson","Object","keys","theData","geometry","properties","needIndex","dSet","theIndex","objKey","subKey","theItem","dJson","dMat","dHist","dDescribe","dT","dA","dB","dC","dD","dE","dF","GetDataWithIndexFromGeoJson","GetDescribeByCol","GetHistByCol","GetColbyIndex","GetDataByIndex","colIndex","DescribeNumeric","numBin","GetDataForHistDataFromNumeric","geoJsonGeoType","NGeoJSONPolygon","posLn","GetPTFloat32Array","isArray","ddd","NGeoJSONFeatureService","arrayVis","Init","ConvertTime","ComputeTimelineIndex","indexArray","ComputeArrayVis","o","minYear","maxYear","dateArray","date","toLocaleDateString","timeLineIndex","Pixel","ID","norV","nPix","recVec","GetID","Update","ANODE_TYPE","DataPixel","pMap","bVec","isGetData","GetData","SumDataByNPix","DataPixelMap","listPixel","rx","ry","ddx","ddy","offScale","minData","maxData","ComputeMinMaxPos","InitGrid","InitGridNeighbor","PushDataToPixel","ComputeMinMaxValue","debug","px0","ComputePixelOff","cv","GetPixelAtPoint","geoPt","pixelMap","dp","GetDataAtPoint","GetDataAtByVecs","ForwardPropagation","pixs","currentP","np","LogUpdate","Query","onDocumentMouseMove","onmouseenter","VisMeshGrid","VisCenterPoints","UpdatePost","require","Asset","ImportAssets","async","ActiveCommand","MouseEventController","MouseUpPre","MouseWheelPre","MouseDownPre","MouseDragPre","MouseMovePre","MouseDoubleClickPre","MouseRightClickPre","MouseMiddleClickPre","MouseLeftClickPre","pullDownMenuWrapper","MouseLeftClick","MouseMiddleClick","MouseRightClick","MouseDoubleClick","MouseMove","MouseWheel","ControllerTheme","colSection","colText","colTextHover","colTextDisable","colSelectedText","widthEach","heightEach","textYOff","animationSpeed","toolbarBG","toolbarFG","ShiftTheme","ThemePulldown","MenuRenderer","menus","capture","captureFlyout","isShow","isActivated","isStillCapturedFly","RemoveAll","Capture","isCaptured","ShowMenu","Reset","isHover","ClickForStopPropagation","UIWrapperBase","IsHiddenToggle","Destroy","MenuBase","vecSub","isHide","menuRenderer","MenuBar","MenuPreset","offY","MenuCommon","ac","heightSub","widthSub","isClick","AddApp","RoundedRectFill","textOffX","textOffY","RoundedRectFillWithCol","AddMenu","subMenu","fn","SubMenuIconCommon","menu","isClickable","MouseInside","MouseDownPost","mouse","EaseOutQuad","SubMenuCommonSection","SectionLine","SubMenuIconFlyCommon","SubMenuCommonFly","MenuNCanvas","AppendCommand","bar","numInterval","numSubInterval","mFly","subM","SubMenuIconFlyCommonSection","MenuNCanvasVisualization","ShfitScene","LoadDefinition","activeCommand","AboutAnnotation","MenuNCreativeCoding","MenuNDrawingBlock","MenuNImage","AboutNImage","OpenImg","MenuNAlgorithmEnv","MenuNTFCustom","projectMLProject","projectMLProjectNumSubInterval","projectTFProject","projectTFProjectNumSubInterval","action","MenuNJSLabCoreSandbox","PullDownMenuWrapper","menuOff","menuTemp","BuildMenuPre","BuildMenuContent","app","RemoveMenu","IndePanelRender","RemoveAllCapturedBlock","CheckOvered","mouseHoverUI","FindAtPoint","ui","enablePan","IndependentPanel","divNeeded","btnClose","btnMini","btnHam","btnResize","bodyDiv","subs","InitTop","off","RenderHeadTitle","RenderBodyContent","RenderBtnHorizontal","AboutWhatisTheProduct","AboutApps","AboutViewer","AboutDrawingTool","AboutNSketch","AboutMapfilter","AboutWallPaperGL","AboutNLearning","AboutSmartDrawing","AboutVoiceController","AboutMapticon","AboutBlock","AboutNGlobe","AboutNTerrain","ABoutNDynamics","ABoutNRhino3d","AboutVisCanvas","AboutVisGL","AboutVisGL3D","AboutVRAR","AboutGL3d","AboutNWallpaper","AboutNMedia","IndependentPanelWrapper","UICanvas","uiCanvas","isActive","ResizeCanvas","className","Loop","requestAnimationFrame","clearRect","NUI","needUI","themeType","indepCanvas","pullDownCanvas","_stopPropagation","MouseInteractionMenu","BindingStoppropagation","setTimeout","BindingEnablePan","BindingActiveCommandController","AppProperties","isStandalone","compileMode","DEVELOPMENT","CanvasDrawing","arc","xStart","yStart","CanvasLoopController","numStopFrame","_level","_stop","numRender","TimerForStop","level"],"sourceRoot":""}