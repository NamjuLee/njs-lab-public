"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[9477],{49477:function(t,e,n){n.r(e),n.d(e,{Solution:function(){return g}});var a=n(15671),i=n(43144),r=n(74165),s=n(15861),o=n(88859),h=n(19559),c=n(87968),d=function(){function t(e){var n=this;(0,a.Z)(this,t),this.host=void 0,this.mobile=!1,this.imgMask=void 0,this.img=void 0,this.mobile=function(){var t=/Android/i.test(navigator.userAgent),e=/iPhone|iPad|iPod/i.test(navigator.userAgent);return t||e}(),this.host=document.getElementById(e),(0,c.getImgFromURL)("https://raw.githubusercontent.com/NamjuLee/data/master/img/smile.png").then((function(t){n.imgMask=t,(0,c.getImgFromURL)("https://raw.githubusercontent.com/NamjuLee/data/master/img/person/Haram_small.jpg").then((function(t){var e=document.createElement("div");e.style.padding="5px",e.style.display="flex",n.host.append(e);var a=document.createElement("canvas");e.append(a);var i=a.getContext("2d"),r=document.createElement("canvas");e.append(r),r.id="canvas-out";var s=r.getContext("2d");t.onload=function(){t.style.width="50%",a.width=t.width,a.height=t.height,r.width=t.width,r.height=t.height,i.drawImage(t,0,0),n.init(s,t)}})),(0,c.getImgFromURL)("https://raw.githubusercontent.com/NamjuLee/data/master/img/person/HaminHaram_01_small.jpg").then((function(t){var e=document.createElement("div");e.style.display="flex",e.style.padding="5px",n.host.append(e);var a=document.createElement("canvas");e.append(a);var i=a.getContext("2d"),r=document.createElement("canvas");e.append(r),r.id="canvas-out";var s=r.getContext("2d");t.onload=function(){t.style.width="50%",a.width=t.width,a.height=t.height,r.width=t.width,r.height=t.height,i.drawImage(t,0,0),n.init(s,t)}}))}))}return(0,i.Z)(t,[{key:"init",value:function(){var t=(0,s.Z)((0,r.Z)().mark((function t(e,n){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(e,n,this.mobile,this.imgMask);case 2:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()}]),t}(),u=function(){var t=(0,s.Z)((0,r.Z)().mark((function t(e,n,a,i){var s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(o.setBackend),t.next=3,o.setBackend("webgl");case 3:return t.next=5,h.z({maxFaces:200});case 5:s=t.sent,m(s,e,n,i);case 7:case"end":return t.stop()}}),t)})));return function(e,n,a,i){return t.apply(this,arguments)}}(),m=function(){var t=(0,s.Z)((0,r.Z)().mark((function t(e,n,a,i){var s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.estimateFaces(a,!1);case 2:(s=t.sent)[0]&&(n.drawImage(a,0,0,a.width,a.height,0,0,n.canvas.width,n.canvas.height),s.length>0&&s.forEach((function(t){var e=t.scaledMesh;n.fillStyle="#ff0000";var a=e[159][0],r=e[145][1]+.5*(e[159][1]-e[145][1]),s=e[386][0],o=e[374][1]+.5*(e[386][1]-e[374][1]),h=e[13][0],c=e[13][1]+.5*(e[14][1]-e[13][1]),d=l(a,r,s,o);n.save(),n.translate(h,c-.6*(c-o)),n.rotate(-d-.5*Math.PI),n.scale((s-a)/130,(r-c)/130),void 0!==i&&n.drawImage(i,-150,-150),n.lineWidth=1,n.beginPath(),n.rect(-150,-150,300,300),n.closePath(),n.beginPath(),n.arc(0,0,100,0,2*Math.PI),n.restore()})));case 4:case"end":return t.stop()}}),t)})));return function(e,n,a,i){return t.apply(this,arguments)}}(),l=function(t,e,n,a){return Math.atan2(n-t,a-e)},g=(n(64355),function(){function t(e){(0,a.Z)(this,t),this.divHost=void 0,this.divHost=document.getElementById(e),new d(this.divHost.id)}return(0,i.Z)(t,[{key:"destroy",value:function(){for(;this.divHost.lastElementChild;)this.divHost.removeChild(this.divHost.lastElementChild)}}]),t}())}}]);
//# sourceMappingURL=9477.2420c47a.chunk.js.map