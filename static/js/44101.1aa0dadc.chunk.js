"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[44101,75975],{97795:(e,i,s)=>{s.r(i),s.d(i,{DefinitionIndeCanvasCore:()=>n});var t=s(12850);class n{constructor(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:650,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:350;this.scene=void 0,this.indeCanvas=void 0,this.mOffX=-12,this.mOffY=-12,this.scene=e,this.scene.definitions.push(this),this.InitIndeCanvas(i,s)}InitIndeCanvas(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:650,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:350;this.scene.implementation.app.needUI?this.indeCanvas=new t.D(this.scene.implementation.app.viewController.NUIWrapper.NUI.independentPanelWrapper,50,50,e,i,!0):this.indeCanvas=new t.D(this.scene.implementation.app.viewController.NUIWrapper.NUI.independentPanelWrapper,1,-25,e,i,!0),this.indeCanvas.title="TF Env",this.indeCanvas.btnHam.isHidden=!0,this.indeCanvas.btnMini.isHidden=!0,this.indeCanvas.RenderIndependentCanvas=e=>this.RenderIndependentCanvas(e)}get width(){return this.indeCanvas.canvas.width}get height(){return this.indeCanvas.canvas.height}Init(e){}RenderIndependentCanvas(e){}MouseMove(e,i){}MouseMovePre(e,i){this.indeCanvas.IsMouseInsidePanel(e,i)&&this.MouseMove(e-this.indeCanvas.vec.x+this.mOffX,i-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseDown(e,i){}MouseDownPre(e,i){this.indeCanvas.IsMouseInsidePanel(e,i)&&this.MouseDown(e-this.indeCanvas.vec.x+this.mOffX,i-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseUp(e,i){}MouseUpPre(e,i){this.indeCanvas.IsMouseInsidePanel(e,i)&&this.MouseUp(e-this.indeCanvas.vec.x+this.mOffX,i-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseDrag(e,i){}MouseDragPre(e,i){this.indeCanvas.IsMouseInsidePanel(e,i)&&this.MouseDrag(e-this.indeCanvas.vec.x+this.mOffX,i-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseLeftClick(e,i){}MouseLeftClickPre(e,i){this.indeCanvas.IsMouseInsidePanel(e,i)&&this.MouseLeftClick(e-this.indeCanvas.vec.x+this.mOffX,i-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseMiddleClick(e,i){}MouseMiddleClickPre(e,i){this.indeCanvas.IsMouseInsidePanel(e,i)&&this.MouseMiddleClick(e-this.indeCanvas.vec.x+this.mOffX,i-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseRightClick(e,i){}MouseRightClickPre(e,i){this.indeCanvas.IsMouseInsidePanel(e,i)&&this.MouseRightClick(e-this.indeCanvas.vec.x+this.mOffX,i-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseDoubleClick(e,i){}MouseDoubleClickPre(e,i){this.indeCanvas.IsMouseInsidePanel(e,i)&&this.MouseDoubleClick(e-this.indeCanvas.vec.x+this.mOffX,i-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseWheel(e,i,s){}MouseWheelPre(e,i,s){this.indeCanvas.IsMouseInsidePanel(e,i)&&this.MouseWheel(e-this.indeCanvas.vec.x+this.mOffX,i-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY,s)}}},44101:(e,i,s)=>{s.r(i),s.d(i,{TFModel01HorsepowerAndMilesPerGallon:()=>l,convertToTensor:()=>r,createModel:()=>d});var t=s(65812),n=s(30386),a=s(97795),h=s(75975),o=s(83797);class l extends a.DefinitionIndeCanvasCore{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:650,arguments.length>2&&void 0!==arguments[2]?arguments[2]:350),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.vs=[],this.selVec=void 0,this.indeCanvas.title="TF Horsepower and Miles Per Gallon",this.Init()}Init(){o.fK.getData().then((e=>{this.train(e)}))}async train(e){const i=r(e),{inputs:s,labels:a}=i,h=d();n.show.modelSummary({name:"Model Summary"},h),await async function(e,i,s){e.compile({optimizer:t.train.adam(),loss:t.losses.meanSquaredError,metrics:["mse"]});const a=32,h=50;return await e.fit(i,s,{batchSize:a,epochs:h,shuffle:!0,callbacks:n.show.fitCallbacks({name:"Training Performance"},["loss","mse"],{height:200,callbacks:["onEpochEnd"]})})}(h,s,a),function(e,i,s){const{inputMax:a,inputMin:h,labelMin:o,labelMax:l}=s,[d,r]=t.tidy((()=>{const i=t.linspace(0,1,100),s=e.predict(i.reshape([100,1])),n=i.mul(a.sub(h)).add(h),d=s.mul(l.sub(o)).add(o);return[n.dataSync(),d.dataSync()]})),c=Array.from(d).map(((e,i)=>({x:e,y:r[i]}))),v=i.map((e=>({x:e.horsepower,y:e.mpg})));n.render.scatterplot({name:"Model Predictions vs Original Data"},{values:[v,c],series:["original","predicted"]},{xLabel:"Horsepower",yLabel:"MPG",height:300})}(h,e,i)}MouseDown(e,i){const s=new h.NVector3(this.MapX(e),this.MapY(i));for(let t=0;t<this.vs.length;++t)if(h.NVector3.Distance(s,this.vs[t])<.05)return void(this.selVec=this.vs[t]);this.vs.push(new h.NVector3(this.MapX(e),this.MapY(i)))}MouseDoubleClick(){}MouseMove(e,i){let s;const t=new h.NVector3(this.MapX(e),this.MapY(i));for(let n=0;n<this.vs.length;++n){h.NVector3.Distance(t,this.vs[n])<.05&&(s=this.vs[n])}this.selVec=s||void 0}MouseDrag(e,i){this.selVec&&(this.selVec.x=this.MapX(e),this.selVec.y=this.MapY(i))}MouseUp(){this.selVec=void 0}MapX(e){return h.MathUtility.Remap(e,0,this.width,-1,1)}MapY(e){return h.MathUtility.Remap(e,0,this.height,1,-1)}GridLine(e){e.strokeStyle="#555555";const i=this.width/20-1,s=this.height/20-1;for(let t=0;t<20;t+=1){e.lineWidth=10===t?3:1;let n=i*t,a=0,h=n,o=this.height;e.beginPath(),e.moveTo(n,a),e.lineTo(h,o),e.stroke(),n=0,a=s*t,h=this.width,o=a,e.beginPath(),e.moveTo(n,a),e.lineTo(h,o),e.stroke()}}RenderIndependentCanvas(e){if(e.fillStyle="#000000",e.beginPath(),e.rect(0,0,e.canvas.width,e.canvas.height),e.closePath(),e.fill(),this.GridLine(e),this.vs.length>1){const i=[],s=[];for(let e=0;e<this.vs.length;++e)i.push(this.vs[e].x),s.push(this.vs[e].y);this.RenderLine(e)}e.fillStyle="#00ff00";for(let i=0;i<this.vs.length;++i)e.beginPath(),e.arc(h.MathUtility.Remap(this.vs[i].x,-1,1,0,this.width),h.MathUtility.Remap(this.vs[i].y,-1,1,this.height,0),5,0,2*Math.PI),e.closePath(),e.fill();this.selVec&&(e.fillStyle="#ffffff",e.font="15px Arial",e.textAlign="center",e.fillText("x:".concat(this.selVec.x.toFixed(3),", y").concat(this.selVec.y.toFixed(3)),h.MathUtility.Remap(this.selVec.x,-1,1,0,this.width),h.MathUtility.Remap(this.selVec.y,-1,1,this.height,0)-9))}RenderLine(e){const i=[];for(let s=-1;s<=1;s+=.05)i.push(s)}}const d=()=>{const e=t.sequential();return e.add(t.layers.dense({inputShape:[1],units:16,useBias:!0})),e.add(t.layers.dense({units:1,useBias:!0})),e},r=e=>t.tidy((()=>{t.util.shuffle(e);const i=e.map((e=>e.horsepower)),s=e.map((e=>e.mpg)),n=t.tensor2d(i,[i.length,1]),a=t.tensor2d(s,[s.length,1]),h=n.max(),o=n.min(),l=a.max(),d=a.min();return{inputs:n.sub(o).div(h.sub(o)),labels:a.sub(d).div(l.sub(d)),inputMax:h,inputMin:o,labelMax:l,labelMin:d}}))},75975:(e,i,s)=>{s.r(i),s.d(i,{ACTION_TYPE:()=>t.KW,ACTIVECOMMAND_MODE:()=>t.AG,ActiveCommandBase:()=>t.wm,AppAccessibility:()=>t.Wv,AppProperties:()=>t.gj,ArrayUtility:()=>t.R3,BrowserUtility:()=>t.R7,CLICK_TYPE:()=>t.uh,CLOGTYPE:()=>t.g6,COMPILE_MODE:()=>t.Iq,ColorUtility:()=>t.mK,Deltatime:()=>t.gk,EVENT_LISTENER_TYPE:()=>t.GZ,FHTYPE:()=>t.OH,GTYPE:()=>t.OB,GeometryBase:()=>t.bx,INTERACTION_MODE:()=>t.WU,LINECAP:()=>t.EQ,MathUtility:()=>t.$H,NDataUtility:()=>t.eu,NUI:()=>t.Fc,NVector3:()=>t.h9,NumericalMotion:()=>t.aX,OPTIMIZER:()=>t.sg,PRESS_TYPE:()=>t.dc,TEXTALIGN:()=>t.mH,TEXTBOX:()=>t.SE,TOUCH_TYPE:()=>t.KV,UNIT:()=>t.iI});var t=s(4842)}}]);
//# sourceMappingURL=44101.1aa0dadc.chunk.js.map