"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[4858],{85610:function(t,i,e){e.d(i,{h:function(){return o},z:function(){return r}});var n=e(39880);const r=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1];const o=n.Ue(),s=n.Ue(),a=n.Ue(),h=n.Ue(),u=n.Ue();n.vc(h,i),n.aC(o,e[0]),n.gT(s,e[1]),n.QO(a,e[2]),n.xJ(u,r),n.Jp(t,o,u),n.Jp(t,s,t),n.Jp(t,a,t),n.Jp(t,h,t)},o=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[2,2,4],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,1,0];const o=n.Ue(),s=n.Ue(),a=n.Ue();n.G3(s,2*Math.PI/5,t,.1,100),n.zB(o,i,e,r),n.Jp(a,s,o);return{viewMatrix:o,projectionMatrix:s,viewProjectionMatrix:a,cameraOption:{eye:i,center:e,zoomMax:100,zoomSpeed:2}}}},94858:function(t,i,e){e.r(i),e.d(i,{Solution:function(){return M}});var n=e(88679);const r=function(t,i,e){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0,0];const o=Math.sin(i*Math.PI/180),s=Math.cos(i*Math.PI/180),a=Math.sin(e*Math.PI/180),h=Math.cos(e*Math.PI/180);return n.al(t*o*h+r[0],t*s+r[1],-t*o*a+r[2])},o=function(t,i,e){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0,0];if(i<2||e<2)return;let o,s=[];for(let c=0;c<i;c++){let a=[];for(let s=0;s<e;s++)o=r(t,180*c/(i-1),360*s/(e-1),n),a.push(o);s.push(a)}let a,h,u,f=[];for(let r=0;r<i-1;r++)for(let t=0;t<e-1;t++)a=s[r][t],h=s[r+1][t],u=s[r][t+1],f.push([a[0],a[1],a[2],h[0],h[1],h[2],a[0],a[1],a[2],u[0],u[1],u[2]]);return new Float32Array(f.flat())},s=function(t,i,e,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0,0];if(n<2||t>=i)return;let o=[],s=e/2;for(let M=0;M<n;M++)o.push([a(i,360*M/(n-1),s,r),a(i,360*M/(n-1),-s,r),a(t,360*M/(n-1),-s,r),a(t,360*M/(n-1),s,r)]);let h,u,f,c,v,d,l,p,m=[];for(let a=0;a<n-1;a++)h=o[a][0],u=o[a][1],f=o[a][2],c=o[a][3],v=o[a+1][0],d=o[a+1][1],l=o[a+1][2],p=o[a+1][3],m.push([h[0],h[1],h[2],c[0],c[1],c[2],c[0],c[1],c[2],p[0],p[1],p[2],v[0],v[1],v[2],h[0],h[1],h[2],u[0],u[1],u[2],f[0],f[1],f[2],f[0],f[1],f[2],l[0],l[1],l[2],d[0],d[1],d[2],u[0],u[1],u[2],h[0],h[1],h[2],u[0],u[1],u[2],c[0],c[1],c[2],f[0],f[1],f[2]]);return new Float32Array(m.flat())},a=function(t,i,e){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0,0],o=Math.sin(i*Math.PI/180),s=Math.cos(i*Math.PI/180);return n.al(t*s+r[0],e+r[1],-t*o+r[2])},h=function(t,i,e,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0,0];if(n<2)return;let o=[],s=e/2;for(let p=0;p<n+1;p++)o.push([u(t,360*p/(n-1),s,r),u(i,360*p/(n-1),-s,r),u(0,360*p/(n-1),-s,r),u(0,360*p/(n-1),s,r)]);let a,h,f,c,v,d,l=[];for(let u=0;u<n-1;u++)a=o[u][0],h=o[u][1],f=o[u][2],c=o[u][3],v=o[u+1][0],d=o[u+1][1],l.push([a[0],a[1],a[2],c[0],c[1],c[2],v[0],v[1],v[2],a[0],a[1],a[2],h[0],h[1],h[2],f[0],f[1],f[2],d[0],d[1],d[2],h[0],h[1],h[2],a[0],a[1],a[2],h[0],h[1],h[2]]);return new Float32Array(l.flat())},u=function(t,i,e){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0,0],o=Math.sin(i*Math.PI/180),s=Math.cos(i*Math.PI/180);return n.al(t*s+r[0],e+r[1],-t*o+r[2])},f=function(t,i,e,n){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0,0];if(n<2||e<2)return;let o,s=[];for(let d=0;d<e;d++){let a=[];for(let s=0;s<n;s++)o=c(t,i,360*d/(e-1),360*s/(n-1),r),a.push(o);s.push(a)}let a,h,u,f,v=[];for(let c=0;c<e-1;c++)for(let t=0;t<n-1;t++)a=s[c][t],h=s[c+1][t],u=s[c+1][t+1],f=s[c][t+1],v.push([a[0],a[1],a[2],h[0],h[1],h[2],f[0],f[1],f[2],a[0],a[1],a[2]]);return new Float32Array(v.flat())},c=function(t,i,e,r){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[0,0,0],s=Math.sin(e*Math.PI/180),a=Math.cos(e*Math.PI/180),h=Math.sin(r*Math.PI/180),u=Math.cos(r*Math.PI/180);return n.al((t+i*u)*a+o[0],i*h+o[1],-(t+i*u)*s+o[2])};var v=e(39880),d=e(85610);function l(t){return t*Math.PI/180}class p{constructor(t,i,e){this.position=void 0,this.eulers=void 0,this.view=void 0,this.forwards=void 0,this.right=void 0,this.up=void 0,this.position=t,this.eulers=[0,e,i],this.forwards=n.Ue(),this.right=n.Ue(),this.up=n.Ue(),console.log(this.up)}update(){this.position[0]+=-.01,this.forwards=[Math.cos(l(this.eulers[2]))*Math.cos(l(this.eulers[1])),Math.sin(l(this.eulers[2]))*Math.cos(l(this.eulers[1])),Math.sin(l(this.eulers[1]))],n.kC(this.right,this.forwards,[0,1,0]),n.kC(this.up,this.right,this.forwards);var t=n.Ue();n.IH(t,this.position,this.forwards),this.view=v.Ue(),v.zB(this.view,this.position,t,this.up)}get_view(){return this.view}}class m{constructor(t){this.solution=void 0,this.canvas=void 0,this.modelMatrix=void 0,this.mvpMatrix=void 0,this.vMatrix=void 0,this.vpMatrix=void 0,this.rotation=n.al(0,0,0),this.translation=n.al(0,0,0),this.camera=void 0,this.vp=void 0,this.solution=t,this.canvas=t.canvas,this.modelMatrix=v.Ue(),this.mvpMatrix=v.Ue(),this.vMatrix=v.Ue(),this.vpMatrix=v.Ue(),this.vp=(0,d.h)(this.canvas.width/this.canvas.height),this.vpMatrix=this.vp.viewProjectionMatrix,this.camera=new p([-5,0,0],1,1)}update(){this.camera.update();const t=this.vp.projectionMatrix;this.vMatrix=this.camera.view,v.Jp(this.vpMatrix,t,this.vMatrix),(0,d.z)(this.modelMatrix,this.translation,this.rotation),v.Jp(this.mvpMatrix,this.vpMatrix,this.modelMatrix)}}class M{constructor(t){this.divHost=void 0,this.canvas=void 0,this.ctx=void 0,this.device=void 0,this.format=void 0,this.size=void 0,this.pipeline=void 0,this.isAnimation=!0,this.camera=void 0,this.uniformBuffer=void 0,this.uniformBindGroup=void 0,this.textureView=void 0,this.depthTexture=void 0,this.renderPassDescription=void 0,this.numberOfVertices=void 0,this.vertexBuffer=void 0,this.colorBuffer=void 0,this.rotation=n.al(0,0,0),this.requestAni=void 0,this.loop=()=>{this.isAnimation?(this.rotation[0]+=.01,this.rotation[1]+=.01,this.rotation[2]+=.01):this.rotation=[0,0,0],this.drawing(),this.isAnimation&&(this.requestAni=requestAnimationFrame(this.loop))},this.divHost=document.getElementById(t),this.canvas=document.createElement("canvas"),this.divHost.appendChild(this.canvas),this.initWebGPU()}async initWebGPU(){if(!navigator.gpu)throw new Error("Not Support WebGPU");const t=await navigator.gpu.requestAdapter({powerPreference:"high-performance"});if(!t)throw new Error("No Adapter Found");const i=await t.requestDevice();this.ctx=this.canvas.getContext("webgpu");const e=navigator.gpu.getPreferredCanvasFormat?navigator.gpu.getPreferredCanvasFormat():this.ctx.getPreferredFormat(t);window.devicePixelRatio;this.canvas.width=this.divHost.clientWidth,this.canvas.height=this.divHost.clientHeight,this.ctx.configure({device:i,format:e,alphaMode:"opaque"}),this.size={width:this.canvas.width,height:this.canvas.height},this.device=i,this.format=e,this.camera=new m(this),this.initPipeline(this.device,this.format)}async initPipeline(t,i){let e={shader:{vertex:"\n        struct Uniforms {\n            mvpMatrix : mat4x4<f32>,\n        };\n        @binding(0) @group(0) var<uniform> uniforms : Uniforms;\n        \n        @vertex\n        fn main(@location(0) pos: vec4<f32>) ->  @builtin(position) vec4<f32> {\n            return uniforms.mvpMatrix * pos;     \n        }",fragment:"\n        @fragment\n        fn main() -> @location(0) vec4<f32> {\n            return vec4<f32>(1.0, 0.0, 0.0, 1.0);            \n        }"},vertex:f(2,.75,50,20,[0,0,0])};Math.random()>.8?e={shader:{vertex:"\n        struct Uniforms {\n            mvpMatrix : mat4x4<f32>,\n        };\n        @binding(0) @group(0) var<uniform> uniforms : Uniforms;\n        \n        @vertex\n        fn main(@location(0) pos: vec4<f32>) ->  @builtin(position) vec4<f32> {\n            return uniforms.mvpMatrix * pos;     \n        }",fragment:"\n        @fragment\n        fn main() -> @location(0) vec4<f32> {\n            return vec4<f32>(1.0, 1.0, 0.0, 1.0);            \n        }"},vertex:o(1,20,20,[0,0,0])}:Math.random()<.2?e={shader:{vertex:"\n        struct Uniforms {\n            mvpMatrix : mat4x4<f32>,\n        };\n        @binding(0) @group(0) var<uniform> uniforms : Uniforms;\n        \n        @vertex\n        fn main(@location(0) pos: vec4<f32>) ->  @builtin(position) vec4<f32> {\n            return uniforms.mvpMatrix * pos;     \n        }",fragment:"\n        @fragment\n        fn main() -> @location(0) vec4<f32> {\n            return vec4<f32>(1.0, 1.0, 0.0, 1.0);            \n        }"},vertex:s(1,2,2,20,[0,0,0])}:Math.random()<.5&&(e={shader:{vertex:"\n        struct Uniforms {\n            mvpMatrix : mat4x4<f32>,\n        };\n        @binding(0) @group(0) var<uniform> uniforms : Uniforms;\n        \n        @vertex\n        fn main(@location(0) pos: vec4<f32>) ->  @builtin(position) vec4<f32> {\n            return uniforms.mvpMatrix * pos;     \n        }",fragment:"\n        @fragment\n        fn main() -> @location(0) vec4<f32> {\n            return vec4<f32>(1.0, 0.0, 0.0, 1.0);            \n        }"},vertex:h(1,2,2,20,[0,0,0])}),this.vertexBuffer=function(t,i){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST;const n=t.createBuffer({size:i.byteLength,usage:e,mappedAtCreation:!0});return new Float32Array(n.getMappedRange()).set(i),n.unmap(),n}(t,e.vertex),this.numberOfVertices=e.vertex.length/3;const n=e.shader;this.pipeline=t.createRenderPipeline({layout:"auto",vertex:{module:t.createShaderModule({code:n.vertex}),entryPoint:"main",buffers:[{arrayStride:12,attributes:[{shaderLocation:0,format:"float32x3",offset:0}]}]},fragment:{module:t.createShaderModule({code:n.fragment}),entryPoint:"main",targets:[{format:this.format}]},primitive:{topology:"line-list"}}),this.uniformBuffer=t.createBuffer({size:64,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.uniformBindGroup=t.createBindGroup({layout:this.pipeline.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:this.uniformBuffer,offset:0,size:64}}]}),this.textureView=this.ctx.getCurrentTexture().createView(),this.renderPassDescription={colorAttachments:[{view:this.textureView,clearValue:{r:0,g:0,b:0,a:1},loadOp:"clear",storeOp:"store"}]},this.requestAni=requestAnimationFrame(this.loop)}drawing(){this.camera.update(),this.device.queue.writeBuffer(this.uniformBuffer,0,this.camera.mvpMatrix),this.textureView=this.ctx.getCurrentTexture().createView(),this.renderPassDescription.colorAttachments[0].view=this.textureView;const t=this.device.createCommandEncoder(),i=t.beginRenderPass(this.renderPassDescription);i.setPipeline(this.pipeline),i.setVertexBuffer(0,this.vertexBuffer),i.setBindGroup(0,this.uniformBindGroup),i.draw(this.numberOfVertices),i.end(),this.device.queue.submit([t.finish()])}destroy(){for(this.device.destroy(),cancelAnimationFrame(this.requestAni);this.divHost.lastElementChild;)this.divHost.removeChild(this.divHost.lastElementChild)}}},88679:function(t,i,e){e.d(i,{$X:function(){return a},EU:function(){return g},Fv:function(){return f},IH:function(){return s},Ue:function(){return r},VC:function(){return l},al:function(){return o},fF:function(){return v},jI:function(){return M},kC:function(){return c},kK:function(){return d},lM:function(){return p},lu:function(){return x},od:function(){return h},tk:function(){return u},uD:function(){return m}});var n=e(50907);function r(){var t=new n.WT(3);return n.WT!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function o(t,i,e){var r=new n.WT(3);return r[0]=t,r[1]=i,r[2]=e,r}function s(t,i,e){return t[0]=i[0]+e[0],t[1]=i[1]+e[1],t[2]=i[2]+e[2],t}function a(t,i,e){return t[0]=i[0]-e[0],t[1]=i[1]-e[1],t[2]=i[2]-e[2],t}function h(t,i,e,n){return t[0]=i[0]+e[0]*n,t[1]=i[1]+e[1]*n,t[2]=i[2]+e[2]*n,t}function u(t,i){return t[0]=-i[0],t[1]=-i[1],t[2]=-i[2],t}function f(t,i){var e=i[0],n=i[1],r=i[2],o=e*e+n*n+r*r;return o>0&&(o=1/Math.sqrt(o)),t[0]=i[0]*o,t[1]=i[1]*o,t[2]=i[2]*o,t}function c(t,i,e){var n=i[0],r=i[1],o=i[2],s=e[0],a=e[1],h=e[2];return t[0]=r*h-o*a,t[1]=o*s-n*h,t[2]=n*a-r*s,t}function v(t,i,e){var n=i[0],r=i[1],o=i[2],s=e[3]*n+e[7]*r+e[11]*o+e[15];return s=s||1,t[0]=(e[0]*n+e[4]*r+e[8]*o+e[12])/s,t[1]=(e[1]*n+e[5]*r+e[9]*o+e[13])/s,t[2]=(e[2]*n+e[6]*r+e[10]*o+e[14])/s,t}function d(t,i,e){var n=i[0],r=i[1],o=i[2];return t[0]=n*e[0]+r*e[3]+o*e[6],t[1]=n*e[1]+r*e[4]+o*e[7],t[2]=n*e[2]+r*e[5]+o*e[8],t}function l(t,i,e){var n=e[0],r=e[1],o=e[2],s=e[3],a=i[0],h=i[1],u=i[2],f=r*u-o*h,c=o*a-n*u,v=n*h-r*a,d=r*v-o*c,l=o*f-n*v,p=n*c-r*f,m=2*s;return f*=m,c*=m,v*=m,d*=2,l*=2,p*=2,t[0]=a+f+d,t[1]=h+c+l,t[2]=u+v+p,t}function p(t,i,e,n){var r=[],o=[];return r[0]=i[0]-e[0],r[1]=i[1]-e[1],r[2]=i[2]-e[2],o[0]=r[0],o[1]=r[1]*Math.cos(n)-r[2]*Math.sin(n),o[2]=r[1]*Math.sin(n)+r[2]*Math.cos(n),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t}function m(t,i,e,n){var r=[],o=[];return r[0]=i[0]-e[0],r[1]=i[1]-e[1],r[2]=i[2]-e[2],o[0]=r[2]*Math.sin(n)+r[0]*Math.cos(n),o[1]=r[1],o[2]=r[2]*Math.cos(n)-r[0]*Math.sin(n),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t}function M(t,i,e,n){var r=[],o=[];return r[0]=i[0]-e[0],r[1]=i[1]-e[1],r[2]=i[2]-e[2],o[0]=r[0]*Math.cos(n)-r[1]*Math.sin(n),o[1]=r[0]*Math.sin(n)+r[1]*Math.cos(n),o[2]=r[2],t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t}function g(t,i){var e=t[0],n=t[1],r=t[2],o=i[0],s=i[1],a=i[2],h=Math.sqrt(e*e+n*n+r*r)*Math.sqrt(o*o+s*s+a*a),u=h&&function(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]}(t,i)/h;return Math.acos(Math.min(Math.max(u,-1),1))}var x=a;!function(){var t=r()}()}}]);
//# sourceMappingURL=4858.c2d89053.chunk.js.map