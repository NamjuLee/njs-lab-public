{"version":3,"file":"static/js/5883.54163e7b.chunk.js","mappings":"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","sources":["njslab/Project/Project_03_SlowZone/01_JSAPI/Tint/FilterGLViewDarkForDarken.ts","njslab/Project/Project_03_SlowZone/03_SlowZone/Drawing/index.ts","njslab/Project/Project_03_SlowZone/03_SlowZone/DataTwitter.ts","njslab/Project/Project_03_SlowZone/03_SlowZone/UI/index.ts","njslab/Project/Project_03_SlowZone/03_SlowZone/index.ts"],"sourcesContent":["import { NVector3, GLShaderCommon } from '../../../../../lib/NJSCore';\n\n// import { Mat3 } from '../../AppCore/GLUtility/Mat3';\n\nexport class FilterGLViewDarkForDarken {\n\n    gl: WebGLRenderingContext;\n    program: WebGLProgram;\n    fragmentShader: WebGLShader;\n    vertexShader: WebGLShader;\n    matrixLocation: WebGLProgram;\n    posBuffer: WebGLBuffer;\n    colBuffer: WebGLBuffer;\n    vertexs: Float32Array;\n\n    posLocAtt: number;\n    colLocAtt: number;\n    matLoc: WebGLUniformLocation;\n    colLoc: WebGLUniformLocation;\n    cVecLoc: WebGLUniformLocation;\n    mouseLoc: WebGLUniformLocation;\n    timeGL: WebGLUniformLocation;\n    // startTime: number;\n    // randomSeed: number;\n\n    vShader: WebGLShader;\n    fShader: WebGLShader;\n\n    v = `\n    attribute vec2 a_position;\n    attribute vec4 a_color;\n    \n    varying vec4 f_color;\n\n    void main() {\n\n        vec2 mouse_distance = vec2(0,0) - (a_position.xy /vec2(2,2));\n        float red = 1.0 - length(mouse_distance);\n        f_color = vec4(a_position, 0, 1.0);\n    \n        // float dis = distance(vec2(a_position.xy), vec2(0,0));\n\n        // f_color = vec4(dis * 0.6, 0,0,1);\n        gl_Position = vec4( a_position, 0, 1);\n    }\n    `;\n\n    f = `\n    precision highp float;\n\n    varying vec4 f_color;\n    \n    void main() {\n        vec2 mouse_distance = vec2(0,0) - (f_color.xy /vec2(5,5));\n\n        float col =  length(mouse_distance*5.);\n        float val = 1.0 - length(mouse_distance*8.);\n        \n        gl_FragColor = vec4(0.19,0.19,0.19, col);\n\n    }\n    `;\n\n    positionAttribLocation: WebGLProgram;\n    colorAttribLocation: WebGLProgram;\n    translation: NVector3;\n    color: number[];\n    colArray: Float32Array;\n\n    constructor(gl: WebGLRenderingContext, xt: number = 100, yt: number = 100, zt: number = 0, xs: number = 1, ys: number = 1, zs: number = 1) {\n        this.gl = gl;\n        // this.translation = new NVector3(xt, yt, zt);\n        // this.angleInRadians = 0;\n        // this.scale = new NVector3(xs, ys, zs);\n        this.color = [Math.random(), Math.random(), Math.random(), 1];\n        this.InitShader();\n    }\n    InitShader() {\n        // let vShader = GLUtility.CreateShaderFromPath(this.gl, this.gl.VERTEX_SHADER,'/shader/vsCanvas.glsl');\n        // let fShader = GLUtility.CreateShaderFromPath(this.gl, this.gl.FRAGMENT_SHADER, '/shader/fsColor.glsl');\n\n        let vShader = GLShaderCommon.CreateShader(this.gl, this.gl.VERTEX_SHADER, this.v); // '/shader/vsCanvas.glsl');\n        let fShader = GLShaderCommon.CreateShader(this.gl, this.gl.FRAGMENT_SHADER, this.f); // '/shader/fsColor.glsl');\n\n        if (vShader && fShader) {\n            this.vShader = vShader;\n            this.fShader = fShader;\n            let program = GLShaderCommon.CreateProgram(this.gl, vShader, fShader);\n            if (program) { this.program = program; }\n        }\n\n        // this.InitVerext();\n    }\n    Render(gl: WebGLRenderingContext) {\n\n        let col = [0.1, 0, 0, 1];\n\n        this.vertexs = new Float32Array([\n            // left column\n            -1, -1, 1, 1, 1, 1,\n            - 1, 1, col[0], col[1], col[2], col[3],\n            1, -1, col[0], col[1], col[2], col[3],\n\n            -1, 1, 1, 1, 1, 1,\n            1, -1, col[0], col[1], col[2], col[3],\n            1, 1, col[0], col[1], col[2], col[3],\n\n        ]);\n\n        this.posBuffer = this.gl.createBuffer() as WebGLBuffer;\n        this.gl.bindBuffer(this.gl.ARRAY_BUFFER, this.posBuffer);\n        this.gl.bufferData(this.gl.ARRAY_BUFFER, new Float32Array(this.vertexs), gl.STATIC_DRAW);\n\n        this.posLocAtt = this.gl.getAttribLocation(this.program, 'a_position');\n        // Tell the attribute how to get data out of posBuffer (ARRAY_BUFFER)\n        let size = 2;          // 2 components per iteration\n        let type = gl.FLOAT;   // the data is 32bit floats\n        let normalize = false; // don't normalize the data\n        let stride = 6 * Float32Array.BYTES_PER_ELEMENT; // 0 = move forward size * sizeof(type) each iteration to get the next position\n        let offset = 0;        // start at the beginning of the buffer\n        gl.vertexAttribPointer(this.posLocAtt, size, type, normalize, stride, offset);\n        gl.enableVertexAttribArray(this.posLocAtt);\n\n        // this.colLocAtt = this.gl.getAttribLocation(this.program, 'a_color');\n        // size = 4;          // 2 components per iteration\n        // type = gl.FLOAT;   // the data is 32bit floats\n        // normalize = false; // don't normalize the data\n        // stride = 6 * Float32Array.BYTES_PER_ELEMENT; // 0 = move forward size * sizeof(type) each iteration to get the next position\n        // offset = 2 * Float32Array.BYTES_PER_ELEMENT;        // start at the beginning of the buffer\n        // gl.vertexAttribPointer(this.colLocAtt, size, type, normalize, stride, offset);\n        // gl.enableVertexAttribArray(this.colLocAtt);\n\n        gl.useProgram(this.program);\n        let primitiveType = gl.TRIANGLES; // LINE_LOOP; // gl.TRIANGLE_STRIP;\n        offset = 0;\n        let count = 6; // this.vertexs.length * 0.5;\n        gl.drawArrays(primitiveType, offset, count);\n\n    }\n}","import * as THREE from 'three';\r\nimport { getJSONFromURL, hexToRGBANormalized, Vector3, getRandomHex } from 'njscore';\r\nimport { Solution } from '..';\r\nexport class Drawing {\r\n\r\n    solution: Solution;\r\n\r\n    streetOSM: any = [];\r\n    routesTreated: any = [];\r\n    routesControl: any = [];\r\n    zones30: any = [];\r\n    zones15: any = [];\r\n    routesMain: any = [];\r\n\r\n    meshTwitter: THREE.Points;\r\n    meshStreetOSM: THREE.LineSegments;\r\n    meshNode: THREE.Points;\r\n    meshTreated: THREE.LineSegments;\r\n    meshControl: THREE.LineSegments;\r\n    meshMainStreet: THREE.LineSegments;\r\n    meshPolygon: THREE.Group;\r\n\r\n    polygonRingID = {};\r\n    polygonRings: THREE.Mesh;\r\n    yearForPolygonMesh: {};\r\n\r\n    constructor(solution: Solution) {\r\n        this.solution = solution;\r\n\r\n        const path = '/static/research/slow-zone/';\r\n        getJSONFromURL(process.env.PUBLIC_URL + path + 'street_osm.geojson').then((data) => {\r\n            for (let i = 0; i < data['features'].length; ++i) {\r\n                this.streetOSM.push(data['features'][i]['geometry']['coordinates']);\r\n            }\r\n            this.meshStreetOSM = this.LineSeg(this.streetOSM, [0, 1, 1]);\r\n            this.solution.start();\r\n        });\r\n        getJSONFromURL(process.env.PUBLIC_URL + path + 'Paris-main-st.geojson').then((data) => {\r\n            for (let i = 0; i < data['features'].length; ++i) {\r\n                this.routesMain.push(data['features'][i]['geometry']['coordinates']);\r\n            }\r\n            this.meshMainStreet = this.LineSeg(this.routesMain, [1, 1, 0]);\r\n        });\r\n\r\n        getJSONFromURL(process.env.PUBLIC_URL + path + 'treated-st.geojson').then((data) => {\r\n            for (let i = 0; i < data['features'].length; ++i) {\r\n                this.routesTreated.push(data['features'][i]['geometry']['coordinates']);\r\n            }\r\n            this.meshTreated = this.LineSeg(this.routesTreated, [1, 0, 0]);\r\n        });\r\n\r\n        getJSONFromURL(process.env.PUBLIC_URL + path + 'control-st.geojson').then((data) => {\r\n            for (let i = 0; i < data['features'].length; ++i) {\r\n                this.routesControl.push(data['features'][i]['geometry']['coordinates']);\r\n            }\r\n            this.meshControl = this.LineSeg(this.routesControl, [0, 1, 0]);\r\n        });\r\n\r\n\r\n        getJSONFromURL(process.env.PUBLIC_URL + path + 'zones_15_innerouter_byyr_rings.json').then((geoJSON) => {\r\n\r\n            // console.log(geoJSON);\r\n\r\n            // for (let i = 0; i < geoJSON['features'].length; ++i) {\r\n            //     this.zones15.push(geoJSON['features'][i]['geometry']['coordinates']);\r\n            // }\r\n\r\n            this.polygonRings = this.renderCustomPolygon(geoJSON);\r\n\r\n\r\n\r\n            // console.log(geoJSON);\r\n\r\n            // this.meshAreaGon = renderCustomPolygon(this.scene, geoJSON);\r\n\r\n        });\r\n\r\n    }\r\n    public updateYear(v: number) {\r\n        if (this.yearForPolygonMesh !== undefined) {\r\n            for (let i = 2010; i < 2016; ++i) {\r\n\r\n                const m = this.yearForPolygonMesh[i] as THREE.Mesh;\r\n                console.log(m)\r\n                if (i < this.solution.ui.year) {\r\n                    m.visible = true;\r\n                    console.log('active', i)\r\n                } else {\r\n                    m.visible = false;\r\n                    console.log('deactive', i)\r\n                }\r\n            }\r\n            // this.polygonRings.\r\n        }\r\n    }\r\n    public updateColor(c: string) {\r\n        console.log(c);\r\n        const col = hexToRGBANormalized(c);\r\n\r\n        console.log(col)\r\n\r\n        if (this.meshMainStreet !== undefined) {\r\n            if (this.solution.ui.isActiveMainStreet) {\r\n                let mat = this.meshMainStreet.material as THREE.LineBasicMaterial;\r\n                mat.color.r = col[0]; mat.color.g = col[1]; mat.color.b = col[2];\r\n            }\r\n        }\r\n        if (this.meshStreetOSM !== undefined) {\r\n            if (this.solution.ui.isActive_streetOSM) {\r\n                let mat = this.meshStreetOSM.material as THREE.LineBasicMaterial;\r\n                mat.color.r = col[0]; mat.color.g = col[1]; mat.color.b = col[2];\r\n            }\r\n        }\r\n        if (this.meshTreated !== undefined) {\r\n            if (this.solution.ui.isActive_treated_st) {\r\n                let mat = this.meshTreated.material as THREE.LineBasicMaterial;\r\n                mat.color.r = col[0]; mat.color.g = col[1]; mat.color.b = col[2];\r\n            }\r\n        }\r\n        if (this.meshControl !== undefined) {\r\n            if (this.solution.ui.isActive_control_st) {\r\n                let mat = this.meshControl.material as THREE.LineBasicMaterial;\r\n                mat.color.r = col[0]; mat.color.g = col[1]; mat.color.b = col[2];\r\n            }\r\n        }\r\n        if (this.polygonRings !== undefined) {\r\n            if (this.solution.ui.isActive_zones_30) {\r\n                let mat = this.polygonRings.material as THREE.LineBasicMaterial;\r\n                mat.color.r = col[0]; mat.color.g = col[1]; mat.color.b = col[2];\r\n            }\r\n        }\r\n\r\n        if (this.solution.dataTwitter !== undefined) {\r\n            if (this.solution.ui.isActive_twitter) {\r\n                this.solution.dataTwitter.updateColor(col[0], col[1], col[2]);\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n    public update() {\r\n\r\n        if (this.meshMainStreet !== undefined) {\r\n            if (this.solution.ui.isActiveMainStreet) { this.meshMainStreet.visible = true; } else { this.meshMainStreet.visible = false; }\r\n        }\r\n\r\n        if (this.meshStreetOSM !== undefined) {\r\n            if (this.solution.ui.isActive_streetOSM) { this.meshStreetOSM.visible = true; } else { this.meshStreetOSM.visible = false; }\r\n        }\r\n\r\n        if (this.meshTreated !== undefined) {\r\n            if (this.solution.ui.isActive_treated_st) { this.meshTreated.visible = true; } else { this.meshTreated.visible = false; }\r\n        }\r\n\r\n        if (this.meshControl !== undefined) {\r\n            if (this.solution.ui.isActive_control_st) { this.meshControl.visible = true; } else { this.meshControl.visible = false; }\r\n        }\r\n\r\n        if (this.polygonRings !== undefined) {\r\n            if (this.solution.ui.isActive_zones_30) { this.polygonRings.visible = true; } else { this.polygonRings.visible = false; }\r\n        }\r\n\r\n        if (this.solution.dataTwitter.mesh !== undefined) {\r\n            if (this.solution.ui.isActive_twitter) { this.solution.dataTwitter.mesh.visible = true; } else { this.solution.dataTwitter.mesh.visible = false; }\r\n        }\r\n\r\n    }\r\n    public renderCustomPolygon(json: any) {\r\n        console.log(json);\r\n\r\n\r\n        const yearForPolygonID = {}\r\n\r\n        for (const [key, value] of Object.entries(json.yr)) {\r\n            const theValue = value as string;\r\n            if (theValue in yearForPolygonID) {\r\n                yearForPolygonID[theValue].push(+key)\r\n            } else {\r\n                yearForPolygonID[theValue] = [+key]\r\n            }\r\n        }\r\n\r\n        const yearForPolygonMesh = {}\r\n\r\n        console.log(yearForPolygonID)\r\n        this.polygonRingID = yearForPolygonID;\r\n\r\n        for (const [theKey, theIDs] of Object.entries(this.polygonRingID)) {\r\n\r\n            console.log(theKey, theIDs)\r\n\r\n            const shapes = [];\r\n            //@ts-ignore\r\n            for (let k = 0; k < theIDs.length; ++k) {\r\n                const id = theIDs[k];\r\n\r\n                const outPTs = []\r\n                for (let i = 0; i < json.outer_ring[id].length; ++i) {\r\n                    const [x, y] = this.solution.projectionToMercator(json.outer_ring[id][i][0], json.outer_ring[id][i][1]);\r\n                    outPTs.push(new Vector3(x, y))\r\n                }\r\n\r\n                const shape = new THREE.Shape(outPTs);\r\n                for (let i = 0; i < json.inner_rings[id].length; ++i) {\r\n\r\n                    const holePath = new THREE.Path();\r\n\r\n                    let [x, y] = this.solution.projectionToMercator(json.inner_rings[id][i][0][0], json.inner_rings[id][i][0][1]);\r\n                    holePath.moveTo(x, y);\r\n\r\n                    for (let j = 1; j < json.inner_rings[id][i].length; ++j) {\r\n                        let [x, y] = this.solution.projectionToMercator(json.inner_rings[id][i][j][0], json.inner_rings[id][i][j][1]);\r\n                        holePath.lineTo(x, y);\r\n                        // outPTs.push(new Vector3(x, y))\r\n                    }\r\n\r\n                    shape.holes.push(holePath)\r\n                }\r\n                shapes.push(shape);\r\n            }\r\n\r\n            let geometry = new THREE.ShapeGeometry(shapes);\r\n            // console.log(count)\r\n            // console.log(geometry)\r\n\r\n            // const col = getRandomHex().split('#')[1];\r\n            // console.log(col)\r\n\r\n            const color = new THREE.Color(0xffffff);\r\n            color.setHex(Math.random() * 0xffffff);\r\n\r\n            let mat = new THREE.MeshBasicMaterial({\r\n                side: THREE.DoubleSide, color: color,\r\n                transparent: true,\r\n                opacity: 1\r\n            });\r\n\r\n            let mesh = new THREE.Mesh(geometry, mat);\r\n            mesh.visible = true;\r\n            this.solution.scene.add(mesh);\r\n            mesh.rotateOnAxis(new THREE.Vector3(1, 0, 0), Math.PI * 0.5);\r\n\r\n            const theValue = theKey as string;\r\n            yearForPolygonMesh[theValue] = mesh;\r\n            // break\r\n\r\n        }\r\n\r\n        this.yearForPolygonMesh = yearForPolygonMesh;\r\n        console.log(yearForPolygonMesh);\r\n        return undefined;\r\n    }\r\n    public renderMultiPolygon = (paths: any, colorArray: number[]) => {\r\n        const positions = [];\r\n        const meshGroup = new THREE.Group();\r\n        for (let multi = 0; multi < paths.length; ++multi) {\r\n            const multiPolygon = paths[multi];\r\n\r\n            for (let polyI = 0; polyI < multiPolygon.length; ++polyI) {\r\n                const polygon = multiPolygon[polyI];\r\n\r\n\r\n\r\n                if (polygon.length === 1) {\r\n                    const thePolygon = polygon[0];\r\n\r\n                    const shape = [];\r\n\r\n                    for (let i = 0; i < thePolygon.length; ++i) {\r\n\r\n                        const [x, y] = this.solution.projectionToMercator(thePolygon[i][0], thePolygon[i][1]);\r\n\r\n                        positions.push(x, 0, y)\r\n\r\n                        shape.push(new THREE.Vector2(x, y));\r\n                    }\r\n\r\n\r\n                    let geometry = new THREE.ShapeGeometry(new THREE.Shape(shape));\r\n                    let mat = new THREE.MeshBasicMaterial({\r\n                        side: THREE.DoubleSide, color: 0x00ff00,\r\n                        transparent: true,\r\n                        opacity: 0.3\r\n                    });\r\n                    let mesh = new THREE.Mesh(geometry, mat);\r\n                    this.solution.scene.add(mesh);\r\n                    mesh.rotateOnAxis(new THREE.Vector3(1, 0, 0), Math.PI * 0.5);\r\n\r\n                    meshGroup.add(mesh);\r\n\r\n                }\r\n            }\r\n        }\r\n        return meshGroup;\r\n\r\n    }\r\n    public LineSeg(paths: any, color: number[]) {\r\n        const geometry = new THREE.BufferGeometry();\r\n        const material = new THREE.LineBasicMaterial();\r\n        material.color.r = color[0];\r\n        material.color.g = color[1];\r\n        material.color.b = color[2];\r\n\r\n        const positions = [];\r\n        const colors = [];\r\n        const indices = [];\r\n\r\n        for (let i = 0; i < paths.length; ++i) {\r\n            const route = paths[i]\r\n\r\n            for (let j = 0; j < route.length; ++j) {\r\n                for (let k = 0; k < route[j].length; ++k) {\r\n\r\n                    const [x, y] = this.solution.projectionToMercator(route[j][k][0], route[j][k][1]);\r\n\r\n                    positions.push(x, 0, y)\r\n\r\n                    colors.push(color[0], color[1], color[2]);\r\n\r\n                    if (k < route[j].length - 1) {\r\n                        indices.push(Math.floor(positions.length / 3) - 1, Math.floor(positions.length / 3));\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        // console.log(xC / Count, yC / Count)\r\n        geometry.setIndex(indices);\r\n        geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));\r\n        geometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3));\r\n        // generateMorphTargets( geometry );\r\n\r\n        geometry.computeBoundingSphere();\r\n\r\n        const mesh = new THREE.LineSegments(geometry, material);\r\n        this.solution.scene.add(mesh);\r\n        return mesh;\r\n\r\n\r\n    }\r\n    public renderPoints = (paths: any, color: number[]) => {\r\n        const geometry = new THREE.BufferGeometry();\r\n        const material = new THREE.PointsMaterial({ vertexColors: true, size: 0.5 });\r\n\r\n        const positions = [];\r\n        const colors = [];\r\n\r\n        for (let i = 0; i < paths.length; ++i) {\r\n            const route = paths[i]\r\n\r\n            for (let j = 0; j < route.length; ++j) {\r\n                for (let k = 0; k < route[j].length; ++k) {\r\n\r\n                    const [x, y] = this.solution.projectionToMercator(route[j][k][0], route[j][k][1]);\r\n\r\n                    positions.push(x, 0, y)\r\n                    colors.push(color[0], color[1], color[2]);\r\n                }\r\n            }\r\n        }\r\n\r\n        geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));\r\n        geometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3));\r\n        geometry.computeBoundingSphere();\r\n\r\n        const mesh = new THREE.Points(geometry, material);\r\n        this.solution.scene.add(mesh);\r\n        return mesh;\r\n\r\n    }\r\n}","import * as THREE from 'three';\r\nimport { Solution } from './';\r\n\r\nimport { PARAM } from '../../../../App';\r\n\r\nimport { getJSONFromURL, } from 'njscore';\r\nexport class DataTwitter {\r\n    solution: Solution;\r\n    active: boolean = false;\r\n    dataRaw: any;\r\n    mesh: THREE.Points;\r\n    t = 0.0;\r\n\r\n    dataScale: number = 1;\r\n\r\n    pos: Float32Array;\r\n\r\n    color: string = '#0ff';\r\n\r\n    material: THREE.PointsMaterial;\r\n\r\n    constructor(solution: Solution) {\r\n        this.solution = solution;\r\n        const fileName = 'real_data.json'\r\n        const path = '/static/research/slow-zone/';\r\n\r\n        let thePath = process.env.PUBLIC_URL + path + fileName\r\n\r\n        if(PARAM.url) {\r\n            thePath = PARAM.url;\r\n        } \r\n\r\n        getJSONFromURL(thePath).then((data) => {\r\n            this.dataRaw = data;\r\n\r\n            this.initMesh('noNeighbsLog');\r\n        });\r\n\r\n    }\r\n    initMesh(key: string) {\r\n        const positions = [];\r\n        const colors = [];\r\n\r\n\r\n        const domain = this.dataRaw['meta']['domain_' + key]\r\n        // console.log(domain)\r\n\r\n        const selYear = domain[0]\r\n        // lat : 48.819493\r\n        // lon : 2.3554159\r\n        // noNeighbsLog : 0\r\n        // noNeighbsLogDensity : 0\r\n        // noNeighbsRaw : 0\r\n        // noNeighbsWins : 0\r\n        // noTwtsLog : 0\r\n        // noTwtsLogDensity : 0\r\n        // noTwtsRaw : 0\r\n        // noTwtsWins : 0\r\n        // noUsersLog : 0\r\n        // noUsersLogDensity : 0\r\n        // noUsersRaw : 0\r\n        // noUsersWins : 0\r\n        // treatmentCategory : 0\r\n        // year : 2010\r\n\r\n        for (let i = 0; i < this.dataRaw['cells'].length; ++i) {\r\n            const cell = this.dataRaw['cells'][i];\r\n            const [x, y] = this.solution.projectionToMercator(+cell['lon'], +cell['lat'])\r\n\r\n            let keyIndex = +cell[key]\r\n            keyIndex /= 2;\r\n\r\n            const color = [keyIndex, keyIndex, 0];\r\n\r\n            positions.push(x, keyIndex * this.dataScale, y)\r\n\r\n            colors.push(color[0], color[1], color[2]);\r\n\r\n        }\r\n        // this.meshStreetOSM = this.LineSeg(this.streetOSM, [0, 1, 1]);\r\n\r\n        const geometry = new THREE.BufferGeometry();\r\n        const material = new THREE.PointsMaterial({ vertexColors: true, size: 0.5 });\r\n        this.material = material;\r\n\r\n        this.pos = new Float32Array(positions)\r\n\r\n        geometry.setAttribute('position', new THREE.Float32BufferAttribute(this.pos, 3));\r\n        geometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3));\r\n        geometry.computeBoundingSphere();\r\n\r\n        this.mesh = new THREE.Points(geometry, material);\r\n        this.solution.scene.add(this.mesh);\r\n\r\n        console.log('done');\r\n        this.active = true;\r\n\r\n    }\r\n    updateColor(r: number, g: number, b: number) {\r\n        this.material.color.setRGB(r, g, b);\r\n    }\r\n    updateMesh(key: string) {\r\n        this.active = false;\r\n        this.removeMesh();\r\n        this.initMesh(key);\r\n    }\r\n    removeMesh() {\r\n        this.solution.scene.remove(this.mesh);\r\n    }\r\n    update() {\r\n        if (!this.active) { return; }\r\n        this.t += 0.05;\r\n        // if (this.solution.ui.isActive_twitter) {\r\n        this.updateAnimation();\r\n    }\r\n    updateAnimation() {\r\n\r\n        let numVertices = this.mesh.geometry.attributes.position.count;\r\n        for (let i = 0; i < numVertices; i++) {\r\n            let o = this.mesh.geometry.attributes.position;\r\n\r\n            let x = o.getX(i);\r\n            // let y = o.getY(i);\r\n            let z = o.getZ(i)\r\n\r\n            let y = this.pos[(i * 3) + 1] * this.dataScale;\r\n\r\n            y = y * (1 + Math.sin(x + y + this.t) * Math.cos(x + y + this.t))\r\n\r\n            y = y < 0.1 ? 0.1 : y;\r\n            // console.log(y)\r\n\r\n            let p = new THREE.Vector3(x, y, z);\r\n\r\n            this.mesh.geometry.attributes.position.setXYZ(i, p.x, p.y, p.z);\r\n\r\n            // if (intersection !== null) {\r\n            //     y = distanceTo(x, y, z, intersection.point.x, intersection.point.y, intersection.point.z) / 30\r\n            // }\r\n\r\n\r\n            // this.mesh.geometry.attributes.color.setXYZ(i, y, 1 - y, 0);\r\n            // console.log(y)\r\n        }\r\n\r\n        // set to true each time you modify the positions:\r\n        this.mesh.geometry.attributes.position.needsUpdate = true;\r\n        this.mesh.geometry.attributes.color.needsUpdate = true;\r\n        this.mesh.geometry.computeVertexNormals();\r\n\r\n    }\r\n}","import { Solution } from '../';;\r\nexport class UI {\r\n    solution: Solution;\r\n    hostDiv: HTMLElement;\r\n\r\n    isActiveMainStreet = true;\r\n    isActive_streetOSM = false;\r\n    isActive_treated_st = false;\r\n    isActive_control_st = false;\r\n    isActive_zones_30 = false;\r\n    isActive_twitter = false;\r\n\r\n    year: number = 2010;\r\n\r\n    constructor(solution: Solution) {\r\n        this.solution = solution;\r\n        this.hostDiv = solution.hostDiv;\r\n        this.appendUI();\r\n    }\r\n    public appendUI() {\r\n\r\n        const mainMenu = document.createElement('div');\r\n        mainMenu.style.position = 'absolute';\r\n        this.hostDiv.append(mainMenu);\r\n\r\n        // let checkBoxUIA = getCheckBox('high_low_connectedness_user');\r\n        // mainMenu.append(checkBoxUIA.div);\r\n        // checkBoxUIA.checkBox.onchange = () => {\r\n        //     if (checkBoxUIA.checkBox.checked === true){\r\n        //         this.isActive_high_low_connectedness_user = true;\r\n\r\n        //     } else {\r\n        //         this.isActive_high_low_connectedness_user = false;\r\n        //     }\r\n        // }\r\n        const divInputColor = document.createElement('input');\r\n        mainMenu.append(divInputColor)\r\n        divInputColor.type = 'color';\r\n        divInputColor.oninput = () => {\r\n            this.solution.drawing.updateColor(divInputColor.value);\r\n            // console.log(divInputColor.value)\r\n            // if (this.capture) {\r\n            //     const colArray = hex2RGBA(divInputColor.value)\r\n            //     // this.capture.opacity = +sl3.slider.value * 0.01;\r\n            //     this.capture.rgb = colArray;\r\n            //     console.log(colArray)\r\n            // }\r\n        }\r\n\r\n        let checkBoxUIB = getCheckBox('main street');\r\n        mainMenu.append(checkBoxUIB.div);\r\n        checkBoxUIB.checkBox.checked = true;\r\n        checkBoxUIB.checkBox.onchange = () => {\r\n            if (checkBoxUIB.checkBox.checked === true) {\r\n                this.isActiveMainStreet = true;\r\n            } else {\r\n                this.isActiveMainStreet = false;\r\n            }\r\n        }\r\n\r\n\r\n        let checkBoxUI_OSM = getCheckBox('OSM street');\r\n        mainMenu.append(checkBoxUI_OSM.div);\r\n        checkBoxUI_OSM.checkBox.onchange = () => {\r\n            if (checkBoxUI_OSM.checkBox.checked === true) {\r\n                this.isActive_streetOSM = true;\r\n            } else {\r\n                this.isActive_streetOSM = false;\r\n            }\r\n        }\r\n\r\n\r\n        let checkBoxUIC = getCheckBox('treated street');\r\n        mainMenu.append(checkBoxUIC.div);\r\n        checkBoxUIC.checkBox.onchange = () => {\r\n            if (checkBoxUIC.checkBox.checked === true) {\r\n                this.isActive_treated_st = true;\r\n            } else {\r\n                this.isActive_treated_st = false;\r\n            }\r\n        }\r\n\r\n\r\n        let checkBoxUID = getCheckBox('control street');\r\n        mainMenu.append(checkBoxUID.div);\r\n        checkBoxUID.checkBox.onchange = () => {\r\n            if (checkBoxUID.checkBox.checked === true) {\r\n                this.isActive_control_st = true;\r\n            } else {\r\n                this.isActive_control_st = false;\r\n            }\r\n        }\r\n\r\n\r\n        let checkBoxUIE = getCheckBox('zones 30');\r\n        checkBoxUIE.div.style.marginTop = '25px';\r\n        mainMenu.append(checkBoxUIE.div);\r\n        checkBoxUIE.checkBox.onchange = () => {\r\n            if (checkBoxUIE.checkBox.checked === true) {\r\n                this.isActive_zones_30 = true;\r\n            } else {\r\n                this.isActive_zones_30 = false;\r\n            }\r\n        }\r\n\r\n\r\n\r\n\r\n        let slider = getSlider('Year')\r\n        mainMenu.append(slider.div);\r\n\r\n        slider.slider.oninput = () => {\r\n            this.year = +slider.slider.value;\r\n            console.log(+slider.slider.value)\r\n            this.solution.drawing.updateYear(+slider.slider.value);\r\n        }\r\n\r\n\r\n        //  ..............................\r\n\r\n        let checkBoxUI_Node = getCheckBox('twitter data');\r\n        checkBoxUI_Node.div.style.marginTop = '25px';\r\n        mainMenu.append(checkBoxUI_Node.div);\r\n        checkBoxUI_Node.checkBox.onchange = () => {\r\n            if (checkBoxUI_Node.checkBox.checked === true) {\r\n                this.isActive_twitter = true;\r\n            } else {\r\n                this.isActive_twitter = false;\r\n            }\r\n        }\r\n        let sliderDataScale = getSlider('Scale', '1', '10');\r\n        mainMenu.append(sliderDataScale.div);\r\n        sliderDataScale.slider.defaultValue = '1';\r\n        sliderDataScale.slider.oninput = () => {\r\n            this.year = +sliderDataScale.slider.value;\r\n            console.log(+sliderDataScale.slider.value)\r\n            this.solution.dataTwitter.dataScale = +sliderDataScale.slider.value;\r\n        }\r\n\r\n        let checkBoxAni = getCheckBox('Animation');\r\n        checkBoxAni.checkBox.defaultChecked = true;\r\n        mainMenu.append(checkBoxAni.div);\r\n        checkBoxAni.checkBox.onchange = () => {\r\n            if (checkBoxAni.checkBox.checked === true) {\r\n                this.solution.dataTwitter.active = true;\r\n            } else {\r\n                this.solution.dataTwitter.active = false;\r\n            }\r\n            this.solution.dataTwitter.updateAnimation();\r\n        }\r\n\r\n        const theField = {\r\n            noNeighbsLog: 'noNeighbsLog',\r\n            noNeighbsLogDensity: 'noNeighbsLogDensity',\r\n            noNeighbsRaw: 'noNeighbsRaw',\r\n            noNeighbsWins: 'noNeighbsWins',\r\n            noTwtsLog: 'noTwtsLog',\r\n            noTwtsLogDensity: 'noTwtsLogDensity',\r\n            noTwtsRaw: 'noTwtsRaw',\r\n            noTwtsWins: 'noTwtsWins',\r\n            noUsersLog: 'noUsersLog',\r\n            noUsersLogDensity: 'noUsersLogDensity',\r\n            noUsersRaw: 'noUsersRaw',\r\n            noUsersWins: 'noUsersWins',\r\n            treatmentCategory: 'treatmentCategory',\r\n        }\r\n\r\n        const optionList = document.createElement('select');\r\n        mainMenu.append(optionList);\r\n        for (let i in theField) {\r\n            const option = document.createElement('option')\r\n            option.value = i;\r\n            option.textContent = i\r\n            optionList.appendChild(option)\r\n        }\r\n\r\n        optionList.onchange = (e) => {\r\n            console.log((e.target as any).value)\r\n            this.solution.dataTwitter.updateMesh((e.target as any).value);\r\n        };\r\n\r\n    }\r\n}\r\n\r\n\r\nconst getCheckBox = (title: string) => {\r\n    const div = document.createElement('div');\r\n    div.style.display = 'flex';\r\n\r\n    const checkBox = document.createElement('input');\r\n    checkBox.type = 'checkbox';\r\n    const text = document.createElement('div');\r\n    text.textContent = title;\r\n    text.style.color = '#aaa';\r\n    div.appendChild(checkBox);\r\n    div.appendChild(text);\r\n\r\n    return {\r\n        div, checkBox\r\n    }\r\n};\r\n\r\nconst getSlider = (title: string, min: string = '2010', max: string = '2015') => {\r\n    // <input type=\"range\" min=\"1\" max=\"100\" value=\"50\" class=\"slider\" id=\"myRange\">\r\n    const div = document.createElement('div');\r\n    div.style.display = 'flex';\r\n\r\n    const slider = document.createElement('input');\r\n    slider.type = 'range';\r\n    slider.min = min;\r\n    slider.max = max;\r\n\r\n    const text = document.createElement('div');\r\n    text.textContent = title;\r\n    text.style.color = '#aaa';\r\n    div.appendChild(slider);\r\n    div.appendChild(text);\r\n\r\n    return {\r\n        div, slider\r\n    }\r\n};","import * as THREE from 'three';\r\nimport { RendererThree, MercatorProjection, getCSVFromURL } from '../../../../lib';\r\nimport { getJSONFromURL, } from 'njscore';\r\n\r\nimport { FilterGLViewDarkForDarken } from '../01_JSAPI/Tint/FilterGLViewDarkForDarken';\r\nimport { Drawing } from './Drawing';\r\nimport { DataTwitter } from './DataTwitter';\r\n\r\nimport { UI } from './UI';\r\nexport class Solution extends RendererThree {\r\n\r\n    drawing: Drawing;\r\n    ui: UI;\r\n\r\n    meshAreaGon: THREE.Mesh;\r\n    meshPolygon2: THREE.Mesh;\r\n\r\n    pts: number[] = [];\r\n\r\n    dataTwitter: DataTwitter;\r\n\r\n    xOFf = -15478803.88731685;\r\n    yOFf = -4766681.448690384;\r\n    scale = 0.01;\r\n\r\n    constructor(id: string = 'main') {\r\n        super(id)\r\n\r\n        this.drawing = new Drawing(this);\r\n        this.dataTwitter = new DataTwitter(this);\r\n\r\n        const light = new THREE.PointLight(0xffffff, 0.8);\r\n        this.camera.add(light);\r\n        this.scene.add(light);\r\n\r\n        const canvasGL = document.createElement('canvas');\r\n        canvasGL.style.position = 'absolute';\r\n        canvasGL.style.pointerEvents = 'none';\r\n        canvasGL.style.mixBlendMode = 'darken';\r\n        canvasGL.width = this.hostDiv.clientWidth;\r\n        canvasGL.height = this.hostDiv.clientHeight;\r\n        this.hostDiv.appendChild(canvasGL);\r\n        const glCtx = canvasGL.getContext('webgl');\r\n        const d = new FilterGLViewDarkForDarken(glCtx, 0.5, 5);\r\n        d.Render(glCtx);\r\n\r\n        this.ui = new UI(this);\r\n\r\n        this.camera.position.set(0, 100, 100);\r\n\r\n       \r\n    }\r\n    public projectionToMercator(lon: number, lat: number) {\r\n        const [xPro, yPro] = MercatorProjection(lon, lat);\r\n        return [\r\n            (xPro + this.xOFf) * this.scale,\r\n            (yPro + this.yOFf) * this.scale\r\n        ];\r\n    }\r\n\r\n    public update(scene: THREE.Scene) {\r\n        this.drawing.update();\r\n        this.dataTwitter?.update()\r\n\r\n    }\r\n}\r\n\r\n"],"names":["FilterGLViewDarkForDarken","gl","program","fragmentShader","vertexShader","matrixLocation","posBuffer","colBuffer","vertexs","posLocAtt","colLocAtt","matLoc","colLoc","cVecLoc","mouseLoc","timeGL","vShader","fShader","v","f","positionAttribLocation","colorAttribLocation","translation","color","colArray","this","Math","random","InitShader","GLShaderCommon","VERTEX_SHADER","FRAGMENT_SHADER","col","Float32Array","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","getAttribLocation","type","FLOAT","stride","BYTES_PER_ELEMENT","offset","vertexAttribPointer","enableVertexAttribArray","useProgram","primitiveType","TRIANGLES","drawArrays","Drawing","solution","streetOSM","routesTreated","routesControl","zones30","zones15","routesMain","meshTwitter","meshStreetOSM","meshNode","meshTreated","meshControl","meshMainStreet","meshPolygon","polygonRingID","polygonRings","yearForPolygonMesh","renderMultiPolygon","paths","colorArray","positions","meshGroup","THREE","multi","length","multiPolygon","polyI","polygon","thePolygon","shape","i","projectionToMercator","x","y","push","geometry","mat","side","transparent","opacity","mesh","scene","add","rotateOnAxis","PI","renderPoints","material","vertexColors","size","colors","route","j","k","setAttribute","computeBoundingSphere","path","getJSONFromURL","process","then","data","LineSeg","start","geoJSON","renderCustomPolygon","undefined","m","console","log","ui","year","visible","c","hexToRGBANormalized","isActiveMainStreet","r","g","b","isActive_streetOSM","isActive_treated_st","isActive_control_st","isActive_zones_30","dataTwitter","isActive_twitter","updateColor","json","yearForPolygonID","Object","entries","yr","key","theValue","theKey","theIDs","shapes","id","outPTs","outer_ring","Vector3","inner_rings","holePath","moveTo","lineTo","holes","setHex","indices","floor","setIndex","DataTwitter","active","dataRaw","t","dataScale","pos","thePath","PARAM","initMesh","cell","keyIndex","setRGB","removeMesh","remove","updateAnimation","numVertices","attributes","position","count","o","getX","z","getZ","sin","cos","p","setXYZ","needsUpdate","computeVertexNormals","UI","hostDiv","appendUI","mainMenu","document","createElement","style","append","divInputColor","oninput","drawing","value","checkBoxUIB","getCheckBox","div","checkBox","checked","onchange","checkBoxUI_OSM","checkBoxUIC","checkBoxUID","checkBoxUIE","marginTop","slider","getSlider","updateYear","checkBoxUI_Node","sliderDataScale","defaultValue","checkBoxAni","defaultChecked","optionList","noNeighbsLog","noNeighbsLogDensity","noNeighbsRaw","noNeighbsWins","noTwtsLog","noTwtsLogDensity","noTwtsRaw","noTwtsWins","noUsersLog","noUsersLogDensity","noUsersRaw","noUsersWins","treatmentCategory","option","textContent","appendChild","e","target","updateMesh","title","display","text","min","max","Solution","meshAreaGon","meshPolygon2","pts","xOFf","yOFf","scale","light","camera","canvasGL","pointerEvents","mixBlendMode","width","clientWidth","height","clientHeight","glCtx","getContext","d","Render","set","lon","lat","MercatorProjection","xPro","yPro","update","RendererThree"],"sourceRoot":""}