"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[3053],{13053:function(e,t,i){i.r(t),i.d(t,{TFProject:function(){return se}});var n=i(37762),s=i(15671),a=i(43144),o=i(3156),h=function(){function e(t){(0,s.Z)(this,e),this.scene=void 0,this.scene=t}return(0,a.Z)(e,[{key:"MouseEventController",value:function(e){e.CLICK_TYPE!==o.uh.LEFT?e.CLICK_TYPE!==o.uh.MIDDLE?e.CLICK_TYPE!==o.uh.DOWN_RIGHT?e.CLICK_TYPE!==o.uh.DOUBLE?e.CLICK_TYPE!==o.uh.MOVE?e.CLICK_TYPE!==o.uh.DRAG?e.CLICK_TYPE!==o.uh.DOWN?e.CLICK_TYPE!==o.uh.WHEEL?e.CLICK_TYPE!==o.uh.UP||this.MouseUpPre(e):this.MouseWheelPre(e):this.MouseDownPre(e):this.MouseDragPre(e):this.MouseMovePre(e):this.MouseDoubleClickPre(e):this.MouseRightClickPre(e):this.MouseMiddleClickPre(e):this.MouseLeftClickPre(e)}},{key:"MouseDown",value:function(e){}},{key:"MouseDownPre",value:function(e){this.scene.MouseDown(e.x,e.y),this.MouseDown(e)}},{key:"MouseLeftClick",value:function(e){}},{key:"MouseLeftClickPre",value:function(e){this.scene.MouseLeftClick(e.x,e.y),this.MouseLeftClick(e)}},{key:"MouseMiddleClick",value:function(e){}},{key:"MouseMiddleClickPre",value:function(e){this.scene.MouseMiddleClick(e.x,e.y),this.MouseMiddleClick(e)}},{key:"MouseRightClick",value:function(e){}},{key:"MouseRightClickPre",value:function(e){this.scene.MouseRightClick(e.x,e.y),this.MouseRightClick(e)}},{key:"MouseUp",value:function(e){}},{key:"MouseUpPre",value:function(e){this.scene.MouseUp(e.x,e.y),this.MouseUp(e)}},{key:"MouseDoubleClick",value:function(e){}},{key:"MouseDoubleClickPre",value:function(e){this.scene.MouseDoubleClick(e.x,e.y),this.MouseDoubleClick(e)}},{key:"MouseMove",value:function(e){}},{key:"MouseMovePre",value:function(e){this.scene.MouseMove(e.x,e.y),this.MouseMove(e)}},{key:"MouseDrag",value:function(e){}},{key:"MouseDragPre",value:function(e){this.scene.MouseDrag(e.x,e.y),this.MouseDrag(e)}},{key:"MouseWheel",value:function(e){}},{key:"MouseWheelPre",value:function(e){this.scene.MouseWheel(e.x,e.y,e.wheel),this.MouseWheel(e)}}]),e}(),r=i(60136),l=i(29388),u=i(97326),d=i(9936),c=i(48224),v=i(55798),p=i(81106),f=i(70490),m=i(23209),y=i(95706),g=i(68520),M=i(11675),w=i(72924),k=function(e){(0,r.Z)(i,e);var t=(0,l.Z)(i);function i(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:300,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:170,l=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return(0,s.Z)(this,i),(n=t.call(this,e)).independentPanelWrapper=void 0,n.divInput=void 0,n.btnClose=void 0,n.btnMini=void 0,n.btnHam=void 0,n.btnResize=void 0,n.bodyDiv=void 0,n.subMenu=void 0,n.subs=[],n._content=void 0,n.canvas=void 0,n.ctx=void 0,n.isActive=!0,n.independentPanelWrapper=e,n.title="njslabSandbox V3",n.width=h,n.height=r,0===a&&0===o?(n.vec.x=.5*e.width-.5*n.width,n.vec.y=.5*e.height-.5*n.height):(n.vec.x=a,n.vec.y=o),n.filletR=7,n.InitTop(),l&&(n.bodyDiv=new M.k((0,u.Z)(n),n.vec.x,n.vec.y+n.HeadHeight,n.width,n.height-n.HeadHeight)),n.InitCanvas(n.bodyDiv.div),n}return(0,a.Z)(i,[{key:"IsMinimized",get:function(){return this.isMinimized},set:function(e){this.isMinimized=e,this.btnResize.isHidden=e,this.bodyDiv&&this.bodyDiv.Hide(e)}},{key:"Width",get:function(){return this.width},set:function(e){var t=e-this.width;this.width=e,this.btnHam.vec.x+=t,this.subMenu.vec.x+=t,this.bodyDiv&&(this.bodyDiv.Width=e)}},{key:"Height",get:function(){return this.height},set:function(e){this.height=e,this.bodyDiv&&(this.bodyDiv.Height=e)}},{key:"content",get:function(){return this._content},set:function(e){this._content=e,this.bodyDiv&&(this.bodyDiv.content=e)}},{key:"HasSubMenu",get:function(){return this.hasSubMenu},set:function(e){this.hasSubMenu=e,this.subMenu.IsHidden=!e}},{key:"InitTop",value:function(){this.btnClose=new f.E(this,this.vec.x,this.vec.y),this.btnMini=new m.$(this,this.vec.x+25,this.vec.y),this.btnHam=new y.g(this,this.vec.x-25+this.width,this.vec.y),this.btnResize=new g.C(this,this.vec.x+this.width-10,this.vec.y+this.height-10,10,10),this.subMenu=new w.q(this),this.subs.push(this.btnClose,this.btnMini,this.btnHam)}},{key:"Translate",value:function(e){if(this.isMoveable){var t=e.x-e.preX,i=e.y-e.preY;this.vec.x+=t,this.vec.y+=i;for(var n=0;n<this.boundarVecs.length;++n)this.boundarVecs[n].x+=t,this.boundarVecs[n].y+=i;for(var s=0;s<this.subs.length;++s)this.subs[s].Translate(e);this.btnResize.vec.x+=t,this.btnResize.vec.y+=i,this.subMenu.Translate(t,i),this.bodyDiv&&this.bodyDiv.Translate(t,i)}}},{key:"Remove",value:function(){this.RemovePost();for(var e=0;e<this.subs.length;++e)this.subs[e].Remove();this.bodyDiv&&this.bodyDiv.Remove(),this.btnResize.Remove(),this.independentPanelWrapper.indePanelRender.Remove(this)}},{key:"RenderPost",value:function(e){var t;this.ComputeBoundary(),t=c.mK.HexToCanvasColor(v.X.theme.mainMenuNormal,this.transparent),this.isMinimized||v.X.RoundedRectFillWithColorMainMenu(e,this.title,this.boundarVecs,this.filletR,0,this.isOver,this.isSelected,t),v.X.TopRoundedRectFill(e,this.title,d.h9.GetBoundaryByVecWidthHeight(this.vec,this.width,this.HeadHeight),this.filletR,0,this.isOver,this.isSelected,this.theme.colSelectedBG,!1),this.RenderHeadTitle(e),this.isMinimized||this.RenderBodyContent(e),this.hasSubMenu&&this.subMenu.RenderPost(e),this.RenderBtnHorizontal(e)}},{key:"RenderBtnHorizontal",value:function(e){}},{key:"RenderHeadTitle",value:function(e){e.save(),e.fillStyle="#ffffff",e.textBaseline="top",e.textAlign="center",e.font="100 12px Arial",e.shadowBlur=0,e.shadowOffsetY=0,e.shadowOffsetX=0,e.fillText(this.title,this.vec.x+.5*this.width,this.vec.y+.5*this.HeadHeight-7),e.restore()}},{key:"RenderBodyContent",value:function(e){}},{key:"RemovePost",value:function(){this.isActive=!1}},{key:"InitCanvas",value:function(e){var t=this;this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.zIndex="0",e.appendChild(this.canvas),this.canvas.id="NCanvasRenderer",this.canvas.className="njslab-web-core-canvas-renderer",this.canvas.style.pointerEvents="none",this.ctx=this.canvas.getContext("2d"),this.canvas.width=e.clientWidth,this.canvas.height=e.clientHeight,this.btnResize.ResizePropagation=function(e,i){t.canvas.width=e,t.canvas.height=i},this.LoopIndependentCanvas(this.ctx)}},{key:"LoopIndependentCanvas",value:function(e){var t=this;this.isActive&&(e.clearRect(0,0,this.canvas.width,this.canvas.height),requestAnimationFrame((function(){t.LoopIndependentCanvas(e)})),this.RenderIndependentCanvas(e))}},{key:"RenderIndependentCanvas",value:function(e){}},{key:"ResizeCanvas",value:function(e,t){this.canvas.width=e,this.canvas.height=t}}]),i}(p.J),b=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:650,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:350;(0,s.Z)(this,e),this.scene=void 0,this.indeCanvas=void 0,this.mOffX=-12,this.mOffY=-12,this.scene=t,this.scene.definitions.push(this),this.InitIndeCanvas(i,n)}return(0,a.Z)(e,[{key:"InitIndeCanvas",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:650,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:350;this.scene.implementation.app.needUI?this.indeCanvas=new k(this.scene.implementation.app.viewController.NUIWrapper.NUI.independentPanelWrapper,50,50,t,i,!0):this.indeCanvas=new k(this.scene.implementation.app.viewController.NUIWrapper.NUI.independentPanelWrapper,1,-25,t,i,!0),this.indeCanvas.title="TF Env",this.indeCanvas.btnHam.isHidden=!0,this.indeCanvas.btnMini.isHidden=!0,this.indeCanvas.RenderIndependentCanvas=function(t){return e.RenderIndependentCanvas(t)}}},{key:"width",get:function(){return this.indeCanvas.canvas.width}},{key:"height",get:function(){return this.indeCanvas.canvas.height}},{key:"Init",value:function(e){}},{key:"RenderIndependentCanvas",value:function(e){}},{key:"MouseMove",value:function(e,t){}},{key:"MouseMovePre",value:function(e,t){this.indeCanvas.IsMouseInsidePanel(e,t)&&this.MouseMove(e-this.indeCanvas.vec.x+this.mOffX,t-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}},{key:"MouseDown",value:function(e,t){}},{key:"MouseDownPre",value:function(e,t){this.indeCanvas.IsMouseInsidePanel(e,t)&&this.MouseDown(e-this.indeCanvas.vec.x+this.mOffX,t-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}},{key:"MouseUp",value:function(e,t){}},{key:"MouseUpPre",value:function(e,t){this.indeCanvas.IsMouseInsidePanel(e,t)&&this.MouseUp(e-this.indeCanvas.vec.x+this.mOffX,t-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}},{key:"MouseDrag",value:function(e,t){}},{key:"MouseDragPre",value:function(e,t){this.indeCanvas.IsMouseInsidePanel(e,t)&&this.MouseDrag(e-this.indeCanvas.vec.x+this.mOffX,t-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}},{key:"MouseLeftClick",value:function(e,t){}},{key:"MouseLeftClickPre",value:function(e,t){this.indeCanvas.IsMouseInsidePanel(e,t)&&this.MouseLeftClick(e-this.indeCanvas.vec.x+this.mOffX,t-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}},{key:"MouseMiddleClick",value:function(e,t){}},{key:"MouseMiddleClickPre",value:function(e,t){this.indeCanvas.IsMouseInsidePanel(e,t)&&this.MouseMiddleClick(e-this.indeCanvas.vec.x+this.mOffX,t-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}},{key:"MouseRightClick",value:function(e,t){}},{key:"MouseRightClickPre",value:function(e,t){this.indeCanvas.IsMouseInsidePanel(e,t)&&this.MouseRightClick(e-this.indeCanvas.vec.x+this.mOffX,t-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}},{key:"MouseDoubleClick",value:function(e,t){}},{key:"MouseDoubleClickPre",value:function(e,t){this.indeCanvas.IsMouseInsidePanel(e,t)&&this.MouseDoubleClick(e-this.indeCanvas.vec.x+this.mOffX,t-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}},{key:"MouseWheel",value:function(e,t,i){}},{key:"MouseWheelPre",value:function(e,t,i){this.indeCanvas.IsMouseInsidePanel(e,t)&&this.MouseWheel(e-this.indeCanvas.vec.x+this.mOffX,t-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY,i)}}]),e}(),R=function(e){(0,r.Z)(i,e);var t=(0,l.Z)(i);function i(e){var n;return(0,s.Z)(this,i),(n=t.call(this,e)).xpos=100,n.ypos=100,n.xspeed=10,n.yspeed=10,n.xdirection=1,n.ydirection=1,n.rad=50,n.vs=[],n.a=1,n.bias=0,n.indeCanvas.title="LinearRegression",n.Init(),n}return(0,a.Z)(i,[{key:"Init",value:function(){}},{key:"MouseDown",value:function(e,t){this.vs.push(new o.h9(this.MapX(e),this.MapY(t)))}},{key:"MapX",value:function(e){return o.$H.Remap(e,0,this.width,0,1)}},{key:"MapY",value:function(e){return o.$H.Remap(e,0,this.height,1,0)}},{key:"RenderIndependentCanvas",value:function(e){e.fillStyle="#000000",e.beginPath(),e.rect(0,0,e.canvas.width,e.canvas.height),e.closePath(),e.fill(),this.LinearRegression(),this.RenderLine(e),e.fillStyle="#00ff00";for(var t=0;t<this.vs.length;++t)e.beginPath(),e.arc(o.$H.Remap(this.vs[t].x,0,1,0,this.width),o.$H.Remap(this.vs[t].y,0,1,this.height,0),5,0,2*Math.PI),e.closePath(),e.fill()}},{key:"RenderLine",value:function(e){var t=0*this.a+this.bias,i=1*this.a+this.bias;e.lineWidth=3,e.strokeStyle="#00fff0",e.beginPath(),e.moveTo(o.$H.Remap(0,0,1,0,this.width),o.$H.Remap(t,0,1,this.height,0)),e.lineTo(o.$H.Remap(1,0,1,0,this.width),o.$H.Remap(i,0,1,this.height,0)),e.stroke()}},{key:"LinearRegression",value:function(){for(var e=0,t=0,i=0;i<this.vs.length;++i)e+=this.vs[i].x,t+=this.vs[i].y;for(var n=e/this.vs.length,s=t/this.vs.length,a=0,o=0,h=0;h<this.vs.length;++h)a+=(this.vs[h].x-n)*(this.vs[h].y-s),o+=(this.vs[h].x-n)*(this.vs[h].x-n);this.a=a/o,this.bias=s-this.a*n}}]),i}(b),x=function(e){(0,r.Z)(i,e);var t=(0,l.Z)(i);function i(e){var n;return(0,s.Z)(this,i),(n=t.call(this,e)).xpos=100,n.ypos=100,n.xspeed=10,n.yspeed=10,n.xdirection=1,n.ydirection=1,n.rad=50,n.vs=[],n.weight=1,n.bias=0,n.indeCanvas.title="LinearRegression",n.Init(),n}return(0,a.Z)(i,[{key:"Init",value:function(){}},{key:"MouseDown",value:function(e,t){this.vs.push(new o.h9(this.MapX(e),this.MapY(t)))}},{key:"MapX",value:function(e){return o.$H.Remap(e,0,this.width,0,1)}},{key:"MapY",value:function(e){return o.$H.Remap(e,0,this.height,1,0)}},{key:"RenderIndependentCanvas",value:function(e){e.fillStyle="#000000",e.beginPath(),e.rect(0,0,e.canvas.width,e.canvas.height),e.closePath(),e.fill(),this.GradientDescent(),this.vs.length>1&&this.RenderLine(e),e.fillStyle="#00ff00";for(var t=0;t<this.vs.length;++t)e.beginPath(),e.arc(o.$H.Remap(this.vs[t].x,0,1,0,this.width),o.$H.Remap(this.vs[t].y,0,1,this.height,0),5,0,2*Math.PI),e.closePath(),e.fill()}},{key:"RenderLine",value:function(e){var t=0*this.weight+this.bias,i=1*this.weight+this.bias;e.lineWidth=3,e.strokeStyle="#00fff0",e.beginPath(),e.moveTo(o.$H.Remap(0,0,1,0,this.width),o.$H.Remap(t,0,1,this.height,0)),e.lineTo(o.$H.Remap(1,0,1,0,this.width),o.$H.Remap(i,0,1,this.height,0)),e.stroke()}},{key:"GradientDescent",value:function(){for(var e=0;e<this.vs.length;++e){var t=this.vs[e].x,i=this.vs[e].y-(this.weight*t+this.bias);this.weight=this.weight+i*t*.1,this.bias=this.bias+.1*i}}}]),i}(b),C=i(61250),I=(i(64355),i(74165)),D=i(15861),P=function(){function e(){(0,s.Z)(this,e)}return(0,a.Z)(e,null,[{key:"getData",value:function(){var e=(0,D.Z)((0,I.Z)().mark((function e(){var t,i,n;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://storage.googleapis.com/tfjs-tutorials/carsData.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return i=e.sent,n=i.map((function(e){return{mpg:e.Miles_per_Gallon,horsepower:e.Horsepower}})).filter((function(e){return null!=e.mpg&&null!=e.horsepower})),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"Get_XY_OneHot_TensorFromCSV",value:function(e){return C.lub((function(){var t,i=[],s=[],a=-1,o=(0,n.Z)(e);try{for(o.s();!(t=o.n()).done;){var h=t.value,r=h.slice(0,h.length-1),l=h[h.length-1];i.push(r),s.push(l),a<l&&(a=l)}}catch(u){o.e(u)}finally{o.f()}return[C.odF(i,[i.length,i[0].length]),C.lfX(C.RRF(s).toInt(),a+1)]}))}},{key:"Get_XY_TensorFromCSV",value:function(e){return C.lub((function(){var t,i=[],s=[],a=-1,o=(0,n.Z)(e);try{for(o.s();!(t=o.n()).done;){var h=t.value,r=h.slice(0,h.length-1),l=h[h.length-1];i.push(r),s.push(l),a<l&&(a=l)}}catch(u){o.e(u)}finally{o.f()}return[C.odF(i,[i.length,i[0].length]),C.RRF(s)]}))}},{key:"SplitTensorFromXY",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,n=Math.round(e.shape[0]*i),s=e.shape[0]-n,a=e.slice([0,0],[s,e.shape[1]]),o=e.slice([s,0],[n,e.shape[1]]),h=t.slice([0,0],[s,t.shape[1]]),r=t.slice([s,0],[n,t.shape[1]]);return[a,h,o,r]}},{key:"ConvertToTensors",value:function(e,t,i){var n=e.length;if(n!==t.length)throw new Error("data and split have different numbers of examples");var s=Math.round(n*i),a=n-s,o=e[0].length,h=C.odF(e,[n,o]),r=C.lfX(C.RRF(t).toInt(),4),l=h.slice([0,0],[a,o]),u=h.slice([a,0],[s,o]);return[l,r.slice([0,0],[a,4]),u,r.slice([0,0],[s,4])]}},{key:"GetRandomNormal",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.55;return C.nGf([e],t,i)}},{key:"GetRandomNormalTensors",value:function(){}},{key:"Shuffle",value:function(e){for(var t,i,n=e.length;0!==n;)i=Math.floor(Math.random()*n),t=e[n-=1],e[n]=e[i],e[i]=t;return e}},{key:"GetSyntheticDataTensor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2,o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return C.lub((function(){var h=e,r=C.iD$(t),l=C.iD$(i),u=C.iD$(n),d=C.iD$(s),c=C.LGj([h],-1,1),v=r.mul(c.pow(C.iD$(3))).add(l.mul(c.square())).add(u.mul(c)).add(d).add(C.nGf([h],0,a));if(o){var p=v.min(),f=v.max().sub(p);return{x:c,yNomalized:v.sub(p).div(f)}}return[c,v]}))}},{key:"GetSyntheticData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-.2,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-.66,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-.1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2.8,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2,h=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return C.lub((function(){var r=e.GetSyntheticDataTensor(t,i,n,s,a,o,h);return{xx:r[0].dataSync(),yy:r[1].dataSync()}}))}},{key:"GetIrisData",value:function(){return[[5.1,3.5,1.4,.2,0],[4.9,3,1.4,.2,0],[4.7,3.2,1.3,.2,0],[4.6,3.1,1.5,.2,0],[5,3.6,1.4,.2,0],[5.4,3.9,1.7,.4,0],[4.6,3.4,1.4,.3,0],[5,3.4,1.5,.2,0],[4.4,2.9,1.4,.2,0],[4.9,3.1,1.5,.1,0],[5.4,3.7,1.5,.2,0],[4.8,3.4,1.6,.2,0],[4.8,3,1.4,.1,0],[4.3,3,1.1,.1,0],[5.8,4,1.2,.2,0],[5.7,4.4,1.5,.4,0],[5.4,3.9,1.3,.4,0],[5.1,3.5,1.4,.3,0],[5.7,3.8,1.7,.3,0],[5.1,3.8,1.5,.3,0],[5.4,3.4,1.7,.2,0],[5.1,3.7,1.5,.4,0],[4.6,3.6,1,.2,0],[5.1,3.3,1.7,.5,0],[4.8,3.4,1.9,.2,0],[5,3,1.6,.2,0],[5,3.4,1.6,.4,0],[5.2,3.5,1.5,.2,0],[5.2,3.4,1.4,.2,0],[4.7,3.2,1.6,.2,0],[4.8,3.1,1.6,.2,0],[5.4,3.4,1.5,.4,0],[5.2,4.1,1.5,.1,0],[5.5,4.2,1.4,.2,0],[4.9,3.1,1.5,.1,0],[5,3.2,1.2,.2,0],[5.5,3.5,1.3,.2,0],[4.9,3.1,1.5,.1,0],[4.4,3,1.3,.2,0],[5.1,3.4,1.5,.2,0],[5,3.5,1.3,.3,0],[4.5,2.3,1.3,.3,0],[4.4,3.2,1.3,.2,0],[5,3.5,1.6,.6,0],[5.1,3.8,1.9,.4,0],[4.8,3,1.4,.3,0],[5.1,3.8,1.6,.2,0],[4.6,3.2,1.4,.2,0],[5.3,3.7,1.5,.2,0],[5,3.3,1.4,.2,0],[7,3.2,4.7,1.4,1],[6.4,3.2,4.5,1.5,1],[6.9,3.1,4.9,1.5,1],[5.5,2.3,4,1.3,1],[6.5,2.8,4.6,1.5,1],[5.7,2.8,4.5,1.3,1],[6.3,3.3,4.7,1.6,1],[4.9,2.4,3.3,1,1],[6.6,2.9,4.6,1.3,1],[5.2,2.7,3.9,1.4,1],[5,2,3.5,1,1],[5.9,3,4.2,1.5,1],[6,2.2,4,1,1],[6.1,2.9,4.7,1.4,1],[5.6,2.9,3.6,1.3,1],[6.7,3.1,4.4,1.4,1],[5.6,3,4.5,1.5,1],[5.8,2.7,4.1,1,1],[6.2,2.2,4.5,1.5,1],[5.6,2.5,3.9,1.1,1],[5.9,3.2,4.8,1.8,1],[6.1,2.8,4,1.3,1],[6.3,2.5,4.9,1.5,1],[6.1,2.8,4.7,1.2,1],[6.4,2.9,4.3,1.3,1],[6.6,3,4.4,1.4,1],[6.8,2.8,4.8,1.4,1],[6.7,3,5,1.7,1],[6,2.9,4.5,1.5,1],[5.7,2.6,3.5,1,1],[5.5,2.4,3.8,1.1,1],[5.5,2.4,3.7,1,1],[5.8,2.7,3.9,1.2,1],[6,2.7,5.1,1.6,1],[5.4,3,4.5,1.5,1],[6,3.4,4.5,1.6,1],[6.7,3.1,4.7,1.5,1],[6.3,2.3,4.4,1.3,1],[5.6,3,4.1,1.3,1],[5.5,2.5,4,1.3,1],[5.5,2.6,4.4,1.2,1],[6.1,3,4.6,1.4,1],[5.8,2.6,4,1.2,1],[5,2.3,3.3,1,1],[5.6,2.7,4.2,1.3,1],[5.7,3,4.2,1.2,1],[5.7,2.9,4.2,1.3,1],[6.2,2.9,4.3,1.3,1],[5.1,2.5,3,1.1,1],[5.7,2.8,4.1,1.3,1],[6.3,3.3,6,2.5,2],[5.8,2.7,5.1,1.9,2],[7.1,3,5.9,2.1,2],[6.3,2.9,5.6,1.8,2],[6.5,3,5.8,2.2,2],[7.6,3,6.6,2.1,2],[4.9,2.5,4.5,1.7,2],[7.3,2.9,6.3,1.8,2],[6.7,2.5,5.8,1.8,2],[7.2,3.6,6.1,2.5,2],[6.5,3.2,5.1,2,2],[6.4,2.7,5.3,1.9,2],[6.8,3,5.5,2.1,2],[5.7,2.5,5,2,2],[5.8,2.8,5.1,2.4,2],[6.4,3.2,5.3,2.3,2],[6.5,3,5.5,1.8,2],[7.7,3.8,6.7,2.2,2],[7.7,2.6,6.9,2.3,2],[6,2.2,5,1.5,2],[6.9,3.2,5.7,2.3,2],[5.6,2.8,4.9,2,2],[7.7,2.8,6.7,2,2],[6.3,2.7,4.9,1.8,2],[6.7,3.3,5.7,2.1,2],[7.2,3.2,6,1.8,2],[6.2,2.8,4.8,1.8,2],[6.1,3,4.9,1.8,2],[6.4,2.8,5.6,2.1,2],[7.2,3,5.8,1.6,2],[7.4,2.8,6.1,1.9,2],[7.9,3.8,6.4,2,2],[6.4,2.8,5.6,2.2,2],[6.3,2.8,5.1,1.5,2],[6.1,2.6,5.6,1.4,2],[7.7,3,6.1,2.3,2],[6.3,3.4,5.6,2.4,2],[6.4,3.1,5.5,1.8,2],[6,3,4.8,1.8,2],[6.9,3.1,5.4,2.1,2],[6.7,3.1,5.6,2.4,2],[6.9,3.1,5.1,2.3,2],[5.8,2.7,5.1,1.9,2],[6.8,3.2,5.9,2.3,2],[6.7,3.3,5.7,2.5,2],[6.7,3,5.2,2.3,2],[6.3,2.5,5,1.9,2],[6.5,3,5.2,2,2],[6.2,3.4,5.4,2.3,2],[5.9,3,5.1,1.8,2]]}}]),e}(),T=function(e){(0,r.Z)(i,e);var t=(0,l.Z)(i);function i(e){var n;return(0,s.Z)(this,i),(n=t.call(this,e)).xpos=100,n.ypos=100,n.xspeed=10,n.yspeed=10,n.xdirection=1,n.ydirection=1,n.rad=50,n.vs=[],n.vsTemp=[],n.tfLinearRegression=void 0,n.t=0,n.indeCanvas.title="TF LinearRegression GradientDescent 01",n.Init(),n}return(0,a.Z)(i,[{key:"Init",value:function(){this.tfLinearRegression=new Z,this.InitData(),this.InitUI()}},{key:"InitUI",value:function(){var e=document.createElement("div");e.style.position="absolute",e.style.left="400px",e.style.color="#ffffff";var t=document.createElement("p");t.textContent="click on this screen to add data",e.append(t);var i=document.getElementById("indePanel");i&&i.append(e)}},{key:"InitData",value:function(){var e=this;P.getData().then((function(t){var i=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;t.map((function(e){var t=e.horsepower;t>s&&(s=t),t<i&&(i=t);var n=e.mpg;n>h&&(h=n),n<a&&(a=n)}));var r,l=(0,n.Z)(t);try{for(l.s();!(r=l.n()).done;){var u=r.value,d=u.horsepower,c=u.mpg;e.vsTemp.push(new o.h9(o.$H.Remap(d,i,s,.1,.9),o.$H.Remap(c,a,h,.1,.9)))}}catch(v){l.e(v)}finally{l.f()}}))}},{key:"MouseDown",value:function(e,t){this.vs.push(new o.h9(this.MapX(e),this.MapY(t)))}},{key:"MapX",value:function(e){return o.$H.Remap(e,0,this.width,0,1)}},{key:"MapY",value:function(e){return o.$H.Remap(e,0,this.height,1,0)}},{key:"RenderIndependentCanvas",value:function(e){if(e.fillStyle="#000000",e.beginPath(),e.rect(0,0,e.canvas.width,e.canvas.height),e.closePath(),e.fill(),0===(2&this.t)){var t=this.vsTemp.pop();t&&this.vs.push(t)}if(this.vs.length>1){for(var i=[],n=[],s=0;s<this.vs.length;++s)i.push(this.vs[s].x),n.push(this.vs[s].y);this.tfLinearRegression.train(i,n),this.RenderLine(e)}e.fillStyle="#00ff00";for(var a=0;a<this.vs.length;++a)e.beginPath(),e.arc(o.$H.Remap(this.vs[a].x,0,1,0,this.width),o.$H.Remap(this.vs[a].y,0,1,this.height,0),5,0,2*Math.PI),e.closePath(),e.fill();this.t+=.3}},{key:"RenderLine",value:function(e){var t=this,i=[0,1],n=C.lub((function(){return t.tfLinearRegression.predict(C.RRF(i))})),s=n.dataSync();n.dispose();var a=s[0],h=s[1];e.lineWidth=3,e.strokeStyle="#00fff0",e.beginPath(),e.moveTo(o.$H.Remap(0,0,1,0,this.width),o.$H.Remap(a,0,1,this.height,0)),e.lineTo(o.$H.Remap(1,0,1,0,this.width),o.$H.Remap(h,0,1,this.height,0)),e.stroke()}}]),i}(b),Z=function(){function e(){(0,s.Z)(this,e),this.weight=void 0,this.bias=void 0,this.leraningRate=.5,this.optimizer=void 0,this.weight=C.VD$(C.iD$(Math.random())),this.bias=C.VD$(C.iD$(Math.random())),this.optimizer=C.p_j.sgd(this.leraningRate)}return(0,a.Z)(e,[{key:"predict",value:function(e){return e.mul(this.weight).add(this.bias)}},{key:"loss",value:function(e,t){return e.sub(t).square().mean()}},{key:"train",value:function(e,t){var i=this;C.lub((function(){var n=C.RRF(e),s=C.RRF(t);i.optimizer.minimize((function(){return i.loss(i.predict(n),s)}))}))}}]),e}(),H=function(e){(0,r.Z)(i,e);var t=(0,l.Z)(i);function i(e){var n;return(0,s.Z)(this,i),(n=t.call(this,e)).xpos=100,n.ypos=100,n.xspeed=10,n.yspeed=10,n.xdirection=1,n.ydirection=1,n.rad=50,n.vs=[],n.vsTemp=[],n.selVec=void 0,n.tfLinearRegression=void 0,n.t=0,n.indeCanvas.title="TF LinearRegression GradientDescent 01",n.Init(),n.InitData(),n.InitUI(),n}return(0,a.Z)(i,[{key:"InitUI",value:function(){var e=document.createElement("div");e.style.position="absolute",e.style.left="400px",e.style.color="#ffffff";var t=document.createElement("p");t.textContent="click on this screen to add data",e.append(t);var i=document.getElementById("indePanel");if(i){i.append(e);var n=document.createElement("button");n.textContent="run",n.style.position="absolute",n.style.left="650px",n.onclick=function(){},this.scene.implementation.app.model.modelViewCoreWrapper.viewWrapper.div.append(n)}}},{key:"InitData",value:function(){var e=this;P.getData().then((function(t){var i=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;t.map((function(e){var t=e.horsepower;t>s&&(s=t),t<i&&(i=t);var n=e.mpg;n>h&&(h=n),n<a&&(a=n)}));var r,l=(0,n.Z)(t);try{for(l.s();!(r=l.n()).done;){var u=r.value,d=u.horsepower,c=u.mpg;e.vsTemp.push(new o.h9(o.$H.Remap(d,i,s,-.9,.9),o.$H.Remap(c,a,h,-.9,.9)))}}catch(v){l.e(v)}finally{l.f()}}))}},{key:"Init",value:function(){this.tfLinearRegression=new L}},{key:"MouseDown",value:function(e,t){this.vs.push(new o.h9(this.MapX(e),this.MapY(t)))}},{key:"MouseDoubleClick",value:function(){}},{key:"MapX",value:function(e){return o.$H.Remap(e,0,this.width,-1,1)}},{key:"MapY",value:function(e){return o.$H.Remap(e,0,this.height,1,-1)}},{key:"Grid",value:function(e){}},{key:"RenderIndependentCanvas",value:function(e){if(this.Grid(e),e.fillStyle="#000000",e.beginPath(),e.rect(0,0,e.canvas.width,e.canvas.height),e.closePath(),e.fill(),0===(2&this.t)){var t=this.vsTemp.pop();t&&this.vs.push(t)}if(this.vs.length>1){for(var i=[],n=[],s=0;s<this.vs.length;++s)i.push(this.vs[s].x),n.push(this.vs[s].y);this.tfLinearRegression.train(i,n),this.RenderLine(e)}e.fillStyle="#00ff00";for(var a=0;a<this.vs.length;++a)e.beginPath(),e.arc(o.$H.Remap(this.vs[a].x,-1,1,0,this.width),o.$H.Remap(this.vs[a].y,-1,1,this.height,0),5,0,2*Math.PI),e.closePath(),e.fill();this.t+=.3}},{key:"RenderLine",value:function(e){for(var t=this,i=[],n=-1;n<=1;n+=.05)i.push(n);var s=C.lub((function(){return t.tfLinearRegression.predict2d(C.RRF(i))})),a=s.dataSync();s.dispose(),e.lineWidth=3,e.strokeStyle="#00fff0",e.beginPath(),e.moveTo(o.$H.Remap(i[0],-1,1,0,this.width),o.$H.Remap(a[0],-1,1,this.height,0));for(var h=1;h<i.length;++h)e.lineTo(o.$H.Remap(i[h],-1,1,0,this.width),o.$H.Remap(a[h],-1,1,this.height,0));e.stroke()}}]),i}(b),L=function(){function e(){(0,s.Z)(this,e),this.weights=[],this.bias=void 0,this.dim=1,this.leraningRate=.2,this.optimizer=void 0;for(var t=0;t<5;++t){var i=C.VD$(C.iD$(2*Math.random()-1));i.print(),this.weights.push(i)}this.bias=C.VD$(C.iD$(2*Math.random()-1)),this.optimizer=C.p_j.adam(this.leraningRate)}return(0,a.Z)(e,[{key:"predict1d",value:function(e){return e.mul(this.weights[0]).add(this.bias)}},{key:"predict2d",value:function(e){return e.square().mul(this.weights[1]).add(e.mul(this.weights[0])).add(this.bias)}},{key:"predict3d",value:function(e){return e.pow(C.iD$(3)).mul(this.weights[2]).add(e.square().mul(this.weights[1])).add(e.mul(this.weights[0])).add(this.bias)}},{key:"predict4d",value:function(e){return e.pow(C.iD$(4)).mul(this.weights[3]).add(e.pow(C.iD$(3)).mul(this.weights[2])).add(e.square().mul(this.weights[1])).add(e.mul(this.weights[0])).add(this.bias)}},{key:"predict5d",value:function(e){return e.pow(C.iD$(5)).mul(this.weights[4]).add(e.pow(C.iD$(4)).mul(this.weights[3])).add(e.pow(C.iD$(3)).mul(this.weights[2])).add(e.square().mul(this.weights[1])).add(e.mul(this.weights[0])).add(this.bias)}},{key:"predict",value:function(e){return 5===this.dim?this.predict5d(e):4===this.dim?this.predict4d(e):3===this.dim?this.predict3d(e):2===this.dim?this.predict2d(e):this.predict1d(e)}},{key:"loss",value:function(e,t){return e.sub(t).square().mean()}},{key:"train",value:function(e,t){var i=this;C.lub((function(){var n=C.RRF(e),s=C.RRF(t);i.optimizer.minimize((function(){return i.loss(i.predict(n),s)}))}))}}]),e}(),$=function(e){(0,r.Z)(i,e);var t=(0,l.Z)(i);function i(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:650,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:350;return(0,s.Z)(this,i),(n=t.call(this,e,a,o)).xpos=100,n.ypos=100,n.xspeed=10,n.yspeed=10,n.xdirection=1,n.ydirection=1,n.rad=50,n.vs=[],n.selVec=void 0,n.tfLinearRegression=void 0,n.indeCanvas.title="TF LinearRegression GradientDescent 01",n.Init(),n}return(0,a.Z)(i,[{key:"Init",value:function(){this.tfLinearRegression=new S,this.indeCanvas.canvas.style.zIndex="-1",P.getData().then((function(e){}))}},{key:"MouseDown",value:function(e,t){for(var i=new o.h9(this.MapX(e),this.MapY(t)),n=0;n<this.vs.length;++n)if(o.h9.Distance(i,this.vs[n])<.05)return void(this.selVec=this.vs[n]);this.vs.push(new o.h9(this.MapX(e),this.MapY(t)))}},{key:"MouseDoubleClick",value:function(){}},{key:"MouseMove",value:function(e,t){for(var i=void 0,n=new o.h9(this.MapX(e),this.MapY(t)),s=0;s<this.vs.length;++s){o.h9.Distance(n,this.vs[s])<.05&&(i=this.vs[s])}this.selVec=i||void 0}},{key:"MouseDrag",value:function(e,t){this.selVec&&(this.selVec.x=this.MapX(e),this.selVec.y=this.MapY(t))}},{key:"MouseUp",value:function(){this.selVec=void 0}},{key:"MapX",value:function(e){return o.$H.Remap(e,0,this.width,-1,1)}},{key:"MapY",value:function(e){return o.$H.Remap(e,0,this.height,1,-1)}},{key:"GridLine",value:function(e){e.strokeStyle="#555555";for(var t=this.width/20-1,i=this.height/20-1,n=0;n<20;n+=1){e.lineWidth=10===n?3:1;var s=t*n,a=0,o=s,h=this.height;e.beginPath(),e.moveTo(s,a),e.lineTo(o,h),e.stroke(),s=0,a=i*n,o=this.width,h=a,e.beginPath(),e.moveTo(s,a),e.lineTo(o,h),e.stroke()}}},{key:"RenderIndependentCanvas",value:function(e){if(e.fillStyle="#000000",e.beginPath(),e.rect(0,0,e.canvas.width,e.canvas.height),e.closePath(),e.fill(),this.GridLine(e),this.vs.length>1){for(var t=[],i=[],n=0;n<this.vs.length;++n)t.push(this.vs[n].x),i.push(this.vs[n].y);this.tfLinearRegression.train(t,i),this.RenderLine(e)}e.fillStyle="#00ff00";for(var s=0;s<this.vs.length;++s)e.beginPath(),e.arc(o.$H.Remap(this.vs[s].x,-1,1,0,this.width),o.$H.Remap(this.vs[s].y,-1,1,this.height,0),5,0,2*Math.PI),e.closePath(),e.fill();this.selVec&&(e.fillStyle="#ffffff",e.font="15px Arial",e.textAlign="center",e.fillText("x:".concat(this.selVec.x.toFixed(3),", y").concat(this.selVec.y.toFixed(3)),o.$H.Remap(this.selVec.x,-1,1,0,this.width),o.$H.Remap(this.selVec.y,-1,1,this.height,0)-9))}},{key:"RenderLine",value:function(e){for(var t=this,i=[],n=-1;n<=1;n+=.05)i.push(n);var s=C.lub((function(){return t.tfLinearRegression.predict(C.RRF(i))})),a=s.dataSync();s.dispose(),e.lineWidth=3,e.strokeStyle="#00fff0",e.beginPath(),e.moveTo(o.$H.Remap(i[0],-1,1,0,this.width),o.$H.Remap(a[0],-1,1,this.height,0));for(var h=1;h<i.length;++h)e.lineTo(o.$H.Remap(i[h],-1,1,0,this.width),o.$H.Remap(a[h],-1,1,this.height,0));e.stroke()}}]),i}(b),S=function(){function e(){(0,s.Z)(this,e),this.weights=[],this.bias=void 0,this.dim=3,this.leraningRate=.2,this.optimizer=void 0;for(var t=0;t<5;++t){var i=C.VD$(C.iD$(2*Math.random()-1));i.print(),this.weights.push(i)}this.bias=C.VD$(C.iD$(2*Math.random()-1)),this.optimizer=C.p_j.adam(this.leraningRate)}return(0,a.Z)(e,[{key:"predict1d",value:function(e){return e.mul(this.weights[0]).add(this.bias)}},{key:"predict2d",value:function(e){return e.square().mul(this.weights[1]).add(e.mul(this.weights[0])).add(this.bias)}},{key:"predict3d",value:function(e){return e.pow(C.iD$(3)).mul(this.weights[2]).add(e.square().mul(this.weights[1])).add(e.mul(this.weights[0])).add(this.bias)}},{key:"predict4d",value:function(e){return e.pow(C.iD$(4)).mul(this.weights[3]).add(e.pow(C.iD$(3)).mul(this.weights[2])).add(e.square().mul(this.weights[1])).add(e.mul(this.weights[0])).add(this.bias)}},{key:"predict5d",value:function(e){return e.pow(C.iD$(5)).mul(this.weights[4]).add(e.pow(C.iD$(4)).mul(this.weights[3])).add(e.pow(C.iD$(3)).mul(this.weights[2])).add(e.square().mul(this.weights[1])).add(e.mul(this.weights[0])).add(this.bias)}},{key:"predict",value:function(e){return 5===this.dim?this.predict5d(e):4===this.dim?this.predict4d(e):3===this.dim?this.predict3d(e):2===this.dim?this.predict2d(e):this.predict1d(e)}},{key:"loss",value:function(e,t){return e.sub(t).square().mean()}},{key:"train",value:function(e,t){var i=this;C.lub((function(){var n=C.RRF(e),s=C.RRF(t);i.optimizer.minimize((function(){return i.loss(i.predict(n),s)}))}))}}]),e}(),F=function(e){(0,r.Z)(i,e);var t=(0,l.Z)(i);function i(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:650,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:350;return(0,s.Z)(this,i),(n=t.call(this,e,a,o)).xpos=100,n.ypos=100,n.xspeed=10,n.yspeed=10,n.xdirection=1,n.ydirection=1,n.rad=50,n.vs=[],n.selVec=void 0,n.tfModel=void 0,n.indeCanvas.title="TF Horsepower and Miles Per Gallon",n.Init(),n}return(0,a.Z)(i,[{key:"Init",value:function(){this.tfModel=new W}},{key:"MouseDown",value:function(e,t){for(var i=new o.h9(this.MapX(e),this.MapY(t)),n=0;n<this.vs.length;++n)if(o.h9.Distance(i,this.vs[n])<.05)return void(this.selVec=this.vs[n]);this.vs.push(new o.h9(this.MapX(e),this.MapY(t)))}},{key:"MouseMove",value:function(e,t){for(var i=void 0,n=new o.h9(this.MapX(e),this.MapY(t)),s=0;s<this.vs.length;++s){o.h9.Distance(n,this.vs[s])<.05&&(i=this.vs[s])}this.selVec=i||void 0}},{key:"MouseDrag",value:function(e,t){this.selVec&&(this.selVec.x=this.MapX(e),this.selVec.y=this.MapY(t))}},{key:"MouseUp",value:function(){this.selVec=void 0}},{key:"MapX",value:function(e){return o.$H.Remap(e,0,this.width,-1,1)}},{key:"MapY",value:function(e){return o.$H.Remap(e,0,this.height,1,-1)}},{key:"GridLine",value:function(e){e.strokeStyle="#555555";for(var t=this.width/20-1,i=this.height/20-1,n=0;n<20;n+=1){e.lineWidth=10===n?3:1;var s=t*n,a=0,o=s,h=this.height;e.beginPath(),e.moveTo(s,a),e.lineTo(o,h),e.stroke(),s=0,a=i*n,o=this.width,h=a,e.beginPath(),e.moveTo(s,a),e.lineTo(o,h),e.stroke()}}},{key:"RenderIndependentCanvas",value:function(e){if(e.fillStyle="#000000",e.beginPath(),e.rect(0,0,e.canvas.width,e.canvas.height),e.closePath(),e.fill(),this.GridLine(e),this.vs.length>1){for(var t=[],i=[],n=0;n<this.vs.length;++n)t.push(this.vs[n].x),i.push(this.vs[n].y);this.RenderLine(e)}e.fillStyle="#00ff00";for(var s=0;s<this.vs.length;++s)e.beginPath(),e.arc(o.$H.Remap(this.vs[s].x,-1,1,0,this.width),o.$H.Remap(this.vs[s].y,-1,1,this.height,0),5,0,2*Math.PI),e.closePath(),e.fill();this.selVec&&(e.fillStyle="#ffffff",e.font="15px Arial",e.textAlign="center",e.fillText("x:".concat(this.selVec.x.toFixed(3),", y").concat(this.selVec.y.toFixed(3)),o.$H.Remap(this.selVec.x,-1,1,0,this.width),o.$H.Remap(this.selVec.y,-1,1,this.height,0)-9))}},{key:"RenderLine",value:function(e){}}]),i}(b),W=function(){function e(){var t=this;(0,s.Z)(this,e),this.model=void 0,this.model=C.Pel();var i=C.ugM.dense({inputShape:[2],units:4,activation:"sigmoid"}),n=C.ugM.dense({units:1,activation:"sigmoid"});this.model.add(i),this.model.add(n);var a={optimizer:C.p_j.sgd(.1),loss:C.MB5.meanSquaredError};this.model.compile(a),this.train1().then((function(){var e=C.odF([[0,0],[.5,.5],[1,1]]);t.model.predict(e).print()}))}return(0,a.Z)(e,[{key:"train0",value:function(){var e=C.odF([[0,0],[.5,.5],[1,1]]),t=C.odF([[1],[.5],[0]]);this.model.fit(e,t,{epochs:10}).then((function(e){return console.log(e.history)})),this.model.predict(e).print()}},{key:"train1",value:function(){var e=(0,D.Z)((0,I.Z)().mark((function e(){var t,i,n,s;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=C.odF([[0,0],[.5,.5],[1,1]]),i=C.odF([[1],[.5],[0]]),n={epochs:10,shuffle:!0},s=0;case 4:if(!(s<500)){e.next=11;break}return e.next=7,this.model.fit(t,i,n);case 7:e.sent;case 8:++s,e.next=4;break;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),V=function(e){(0,r.Z)(i,e);var t=(0,l.Z)(i);function i(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:650,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:350;return(0,s.Z)(this,i),(n=t.call(this,e,a,o)).xpos=100,n.ypos=100,n.xspeed=10,n.yspeed=10,n.xdirection=1,n.ydirection=1,n.rad=50,n.vs=[],n.selVec=void 0,n.tfModel=void 0,n.xPredict=void 0,n.inputs=[],n.indeCanvas.title="TF XOR",n.Init(),n.InitUI(),n}return(0,a.Z)(i,[{key:"InitUI",value:function(){var e=document.createElement("div");e.style.position="absolute",e.style.left="10px",e.style.color="#ffffff";var t=document.createElement("p");t.textContent="ref: Coding Challenge #106: XOR Problem with TensorFlow.js by The Cording Train",t.style.fontSize="11px",e.append(t);var i=document.getElementById("indePanel");i&&i.append(e)}},{key:"Init",value:function(){this.tfModel=new E;for(var e=[],t=0;t<=10;++t)for(var i=0;i<=10;++i)e.push([.1*i,.1*t]);this.xPredict=C.odF(e)}},{key:"MouseDown",value:function(e,t){for(var i=new o.h9(this.MapX(e),this.MapY(t)),n=0;n<this.vs.length;++n)if(o.h9.Distance(i,this.vs[n])<.05)return void(this.selVec=this.vs[n]);this.vs.push(new o.h9(this.MapX(e),this.MapY(t)))}},{key:"MouseMove",value:function(e,t){for(var i=void 0,n=new o.h9(this.MapX(e),this.MapY(t)),s=0;s<this.vs.length;++s){o.h9.Distance(n,this.vs[s])<.05&&(i=this.vs[s])}this.selVec=i||void 0}},{key:"MouseDrag",value:function(e,t){this.selVec&&(this.selVec.x=this.MapX(e),this.selVec.y=this.MapY(t))}},{key:"MouseUp",value:function(){this.selVec=void 0}},{key:"MapX",value:function(e){return o.$H.Remap(e,0,this.width,-1,1)}},{key:"MapY",value:function(e){return o.$H.Remap(e,0,this.height,1,-1)}},{key:"RenderIndependentCanvas",value:function(e){var t=this;C.lub((function(){var i=t.tfModel.model.predict(t.xPredict).dataSync();e.fillStyle="#000000",e.beginPath(),e.rect(0,0,e.canvas.width,e.canvas.height),e.closePath(),e.fill();for(var n=0,s=0;s<=10;s++)for(var a=0;a<=10;a++){t.inputs.push(s);var o=42*s,h=42*a,r=i[n];e.fillStyle="rgba(".concat(255*r,",",0,",",0,",1)"),e.beginPath(),e.rect(o,h,42,42),e.closePath(),e.fill(),n++}}))}}]),i}(b),E=function(){function e(){(0,s.Z)(this,e),this.model=void 0,this.xTrain=C.odF([[0,0],[1,0],[0,1],[1,1]]),this.yTrain=C.odF([[0],[1],[1],[0]]),this.model=C.Pel();var t=C.ugM.dense({inputShape:[2],units:16,activation:"sigmoid"}),i=C.ugM.dense({units:1,activation:"sigmoid"});this.model.add(t),this.model.add(i),this.model.compile({optimizer:C.p_j.adam(.05),loss:C.MB5.meanSquaredError}),this.trainLoop()}return(0,a.Z)(e,[{key:"trainLoop",value:function(){var e=this;this.train().then((function(t){setTimeout((function(){return e.trainLoop()}),1)}))}},{key:"train",value:function(){var e=(0,D.Z)((0,I.Z)().mark((function e(){return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.fit(this.xTrain,this.yTrain,{epochs:10,shuffle:!0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),N=function(e){(0,r.Z)(i,e);var t=(0,l.Z)(i);function i(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:650,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:350;return(0,s.Z)(this,i),(n=t.call(this,e,a,o)).xpos=100,n.ypos=100,n.xspeed=10,n.yspeed=10,n.xdirection=1,n.ydirection=1,n.rad=50,n.tfModel=void 0,n.xPredict=void 0,n.inputs=[],n.indeCanvas.title="TF Horsepower and Miles Per Gallon",n.Init(),n}return(0,a.Z)(i,[{key:"Init",value:function(){this.tfModel=new A}},{key:"RenderIndependentCanvas",value:function(e){C.lub((function(){}))}}]),i}(b),A=function(){function e(){(0,s.Z)(this,e),this.model=void 0,this.inputsTensor=void 0,this.labelsTensor=void 0;var t=P.GetIrisData();C.D5U.shuffle(t);for(var i=[],n=0;n<t.length;++n){for(var a=[],o=0;o<t[n].length-1;++o)a.push(t[n][o]);i.push(a)}for(var h=[],r=0;r<t.length;++r)0===t[r][t[r].length-1]?h.push([1,0,0]):1===t[r][t[r].length-1]?h.push([0,1,0]):2===t[r][t[r].length-1]&&h.push([0,0,1]);this.inputsTensor=C.odF(i),this.labelsTensor=C.odF(h),this.inputsTensor.print(),this.labelsTensor.print(),this.model=C.Pel();var l=C.ugM.dense({inputShape:[this.inputsTensor.shape[1]],units:10,activation:"sigmoid"}),u=C.ugM.dense({units:3,activation:"softmax"});this.model.add(l),this.model.add(u),this.model.compile({optimizer:C.p_j.adam(),loss:C.MB5.softmaxCrossEntropy,metrics:["accuracy"]}),this.model.summary(),this.trainLoop()}return(0,a.Z)(e,[{key:"trainLoop",value:function(){var e=(0,D.Z)((0,I.Z)().mark((function e(){var t=this;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.save("downloads://my-model");case 2:return e.next=4,this.model.save("localstorage://ml/my-model-1");case 4:e.sent,this.train().then((function(e){setTimeout((function(){return t.trainLoop()}),1)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"train",value:function(){var e=(0,D.Z)((0,I.Z)().mark((function e(){return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.model.fit(this.inputsTensor,this.labelsTensor,{epochs:50,shuffle:!0,validationData:[this.inputsTensor,this.labelsTensor]});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),U=function(e){(0,r.Z)(i,e);var t=(0,l.Z)(i);function i(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:650,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:350;return(0,s.Z)(this,i),(n=t.call(this,e,a,o)).xpos=100,n.ypos=100,n.xspeed=10,n.yspeed=10,n.xdirection=1,n.ydirection=1,n.rad=50,n.tfModel=void 0,n.xPredict=void 0,n.inputs=[],n.indeCanvas.title="TF Horsepower and Miles Per Gallon",n.Init(),n}return(0,a.Z)(i,[{key:"Init",value:function(){var e=(0,D.Z)((0,I.Z)().mark((function e(){var t,i=this;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new X,e.next=3,t.Init().then((function(){i.tfModel=new Y("model1",t.inputsTensor,t.labelsTensor),i.tfModel.CreateModel01(),i.tfModel=new Y("model2",t.inputsTensor,t.labelsTensor),i.tfModel.CreateModel02()}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"RenderIndependentCanvas",value:function(e){C.lub((function(){}))}}]),i}(b),X=function(){function e(){(0,s.Z)(this,e),this.raw=void 0,this.inputsTensor=void 0,this.labelsTensor=void 0}return(0,a.Z)(e,[{key:"Init",value:function(){var e=(0,D.Z)((0,I.Z)().mark((function e(){var t,i,n,s,a,o,h,r,l,u,d,c;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.OpenCSV();case 2:if(t=e.sent){for(this.raw=this.processData(t),C.D5U.shuffle(this.raw),i=[],n=[],s=0;s<this.raw.length;++s){for(a=[],o=0;o<this.raw[s].length-1;++o)a.push(this.raw[s][o]);i.push(a),n.push(this.raw[s][this.raw[s].length-1])}for(h=C.Fp7(n),r=h.dataSync(),l=[],u=0;u<n.length;++u){for(d=[],c=0;c<=r[0];++c)c===n[u]?d.push(1):d.push(0);l.push(d)}this.inputsTensor=C.odF(i),this.labelsTensor=C.odF(l),this.inputsTensor.print(),this.labelsTensor.print()}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"processData",value:function(e){for(var t=e.split(/\r\n|\n/),i=t[0].split(","),n=[],s=1;s<t.length;s++){var a=t[s].split(",");if(a.length===i.length){for(var o=[],h=0;h<i.length;h++){var r=+a[h];isNaN(r)?o.push(a[h]):o.push(r)}n.push(o)}}return n}},{key:"OpenCSV",value:function(){var e=(0,D.Z)((0,I.Z)().mark((function e(){return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"smartDrawingTrainData.csv",e.abrupt("return",fetch("njslabSandboxStatic/ML/SmartDrawing/".concat("smartDrawingTrainData.csv")).then((function(e){return e.text()})).catch((function(e){})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Y=function(){function e(t,i,n){(0,s.Z)(this,e),this.t0=void 0,this.t1=void 0,this.name=void 0,this.model=void 0,this.inputsTensor=void 0,this.labelsTensor=void 0,this.name=t,this.inputsTensor=i,this.labelsTensor=n}return(0,a.Z)(e,[{key:"CreateModel01",value:function(){this.model=C.Pel();var e=C.ugM.dense({inputShape:[this.inputsTensor.shape[1]],units:20,activation:"sigmoid"}),t=C.ugM.dense({units:this.labelsTensor.shape[1],activation:"softmax"});this.model.add(e),this.model.add(t),this.Compile()}},{key:"CreateModel02",value:function(){this.model=C.Pel();var e=C.ugM.dense({inputShape:[this.inputsTensor.shape[1]],units:20,activation:"sigmoid"}),t=C.ugM.dense({units:15,activation:"sigmoid"}),i=C.ugM.dense({units:this.labelsTensor.shape[1],activation:"softmax"});this.model.add(e),this.model.add(t),this.model.add(i),this.Compile()}},{key:"Compile",value:function(){this.model.compile({optimizer:C.p_j.adam(),loss:C.MB5.softmaxCrossEntropy,metrics:["accuracy"]}),this.model.summary(),this.trainLoop()}},{key:"trainLoop",value:function(){var e=(0,D.Z)((0,I.Z)().mark((function e(){var t=this;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.t0=performance.now(),e.next=3,this.model.save("downloads://my-model");case 3:this.train().then((function(e){t.t1=performance.now(),setTimeout((function(){return t.trainLoop()}),1)}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"train",value:function(){var e=(0,D.Z)((0,I.Z)().mark((function e(){return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}(),G=i(29439),_=i(30386),z=function(e){(0,r.Z)(i,e);var t=(0,l.Z)(i);function i(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:650,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:350;return(0,s.Z)(this,i),(n=t.call(this,e,a,o)).xpos=100,n.ypos=100,n.xspeed=10,n.yspeed=10,n.xdirection=1,n.ydirection=1,n.rad=50,n.vs=[],n.selVec=void 0,n.indeCanvas.title="TF Horsepower and Miles Per Gallon",n.Init(),n}return(0,a.Z)(i,[{key:"Init",value:function(){var e=this;P.getData().then((function(t){e.train(t)}))}},{key:"train",value:function(){var e=(0,D.Z)((0,I.Z)().mark((function e(t){var i,n,s,a;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=K(t),n=i.inputs,s=i.labels,a=q(),_.show.modelSummary({name:"Model Summary"},a),e.next=6,j(a,n,s);case 6:O(a,t,i);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"MouseDown",value:function(e,t){for(var i=new o.h9(this.MapX(e),this.MapY(t)),n=0;n<this.vs.length;++n)if(o.h9.Distance(i,this.vs[n])<.05)return void(this.selVec=this.vs[n]);this.vs.push(new o.h9(this.MapX(e),this.MapY(t)))}},{key:"MouseDoubleClick",value:function(){}},{key:"MouseMove",value:function(e,t){for(var i=void 0,n=new o.h9(this.MapX(e),this.MapY(t)),s=0;s<this.vs.length;++s){o.h9.Distance(n,this.vs[s])<.05&&(i=this.vs[s])}this.selVec=i||void 0}},{key:"MouseDrag",value:function(e,t){this.selVec&&(this.selVec.x=this.MapX(e),this.selVec.y=this.MapY(t))}},{key:"MouseUp",value:function(){this.selVec=void 0}},{key:"MapX",value:function(e){return o.$H.Remap(e,0,this.width,-1,1)}},{key:"MapY",value:function(e){return o.$H.Remap(e,0,this.height,1,-1)}},{key:"GridLine",value:function(e){e.strokeStyle="#555555";for(var t=this.width/20-1,i=this.height/20-1,n=0;n<20;n+=1){e.lineWidth=10===n?3:1;var s=t*n,a=0,o=s,h=this.height;e.beginPath(),e.moveTo(s,a),e.lineTo(o,h),e.stroke(),s=0,a=i*n,o=this.width,h=a,e.beginPath(),e.moveTo(s,a),e.lineTo(o,h),e.stroke()}}},{key:"RenderIndependentCanvas",value:function(e){if(e.fillStyle="#000000",e.beginPath(),e.rect(0,0,e.canvas.width,e.canvas.height),e.closePath(),e.fill(),this.GridLine(e),this.vs.length>1){for(var t=[],i=[],n=0;n<this.vs.length;++n)t.push(this.vs[n].x),i.push(this.vs[n].y);this.RenderLine(e)}e.fillStyle="#00ff00";for(var s=0;s<this.vs.length;++s)e.beginPath(),e.arc(o.$H.Remap(this.vs[s].x,-1,1,0,this.width),o.$H.Remap(this.vs[s].y,-1,1,this.height,0),5,0,2*Math.PI),e.closePath(),e.fill();this.selVec&&(e.fillStyle="#ffffff",e.font="15px Arial",e.textAlign="center",e.fillText("x:".concat(this.selVec.x.toFixed(3),", y").concat(this.selVec.y.toFixed(3)),o.$H.Remap(this.selVec.x,-1,1,0,this.width),o.$H.Remap(this.selVec.y,-1,1,this.height,0)-9))}},{key:"RenderLine",value:function(e){for(var t=[],i=-1;i<=1;i+=.05)t.push(i)}}]),i}(b);function O(e,t,i){var n=i.inputMax,s=i.inputMin,a=i.labelMin,o=i.labelMax,h=C.lub((function(){var t=C.SX3(0,1,100),i=e.predict(t.reshape([100,1])),h=t.mul(n.sub(s)).add(s),r=i.mul(o.sub(a)).add(a);return[h.dataSync(),r.dataSync()]})),r=(0,G.Z)(h,2),l=r[0],u=r[1],d=Array.from(l).map((function(e,t){return{x:e,y:u[t]}})),c=t.map((function(e){return{x:e.horsepower,y:e.mpg}}));_.render.scatterplot({name:"Model Predictions vs Original Data"},{values:[c,d],series:["original","predicted"]},{xLabel:"Horsepower",yLabel:"MPG",height:300})}function j(e,t,i){return B.apply(this,arguments)}function B(){return(B=(0,D.Z)((0,I.Z)().mark((function e(t,i,n){return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.compile({optimizer:C.p_j.adam(),loss:C.MB5.meanSquaredError,metrics:["mse"]}),32,50,e.next=5,t.fit(i,n,{batchSize:32,epochs:50,shuffle:!0,callbacks:_.show.fitCallbacks({name:"Training Performance"},["loss","mse"],{height:200,callbacks:["onEpochEnd"]})});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=function(){var e=C.Pel();return e.add(C.ugM.dense({inputShape:[1],units:16,useBias:!0})),e.add(C.ugM.dense({units:1,useBias:!0})),e},K=function(e){return C.lub((function(){C.D5U.shuffle(e);var t=e.map((function(e){return e.horsepower})),i=e.map((function(e){return e.mpg})),n=C.odF(t,[t.length,1]),s=C.odF(i,[i.length,1]),a=n.max(),o=n.min(),h=s.max(),r=s.min();return{inputs:n.sub(o).div(a.sub(o)),labels:s.sub(r).div(h.sub(r)),inputMax:a,inputMin:o,labelMax:h,labelMin:r}}))},J=function(e){(0,r.Z)(i,e);var t=(0,l.Z)(i);function i(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:650,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:350;return(0,s.Z)(this,i),(n=t.call(this,e,a,o)).xpos=100,n.ypos=100,n.xspeed=10,n.yspeed=10,n.xdirection=1,n.ydirection=1,n.rad=50,n.vs=[],n.selVec=void 0,n.col=["#ff0000","#00ff00","#0000ff","#00fff0","#ff0000","#fff000","#0fff00"],n.tfLinearRegression=[],n.indeCanvas.title="TF MNist ",n.Init(),n.InitUI(),n}return(0,a.Z)(i,[{key:"Init",value:function(){this.tfLinearRegression.push(new Q(1)),this.tfLinearRegression.push(new Q(2)),this.tfLinearRegression.push(new Q(3)),this.tfLinearRegression.push(new Q(4)),this.indeCanvas.canvas.style.zIndex="-1",P.getData().then((function(e){}));new ie}},{key:"InitUI",value:function(){var e=document.createElement("div");e.style.position="absolute",e.style.left="40px",e.style.color="#ffffff";var t=document.createElement("p");t.textContent="click on this screen to add data",e.append(t),(t=document.createElement("p")).textContent="LinearRegression",t.style.marginTop="0px",t.style.marginBottom="0px",t.style.color=this.col[0],e.append(t),(t=document.createElement("p")).style.marginTop="0px",t.style.marginBottom="0px",t.style.color=this.col[1],t.textContent="Degree of polynomial - 2",e.append(t),(t=document.createElement("p")).style.marginTop="0px",t.style.marginBottom="0px",t.style.color=this.col[2],t.textContent="Degree of polynomial - 3",e.append(t),(t=document.createElement("p")).style.marginTop="0px",t.style.marginBottom="0px",t.style.color=this.col[3],t.textContent="Degree of polynomial - 4",e.append(t);var i=document.getElementById("indePanel");i&&i.append(e)}},{key:"MouseDown",value:function(e,t){for(var i=new o.h9(this.MapX(e),this.MapY(t)),n=0;n<this.vs.length;++n)if(o.h9.Distance(i,this.vs[n])<.05)return void(this.selVec=this.vs[n]);this.vs.push(new o.h9(this.MapX(e),this.MapY(t)))}},{key:"MouseDoubleClick",value:function(){}},{key:"MouseMove",value:function(e,t){for(var i=void 0,n=new o.h9(this.MapX(e),this.MapY(t)),s=0;s<this.vs.length;++s){o.h9.Distance(n,this.vs[s])<.05&&(i=this.vs[s])}this.selVec=i||void 0}},{key:"MouseDrag",value:function(e,t){this.selVec&&(this.selVec.x=this.MapX(e),this.selVec.y=this.MapY(t))}},{key:"MouseUp",value:function(){this.selVec=void 0}},{key:"MapX",value:function(e){return o.$H.Remap(e,0,this.width,-1,1)}},{key:"MapY",value:function(e){return o.$H.Remap(e,0,this.height,1,-1)}},{key:"GridLine",value:function(e){e.strokeStyle="#555555";for(var t=this.width/20-1,i=this.height/20-1,n=0;n<20;n+=1){e.lineWidth=10===n?3:1;var s=t*n,a=0,o=s,h=this.height;e.beginPath(),e.moveTo(s,a),e.lineTo(o,h),e.stroke(),s=0,a=i*n,o=this.width,h=a,e.beginPath(),e.moveTo(s,a),e.lineTo(o,h),e.stroke()}}},{key:"RenderIndependentCanvas",value:function(e){if(e.fillStyle="#000000",e.beginPath(),e.rect(0,0,e.canvas.width,e.canvas.height),e.closePath(),e.fill(),this.GridLine(e),this.vs.length>1)for(var t=0;t<this.tfLinearRegression.length;++t){for(var i=[],n=[],s=0;s<this.vs.length;++s)i.push(this.vs[s].x),n.push(this.vs[s].y);this.tfLinearRegression[t].train(i,n),this.RenderLine(e)}e.fillStyle="#00ff00";for(var a=0;a<this.vs.length;++a)e.beginPath(),e.arc(o.$H.Remap(this.vs[a].x,-1,1,0,this.width),o.$H.Remap(this.vs[a].y,-1,1,this.height,0),5,0,2*Math.PI),e.closePath(),e.fill();this.selVec&&(e.fillStyle="#ffffff",e.font="15px Arial",e.textAlign="center",e.fillText("x:".concat(this.selVec.x.toFixed(3),", y").concat(this.selVec.y.toFixed(3)),o.$H.Remap(this.selVec.x,-1,1,0,this.width),o.$H.Remap(this.selVec.y,-1,1,this.height,0)-9))}},{key:"RenderLine",value:function(e){for(var t=this,i=function(i){for(var n=[],s=-1;s<=1;s+=.08)n.push(s);var a=C.lub((function(){return t.tfLinearRegression[i].predict(C.RRF(n))})),h=a.dataSync();a.dispose(),e.lineWidth=1,e.strokeStyle=t.col[i],e.beginPath(),e.moveTo(o.$H.Remap(n[0],-1,1,0,t.width),o.$H.Remap(h[0],-1,1,t.height,0));for(var r=1;r<n.length;++r)e.lineTo(o.$H.Remap(n[r],-1,1,0,t.width),o.$H.Remap(h[r],-1,1,t.height,0));e.stroke()},n=0;n<this.tfLinearRegression.length;++n)i(n)}}]),i}(b),Q=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;(0,s.Z)(this,e),this.weights=[],this.bias=void 0,this.dim=3,this.leraningRate=.2,this.optimizer=void 0,this.dim=t;for(var i=0;i<5;++i){var n=C.VD$(C.iD$(2*Math.random()-1));n.print(),this.weights.push(n)}this.bias=C.VD$(C.iD$(2*Math.random()-1)),this.optimizer=C.p_j.adam(this.leraningRate)}return(0,a.Z)(e,[{key:"predict1d",value:function(e){return e.mul(this.weights[0]).add(this.bias)}},{key:"predict2d",value:function(e){return e.square().mul(this.weights[1]).add(e.mul(this.weights[0])).add(this.bias)}},{key:"predict3d",value:function(e){return e.pow(C.iD$(3)).mul(this.weights[2]).add(e.square().mul(this.weights[1])).add(e.mul(this.weights[0])).add(this.bias)}},{key:"predict4d",value:function(e){return e.pow(C.iD$(4)).mul(this.weights[3]).add(e.pow(C.iD$(3)).mul(this.weights[2])).add(e.square().mul(this.weights[1])).add(e.mul(this.weights[0])).add(this.bias)}},{key:"predict5d",value:function(e){return e.pow(C.iD$(5)).mul(this.weights[4]).add(e.pow(C.iD$(4)).mul(this.weights[3])).add(e.pow(C.iD$(3)).mul(this.weights[2])).add(e.square().mul(this.weights[1])).add(e.mul(this.weights[0])).add(this.bias)}},{key:"predict",value:function(e){return 5===this.dim?this.predict5d(e):4===this.dim?this.predict4d(e):3===this.dim?this.predict3d(e):2===this.dim?this.predict2d(e):(this.dim,this.predict1d(e))}},{key:"loss",value:function(e,t){return e.sub(t).square().mean()}},{key:"train",value:function(e,t){var i=this;C.lub((function(){var n=C.RRF(e),s=C.RRF(t);i.optimizer.minimize((function(){return i.loss(i.predict(n),s)}))}))}}]),e}(),ee=784,te=10,ie=function(){function e(){(0,s.Z)(this,e),this.testLabels=void 0,this.trainLabels=void 0,this.testImages=void 0,this.trainImages=void 0,this.datasetImages=void 0,this.datasetLabels=void 0}return(0,a.Z)(e,[{key:"load",value:function(){var e=(0,D.Z)((0,I.Z)().mark((function e(){var t,i,n,s,a,o,h,r=this;return(0,I.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Image,i=document.createElement("canvas"),n=i.getContext("2d"),s=new Promise((function(e,s){t.crossOrigin="",t.onload=function(){t.width=t.naturalWidth,t.height=t.naturalHeight;var e=new ArrayBuffer(20384e4),s=5e3;i.width=t.width,i.height=s;for(var a=0;a<13;a++){var o=new Float32Array(e,a*ee*s*4,392e4);n.drawImage(t,0,a*s,t.width,s,0,0,t.width,s);for(var h=n.getImageData(0,0,i.width,i.height),l=0;l<h.data.length/4;l++)o[l]=h.data[4*l]/255}r.datasetImages=new Float32Array(e)},t.src="https://storage.googleapis.com/learnjs-data/model-builder/mnist_images.png"})),a=fetch("https://storage.googleapis.com/learnjs-data/model-builder/mnist_labels_uint8"),e.next=7,Promise.all([s,a]);case 7:return o=e.sent,h=o[1],e.t0=Uint8Array,e.next=12,h.arrayBuffer();case 12:e.t1=e.sent,this.datasetLabels=new e.t0(e.t1),this.trainImages=this.datasetImages.slice(0,4312e4),this.testImages=this.datasetImages.slice(4312e4),this.trainLabels=this.datasetLabels.slice(0,55e4),this.testLabels=this.datasetLabels.slice(55e4);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTrainData",value:function(){return{xs:C.yXz(this.trainImages,[this.trainImages.length/ee,28,28,1]),labels:C.odF(this.trainLabels,[this.trainLabels.length/te,te])}}},{key:"getTestData",value:function(e){var t=C.yXz(this.testImages,[this.testImages.length/ee,28,28,1]),i=C.odF(this.testLabels,[this.testLabels.length/te,te]);return null!=e&&(t=t.slice([0,0,0,0],[e,28,28,1]),i=i.slice([0,0],[e,te])),{xs:t,labels:i}}}]),e}(),ne=function(e){(0,r.Z)(i,e);var t=(0,l.Z)(i);function i(e){var n;return(0,s.Z)(this,i),(n=t.call(this,e)).p=[0,0],n.Init(),n}return(0,a.Z)(i,[{key:"Init",value:function(){}},{key:"RenderIndependentCanvas",value:function(e){e.fillStyle="#ff0000",e.beginPath(),e.arc(this.p[0],this.p[1],5,0,6.28),e.closePath(),e.fill()}},{key:"MouseDown",value:function(e,t){this.p=[e,t]}},{key:"MouseMove",value:function(e,t){this.p=[e,t]}}]),i}(b),se=function(){function e(t){(0,s.Z)(this,e),this.implementation=void 0,this.canvas=void 0,this.activeCommandController=void 0,this.definitions=[],this.implementation=t,this.canvas=t.app.model.graphicsCoreWrapper.canvasWrapper.canvas,this.activeCommandController=new h(this),this.Init(),this.InitDefinition(),this.InitDefault(),this.InitPullDown()}return(0,a.Z)(e,[{key:"Init",value:function(){this.definitions=[]}},{key:"width",get:function(){return this.implementation.app.model.graphicsCoreWrapper.canvasWrapper.canvas.canvas.width}},{key:"height",get:function(){return this.implementation.app.model.graphicsCoreWrapper.canvasWrapper.canvas.canvas.height}},{key:"InitDefinition",value:function(){var e,t=(0,n.Z)(this.definitions);try{for(t.s();!(e=t.n()).done;){e.value.Init(this.implementation.app.model.graphicsCoreWrapper.canvasWrapper.canvas.ctx)}}catch(i){t.e(i)}finally{t.f()}}},{key:"Render",value:function(e){}},{key:"MouseMove",value:function(e,t){var i,s=(0,n.Z)(this.definitions);try{for(s.s();!(i=s.n()).done;){i.value.MouseMovePre(e,t)}}catch(a){s.e(a)}finally{s.f()}}},{key:"MouseLeftClick",value:function(e,t){var i,s=(0,n.Z)(this.definitions);try{for(s.s();!(i=s.n()).done;){i.value.MouseLeftClickPre(e,t)}}catch(a){s.e(a)}finally{s.f()}}},{key:"MouseDown",value:function(e,t){var i,s=(0,n.Z)(this.definitions);try{for(s.s();!(i=s.n()).done;){i.value.MouseDownPre(e,t)}}catch(a){s.e(a)}finally{s.f()}}},{key:"MouseUp",value:function(e,t){var i,s=(0,n.Z)(this.definitions);try{for(s.s();!(i=s.n()).done;){i.value.MouseUpPre(e,t)}}catch(a){s.e(a)}finally{s.f()}}},{key:"MouseDrag",value:function(e,t){var i,s=(0,n.Z)(this.definitions);try{for(s.s();!(i=s.n()).done;){i.value.MouseDragPre(e,t)}}catch(a){s.e(a)}finally{s.f()}}},{key:"MouseMiddleClick",value:function(e,t){var i,s=(0,n.Z)(this.definitions);try{for(s.s();!(i=s.n()).done;){i.value.MouseMiddleClickPre(e,t)}}catch(a){s.e(a)}finally{s.f()}}},{key:"MouseRightClick",value:function(e,t){var i,s=(0,n.Z)(this.definitions);try{for(s.s();!(i=s.n()).done;){i.value.MouseRightClickPre(e,t)}}catch(a){s.e(a)}finally{s.f()}}},{key:"MouseDoubleClick",value:function(e,t){var i,s=(0,n.Z)(this.definitions);try{for(s.s();!(i=s.n()).done;){i.value.MouseDoubleClickPre(e,t)}}catch(a){s.e(a)}finally{s.f()}}},{key:"MouseWheel",value:function(e,t,i){var s,a=(0,n.Z)(this.definitions);try{for(a.s();!(s=a.n()).done;){s.value.MouseWheelPre(e,t,i)}}catch(o){a.e(o)}finally{a.f()}}},{key:"Dispose",value:function(){this.definitions=[]}},{key:"InitDefault",value:function(){}},{key:"LoadDefinition",value:function(e){"blank"===e&&new ne(this),"TFModel02XOR"===e&&new V(this,480,500),"TFModel03Iris"===e&&new N(this,480,500),"TFModel03SmartDrawing"===e&&new U(this,480,500),"TFModel01HorsepowerAndMilesPerGallon"===e&&new z(this,500,500),"TFModel01"===e&&new F(this,500,500),"JSLinearRegression"===e&&new R(this),"JSLinearRegressionGD"===e&&new x(this),"TFLinearRegressionGD"===e&&new T(this),"TFPolynomialRegression GD"===e&&new H(this),"TFPolyRegress Interaction"===e&&new $(this,500,500),"TFMnist"===e&&new J(this,500,500)}},{key:"InitPullDown",value:function(){this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("mlProject@TFModel01"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("mlProject@TFModel02XOR"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("mlProject@TFModel03Iris"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("mlProject@--"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("mlProject@TFModel03SmartDrawing"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("mlProject@TFModel01HorsepowerAndMilesPerGallon"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@TFPlayground01"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@JSLinearRegression"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@JSLinearRegressionGD"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@TFLinearRegressionGD"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@--"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@TFPolynomialRegression GD"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@TFPolyRegress Interaction"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@TFPolyRegress Miles/Gallon"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@--"),this.implementation.app.viewController.NUIWrapper.NUI.pullDownMenuWrapper.menus[1].AddApp("tfProject@TF Regression")}}]),e}()}}]);
//# sourceMappingURL=3053.fddc20b3.chunk.js.map