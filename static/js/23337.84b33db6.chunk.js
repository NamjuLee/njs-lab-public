"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[23337],{23337:(t,s,i)=>{i.r(s),i.d(s,{AppCanvasTemplate:()=>p});var e=i(11977);class o{static GetPoint(t,s,i){return new o(t,s,i,arguments.length>3&&void 0!==arguments[3]?arguments[3]:0)}constructor(t,s,i){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.v=void 0,this.render=void 0,this.r=5,this.fillColor="",this.v=new e.h9(s,i,o),this.render=t,this.render.pointList.push(this),this.fillColor="rgb(".concat(Math.round(255*Math.random()),",").concat(Math.round(255*Math.random()),",").concat(Math.round(255*Math.random()),",").concat(Math.random(),")")}Render(t){t.fillStyle=this.fillColor,t.beginPath(),t.arc(this.v.x,this.v.y,this.r,0,2*Math.PI),t.closePath(),t.fill()}}class h{static GetLine(t,s,i){return new h(t,s,i)}constructor(t,s,i){this.p0=void 0,this.p1=void 0,this.render=void 0,this.width=5,this.strokeColor="",this.p0=s,this.p1=i,this.render=t,this.render.lineList.push(this),this.strokeColor="rgb(".concat(Math.round(255*Math.random()),",").concat(Math.round(255*Math.random()),",").concat(Math.round(255*Math.random()),",").concat(Math.random(),")")}Render(t){this.p0&&this.p1&&(t.strokeStyle=this.strokeColor,t.beginPath(),t.moveTo(this.p0.v.x,this.p0.v.y),t.lineTo(this.p1.v.x,this.p1.v.y),t.closePath(),t.stroke())}ToJson(){const t=this.p0,s=this.p1;return{p0:{x:t.v.x,y:t.v.y},p1:{x:s.v.x,y:s.v.y}}}}class a{static GetCircle(t,s,i){return new a(t,s,i)}constructor(t,s,i){this.cv=void 0,this.radius=5,this.render=void 0,this.width=5,this.strokeColor="",this.fillColor="",this.cv=s,this.radius=i,this.render=t,this.render.circleList.push(this),this.strokeColor="rgb(".concat(Math.round(255*Math.random()),",").concat(Math.round(255*Math.random()),",").concat(255*Math.random(),",").concat(Math.random(),")"),this.fillColor="rgb(".concat(Math.round(255*Math.random()),",").concat(Math.round(255*Math.random()),",").concat(255*Math.random(),",").concat(Math.random(),")")}Render(t){t.strokeStyle=this.strokeColor,t.fillStyle=this.fillColor,t.beginPath(),t.arc(this.cv.x,this.cv.y,this.radius,0,2*Math.PI),t.closePath(),t.stroke(),t.fill()}}class n{constructor(t){this.appCore=void 0,this.render=void 0,this.commander=void 0,this.mouse=new e.h9(0,0),this.capture=void 0,this.appCore=t,this.render=this.appCore.render,this.commander=new r(this)}MouseMove(t,s){this.mouse.x=t,this.mouse.y=s}MouseDClick(t,s){this.mouse.x=t,this.mouse.y=s,this.commander.ToggleAutoPopulation()}MouseDown(t,s){this.mouse.x=t,this.mouse.y=s,this.appCore.io.GetGraph(this.render.lineList)}MouseLeftClick(t,s){const i=o.GetPoint(this.render,t,s);if(this.render.pointList.length>1){const e=this.commander.FindPoint(t,s);if(e){const t=h.GetLine(this.render,i,e);this.commander.GetCircleByLine(t)}}}MouseUp(t,s){this.mouse.x=t,this.mouse.y=s}MouseDrag(t,s){this.mouse.x=t,this.mouse.y=s}}class r{constructor(t){this.controller=void 0,this.autoPopulation=!1,this.controller=t}ToggleAutoPopulation(){this.autoPopulation=!this.autoPopulation}FindPoint(t,s){const i=this.controller.render;let o,h=Number.MAX_SAFE_INTEGER,a=new e.h9(t,s);for(let e of i.pointList){let t=a.Distance(e.v);t>.1&&t<h&&(h=t,o=e)}return o||void 0}GetCircleByLine(t){const s=e.h9.MidVec(t.p0.v,t.p1.v),i=e.h9.Distance(t.p0.v,t.p1.v);a.GetCircle(this.controller.render,s,.5*i)}}class c{constructor(t){this.appCore=void 0,this.pointList=[],this.lineList=[],this.circleList=[],this.dt=0,this.appCore=t}RenderPre(t){this.Render(t)}Render(t){for(let s=0;s<this.circleList.length;++s)this.circleList[s].Render(t);for(let s=0;s<this.lineList.length;++s)this.lineList[s].Render(t);for(let s=0;s<this.pointList.length;++s)this.pointList[s].Render(t);this.dt+=.1}RenderPost(t){}}class l{constructor(t){this.appCore=void 0,this.appCore=t}GetGraph(t){console.log("get Graph",t);const s={};let i=0;t.forEach((t=>{s[i]=t.ToJson(),i++})),console.log(s)}}class d{constructor(t,s,i){this.DynamicGrid=void 0,this.width=void 0,this.height=void 0,this.controller=void 0,this.render=void 0,this.io=void 0,this.frame=0,this.DynamicGrid=t,this.Init(s-100,i-100)}Init(t,s){this.io=new l(this),this.render=new c(this),this.controller=new n(this)}MouseMove(t,s){this.controller.MouseMove(t,s)}MouseDClick(t,s){this.controller.MouseDClick(t,s)}MouseDown(t,s){this.controller.MouseDown(t,s)}MouseLeftClick(t,s){this.controller.MouseLeftClick(t,s)}MouseUp(t,s){this.controller.MouseUp(t,s)}MouseDrag(t,s){this.controller.MouseDrag(t,s)}Render(t){if(this.render.RenderPre(t),this.controller.commander.autoPopulation){let t=this.DynamicGrid.CanvasCore.canvas.width,s=this.DynamicGrid.CanvasCore.canvas.height,i=Math.random()*t-.5*t+10,e=Math.random()*s-.5*s+10;this.MouseLeftClick(i,e)}}}class v{constructor(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:400;this.app=void 0,this.canvas=void 0,this.host=void 0,this.divLocalMain=void 0,this.divCanvas=void 0,this.divUI=void 0,this.ctx=void 0,this.timer=void 0,this.click=!1,this.pressed=!1,this.prevent=!1,this.delay=500,this.down=!1,this.t=0,this.width=void 0,this.height=void 0,this.divConsole=void 0,this.app=t,this.width=s,this.height=i;const e=document.getElementById(t.id);e&&(this.host=e,this.InitCanvas())}InitCanvas(){const t=document.createElement("div");if(!t)return;this.divLocalMain=t,this.divLocalMain.style.display="flex",this.divLocalMain.style.width=this.width+"px",this.divLocalMain.style.height=this.height+"px",this.divLocalMain.style.margin="10px",this.divLocalMain.style.padding="10px",this.host.append(t);const s=document.createElement("div");if(!s)return;this.divCanvas=s,this.divLocalMain.append(s);const i=document.createElement("canvas");if(i){this.canvas=i,this.divCanvas.append(this.canvas),this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.backgroundColor="#aaaaaa";const t=this.canvas.getContext("2d");t&&(this.ctx=t,this.Init())}}Init(){this.ctx.translate(.5*this.ctx.canvas.width,.5*this.ctx.canvas.height),this.ctx.scale(1,1),this.EventBind(),this.Loop()}EventBind(){this.divCanvas.onclick=t=>{this.prevent=!1,this.timer=setTimeout((()=>{if(!this.prevent){if(!this.click)return;this.MouseClickPre(t)}this.prevent=!1}),this.delay)},this.divCanvas.ondblclick=t=>{clearTimeout(this.timer),this.prevent=!0,this.MouseDoubleClickPre(t)},this.divCanvas.addEventListener("wheel",(t=>this.MouseWheel(t,t.deltaY))),this.canvas.onmousedown=t=>{this.click=!0,this.pressed=!0,this.MouseDownPre(t)},this.canvas.onmouseup=t=>{this.pressed=!1,this.MouseUpPre(t)},this.canvas.onmousemove=t=>{this.pressed&&(this.click=!1,this.MouseDragPre(t)),this.MouseMovePre(t)},window.onresize=t=>this.Resize(t)}Resize(t){}Loop(){requestAnimationFrame((()=>{this.Loop()})),this.ctx.clearRect(.5*-this.ctx.canvas.width,.5*-this.ctx.canvas.height,this.ctx.canvas.width,this.ctx.canvas.height),this.Grid(this.ctx),this.ctx.fillStyle="#dddddd",this.ctx.beginPath(),this.ctx.rect(.5*-this.ctx.canvas.width,.5*-this.ctx.canvas.height,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.closePath(),this.ctx.fill(),this.Render(this.ctx)}Grid(t){for(let s=-10;s<10;++s)for(let i=-10;i<10;++i)t.beginPath(),t.fillStyle="rgba(255, 0, 0, 0.9)",t.arc(s,i,.05,0,2*Math.PI),t.closePath(),t.fill()}Render(t){}MouseClickPre(t){this.MouseClick(t)}MouseClick(t){}MouseDoubleClickPre(t){this.MouseDoubleClick(t)}MouseDoubleClick(t){}MouseDownPre(t){this.MouseDown(t)}MouseDown(t){}MouseUpPre(t){this.MouseUp(t)}MouseUp(t){}MouseMovePre(t){this.MouseMove(t)}MouseMove(t){}MouseDragPre(t){this.MouseDrag(t)}MouseDrag(t){}MouseWheel(t,s){}}class u{constructor(t){this.CanvasCore=void 0,this.appCore=void 0,this.t=.9,this.id=void 0,this.m=new e.h9(0,0,0),this.id=t,this.CanvasCore=new v(this),this.Init(),this.InitApp()}InitApp(){this.appCore=new d(this,this.CanvasCore.canvas.width,this.CanvasCore.canvas.height)}Init(){this.CanvasCore.Render=t=>this.Render(t),this.CanvasCore.MouseDown=t=>this.MouseDown(t),this.CanvasCore.MouseClick=t=>this.MouseClick(t),this.CanvasCore.MouseDoubleClick=t=>this.MouseDoubleClick(t),this.CanvasCore.MouseUp=t=>this.MouseUp(t),this.CanvasCore.MouseMove=t=>this.MouseMove(t),this.CanvasCore.MouseDrag=t=>this.MouseDrag(t)}Render(t){this.appCore.Render(t),t.fillStyle="rgba(255, 0, 0, 0.9)",t.beginPath(),t.arc(this.m.x,this.m.y,2.5,0,2*Math.PI),t.closePath(),t.fill()}Grid(t){}MouseDown(t){this.m.x=1*(t.x-this.CanvasCore.canvas.offsetLeft-.5*this.CanvasCore.canvas.width),this.m.y=1*(t.y-this.CanvasCore.canvas.offsetTop-.5*this.CanvasCore.canvas.height),this.appCore.MouseDown(this.m.x,this.m.y)}MouseUp(t){this.m.x=1*(t.x-this.CanvasCore.canvas.offsetLeft-.5*this.CanvasCore.canvas.width),this.m.y=1*(t.y-this.CanvasCore.canvas.offsetTop-.5*this.CanvasCore.canvas.height),this.appCore.MouseUp(this.m.x,this.m.y)}MouseMove(t){this.m.x=1*(t.x-this.CanvasCore.canvas.offsetLeft-.5*this.CanvasCore.canvas.width),this.m.y=1*(t.y-this.CanvasCore.canvas.offsetTop-.5*this.CanvasCore.canvas.height),this.appCore.MouseMove(this.m.x,this.m.y)}MouseDrag(t){this.m.x=1*(t.x-this.CanvasCore.canvas.offsetLeft-.5*this.CanvasCore.canvas.width),this.m.y=1*(t.y-this.CanvasCore.canvas.offsetTop-.5*this.CanvasCore.canvas.height),this.appCore.MouseDrag(this.m.x,this.m.y)}MouseClick(t){console.log("click"),this.m.x=1*(t.x-this.CanvasCore.canvas.offsetLeft-.5*this.CanvasCore.canvas.width),this.m.y=1*(t.y-this.CanvasCore.canvas.offsetTop-.5*this.CanvasCore.canvas.height),this.appCore.MouseLeftClick(this.m.x,this.m.y)}MouseDoubleClick(t){this.m.x=1*(t.x-this.CanvasCore.canvas.offsetLeft-.5*this.CanvasCore.canvas.width),this.m.y=1*(t.y-this.CanvasCore.canvas.offsetTop-.5*this.CanvasCore.canvas.height),this.appCore.MouseDClick(this.m.x,this.m.y)}}class C{constructor(t){this.DynamicGridA=void 0,this.DynamicGridA=new u(t)}}class p{static Init(t){new p(t).Dummy()}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"SandBox";this.implementation=void 0,this.implementation=new C(t),console.log("AppCanvasTemplate 1000")}Dummy(){}}}}]);
//# sourceMappingURL=23337.84b33db6.chunk.js.map