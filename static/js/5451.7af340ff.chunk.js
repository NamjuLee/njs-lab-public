"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[5451],{35451:function(t,e,n){n.r(e),n.d(e,{Solution:function(){return g}});var i=n(15671),s=n(43144),a=n(48506),r=n(1413),o=function(){function t(e,n,s){(0,i.Z)(this,t),this.x=void 0,this.y=void 0,this.z=void 0,this.x=e,this.y=n,this.z=s}return(0,s.Z)(t,[{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"normalize",value:function(){var t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);this.x/=t,this.y/=t,this.z/=t}}],[{key:"add",value:function(e,n){return new t(e.x+n.x,e.y+n.y,e.z+n.z)}},{key:"subtract",value:function(e,n){return new t(e.x-n.x,e.y-n.y,e.z-n.z)}},{key:"distance",value:function(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)+(t.z-e.z)*(t.z-e.z))}},{key:"deepCopy",value:function(e){return new t(e.x,e.y,e.z)}}]),t}(),d=function(t,e,n){return{x:n.x,y:n.y}},u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://raw.githubusercontent.com/NamjuLee/data/master/img/person/HaminHaram.jpg";return new Promise((function(e,n){var i=new Image;i.onload=function(){e(i),i.onload=null,i=null},i.onerror=function(t){n(t)},i.src=t}))},h=function(){function t(e){var n=this;(0,i.Z)(this,t),this.solution=void 0,this.canvas=void 0,this.statusRendering=void 0,this.statusTarget=new o(200,200,4),this.needInterpolation=!1,this.img=void 0,this.ctx=void 0,this.speedInterpolation=.1,this.easingInterpolation=!0,this.solution=e,this.canvas=document.createElement("canvas"),this.canvas.style.background="#111",this.canvas.width=1200,this.canvas.height=800,e.div.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.statusRendering=new o(0,0,1);var s=new o(0,0,1),h=new o(0,0,1),l=!1;this.canvas.addEventListener("mousedown",(function(t){var e=t.offsetX,n=t.offsetY;h.x=e,h.y=n,l=!0})),this.canvas.addEventListener("mouseup",(function(t){if(l){var e=t.offsetX,n=t.offsetY,i=e-h.x,a=n-h.y;s.x+=i,s.y+=a,l=!1}})),this.canvas.addEventListener("wheel",(function(t){var e=t.offsetX,i=t.offsetY,a=t.deltaY<0?1:-1;h.z+=.2*a,h.z<.2?h.z=.2:h.z>5&&(h.z=5);var o=function(t,e,n,i){var s=n.x,a=n.y,o=1!==e,u=o?(s+Math.abs(i.x))/i.z:s,h=o?(a+Math.abs(i.y))/i.z:a,l=u-u*e+(s-u),c=h-h*e+(a-h);return(0,r.Z)({},d(t,e,{x:l,y:c}))}(n.canvas,h.z,{x:e,y:i},s),u=o.x,l=o.y;s.x=u,s.y=l,s.z=h.z,n.statusRendering.x=u,n.statusRendering.y=l,n.statusRendering.z=h.z})),this.canvas.addEventListener("mousemove",(function(t){if(l){var e=t.offsetX,i=t.offsetY,a=s.x+(e-h.x),r=s.y+(i-h.y),o=d(n.canvas,s.z,{x:a,y:r}),u=o.x,c=o.y;n.statusRendering.x=u,n.statusRendering.y=c,n.statusRendering.z=s.z}})),console.log(a.x.url),a.x.url?(console.log(a.x.url),u(a.x.url).then((function(t){n.img=t}))):u().then((function(t){n.img=t})),this.render()}return(0,s.Z)(t,[{key:"render",value:function(){var t,e,n,i=this;requestAnimationFrame((function(){i.render()})),this.needInterpolation&&(this.easingInterpolation?(this.statusRendering=c(this.statusRendering,this.statusTarget,this.speedInterpolation),o.distance(this.statusRendering,this.statusTarget)<1&&(this.statusRendering.x=this.statusTarget.x,this.statusRendering.y=this.statusTarget.y,this.statusRendering.z=this.statusTarget.z,this.needInterpolation=!1)):(this.statusRendering=l(this.statusRendering,this.statusTarget,this.speedInterpolation),o.distance(this.statusRendering,this.statusTarget)<150*this.speedInterpolation&&(this.statusRendering.x=this.statusTarget.x,this.statusRendering.y=this.statusTarget.y,this.statusRendering.z=this.statusTarget.z,this.needInterpolation=!1))),t=this.ctx,e=this.img,n=this.statusRendering,t.clearRect(0,0,t.canvas.width,t.canvas.height),t.save(),void 0!==n&&(t.translate(n.x,n.y),t.scale(n.z,n.z)),void 0!==e&&t.drawImage(e,0,0,e.width,e.height),t.restore()}}]),t}(),l=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=o.subtract(e,t);return i.normalize(),new o(t.x+i.x*n*150,t.y+i.y*n*150,t.z+i.z*n*150)},c=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=o.subtract(e,t);return new o(t.x+i.x*n,t.y+i.y*n,t.z+i.z*n)},v=function(){function t(e){var n=this;(0,i.Z)(this,t),this.solution=void 0,this.div=void 0,this.currentIndex=-1,this.timeline=[],this.divFrameNum=void 0,this.solution=e,this.div=document.createElement("div"),this.solution.div.appendChild(this.div);var s=document.createElement("div");s.style.display="flex",this.div.appendChild(s);var a=document.createElement("div");s.appendChild(a),a.textContent="Create Key",a.style.width="100px",a.style.color="aqua",a.onclick=function(){n.timeline.push(o.deepCopy(e.canvasImage.statusRendering)),n.currentIndex=n.timeline.length-1,n.updateFrameNumber()};var r=document.createElement("div");s.appendChild(r),r.textContent="Update Key",r.style.width="100px",r.style.color="aqua",r.onclick=function(){n.timeline[n.currentIndex]=o.deepCopy(e.canvasImage.statusRendering)};var d=document.createElement("div");s.appendChild(d),d.textContent="<<<",d.style.paddingRight="20px",d.style.color="aqua",d.onclick=function(){n.currentIndex--,n.currentIndex<0&&(n.currentIndex=0),n.updateTarget(),n.updateFrameNumber()};var u=document.createElement("div");s.appendChild(u),u.textContent=">>>",u.style.color="aqua",u.onclick=function(){n.currentIndex++,n.currentIndex>n.timeline.length-1&&(n.currentIndex=n.timeline.length-1),n.updateTarget(),n.updateFrameNumber()};var h=document.createElement("div");this.div.appendChild(h),h.textContent="Play",h.style.color="aqua",h.onclick=function(){n.solution.canvasImage.needInterpolation=!n.solution.canvasImage.needInterpolation};var l=x("Easing Interpolation");this.div.append(l.div),l.checkBox.checked=!0,l.checkBox.onchange=function(){!0===l.checkBox.checked?n.solution.canvasImage.easingInterpolation=!0:n.solution.canvasImage.easingInterpolation=!1};var c=p("Speed","0","100");c.text.textContent="Speed: ",this.div.append(c.div),c.slider.oninput=function(){var t=+(.001*+c.slider.value+.03).toFixed(3);c.text.textContent="Speed: "+t,n.solution.canvasImage.speedInterpolation=t},this.divFrameNum=document.createElement("div"),this.divFrameNum.style.display="flex",this.div.appendChild(this.divFrameNum),this.updateFrameNumber();var v=document.createElement("p");v.textContent="https://raw.githubusercontent.com/NamjuLee/data/master/img/worldmap/worldMap_03.jpg",this.div.append(v)}return(0,s.Z)(t,[{key:"updateFrameNumber",value:function(){for(;this.divFrameNum.lastElementChild;)this.divFrameNum.removeChild(this.divFrameNum.lastElementChild);for(var t=0;t<this.timeline.length;++t)this.currentIndex===t?this.divFrameNum.appendChild(m(t,"aqua")):this.divFrameNum.appendChild(m(t,"#999"))}},{key:"updateTarget",value:function(){this.solution.canvasImage.statusTarget=new o(this.timeline[this.currentIndex].x,this.timeline[this.currentIndex].y,this.timeline[this.currentIndex].z),this.solution.canvasImage.needInterpolation=!0}}]),t}(),m=function(t,e){var n=document.createElement("p");return n.textContent=" ".concat(t," "),n.style.paddingRight="10px",n.style.color=e,n},p=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"2009",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"2015",i=document.createElement("div");i.style.display="flex";var s=document.createElement("input");s.type="range",s.min=e,s.max=n;var a=document.createElement("div");return a.textContent=t,a.style.color="#aaa",i.appendChild(s),i.appendChild(a),{div:i,slider:s,text:a}},x=function(t){var e=document.createElement("div");e.style.display="flex";var n=document.createElement("input");n.type="checkbox",n.defaultChecked=!1;var i=document.createElement("div");return i.textContent=t,i.style.color="#aaa",e.appendChild(n),e.appendChild(i),{div:e,checkBox:n}},g=function(){function t(e){(0,i.Z)(this,t),this.divHost=void 0,this.div=void 0,this.canvasImage=void 0,this.controller=void 0,this.divHost=e,this.divHost.style.display="flex",this.divHost.style.alignItems="center",this.div=document.createElement("div"),this.divHost.appendChild(this.div),this.div.style.marginLeft="auto",this.div.style.marginRight="auto",this.div.style.backgroundColor="#555",this.div.style.width="1000px",this.div.style.height="800px",this.canvasImage=new h(this),this.controller=new v(this)}return(0,s.Z)(t,[{key:"destroy",value:function(){for(;this.divHost.lastElementChild;)this.divHost.removeChild(this.divHost.lastElementChild)}}]),t}()}}]);
//# sourceMappingURL=5451.7af340ff.chunk.js.map