"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[86],{10086:function(e,t,i){i.r(t),i.d(t,{execution:function(){return p}});var r=i(74165),n=i(15861),s=i(38909),a=i(30386),u=i(15671),h=i(43144),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;(0,u.Z)(this,e),this.weights=[],this.bias=void 0,this.degree=3,this.leraningRate=.02,this.optimizer=void 0,this.degree=t;for(var i=0;i<5;++i){var r=s.variable(s.scalar(2*Math.random()-1));this.weights.push(r)}this.bias=s.variable(s.scalar(2*Math.random()-1)),this.optimizer=s.train.adam(this.leraningRate)}return(0,h.Z)(e,[{key:"predict1d",value:function(e){return e.mul(this.weights[0]).add(this.bias)}},{key:"predict2d",value:function(e){return e.square().mul(this.weights[1]).add(e.mul(this.weights[0])).add(this.bias)}},{key:"predict3d",value:function(e){return e.pow(s.scalar(3)).mul(this.weights[2]).add(e.square().mul(this.weights[1])).add(e.mul(this.weights[0])).add(this.bias)}},{key:"predict4d",value:function(e){return e.pow(s.scalar(4)).mul(this.weights[3]).add(e.pow(s.scalar(3)).mul(this.weights[2])).add(e.square().mul(this.weights[1])).add(e.mul(this.weights[0])).add(this.bias)}},{key:"predict5d",value:function(e){return e.pow(s.scalar(5)).mul(this.weights[4]).add(e.pow(s.scalar(4)).mul(this.weights[3])).add(e.pow(s.scalar(3)).mul(this.weights[2])).add(e.square().mul(this.weights[1])).add(e.mul(this.weights[0])).add(this.bias)}},{key:"predictResult",value:function(e){return 5===this.degree?this.predict5d(e):4===this.degree?this.predict4d(e):3===this.degree?this.predict3d(e):2===this.degree?this.predict2d(e):(this.degree,this.predict1d(e))}},{key:"loss",value:function(e,t){return e.sub(t).square().mean()}},{key:"predict",value:function(){var e=(0,n.Z)((0,r.Z)().mark((function e(t){var i,n,a=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=s.tidy((function(){return a.predictResult(s.tensor1d(t))})),n=i.dataSync(),i.dispose(),e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"train",value:function(e,t){var i=this;s.tidy((function(){var r=s.tensor1d(e),n=s.tensor1d(t);i.optimizer.minimize((function(){return i.loss(i.predictResult(r),n)}))}))}}]),e}(),c=function(){function e(){(0,u.Z)(this,e),this.a=1,this.bias=0}return(0,h.Z)(e,[{key:"predict",value:function(e){for(var t=[],i=0;i<e.length;++i)t.push(this.predictByNum(e[i]));return t}},{key:"predictByNum",value:function(e){return this.a*e+this.bias}},{key:"fit",value:function(e,t){for(var i=0,r=0,n=0;n<e.length;++n)i+=e[n],r+=t[n];for(var s=i/e.length,a=r/e.length,u=0,h=0,o=0;o<e.length;++o)u+=(e[o]-s)*(t[o]-a),h+=(e[o]-s)*(e[o]-s);this.a=u/h,this.bias=a-this.a*s}}]),e}(),d=function(){function e(){(0,u.Z)(this,e),this.learningRate=.02,this.error=Number.MAX_SAFE_INTEGER,this.weight=1,this.bias=0}return(0,h.Z)(e,[{key:"predict",value:function(e){for(var t=[],i=0;i<e.length;++i)t.push(this.predictByNum(e[i]));return t}},{key:"predictByNum",value:function(e){return this.weight*e+this.bias}},{key:"train",value:function(e,t){for(var i=0;i<e.length;++i){var r=e[i],n=t[i],s=this.weight*r+this.bias;this.error=n-s,this.weight=this.weight+this.error*r*this.learningRate,this.bias=this.bias+this.error*this.learningRate}}}]),e}(),l=i(37762),f=function(e){var t,i=[],r=g(e),n=(0,l.Z)(e);try{for(n.s();!(t=n.n()).done;){var s=t.value;i.push((s-r[0])/(r[1]-r[0]))}}catch(a){n.e(a)}finally{n.f()}return i},g=function(e){var t,i=Number.MAX_VALUE,r=Number.MIN_VALUE,n=(0,l.Z)(e);try{for(n.s();!(t=n.n()).done;){var s=t.value;i>s&&(i=s),r<s&&(r=s)}}catch(a){n.e(a)}finally{n.f()}return[i,r]},p=function(){var e=(0,n.Z)((0,r.Z)().mark((function e(t){var i,n,u,h,l,g,p,v,w,m,b;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("from lesson 01 ",s,a),i=f([1,3,5]),n=f([10,11.5,12]),u=f([1,3,5]),console.log("pred:",u),console.log("==============================================="),(h=new c).fit(i,n),console.log("LinearRegression: ",h.predict(u)),console.log("==============================================="),l=new d,g=0;case 12:if(!(g<1e4)){e.next=22;break}if(l.train(i,n),g%1e3!==0){e.next=19;break}return e.next=17,l.predict(u);case 17:p=e.sent,console.log("GD ".concat(g," ,").concat(p,", ").concat(l.error));case 19:++g,e.next=12;break;case 22:console.log("LinearRegressionGD: ",l.predict(u)),console.log("==============================================="),v=new o(1),w=0;case 26:if(!(w<2e3)){e.next=36;break}if(v.train(i,n),w%400!==0){e.next=33;break}return e.next=31,v.predict(u);case 31:m=e.sent,console.log(m);case 33:++w,e.next=26;break;case 36:return e.next=38,v.predict(u);case 38:b=e.sent,console.log("PolynomialRegression 1D ,".concat(b));case 40:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=86.6b2d7df4.chunk.js.map