"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[9642],{63870:function(t,s,e){e.d(s,{G:function(){return n}});var i=e(87968);class o{constructor(t){this.data={},this.day=24,this.scale=1,this.dataSampling=4,this.margin=25,this.ctx=void 0,this.ctx=t,document.onkeydown=t=>{this.dataSampling++},(0,i.getCSVFromURL)("/njs-lab-public/static/data/Watabot/obs_104_1928_d047_15c7.csv").then((t=>{const s=t.split(/\r\n|\r|\n/g),e=s[0].split(","),i={};let o=!0;for(let h=0;h<e.length;++h)o&&"time (UTC)"===e[h]?(i[e[h]]=[],o=!1):i[e[h]]=new Float32Array(s.length-1);for(let h=1;h<s.length;++h){const t=s[h].split(",");for(let s=0;s<e.length;++s){const o=e.indexOf(e[s]);-1!==o&&(i[e[s]][h-1]=t[o])}}this.data=i,this.render(this.ctx)}))}Offset(t){}wheel(t){t.deltaY<0?this.scale+=.25*this.scale:this.scale-=.25*this.scale,this.scale=this.scale<.012?.012:this.scale}render(t){console.log("o");let s=this.data["sea_water_ph_reported_on_total_scale (1)"];void 0!==s&&(h(t,s,this.scale,this.day,this.margin),a(t,s,"#f00",this.scale,this.day,this.dataSampling,this.margin))}}const h=(t,s,e,i,o)=>{t.setLineDash([2,2]),t.lineWidth=1;for(let h=0;h<s.length;h++){if(t.strokeStyle="rgba(200, 200, 200, 0.8)",e>.1&&h%(12*i)===0){const s=o+h*e;t.beginPath(),t.moveTo(s,o),t.lineTo(s,t.canvas.height-o),t.stroke()}if(t.strokeStyle="rgba(0, 0, 255, 0.8)",e>.02&&h%(12*i*7)===0){const s=o+h*e;t.beginPath(),t.moveTo(s,o),t.lineTo(s,t.canvas.height-o),t.stroke()}if(t.strokeStyle="rgba(0, 255, 0, 0.8)",h%(12*i*30)===0){const s=o+h*e;t.beginPath(),t.moveTo(s,o),t.lineTo(s,t.canvas.height-o),t.stroke()}}t.setLineDash([])},a=(t,s,e,i,o,h,a)=>{t.lineWidth=3,t.strokeStyle=e;let n=Number.MAX_VALUE,l=Number.MIN_VALUE;t.beginPath();let c=0;t.moveTo(c+a,a+100*s[0]);for(let r=1;r<s.length;r+=h){c+=1;const e=a+c*i*h;let o=0+a,d=0;if("mean"==="max"){for(let t=0;t<h;++t)d+=s[r+t],n>d&&(n=n>d?d:n),l=l<d?d:l;o=a+d/h*100,t.lineTo(e,o)}else{for(let t=0;t<h;++t)d<s[r+t]&&(d=s[r+t],n=n>d?d:n,l=l<d?d:l);o=a+100*d,t.lineTo(e,o)}}console.log(n,l),t.stroke()};class n{constructor(t){this.divHost=void 0,this.canvas=void 0,this.ctx=void 0,this.isDown=!1,this.debugMode=!1,this.isStatic=!1,this.waterQualityInspector=void 0,this.prevent=!1,this.delay=250,this.timer=void 0,this.isDrag=!1,this.resize=()=>{const t=this.divHost.getBoundingClientRect();this.canvas.width=t.width,this.canvas.height=t.height,this.loop(this.ctx)},this.divHost=t;const s=this.divHost.getBoundingClientRect();this.canvas=document.createElement("canvas"),this.canvas.style.position="relative",this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.background="#fff",this.canvas.style.borderRadius="30px",this.canvas.width=s.width,this.canvas.height=s.height,this.divHost.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),this.ctx.scale(-1,1),this.ctx.translate(-this.ctx.canvas.width,0),this.canvas.onclick=t=>{this.timer=setTimeout((()=>{this.prevent||this.mouseClick(t.offsetX,t.offsetY),this.isDrag=!1,this.prevent=!1}),this.delay),this.loop(this.ctx)},this.canvas.ondblclick=t=>{clearTimeout(this.timer),this.prevent=!0,this.mouseDoubleClick(t.offsetX,t.offsetY),this.loop(this.ctx)},this.canvas.onmousedown=t=>{this.isDown=!0,this.mouseDown(t.offsetX,t.offsetY),this.loop(this.ctx)},this.canvas.onmouseup=t=>{this.isDown=!1,this.isDrag=!1,this.mouseUp(t.offsetX,t.offsetY),this.loop(this.ctx)},this.canvas.onmousemove=t=>{this.isDown?(this.isDrag=!0,this.prevent=!0,this.mouseDrag(t.offsetX,t.offsetY)):this.mouseMove(t.offsetX,t.offsetY),this.loop(this.ctx)},this.canvas.onwheel=t=>{this.waterQualityInspector.wheel(t),this.loop(this.ctx)},this.waterQualityInspector=new o(this.ctx),window.addEventListener("resize",this.resize),this.start()}start(){this.loop(this.ctx)}destroy(){window.removeEventListener("resize",this.resize),this.isStatic=!0;try{for(;void 0!==this.divHost&&void 0!==this.divHost.lastElementChild;)this.divHost.removeChild(this.divHost.lastElementChild)}catch(t){}}loop(t){console.log("loop"),this.isStatic||(t.clearRect(0,0,t.canvas.width,t.canvas.height),this.render(t))}render(t){this.waterQualityInspector.render(this.ctx)}mouseClick(t,s){this.debugMode&&console.log("click")}mouseDoubleClick(t,s){this.debugMode&&console.log("d-click")}mouseDown(t,s){this.debugMode&&console.log("down")}mouseUp(t,s){this.debugMode&&console.log("up")}mouseMove(t,s){this.debugMode&&console.log("move")}mouseDrag(t,s){this.debugMode&&console.log("drag")}mouseWheel(t){this.debugMode&&console.log("wheel",t)}}},89642:function(t,s,e){e.r(s),e.d(s,{Solution:function(){return o}});var i=e(63870);class o{constructor(t){this.divHost=void 0,this.chartVizWater=void 0,this.divHost=t,this.divHost.style.display="flex",this.divHost.style.alignItems="center";const s=document.createElement("div");s.style.marginLeft="auto",s.style.marginRight="auto",s.style.width="900px",s.style.height="500px",this.divHost.appendChild(s),this.chartVizWater=new i.G(s)}destroy(){for(this.chartVizWater.destroy();this.divHost.lastElementChild;)this.divHost.removeChild(this.divHost.lastElementChild)}}}}]);
//# sourceMappingURL=9642.a8ba9f12.chunk.js.map