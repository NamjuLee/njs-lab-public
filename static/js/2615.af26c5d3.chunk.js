"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[2615],{72615:function(t,e,s){s.r(e),s.d(e,{Solution:function(){return p}});var i=s(17760),o=s(98925);class n{constructor(t){this.canvas=void 0,this.hostDiv=void 0,this.ctx=void 0,this.t=0,this.camera=void 0,this.scene=void 0,this.renderer=void 0,this.controls=void 0,this.requestFrame=void 0,this.loop=()=>{this.requestFrame=requestAnimationFrame(this.loop),this.controls.update(),this.update(this.scene),this.renderer.render(this.scene,this.camera),this.t+=.01},this.hostDiv=document.getElementById(t),this.initCanvas()}initCanvas(){this.scene=new i.xsS,this.setBG(0),this.scene.castShadow=!0,i.Tme.DEFAULT_UP.set(0,0,1),this.renderer=new i.CP7({antialias:!0,alpha:!0}),this.renderer.setPixelRatio(this.hostDiv.clientWidth/this.hostDiv.clientHeight),this.renderer.domElement.id="Three",this.renderer.domElement.style.position="absolute",this.renderer.shadowMap.enabled=!0,this.renderer.setSize(this.hostDiv.clientWidth,this.hostDiv.clientHeight),this.hostDiv.appendChild(this.renderer.domElement),this.camera=new i.cPb(30,this.hostDiv.clientWidth/this.hostDiv.clientHeight,1,5e3),this.controls=new o.OrbitControls(this.camera,this.renderer.domElement),this.camera.position.set(20,-20,20),this.controls.update(),this.canvas=this.renderer.domElement,this.init()}setBG(t){this.scene.background=new i.Ilk(t)}init(){this.eventBind()}eventBind(){this.renderer.domElement.onmousedown=t=>this.mouseDownPre(t),this.renderer.domElement.onmouseup=t=>this.mouseUpPre(t),this.renderer.domElement.onmousemove=t=>this.mouseMovePre(t),this.renderer.domElement.addEventListener("click",(t=>this.mouseClickPre(t))),window.addEventListener("resize",(()=>this.onWindowResize()))}onWindowResize(){this.camera.aspect=this.hostDiv.clientWidth/this.hostDiv.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.hostDiv.clientWidth,this.hostDiv.clientHeight)}start(){this.loop()}mouseDownPre(t){}mouseUpPre(t){}mouseClickPre(t){}mouseDClickPre(t){}mouseMovePre(t){}mouseDragPre(t){}update(t){}destroy(){for(window.removeEventListener("resize",(()=>this.onWindowResize())),cancelAnimationFrame(this.requestFrame),this.requestFrame=void 0;this.hostDiv.lastChild;)this.hostDiv.removeChild(this.hostDiv.lastChild)}}class h extends n{constructor(t){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"#000";super(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main"),this.sandboxVector=void 0,this.pointLight=void 0,this.raycaster=new i.iMs,this.mouse=new i.FM8,this.m=new i.Pa4,this.sphere=void 0,this.ground=void 0,this.axis=void 0,this.grid=void 0,this.updatePost=t=>{},this.onMouseClick=t=>{},this.onMouseMove=t=>{},this.mouseMovePre=t=>{const e=this.picking(t,this.sandboxVector.scene.arrayMesh);this.onMouseMove({e:t,intersect:e})},this.sandboxVector=t,this.setBG(e),this.initPost(),this.start()}initPost(){const t=new i.Mig(5592405);this.scene.add(t),this.pointLight=new i.cek(16777215,100),this.pointLight.position.x=10,this.pointLight.castShadow=!0,this.scene.add(this.pointLight),this.axis=new i.y8_(5),this.axis.position.z=.001,this.scene.add(this.axis);this.grid=new i.VLJ(50,100,4473924,3289650),this.grid.rotation.x=-Math.PI/2,this.scene.add(this.grid);const e=new i._12(50,50),s=new i.vBJ({color:65793,side:i.ehD,transparent:!0,opacity:0});this.ground=new i.Kj0(e,s),this.scene.add(this.ground);const o=new i.vBJ({color:65280}),n=new i.xo$(.05,50,50),h=new i.Kj0(n,o);h.translateX(1),this.sphere=h,this.scene.add(h)}reset(){}set showGrid(t){this.grid.visible=t}set showAxis(t){this.axis.visible=t}picking(t,e){this.mouse.x=t.offsetX/this.renderer.domElement.clientWidth*2-1,this.mouse.y=-t.offsetY/this.renderer.domElement.clientHeight*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);const s=this.raycaster.intersectObjects([...e]);if(s.length>0)return this.m.set(s[0].point.x,s[0].point.y,s[0].point.z),s[0].object!==this.sphere&&this.sphere.position.set(s[0].point.x,s[0].point.y,s[0].point.z),{mesh:s,ground:void 0};const i=this.raycaster.intersectObjects([this.ground]);return i.length>0?(this.m.set(i[0].point.x,i[0].point.y,i[0].point.z),this.sphere.position.set(i[0].point.x,i[0].point.y,i[0].point.z),{mesh:void 0,ground:i}):void 0}update(t){this.updatePost(t),this.sandboxVector.scene&&(this.sandboxVector.scene.arrayMesh.forEach(((t,e)=>{t.position.x=this.sandboxVector.scene.arrayPoint[e].vec.x,t.position.y=this.sandboxVector.scene.arrayPoint[e].vec.y,t.position.z=this.sandboxVector.scene.arrayPoint[e].vec.z})),this.sandboxVector.scene.arrayArrow.forEach(((t,e)=>{t.position.x=this.sandboxVector.scene.arrayPoint[e].vec.x,t.position.y=this.sandboxVector.scene.arrayPoint[e].vec.y,t.position.z=this.sandboxVector.scene.arrayPoint[e].vec.z;const s=new i.Pa4(this.sandboxVector.scene.arrayPoint[e].velocity.x,this.sandboxVector.scene.arrayPoint[e].velocity.y,this.sandboxVector.scene.arrayPoint[e].velocity.z),o=.5*s.length();t.setLength(o,.1,.1),t.setDirection(s)})),this.sandboxVector.scene.arrayLineMesh.forEach(((t,e)=>{const s=this.sandboxVector.scene.arrayLine[e];t.geometry.attributes.position.setXYZ(0,s.p0.vec.x,s.p0.vec.y,s.p0.vec.z),t.geometry.attributes.position.setXYZ(1,s.p1.vec.x,s.p1.vec.y,s.p1.vec.z),t.geometry.attributes.position.needsUpdate=!0})));const e=new i.yGw;e.makeRotationY(.011*Math.PI),this.pointLight.position.applyMatrix4(e)}mouseClickPre(t){const e=this.picking(t,this.sandboxVector.scene.arrayMesh);this.sandboxVector.common.updateSelectedData(e),this.onMouseClick({e:t,intersect:e})}}class r{constructor(t){this.sandboxVector=void 0,this.scene=void 0,this.arrayMesh=[],this.arrayPoint=[],this.arrayArrow=[],this.arrayLine=[],this.arrayLineMesh=[],this.sandboxVector=t,this.scene=t.renderer.scene}reset(){for(let t=this.arrayMesh.length-1;t>=0;t--){let e=this.arrayMesh[t];this.scene.remove(e)}for(let t=this.arrayArrow.length-1;t>=0;t--){let e=this.arrayArrow[t];this.scene.remove(e)}this.arrayMesh=[],this.arrayPoint=[],this.arrayArrow=[],this.arrayLine=[]}add(t,e){let s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.scene.add(t),s&&(this.arrayMesh.push(t),this.arrayPoint.push(e))}addArrow(t,e){const s=new i.tGC(e,t,1,"#f00");this.arrayArrow.push(s),this.scene.add(s)}addPoint(t){const e=new i.vBJ({color:16777215}),s=new i.xo$(.1,20,20),o=new i.Kj0(s,e);o.translateX(t.vec.x),o.translateY(t.vec.z),o.translateZ(t.vec.y),this.add(o,t),this.addArrow(t.vec,t.velocity)}addLine(t){this.arrayLine.push(t);const e=new i.nls({color:16777215}),s=[];s.push(new i.Pa4(t.p0.vec.x,t.p0.vec.y,t.p0.vec.z)),s.push(new i.Pa4(t.p1.vec.x,t.p1.vec.y,t.p1.vec.z));const o=(new i.u9r).setFromPoints(s),n=new i.x12(o,e);this.arrayLineMesh.push(n),this.scene.add(n)}}class d{constructor(t){this.app=void 0,this.app=t}updateSelectedData(t){if(t.mesh){const e=t.mesh[0];console.log({selGeo:e}),this.app.view.updateSelectedData(e)}}}const a=t=>{const e=document.createElement("div");e.style.display="flex";const s=document.createElement("input");s.type="checkbox",s.defaultChecked=!1;const i=document.createElement("div");return i.textContent=t,i.style.color="#aaa",e.appendChild(s),e.appendChild(i),{div:e,checkBox:s}};var c="style_middle__CBXMN";class l{constructor(t){this.hostDiv=void 0,this.main=void 0,this.mainID="mainSandbox",this.divTop=void 0,this.divRight=void 0,this.divStatus=void 0,this.sandbox=void 0,this.sandbox=t,this.initUI(),this.initTop(),this.initStatus()}reset(){this.divRight.innerText=""}updateSelectedData(t){this.divRight.innerText="x: ".concat(t.point.x," \n y: ").concat(t.point.y," \n z: ").concat(t.point.z)}initUI(){this.hostDiv=document.getElementById(this.sandbox.id);const t=document.createElement("div");t.style.background=this.sandbox.themeColor,t.style.width="100%",t.style.height="100%",this.hostDiv.append(t);const e=document.createElement("div");e.style.width="100%",e.style.height="40px",t.append(e),this.divTop=e;const s=document.createElement("div");s.className=c,t.append(s);const i=document.createElement("div");i.style.width="200px",i.style.height="100%",s.append(i);const o=document.createElement("div");o.id=this.mainID,o.style.width="100%",o.style.height="100%",s.append(o);const n=document.createElement("div");n.style.width="300px",n.style.height="100%",n.style.padding="10px",s.append(n),this.divRight=document.createElement("div"),this.divRight.style.width="100%",this.divRight.style.height="100%",n.append(this.divRight);const h=document.createElement("div");h.style.width="100%",h.style.height="40px",h.style.display="flex",t.append(h),this.divStatus=h}initTop(){const t=document.createElement("div");this.divTop.append(t);const e=document.createElement("button");e.textContent="reset",e.onclick=()=>{this.sandbox.reset()},t.append(e)}initStatus(){const t=document.createElement("div");this.divStatus.append(t),t.style.border="2px";const e=a("grid");t.append(e.div),e.checkBox.checked=!0,e.checkBox.onchange=()=>{!0===e.checkBox.checked?this.sandbox.renderer.showGrid=!0:this.sandbox.renderer.showGrid=!1};const s=document.createElement("div");this.divStatus.append(s),s.style.border="2px";const i=a("axis");s.append(i.div),i.checkBox.checked=!0,i.checkBox.onchange=()=>{!0===i.checkBox.checked?this.sandbox.renderer.showAxis=!0:this.sandbox.renderer.showAxis=!1}}}var v=class{constructor(t){this.id=void 0,this.renderer=void 0,this.view=void 0,this.common=void 0,this.scene=void 0,this.themeColor="#222",this.t=0,this.id=t,this.initDom(),this.initRenderer()}destroy(){this.renderer.destroy()}initDom(){this.view=new l(this)}initRenderer(){this.renderer=new h(this,this.view.mainID,this.themeColor),this.renderer.updatePost=t=>this.update(),this.renderer.onMouseMove=t=>this.onMouseMove(t),this.renderer.onMouseClick=t=>this.onMouseClick(t),this.scene=new r(this),this.common=new d(this)}reset(){this.t=0,this.renderer.reset(),this.scene.reset(),this.view.reset(),this.start()}start(){}update(){}onMouseMove(t){}onMouseClick(t){}};class p{constructor(t){this.div=void 0,this.sandboxVector=void 0,this.div=t,this.sandboxVector=new m(t.id)}destroy(){this.sandboxVector.destroy()}}class m extends v{constructor(t){super(t),this.t=0,this.m=[0,0],this.pts=[],this.lns=[],this.start()}start(){for(let t=-10;t<25;t++)for(let e=-10;e<10;e++){const s=new y(t,e,Math.sin(t*e*.1)+10);this.pts.push(s),this.scene.addPoint(s)}for(let t=0;t<this.pts.length-1;++t){const e=new u(this.pts[t],this.pts[t+1]);this.lns.push(e),this.scene.addLine(e)}}update(){this.pts.forEach((t=>{t.move(this.t,.985)})),this.t+=1e-4}onMouseMove(t){}onMouseClick(t){var e;console.log(t),null!==(e=t.intersect)&&void 0!==e&&e.ground&&t.intersect.ground[0].point&&this.addPoint(t.intersect.ground[0].point)}addPoint(t){const e=new y(t.x,t.y,t.z,0,0,10);this.pts.push(e),this.scene.addPoint(e)}}class u{constructor(t,e){this.p0=void 0,this.p1=void 0,this.p0=t,this.p1=e}}class y{constructor(t,e,s){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;this.dt=0,this.vec=void 0,this.velocity=void 0,this.force=new b(0,0,-.98),this.mass=1,this.r=10,this.damping=.99,this.vec=new b(t,e,s),this.velocity=new b(i,o,n)}move(t){this.velocity=x(this.velocity,this.damping),this.velocity=g(this.velocity,x(this.force,this.dt/this.mass)),this.vec=g(this.vec,x(this.velocity,this.dt)),this.vec.z<0&&(this.vec.z=0,this.velocity.z<0&&(this.velocity.z*=-.95)),this.dt+=1e-4}}const x=(t,e)=>w(t,e),w=(t,e)=>new b(t.x*e,t.y*e,t.z*e),g=(t,e)=>new b(t.x+e.x,t.y+e.y,t.z+e.z);class b{constructor(t,e,s){this.x=0,this.y=0,this.z=0,this.x=t,this.y=e,this.z=s}}}}]);
//# sourceMappingURL=2615.af26c5d3.chunk.js.map