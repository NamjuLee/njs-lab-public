{"version":3,"file":"static/js/72897.9a01832b.chunk.js","mappings":"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","sources":["njslab/app-legacy/Implementation/Demos/Demo520ImageFilterTool/ExpreeImageFilterTool/lib/preset.ts","njslab/app-legacy/Implementation/Demos/Demo520ImageFilterTool/ExpreeImageFilterTool/lib/ImageFilter.ts","njslab/app-legacy/Implementation/Demos/Demo520ImageFilterTool/ExpreeImageFilterTool/Core/Canvas/index.ts","njslab/app-legacy/Implementation/Demos/Demo520ImageFilterTool/ExpreeImageFilterTool/lib/index.ts","njslab/app-legacy/Implementation/Demos/Demo520ImageFilterTool/ExpreeImageFilterTool/Core/Frame/Core/Renderer.ts","njslab/app-legacy/Implementation/Demos/Demo520ImageFilterTool/ExpreeImageFilterTool/Core/Frame/Core/ControlPoint.ts","njslab/app-legacy/Implementation/Demos/Demo520ImageFilterTool/ExpreeImageFilterTool/Core/Frame/index.ts","njslab/app-legacy/Implementation/Demos/Demo520ImageFilterTool/ExpreeImageFilterTool/Core/Frame/Core/Transform.ts","njslab/app-legacy/Implementation/Demos/Demo520ImageFilterTool/ExpreeImageFilterTool/Core/Frame/Core/Interaction.ts","njslab/app-legacy/Implementation/Demos/Demo520ImageFilterTool/ExpreeImageFilterTool/lib/DominantColor.ts","njslab/app-legacy/Implementation/Demos/Demo520ImageFilterTool/ExpreeImageFilterTool/Core/Renderer/index.ts","njslab/app-legacy/Implementation/Demos/Demo520ImageFilterTool/ExpreeImageFilterTool/Core/ImageWrapper/index.ts","njslab/app-legacy/Implementation/Demos/Demo520ImageFilterTool/ExpreeImageFilterTool/Core/EventController/Event/TouchInteraction.ts","njslab/app-legacy/Implementation/Demos/Demo520ImageFilterTool/ExpreeImageFilterTool/Core/EventController/Event/MouseInteraction.ts","njslab/app-legacy/Implementation/Demos/Demo520ImageFilterTool/ExpreeImageFilterTool/Core/EventController/ActiveCursor.ts","njslab/app-legacy/Implementation/Demos/Demo520ImageFilterTool/ExpreeImageFilterTool/Core/EventController/index.ts","njslab/app-legacy/Implementation/Demos/Demo520ImageFilterTool/ExpreeImageFilterTool/Core/index.ts","njslab/app-legacy/Implementation/Demos/Demo520ImageFilterTool/ExpreeImageFilterTool/UI/index.ts","njslab/app-legacy/Implementation/Demos/Demo520ImageFilterTool/ExpreeImageFilterTool/index.ts","njslab/app-legacy/Implementation/Demos/Demo520ImageFilterTool/index.ts"],"sourcesContent":["export const filterPreset = {\r\n    normal : {\r\n        filter : {\r\n            sepia : 0,\r\n            contrast : 1,\r\n            brightness : 1,\r\n            saturate : 1,\r\n            hueRotate : 0,\r\n        }\r\n    },\r\n    filter1977 : {\r\n        filter : {\r\n            sepia : .5,\r\n            contrast : 1,\r\n            brightness : 1,\r\n            saturate : 1.4,\r\n            hueRotate : -30,\r\n        }\r\n    },\r\n    aden : {\r\n        filter : {\r\n            sepia : 0.2,\r\n            contrast : 1,\r\n            brightness : 1.5,\r\n            saturate : 1.4,\r\n            hueRotate : 0,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(125, 105, 24, .1)',\r\n            blendMode : 'multiply',\r\n        }\r\n    },\r\n    amaro : {\r\n        filter : {\r\n            sepia : 0.35,\r\n            contrast : 1.1,\r\n            brightness : 1.2,\r\n            saturate : 1.3,\r\n            hueRotate : 0,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(125, 105, 24, .2)',\r\n            blendMode : 'overlay',\r\n        }\r\n    },\r\n    ashby : {\r\n        filter : {\r\n            sepia : .5,\r\n            contrast : 1.2,\r\n            brightness : 1,\r\n            saturate : 1.8,\r\n            hueRotate : 0,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(125, 105, 24, .35)',\r\n            blendMode : 'lighten',\r\n        }\r\n    },\r\n    brannan : {\r\n        filter : {\r\n            sepia : 0.4,\r\n            contrast : 1.25,\r\n            brightness : 1.1,\r\n            saturate : 0.9,\r\n            hueRotate : -2,\r\n        }\r\n    },\r\n    brooklyn : {\r\n        filter : {\r\n            sepia : .25,\r\n            contrast : 1.25,\r\n            brightness : 1.25,\r\n            saturate : 1,\r\n            hueRotate : 5,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(127, 187, 227, .2)',\r\n            blendMode : 'overlay',\r\n        }\r\n    },\r\n    charmes : {\r\n        filter : {\r\n            sepia : 0.25,\r\n            contrast : 1.25,\r\n            brightness : 1.25,\r\n            saturate : 1.35,\r\n            hueRotate : -5,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(125, 105, 24, .25)',\r\n            blendMode : 'darken',\r\n        }\r\n    },\r\n    clarendon : {\r\n        filter : {\r\n            sepia : 0.15,\r\n            contrast : 1.25,\r\n            brightness : 1.25,\r\n            saturate : 1,\r\n            hueRotate : 5,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(127, 187, 227, .4)',\r\n            blendMode : 'overlay',\r\n        }\r\n    },\r\n    crema : {\r\n        filter : {\r\n            sepia : 0.5,\r\n            contrast : 1.25,\r\n            brightness : 1.15,\r\n            saturate : 0.9,\r\n            hueRotate : -2,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(125, 105, 24, .2)',\r\n            blendMode : 'multiply',\r\n        }\r\n    },\r\n    dogpatch : {\r\n        filter : {\r\n            sepia : 0.35,\r\n            contrast : 1.1,\r\n            brightness : 1.5,\r\n            saturate : 1,\r\n            hueRotate : 0,\r\n        }\r\n    },\r\n    earlybird : {\r\n        filter : {\r\n            sepia : 0.25,\r\n            contrast : 1.25,\r\n            brightness : 1.15,\r\n            saturate : 0.9,\r\n            hueRotate : -5,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(0, 0, 0, 0)',\r\n            background1 : 'rgba(125, 105, 24, .2)',\r\n            blendMode : 'multiply',\r\n        }\r\n    },\r\n    gingham : {\r\n        filter : {\r\n            sepia : 0,\r\n            contrast : 1.1,\r\n            brightness : 1.1,\r\n            saturate : 1,\r\n            hueRotate : 0,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(230, 230, 230, 1)',\r\n            blendMode : 'soft-light',\r\n        }\r\n    },\r\n    ginza : {\r\n        filter : {\r\n            sepia : 0.25,\r\n            contrast : 1.15,\r\n            brightness : 1.2,\r\n            saturate : 1.35,\r\n            hueRotate : -5,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(125, 105, 24, .15)',\r\n            blendMode : 'darken',\r\n        }\r\n    },\r\n    hefe : {\r\n        filter : {\r\n            sepia : 0.4,\r\n            contrast : 1.5,\r\n            brightness : 1.2,\r\n            saturate : 1.4,\r\n            hueRotate : -10,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(0, 0, 0, 0)',\r\n            background1 : 'rgba(0, 0, 0, .25)',\r\n            blendMode : 'soft-light',\r\n        }\r\n    },\r\n    helena : {\r\n        filter : {\r\n            sepia : 0.5,\r\n            contrast : 1.05,\r\n            brightness : 1.05,\r\n            saturate : 1.35,\r\n            hueRotate : 0,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(158, 175, 30, .25)',\r\n            blendMode : 'overlay',\r\n        }\r\n    },\r\n    hudson : {\r\n        filter : {\r\n            sepia : 0.25,\r\n            contrast : 1.2,\r\n            brightness : 1.2,\r\n            saturate : 1.05,\r\n            hueRotate : -15,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(0, 0, 0, 0)',\r\n            background1 : 'rgba(25, 62, 167, .25)',\r\n            blendMode : 'multiply',\r\n        }\r\n    },\r\n    inkwell : {\r\n        filter : {\r\n            sepia : 0,\r\n            contrast : 0.85,\r\n            brightness : 1.25,\r\n            saturate : 0,\r\n            hueRotate : 0,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(0, 0, 0, 0)',\r\n            background1 : 'rgba(25, 62, 167, .25)',\r\n            blendMode : 'multiply',\r\n        }\r\n    },\r\n    juno : {\r\n        filter : {\r\n            sepia : 0.35,\r\n            contrast : 1.15,\r\n            brightness : 1.15,\r\n            saturate : 1.8,\r\n            hueRotate : 0,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(127, 187, 227, .2)',\r\n            blendMode : 'overlay',\r\n        }\r\n    },\r\n    kelvin : {\r\n        filter : {\r\n            sepia : 0.15,\r\n            contrast : 1.5,\r\n            brightness : 1.1,\r\n            saturate : 1,\r\n            hueRotate : -10,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(128, 78, 15, .25)',\r\n            background1 : 'rgba(128, 78, 15, .5)',\r\n            blendMode : 'overlay',\r\n        }\r\n    },\r\n    lark : {\r\n        filter : {\r\n            sepia : 0.25,\r\n            contrast : 1.2,\r\n            brightness : 1.3,\r\n            saturate : 1.25,\r\n            hueRotate : 0,\r\n        }\r\n    },\r\n    lofi : {\r\n        filter : {\r\n            sepia : 0,\r\n            contrast : 1.5,\r\n            brightness : 1,\r\n            saturate : 1.1,\r\n            hueRotate : 0,\r\n        }\r\n    },\r\n    maven : {\r\n        filter : {\r\n            sepia : 0.35,\r\n            contrast : 1.05,\r\n            brightness : 1.05,\r\n            saturate : 1.75,\r\n            hueRotate : 0,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(158, 175, 30, .25)',\r\n            blendMode : 'darken',\r\n        }\r\n    },\r\n    mayfair : {\r\n        filter : {\r\n            sepia : 0,\r\n            contrast : 1.1,\r\n            brightness : 1.15,\r\n            saturate : 1.1,\r\n            hueRotate : 0,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(0, 0, 0, 0)',\r\n            background1 : 'rgba(175, 105, 24, .4)',\r\n            blendMode : 'multiply',\r\n        }\r\n    },\r\n    moon : {\r\n        filter : {\r\n            sepia : .35,\r\n            contrast : 1.4,\r\n            brightness : .95,\r\n            saturate : 0,\r\n            hueRotate : 0,\r\n        },\r\n    },\r\n    nashville : {\r\n        filter : {\r\n            sepia : 0.25,\r\n            contrast : 1.5,\r\n            brightness : 0.9,\r\n            saturate : 1,\r\n            hueRotate : -15,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(128, 78, 15, .5)',\r\n            background1 : 'rgba(128, 78, 15, .65)',\r\n            blendMode : 'screen',\r\n        }\r\n    },\r\n    perpetua : {\r\n        filter : {\r\n            sepia : 0,\r\n            contrast : 1.1,\r\n            brightness : 1.25,\r\n            saturate : 1.1,\r\n            hueRotate : 0,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(0, 91, 154, .25)',\r\n            background1 : 'rgba(230, 193, 61, .25)',\r\n            blendMode : 'multiply',\r\n        }\r\n    },\r\n    poprocket : {\r\n        filter : {\r\n            sepia : 0.15,\r\n            contrast : 1,\r\n            brightness : 1.2,\r\n            saturate : 1,\r\n            hueRotate : 0,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(206, 39, 70, .75)',\r\n            background1 : 'rgba(0, 0, 0, 0.8)',\r\n            blendMode : 'screen',\r\n        }\r\n    },\r\n    reyes : {\r\n        filter : {\r\n            sepia : 0.75,\r\n            contrast : 0.75,\r\n            brightness : 1.12,\r\n            saturate : 1.4,\r\n            hueRotate : 0,\r\n        }\r\n    },\r\n    rise : {\r\n        filter : {\r\n            sepia : 0.25,\r\n            contrast : 1.25,\r\n            brightness : 1.2,\r\n            saturate : 0.9,\r\n            hueRotate : 0,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(0, 0, 0, 0)',\r\n            background1 : 'rgba(230, 193, 61, .25)',\r\n            blendMode : 'lighten',\r\n        }\r\n    },\r\n    sierra : {\r\n        filter : {\r\n            sepia : 0.25,\r\n            contrast : 1.5,\r\n            brightness : 0.9,\r\n            saturate : 1,\r\n            hueRotate : -15,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(128, 78, 15, .5)',\r\n            background1 : 'rgba(0, 0, 0, .65)',\r\n            blendMode : 'screen',\r\n        }\r\n    },\r\n    skyline : {\r\n        filter : {\r\n            sepia : 0.15,\r\n            contrast : 1.25,\r\n            brightness : 1.25,\r\n            saturate : 1.2,\r\n            hueRotate : 0,\r\n        }\r\n    },\r\n    slumber : {\r\n        filter : {\r\n            sepia : 0.35,\r\n            contrast : 1.25,\r\n            brightness : 1,\r\n            saturate : 1.25,\r\n            hueRotate : 0,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(125, 105, 24, .2)',\r\n            blendMode : 'darken',\r\n        }\r\n    },\r\n    stinson : {\r\n        filter : {\r\n            sepia : 0.35,\r\n            contrast : 1.25,\r\n            brightness : 1.1,\r\n            saturate : 1.25,\r\n            hueRotate : 0,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(125, 105, 24, .45)',\r\n            blendMode : 'lighten',\r\n        }\r\n    },\r\n    sutro : {\r\n        filter : {\r\n            sepia : 0.4,\r\n            contrast : 1.2,\r\n            brightness : 0.9,\r\n            saturate : 1.4,\r\n            hueRotate : -10,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(0, 0, 0, 0.1)', \r\n            background1 : 'rgba(0, 0, 0, .5)',\r\n            blendMode : 'darken',\r\n        }\r\n    },\r\n    toaster : {\r\n        filter : {\r\n            sepia : 0.25,\r\n            contrast : 1.5,\r\n            brightness : .95,\r\n            saturate : 1,\r\n            hueRotate : -15,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(128, 78, 15, 1.0)', \r\n            background1 : 'rgba(0, 0, 0, .25)',\r\n            blendMode : 'screen',\r\n        }\r\n    },\r\n    valencia : {\r\n        filter : {\r\n            sepia : 0.25,\r\n            contrast : 1.1,\r\n            brightness : 1.1,\r\n            saturate : 1,\r\n            hueRotate : 0,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(230, 193, 61, .1)',\r\n            blendMode : 'lighten',\r\n        }\r\n    },\r\n    vesper : {\r\n        filter : {\r\n            sepia : 0.35,\r\n            contrast : 1.15,\r\n            brightness : 1.2,\r\n            saturate : 1.3,\r\n            hueRotate : 0,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(125, 105, 24, .25)',\r\n            blendMode : 'overlay',\r\n        }\r\n    },\r\n    walden : {\r\n        filter : {\r\n            sepia : 0.35,\r\n            contrast : 0.8,\r\n            brightness : 1.25,\r\n            saturate : 1.4,\r\n            hueRotate : 0,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(229, 240, 128, .5)',\r\n            blendMode : 'darken',\r\n        }\r\n    },\r\n    willow : {\r\n        filter : {\r\n            sepia : 0.2,\r\n            contrast : 0.85,\r\n            brightness : 1.2,\r\n            saturate : 0.05,\r\n            hueRotate : 0,\r\n        }\r\n    },\r\n    xpro2 : {\r\n        filter : {\r\n            sepia : 0.45,\r\n            contrast : 1.12,\r\n            brightness : 1.75,\r\n            saturate : 1.3,\r\n            hueRotate : -5,\r\n        },\r\n        tint: {\r\n            background0 : 'rgba(0, 91, 154, .35)',\r\n            background1 : 'rgba(0, 0, 0, .65)',\r\n            blendMode : 'multiply',\r\n        }\r\n    },\r\n//   filterAden : {\r\n//     -webkit-filter: sepia(.2) brightness(1.15) saturate(1.4);\r\n//     filter: sepia(.2) brightness(1.15) saturate(1.4);\r\n//   }\r\n  \r\n//   .filter-aden::before {\r\n//     background: rgba(125, 105, 24, .1);\r\n//     content: '';\r\n//     mix-blend-mode: multiply;\r\n//   }\r\n  \r\n//   .filter-amaro {\r\n//     -webkit-filter: sepia(.35) contrast(1.1) brightness(1.2) saturate(1.3);\r\n//     filter: sepia(.35) contrast(1.1) brightness(1.2) saturate(1.3);\r\n//   }\r\n  \r\n//   .filter-amaro::before {\r\n//     background: rgba(125, 105, 24, .2);\r\n//     content: '';\r\n//     mix-blend-mode: overlay;\r\n//   }\r\n  \r\n//   .filter-ashby {\r\n//     -webkit-filter: sepia(.5) contrast(1.2) saturate(1.8);\r\n//     filter: sepia(.5) contrast(1.2) saturate(1.8);\r\n//   }\r\n  \r\n//   .filter-ashby::before {\r\n//     background: rgba(125, 105, 24, .35);\r\n//     content: '';\r\n//     mix-blend-mode: lighten;\r\n//   }\r\n  \r\n//   .filter-brannan {\r\n//     -webkit-filter: sepia(.4) contrast(1.25) brightness(1.1) saturate(.9) hue-rotate(-2deg);\r\n//     filter: sepia(.4) contrast(1.25) brightness(1.1) saturate(.9) hue-rotate(-2deg);\r\n//   }\r\n  \r\n//   .filter-brooklyn {\r\n//     -webkit-filter: sepia(.25) contrast(1.25) brightness(1.25) hue-rotate(5deg);\r\n//     filter: sepia(.25) contrast(1.25) brightness(1.25) hue-rotate(5deg);\r\n//   }\r\n  \r\n//   .filter-brooklyn::before {\r\n//     background: rgba(127, 187, 227, .2);\r\n//     content: '';\r\n//     mix-blend-mode: overlay;\r\n//   }\r\n  \r\n//   .filter-charmes {\r\n//     -webkit-filter: sepia(.25) contrast(1.25) brightness(1.25) saturate(1.35) hue-rotate(-5deg);\r\n//     filter: sepia(.25) contrast(1.25) brightness(1.25) saturate(1.35) hue-rotate(-5deg);\r\n//   }\r\n  \r\n//   .filter-charmes::before {\r\n//     background: rgba(125, 105, 24, .25);\r\n//     content: '';\r\n//     mix-blend-mode: darken;\r\n//   }\r\n  \r\n//   .filter-clarendon {\r\n//     -webkit-filter: sepia(.15) contrast(1.25) brightness(1.25) hue-rotate(5deg);\r\n//     filter: sepia(.15) contrast(1.25) brightness(1.25) hue-rotate(5deg);\r\n//   }\r\n  \r\n//   .filter-clarendon::before {\r\n//     background: rgba(127, 187, 227, .4);\r\n//     content: '';\r\n//     mix-blend-mode: overlay;\r\n//   }\r\n  \r\n//   .filter-crema {\r\n//     -webkit-filter: sepia(.5) contrast(1.25) brightness(1.15) saturate(.9) hue-rotate(-2deg);\r\n//     filter: sepia(.5) contrast(1.25) brightness(1.15) saturate(.9) hue-rotate(-2deg);\r\n//   }\r\n  \r\n//   .filter-crema::before {\r\n//     background: rgba(125, 105, 24, .2);\r\n//     content: '';\r\n//     mix-blend-mode: multiply;\r\n//   }\r\n  \r\n//   .filter-dogpatch {\r\n//     -webkit-filter: sepia(.35) saturate(1.1) contrast(1.5);\r\n//     filter: sepia(.35) saturate(1.1) contrast(1.5);\r\n//   }\r\n  \r\n//   .filter-earlybird {\r\n//     -webkit-filter: sepia(.25) contrast(1.25) brightness(1.15) saturate(.9) hue-rotate(-5deg);\r\n//     filter: sepia(.25) contrast(1.25) brightness(1.15) saturate(.9) hue-rotate(-5deg);\r\n//   }\r\n  \r\n//   .filter-earlybird::before {\r\n//     background: radial-gradient(circle closest-corner, transparent 0, rgba(125, 105, 24, .2) 100%);\r\n//     background: -o-radial-gradient(circle closest-corner, transparent 0, rgba(125, 105, 24, .2) 100%);\r\n//     background: -moz-radial-gradient(circle closest-corner, transparent 0, rgba(125, 105, 24, .2) 100%);\r\n//     background: -webkit-radial-gradient(circle closest-corner, transparent 0, rgba(125, 105, 24, .2) 100%);\r\n//     content: '';\r\n//     mix-blend-mode: multiply;\r\n//   }\r\n  \r\n//   .filter-gingham {\r\n//     -webkit-filter: contrast(1.1) brightness(1.1);\r\n//     filter: contrast(1.1) brightness(1.1);\r\n//   }\r\n  \r\n//   .filter-gingham::before {\r\n//     background: #e6e6e6;\r\n//     content: '';\r\n//     mix-blend-mode: soft-light;\r\n//   }\r\n  \r\n//   .filter-ginza {\r\n//     -webkit-filter: sepia(.25) contrast(1.15) brightness(1.2) saturate(1.35) hue-rotate(-5deg);\r\n//     filter: sepia(.25) contrast(1.15) brightness(1.2) saturate(1.35) hue-rotate(-5deg);\r\n//   }\r\n  \r\n//   .filter-ginza::before {\r\n//     background: rgba(125, 105, 24, .15);\r\n//     content: '';\r\n//     mix-blend-mode: darken;\r\n//   }\r\n  \r\n//   .filter-hefe {\r\n//     -webkit-filter: sepia(.4) contrast(1.5) brightness(1.2) saturate(1.4) hue-rotate(-10deg);\r\n//     filter: sepia(.4) contrast(1.5) brightness(1.2) saturate(1.4) hue-rotate(-10deg);\r\n//   }\r\n  \r\n//   .filter-hefe::before {\r\n//     background: radial-gradient(circle closest-corner, transparent 0, rgba(0, 0, 0, .25) 100%);\r\n//     background: -o-radial-gradient(circle closest-corner, transparent 0, rgba(0, 0, 0, .25) 100%);\r\n//     background: -moz-radial-gradient(circle closest-corner, transparent 0, rgba(0, 0, 0, .25) 100%);\r\n//     background: -webkit-radial-gradient(circle closest-corner, transparent 0, rgba(0, 0, 0, .25) 100%);\r\n//     content: '';\r\n//     mix-blend-mode: multiply;\r\n//   }\r\n  \r\n//   .filter-helena {\r\n//     -webkit-filter: sepia(.5) contrast(1.05) brightness(1.05) saturate(1.35);\r\n//     filter: sepia(.5) contrast(1.05) brightness(1.05) saturate(1.35);\r\n//   }\r\n  \r\n//   .filter-helena::before {\r\n//     background: rgba(158, 175, 30, .25);\r\n//     content: '';\r\n//     mix-blend-mode: overlay;\r\n//   }\r\n  \r\n//   .filter-hudson {\r\n//     -webkit-filter: sepia(.25) contrast(1.2) brightness(1.2) saturate(1.05) hue-rotate(-15deg);\r\n//     filter: sepia(.25) contrast(1.2) brightness(1.2) saturate(1.05) hue-rotate(-15deg);\r\n//   }\r\n  \r\n//   .filter-hudson::before {\r\n//     background: radial-gradient(circle closest-corner, transparent 25%, rgba(25, 62, 167, .25) 100%);\r\n//     background: -o-radial-gradient(circle closest-corner, transparent 25%, rgba(25, 62, 167, .25) 100%);\r\n//     background: -moz-radial-gradient(circle closest-corner, transparent 25%, rgba(25, 62, 167, .25) 100%);\r\n//     background: -webkit-radial-gradient(circle closest-corner, transparent 25%, rgba(25, 62, 167, .25) 100%);\r\n//     content: '';\r\n//     mix-blend-mode: multiply;\r\n//   }\r\n  \r\n//   .filter-inkwell {\r\n//     -webkit-filter: brightness(1.25) contrast(.85) grayscale(1);\r\n//     filter: brightness(1.25) contrast(.85) grayscale(1);\r\n//   }\r\n  \r\n//   .filter-juno {\r\n//     -webkit-filter: sepia(.35) contrast(1.15) brightness(1.15) saturate(1.8);\r\n//     filter: sepia(.35) contrast(1.15) brightness(1.15) saturate(1.8);\r\n//   }\r\n  \r\n//   .filter-juno::before {\r\n//     background: rgba(127, 187, 227, .2);\r\n//     content: '';\r\n//     mix-blend-mode: overlay;\r\n//   }\r\n  \r\n//   .filter-kelvin {\r\n//     -webkit-filter: sepia(.15) contrast(1.5) brightness(1.1) hue-rotate(-10deg);\r\n//     filter: sepia(.15) contrast(1.5) brightness(1.1) hue-rotate(-10deg);\r\n//   }\r\n  \r\n//   .filter-kelvin::before {\r\n//     background: radial-gradient(circle closest-corner, rgba(128, 78, 15, .25) 0, rgba(128, 78, 15, .5) 100%);\r\n//     background: -o-radial-gradient(circle closest-corner, rgba(128, 78, 15, .25) 0, rgba(128, 78, 15, .5) 100%);\r\n//     background: -moz-radial-gradient(circle closest-corner, rgba(128, 78, 15, .25) 0, rgba(128, 78, 15, .5) 100%);\r\n//     background: -webkit-radial-gradient(circle closest-corner, rgba(128, 78, 15, .25) 0, rgba(128, 78, 15, .5) 100%);\r\n//     content: '';\r\n//     mix-blend-mode: overlay;\r\n//   }\r\n  \r\n//   .filter-lark {\r\n//     -webkit-filter: sepia(.25) contrast(1.2) brightness(1.3) saturate(1.25);\r\n//     filter: sepia(.25) contrast(1.2) brightness(1.3) saturate(1.25);\r\n//   }\r\n  \r\n//   .filter-lofi {\r\n//     -webkit-filter: saturate(1.1) contrast(1.5);\r\n//     filter: saturate(1.1) contrast(1.5);\r\n//   }\r\n  \r\n//   .filter-ludwig {\r\n//     -webkit-filter: sepia(.25) contrast(1.05) brightness(1.05) saturate(2);\r\n//     filter: sepia(.25) contrast(1.05) brightness(1.05) saturate(2);\r\n//   }\r\n  \r\n//   .filter-ludwig::before {\r\n//     background: rgba(125, 105, 24, .1);\r\n//     content: '';\r\n//     mix-blend-mode: overlay;\r\n//   }\r\n  \r\n//   .filter-maven {\r\n//     -webkit-filter: sepia(.35) contrast(1.05) brightness(1.05) saturate(1.75);\r\n//     filter: sepia(.35) contrast(1.05) brightness(1.05) saturate(1.75);\r\n//   }\r\n  \r\n//   .filter-maven::before {\r\n//     background: rgba(158, 175, 30, .25);\r\n//     content: '';\r\n//     mix-blend-mode: darken;\r\n//   }\r\n  \r\n//   .filter-mayfair {\r\n//     -webkit-filter: contrast(1.1) brightness(1.15) saturate(1.1);\r\n//     filter: contrast(1.1) brightness(1.15) saturate(1.1);\r\n//   }\r\n  \r\n//   .filter-mayfair::before {\r\n//     background: radial-gradient(circle closest-corner, transparent 0, rgba(175, 105, 24, .4) 100%);\r\n//     background: -o-radial-gradient(circle closest-corner, transparent 0, rgba(175, 105, 24, .4) 100%);\r\n//     background: -moz-radial-gradient(circle closest-corner, transparent 0, rgba(175, 105, 24, .4) 100%);\r\n//     background: -webkit-radial-gradient(circle closest-corner, transparent 0, rgba(175, 105, 24, .4) 100%);\r\n//     content: '';\r\n//     mix-blend-mode: multiply;\r\n//   }\r\n  \r\n//   .filter-moon {\r\n//     -webkit-filter: brightness(1.4) contrast(.95) saturate(0) sepia(.35);\r\n//     filter: brightness(1.4) contrast(.95) saturate(0) sepia(.35);\r\n//   }\r\n  \r\n//   .filter-nashville {\r\n//     -webkit-filter: sepia(.25) contrast(1.5) brightness(.9) hue-rotate(-15deg);\r\n//     filter: sepia(.25) contrast(1.5) brightness(.9) hue-rotate(-15deg);\r\n//   }\r\n  \r\n//   .filter-nashville::before {\r\n//     background: radial-gradient(circle closest-corner, rgba(128, 78, 15, .5) 0, rgba(128, 78, 15, .65) 100%);\r\n//     background: -o-radial-gradient(circle closest-corner, rgba(128, 78, 15, .5) 0, rgba(128, 78, 15, .65) 100%);\r\n//     background: -moz-radial-gradient(circle closest-corner, rgba(128, 78, 15, .5) 0, rgba(128, 78, 15, .65) 100%);\r\n//     background: -webkit-radial-gradient(circle closest-corner, rgba(128, 78, 15, .5) 0, rgba(128, 78, 15, .65) 100%);\r\n//     content: '';\r\n//     mix-blend-mode: screen;\r\n//   }\r\n  \r\n//   .filter-perpetua {\r\n//     -webkit-filter: contrast(1.1) brightness(1.25) saturate(1.1);\r\n//     filter: contrast(1.1) brightness(1.25) saturate(1.1);\r\n//   }\r\n  \r\n//   .filter-perpetua::before {\r\n//     background: linear-gradient(to bottom, rgba(0, 91, 154, .25), rgba(230, 193, 61, .25));\r\n//     background: -o-linear-gradient(top, rgba(0, 91, 154, .25), rgba(230, 193, 61, .25));\r\n//     background: -moz-linear-gradient(top, rgba(0, 91, 154, .25), rgba(230, 193, 61, .25));\r\n//     background: -webkit-linear-gradient(top, rgba(0, 91, 154, .25), rgba(230, 193, 61, .25));\r\n//     background: -webkit-gradient(linear, left top, left bottom, from(rgba(0, 91, 154, .25)), to(rgba(230, 193, 61, .25)));\r\n//     content: '';\r\n//     mix-blend-mode: multiply;\r\n//   }\r\n  \r\n//   .filter-poprocket {\r\n//     -webkit-filter: sepia(.15) brightness(1.2);\r\n//     filter: sepia(.15) brightness(1.2);\r\n//   }\r\n  \r\n//   .filter-poprocket::before {\r\n//     background: radial-gradient(circle closest-corner, rgba(206, 39, 70, .75) 40%, black 80%);\r\n//     background: -o-radial-gradient(circle closest-corner, rgba(206, 39, 70, .75) 40%, black 80%);\r\n//     background: -moz-radial-gradient(circle closest-corner, rgba(206, 39, 70, .75) 40%, black 80%);\r\n//     background: -webkit-radial-gradient(circle closest-corner, rgba(206, 39, 70, .75) 40%, black 80%);\r\n//     content: '';\r\n//     mix-blend-mode: screen;\r\n//   }\r\n  \r\n//   .filter-reyes {\r\n//     -webkit-filter: sepia(.75) contrast(.75) brightness(1.25) saturate(1.4);\r\n//     filter: sepia(.75) contrast(.75) brightness(1.25) saturate(1.4);\r\n//   }\r\n  \r\n//   .filter-rise {\r\n//     -webkit-filter: sepia(.25) contrast(1.25) brightness(1.2) saturate(.9);\r\n//     filter: sepia(.25) contrast(1.25) brightness(1.2) saturate(.9);\r\n//   }\r\n  \r\n//   .filter-rise::before {\r\n//     background: radial-gradient(circle closest-corner, transparent 0, rgba(230, 193, 61, .25) 100%);\r\n//     background: -o-radial-gradient(circle closest-corner, transparent 0, rgba(230, 193, 61, .25) 100%);\r\n//     background: -moz-radial-gradient(circle closest-corner, transparent 0, rgba(230, 193, 61, .25) 100%);\r\n//     background: -webkit-radial-gradient(circle closest-corner, transparent 0, rgba(230, 193, 61, .25) 100%);\r\n//     content: '';\r\n//     mix-blend-mode: lighten;\r\n//   }\r\n  \r\n//   .filter-sierra {\r\n//     -webkit-filter: sepia(.25) contrast(1.5) brightness(.9) hue-rotate(-15deg);\r\n//     filter: sepia(.25) contrast(1.5) brightness(.9) hue-rotate(-15deg);\r\n//   }\r\n  \r\n//   .filter-sierra::before {\r\n//     background: radial-gradient(circle closest-corner, rgba(128, 78, 15, .5) 0, rgba(0, 0, 0, .65) 100%);\r\n//     background: -o-radial-gradient(circle closest-corner, rgba(128, 78, 15, .5) 0, rgba(0, 0, 0, .65) 100%);\r\n//     background: -moz-radial-gradient(circle closest-corner, rgba(128, 78, 15, .5) 0, rgba(0, 0, 0, .65) 100%);\r\n//     background: -webkit-radial-gradient(circle closest-corner, rgba(128, 78, 15, .5) 0, rgba(0, 0, 0, .65) 100%);\r\n//     content: '';\r\n//     mix-blend-mode: screen;\r\n//   }\r\n  \r\n//   .filter-skyline {\r\n//     -webkit-filter: sepia(.15) contrast(1.25) brightness(1.25) saturate(1.2);\r\n//     filter: sepia(.15) contrast(1.25) brightness(1.25) saturate(1.2);\r\n//   }\r\n  \r\n//   .filter-slumber {\r\n//     -webkit-filter: sepia(.35) contrast(1.25) saturate(1.25);\r\n//     filter: sepia(.35) contrast(1.25) saturate(1.25);\r\n//   }\r\n  \r\n//   .filter-slumber::before {\r\n//     background: rgba(125, 105, 24, .2);\r\n//     content: '';\r\n//     mix-blend-mode: darken;\r\n//   }\r\n  \r\n//   .filter-stinson {\r\n//     -webkit-filter: sepia(.35) contrast(1.25) brightness(1.1) saturate(1.25);\r\n//     filter: sepia(.35) contrast(1.25) brightness(1.1) saturate(1.25);\r\n//   }\r\n  \r\n//   .filter-stinson::before {\r\n//     background: rgba(125, 105, 24, .45);\r\n//     content: '';\r\n//     mix-blend-mode: lighten;\r\n//   }\r\n  \r\n//   .filter-sutro {\r\n//     -webkit-filter: sepia(.4) contrast(1.2) brightness(.9) saturate(1.4) hue-rotate(-10deg);\r\n//     filter: sepia(.4) contrast(1.2) brightness(.9) saturate(1.4) hue-rotate(-10deg);\r\n//   }\r\n  \r\n//   .filter-sutro::before {\r\n//     background: radial-gradient(circle closest-corner, transparent 50%, rgba(0, 0, 0, .5) 90%);\r\n//     background: -o-radial-gradient(circle closest-corner, transparent 50%, rgba(0, 0, 0, .5) 90%);\r\n//     background: -moz-radial-gradient(circle closest-corner, transparent 50%, rgba(0, 0, 0, .5) 90%);\r\n//     background: -webkit-radial-gradient(circle closest-corner, transparent 50%, rgba(0, 0, 0, .5) 90%);\r\n//     content: '';\r\n//     mix-blend-mode: darken;\r\n//   }\r\n  \r\n//   .filter-toaster {\r\n//     -webkit-filter: sepia(.25) contrast(1.5) brightness(.95) hue-rotate(-15deg);\r\n//     filter: sepia(.25) contrast(1.5) brightness(.95) hue-rotate(-15deg);\r\n//   }\r\n  \r\n//   .filter-toaster::before {\r\n//     background: radial-gradient(circle, #804e0f, rgba(0, 0, 0, .25));\r\n//     background: -o-radial-gradient(circle, #804e0f, rgba(0, 0, 0, .25));\r\n//     background: -moz-radial-gradient(circle, #804e0f, rgba(0, 0, 0, .25));\r\n//     background: -webkit-radial-gradient(circle, #804e0f, rgba(0, 0, 0, .25));\r\n//     content: '';\r\n//     mix-blend-mode: screen;\r\n//   }\r\n  \r\n//   .filter-valencia {\r\n//     -webkit-filter: sepia(.25) contrast(1.1) brightness(1.1);\r\n//     filter: sepia(.25) contrast(1.1) brightness(1.1);\r\n//   }\r\n  \r\n//   .filter-valencia::before {\r\n//     background: rgba(230, 193, 61, .1);\r\n//     content: '';\r\n//     mix-blend-mode: lighten;\r\n//   }\r\n  \r\n//   .filter-vesper {\r\n//     -webkit-filter: sepia(.35) contrast(1.15) brightness(1.2) saturate(1.3);\r\n//     filter: sepia(.35) contrast(1.15) brightness(1.2) saturate(1.3);\r\n//   }\r\n  \r\n//   .filter-vesper::before {\r\n//     background: rgba(125, 105, 24, .25);\r\n//     content: '';\r\n//     mix-blend-mode: overlay;\r\n//   }\r\n  \r\n//   .filter-walden {\r\n//     -webkit-filter: sepia(.35) contrast(.8) brightness(1.25) saturate(1.4);\r\n//     filter: sepia(.35) contrast(.8) brightness(1.25) saturate(1.4);\r\n//   }\r\n  \r\n//   .filter-walden::before {\r\n//     background: rgba(229, 240, 128, .5);\r\n//     content: '';\r\n//     mix-blend-mode: darken;\r\n//   }\r\n  \r\n//   .filter-willow {\r\n//     -webkit-filter: brightness(1.2) contrast(.85) saturate(.05) sepia(.2);\r\n//     filter: brightness(1.2) contrast(.85) saturate(.05) sepia(.2);\r\n//   }\r\n  \r\n//   .filter-xpro-ii {\r\n//     -webkit-filter: sepia(.45) contrast(1.25) brightness(1.75) saturate(1.3) hue-rotate(-5deg);\r\n//     filter: sepia(.45) contrast(1.25) brightness(1.75) saturate(1.3) hue-rotate(-5deg);\r\n//   }\r\n  \r\n//   .filter-xpro-ii::before {\r\n//     background: radial-gradient(circle closest-corner, rgba(0, 91, 154, .35) 0, rgba(0, 0, 0, .65) 100%);\r\n//     background: -o-radial-gradient(circle closest-corner, rgba(0, 91, 154, .35) 0, rgba(0, 0, 0, .65) 100%);\r\n//     background: -moz-radial-gradient(circle closest-corner, rgba(0, 91, 154, .35) 0, rgba(0, 0, 0, .65) 100%);\r\n//     background: -webkit-radial-gradient(circle closest-corner, rgba(0, 91, 154, .35) 0, rgba(0, 0, 0, .65) 100%);\r\n//     content: '';\r\n//     mix-blend-mode: multiply;\r\n//   }\r\n}","import { filterPreset } from './preset';\r\n\r\nexport const imageFilter = (ctx: CanvasRenderingContext2D, img: HTMLImageElement, sepia = 0, contrast = 1, brightness = 1, saturate = 1, hueRotate = 0) => {\r\n\r\n  ctx.filter =`sepia(${sepia}) contrast(${contrast}) brightness(${brightness}) saturate(${saturate}) hue-rotate(${hueRotate}deg)`;\r\n  ctx.drawImage(img, 0, 0);\r\n  // ctx.globalCompositeOperation ='multiply';\r\n  // ctx.setTransform(ctx.canvas.width,0,0,ctx.canvas.height,0,0);\r\n\r\n  // var grd = ctx.createRadialGradient(0.5, 0.5, 0.1, 0.5, 0.5, 0.5);\r\n  // grd.addColorStop(0, \"rgba(20, 91, 154, .35)\");\r\n  // grd.addColorStop(1, \"rgba(0, 0, 0, .65)\");\r\n  // ctx.fillStyle = grd;\r\n  // ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n    return ctx;\r\n  }\r\nexport const imageFilterPost = (ctx: CanvasRenderingContext2D, globalCompositeOperation = 'normal', RadialGradient = true, colInner = '', colOutter = '') => {\r\n\r\n  ctx.globalCompositeOperation = globalCompositeOperation;\r\n  ctx.setTransform(ctx.canvas.width,0,0,ctx.canvas.height,0,0);\r\n\r\n\r\n    if (RadialGradient) {\r\n      let grd = ctx.createRadialGradient(0.5, 0.5, 0.1, 0.5, 0.5, 0.5);\r\n        grd.addColorStop(0, colInner);\r\n        grd.addColorStop(1, colOutter);\r\n        ctx.fillStyle = grd;\r\n    } else {\r\n        ctx.fillStyle = colInner;\r\n    }\r\n\r\n  ctx.fillRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n    return ctx;\r\n  }\r\n\r\nexport const imageFilterWithPreset = (ctx: CanvasRenderingContext2D, img: HTMLImageElement, id: number) => {\r\n    // console.log(id)\r\n\r\n    let index = [];\r\n\r\n    for (let i in filterPreset) {\r\n        index.push(i);\r\n    }\r\n\r\n    let theIndex = 1 / index.length;\r\n    let idPreset = (Math.floor(id / theIndex));\r\n\r\n    let preset = filterPreset[index[idPreset]];\r\n    console.log(index[idPreset]);\r\n    imageFilter(ctx, img, preset.filter.sepia, preset.filter.contrast, preset.filter.brightness, preset.filter.saturate, preset.filter.hueRotate );\r\n\r\n    if (preset['tint']) {\r\n        if (preset['tint']['background1']) {\r\n            imageFilterPost(ctx, preset['tint']['blendMode'], true, preset['tint']['background0'], preset['tint']['background1'] );\r\n            console.log(preset['tint']);\r\n        } else {\r\n            imageFilterPost(ctx, preset['tint']['blendMode'], false, preset['tint']['background0'] );\r\n\r\n        }\r\n    }\r\n    // console.log(filterPreset.filter1977)\r\n\r\n    // filter = filterPreset.filter1977\r\n    return index[idPreset];\r\n}\r\n\r\n\r\n\r\n\r\n\r\n/* \r\n\treference:\t\r\n\thttps://codepen.io/butschy/pen/NXLPmw \r\n*/\r\n\r\n/*! Instagram.css v0.1.4 | MIT License | github.com/picturepan2/instagram.css */\r\n\r\n/*\r\n  .filter-1977 {\r\n    -webkit-filter: sepia(.5) hue-rotate(-30deg) saturate(1.4);\r\n    filter: sepia(.5) hue-rotate(-30deg) saturate(1.4);\r\n  }\r\n\r\n  .filter-aden {\r\n    -webkit-filter: sepia(.2) brightness(1.15) saturate(1.4);\r\n    filter: sepia(.2) brightness(1.15) saturate(1.4);\r\n  }\r\n\r\n  .filter-aden::before {\r\n    background: rgba(125, 105, 24, .1);\r\n    content: \"\";\r\n    mix-blend-mode: multiply;\r\n  }\r\n\r\n  .filter-amaro {\r\n    -webkit-filter: sepia(.35) contrast(1.1) brightness(1.2) saturate(1.3);\r\n    filter: sepia(.35) contrast(1.1) brightness(1.2) saturate(1.3);\r\n  }\r\n\r\n  .filter-amaro::before {\r\n    background: rgba(125, 105, 24, .2);\r\n    content: \"\";\r\n    mix-blend-mode: overlay;\r\n  }\r\n\r\n  .filter-ashby {\r\n    -webkit-filter: sepia(.5) contrast(1.2) saturate(1.8);\r\n    filter: sepia(.5) contrast(1.2) saturate(1.8);\r\n  }\r\n\r\n  .filter-ashby::before {\r\n    background: rgba(125, 105, 24, .35);\r\n    content: \"\";\r\n    mix-blend-mode: lighten;\r\n  }\r\n\r\n  .filter-brannan {\r\n    -webkit-filter: sepia(.4) contrast(1.25) brightness(1.1) saturate(.9) hue-rotate(-2deg);\r\n    filter: sepia(.4) contrast(1.25) brightness(1.1) saturate(.9) hue-rotate(-2deg);\r\n  }\r\n\r\n  .filter-brooklyn {\r\n    -webkit-filter: sepia(.25) contrast(1.25) brightness(1.25) hue-rotate(5deg);\r\n    filter: sepia(.25) contrast(1.25) brightness(1.25) hue-rotate(5deg);\r\n  }\r\n\r\n  .filter-brooklyn::before {\r\n    background: rgba(127, 187, 227, .2);\r\n    content: \"\";\r\n    mix-blend-mode: overlay;\r\n  }\r\n\r\n  .filter-charmes {\r\n    -webkit-filter: sepia(.25) contrast(1.25) brightness(1.25) saturate(1.35) hue-rotate(-5deg);\r\n    filter: sepia(.25) contrast(1.25) brightness(1.25) saturate(1.35) hue-rotate(-5deg);\r\n  }\r\n\r\n  .filter-charmes::before {\r\n    background: rgba(125, 105, 24, .25);\r\n    content: \"\";\r\n    mix-blend-mode: darken;\r\n  }\r\n\r\n  .filter-clarendon {\r\n    -webkit-filter: sepia(.15) contrast(1.25) brightness(1.25) hue-rotate(5deg);\r\n    filter: sepia(.15) contrast(1.25) brightness(1.25) hue-rotate(5deg);\r\n  }\r\n\r\n  .filter-clarendon::before {\r\n    background: rgba(127, 187, 227, .4);\r\n    content: \"\";\r\n    mix-blend-mode: overlay;\r\n  }\r\n\r\n  .filter-crema {\r\n    -webkit-filter: sepia(.5) contrast(1.25) brightness(1.15) saturate(.9) hue-rotate(-2deg);\r\n    filter: sepia(.5) contrast(1.25) brightness(1.15) saturate(.9) hue-rotate(-2deg);\r\n  }\r\n\r\n  .filter-crema::before {\r\n    background: rgba(125, 105, 24, .2);\r\n    content: \"\";\r\n    mix-blend-mode: multiply;\r\n  }\r\n\r\n  .filter-dogpatch {\r\n    -webkit-filter: sepia(.35) saturate(1.1) contrast(1.5);\r\n    filter: sepia(.35) saturate(1.1) contrast(1.5);\r\n  }\r\n\r\n  .filter-earlybird {\r\n    -webkit-filter: sepia(.25) contrast(1.25) brightness(1.15) saturate(.9) hue-rotate(-5deg);\r\n    filter: sepia(.25) contrast(1.25) brightness(1.15) saturate(.9) hue-rotate(-5deg);\r\n  }\r\n\r\n  .filter-earlybird::before {\r\n    background: radial-gradient(circle closest-corner, transparent 0, rgba(125, 105, 24, .2) 100%);\r\n    background: -o-radial-gradient(circle closest-corner, transparent 0, rgba(125, 105, 24, .2) 100%);\r\n    background: -moz-radial-gradient(circle closest-corner, transparent 0, rgba(125, 105, 24, .2) 100%);\r\n    background: -webkit-radial-gradient(circle closest-corner, transparent 0, rgba(125, 105, 24, .2) 100%);\r\n    content: \"\";\r\n    mix-blend-mode: multiply;\r\n  }\r\n\r\n  .filter-gingham {\r\n    -webkit-filter: contrast(1.1) brightness(1.1);\r\n    filter: contrast(1.1) brightness(1.1);\r\n  }\r\n\r\n  .filter-gingham::before {\r\n    background: #e6e6e6;\r\n    content: \"\";\r\n    mix-blend-mode: soft-light;\r\n  }\r\n\r\n  .filter-ginza {\r\n    -webkit-filter: sepia(.25) contrast(1.15) brightness(1.2) saturate(1.35) hue-rotate(-5deg);\r\n    filter: sepia(.25) contrast(1.15) brightness(1.2) saturate(1.35) hue-rotate(-5deg);\r\n  }\r\n\r\n  .filter-ginza::before {\r\n    background: rgba(125, 105, 24, .15);\r\n    content: \"\";\r\n    mix-blend-mode: darken;\r\n  }\r\n\r\n  .filter-hefe {\r\n    -webkit-filter: sepia(.4) contrast(1.5) brightness(1.2) saturate(1.4) hue-rotate(-10deg);\r\n    filter: sepia(.4) contrast(1.5) brightness(1.2) saturate(1.4) hue-rotate(-10deg);\r\n  }\r\n\r\n  .filter-hefe::before {\r\n    background: radial-gradient(circle closest-corner, transparent 0, rgba(0, 0, 0, .25) 100%);\r\n    background: -o-radial-gradient(circle closest-corner, transparent 0, rgba(0, 0, 0, .25) 100%);\r\n    background: -moz-radial-gradient(circle closest-corner, transparent 0, rgba(0, 0, 0, .25) 100%);\r\n    background: -webkit-radial-gradient(circle closest-corner, transparent 0, rgba(0, 0, 0, .25) 100%);\r\n    content: \"\";\r\n    mix-blend-mode: multiply;\r\n  }\r\n\r\n  .filter-helena {\r\n    -webkit-filter: sepia(.5) contrast(1.05) brightness(1.05) saturate(1.35);\r\n    filter: sepia(.5) contrast(1.05) brightness(1.05) saturate(1.35);\r\n  }\r\n\r\n  .filter-helena::before {\r\n    background: rgba(158, 175, 30, .25);\r\n    content: \"\";\r\n    mix-blend-mode: overlay;\r\n  }\r\n\r\n  .filter-hudson {\r\n    -webkit-filter: sepia(.25) contrast(1.2) brightness(1.2) saturate(1.05) hue-rotate(-15deg);\r\n    filter: sepia(.25) contrast(1.2) brightness(1.2) saturate(1.05) hue-rotate(-15deg);\r\n  }\r\n\r\n  .filter-hudson::before {\r\n    background: radial-gradient(circle closest-corner, transparent 25%, rgba(25, 62, 167, .25) 100%);\r\n    background: -o-radial-gradient(circle closest-corner, transparent 25%, rgba(25, 62, 167, .25) 100%);\r\n    background: -moz-radial-gradient(circle closest-corner, transparent 25%, rgba(25, 62, 167, .25) 100%);\r\n    background: -webkit-radial-gradient(circle closest-corner, transparent 25%, rgba(25, 62, 167, .25) 100%);\r\n    content: \"\";\r\n    mix-blend-mode: multiply;\r\n  }\r\n\r\n  .filter-inkwell {\r\n    -webkit-filter: brightness(1.25) contrast(.85) grayscale(1);\r\n    filter: brightness(1.25) contrast(.85) grayscale(1);\r\n  }\r\n\r\n  .filter-juno {\r\n    -webkit-filter: sepia(.35) contrast(1.15) brightness(1.15) saturate(1.8);\r\n    filter: sepia(.35) contrast(1.15) brightness(1.15) saturate(1.8);\r\n  }\r\n\r\n  .filter-juno::before {\r\n    background: rgba(127, 187, 227, .2);\r\n    content: \"\";\r\n    mix-blend-mode: overlay;\r\n  }\r\n\r\n  .filter-kelvin {\r\n    -webkit-filter: sepia(.15) contrast(1.5) brightness(1.1) hue-rotate(-10deg);\r\n    filter: sepia(.15) contrast(1.5) brightness(1.1) hue-rotate(-10deg);\r\n  }\r\n\r\n  .filter-kelvin::before {\r\n    background: radial-gradient(circle closest-corner, rgba(128, 78, 15, .25) 0, rgba(128, 78, 15, .5) 100%);\r\n    background: -o-radial-gradient(circle closest-corner, rgba(128, 78, 15, .25) 0, rgba(128, 78, 15, .5) 100%);\r\n    background: -moz-radial-gradient(circle closest-corner, rgba(128, 78, 15, .25) 0, rgba(128, 78, 15, .5) 100%);\r\n    background: -webkit-radial-gradient(circle closest-corner, rgba(128, 78, 15, .25) 0, rgba(128, 78, 15, .5) 100%);\r\n    content: \"\";\r\n    mix-blend-mode: overlay;\r\n  }\r\n\r\n  .filter-lark {\r\n    -webkit-filter: sepia(.25) contrast(1.2) brightness(1.3) saturate(1.25);\r\n    filter: sepia(.25) contrast(1.2) brightness(1.3) saturate(1.25);\r\n  }\r\n\r\n  .filter-lofi {\r\n    -webkit-filter: saturate(1.1) contrast(1.5);\r\n    filter: saturate(1.1) contrast(1.5);\r\n  }\r\n\r\n  .filter-ludwig {\r\n    -webkit-filter: sepia(.25) contrast(1.05) brightness(1.05) saturate(2);\r\n    filter: sepia(.25) contrast(1.05) brightness(1.05) saturate(2);\r\n  }\r\n\r\n  .filter-ludwig::before {\r\n    background: rgba(125, 105, 24, .1);\r\n    content: \"\";\r\n    mix-blend-mode: overlay;\r\n  }\r\n\r\n  .filter-maven {\r\n    -webkit-filter: sepia(.35) contrast(1.05) brightness(1.05) saturate(1.75);\r\n    filter: sepia(.35) contrast(1.05) brightness(1.05) saturate(1.75);\r\n  }\r\n\r\n  .filter-maven::before {\r\n    background: rgba(158, 175, 30, .25);\r\n    content: \"\";\r\n    mix-blend-mode: darken;\r\n  }\r\n\r\n  .filter-mayfair {\r\n    -webkit-filter: contrast(1.1) brightness(1.15) saturate(1.1);\r\n    filter: contrast(1.1) brightness(1.15) saturate(1.1);\r\n  }\r\n\r\n  .filter-mayfair::before {\r\n    background: radial-gradient(circle closest-corner, transparent 0, rgba(175, 105, 24, .4) 100%);\r\n    background: -o-radial-gradient(circle closest-corner, transparent 0, rgba(175, 105, 24, .4) 100%);\r\n    background: -moz-radial-gradient(circle closest-corner, transparent 0, rgba(175, 105, 24, .4) 100%);\r\n    background: -webkit-radial-gradient(circle closest-corner, transparent 0, rgba(175, 105, 24, .4) 100%);\r\n    content: \"\";\r\n    mix-blend-mode: multiply;\r\n  }\r\n\r\n  .filter-moon {\r\n    -webkit-filter: brightness(1.4) contrast(.95) saturate(0) sepia(.35);\r\n    filter: brightness(1.4) contrast(.95) saturate(0) sepia(.35);\r\n  }\r\n\r\n  .filter-nashville {\r\n    -webkit-filter: sepia(.25) contrast(1.5) brightness(.9) hue-rotate(-15deg);\r\n    filter: sepia(.25) contrast(1.5) brightness(.9) hue-rotate(-15deg);\r\n  }\r\n\r\n  .filter-nashville::before {\r\n    background: radial-gradient(circle closest-corner, rgba(128, 78, 15, .5) 0, rgba(128, 78, 15, .65) 100%);\r\n    background: -o-radial-gradient(circle closest-corner, rgba(128, 78, 15, .5) 0, rgba(128, 78, 15, .65) 100%);\r\n    background: -moz-radial-gradient(circle closest-corner, rgba(128, 78, 15, .5) 0, rgba(128, 78, 15, .65) 100%);\r\n    background: -webkit-radial-gradient(circle closest-corner, rgba(128, 78, 15, .5) 0, rgba(128, 78, 15, .65) 100%);\r\n    content: \"\";\r\n    mix-blend-mode: screen;\r\n  }\r\n\r\n  .filter-perpetua {\r\n    -webkit-filter: contrast(1.1) brightness(1.25) saturate(1.1);\r\n    filter: contrast(1.1) brightness(1.25) saturate(1.1);\r\n  }\r\n\r\n  .filter-perpetua::before {\r\n    background: linear-gradient(to bottom, rgba(0, 91, 154, .25), rgba(230, 193, 61, .25));\r\n    background: -o-linear-gradient(top, rgba(0, 91, 154, .25), rgba(230, 193, 61, .25));\r\n    background: -moz-linear-gradient(top, rgba(0, 91, 154, .25), rgba(230, 193, 61, .25));\r\n    background: -webkit-linear-gradient(top, rgba(0, 91, 154, .25), rgba(230, 193, 61, .25));\r\n    background: -webkit-gradient(linear, left top, left bottom, from(rgba(0, 91, 154, .25)), to(rgba(230, 193, 61, .25)));\r\n    content: \"\";\r\n    mix-blend-mode: multiply;\r\n  }\r\n\r\n  .filter-poprocket {\r\n    -webkit-filter: sepia(.15) brightness(1.2);\r\n    filter: sepia(.15) brightness(1.2);\r\n  }\r\n\r\n  .filter-poprocket::before {\r\n    background: radial-gradient(circle closest-corner, rgba(206, 39, 70, .75) 40%, black 80%);\r\n    background: -o-radial-gradient(circle closest-corner, rgba(206, 39, 70, .75) 40%, black 80%);\r\n    background: -moz-radial-gradient(circle closest-corner, rgba(206, 39, 70, .75) 40%, black 80%);\r\n    background: -webkit-radial-gradient(circle closest-corner, rgba(206, 39, 70, .75) 40%, black 80%);\r\n    content: \"\";\r\n    mix-blend-mode: screen;\r\n  }\r\n\r\n  .filter-reyes {\r\n    -webkit-filter: sepia(.75) contrast(.75) brightness(1.25) saturate(1.4);\r\n    filter: sepia(.75) contrast(.75) brightness(1.25) saturate(1.4);\r\n  }\r\n\r\n  .filter-rise {\r\n    -webkit-filter: sepia(.25) contrast(1.25) brightness(1.2) saturate(.9);\r\n    filter: sepia(.25) contrast(1.25) brightness(1.2) saturate(.9);\r\n  }\r\n\r\n  .filter-rise::before {\r\n    background: radial-gradient(circle closest-corner, transparent 0, rgba(230, 193, 61, .25) 100%);\r\n    background: -o-radial-gradient(circle closest-corner, transparent 0, rgba(230, 193, 61, .25) 100%);\r\n    background: -moz-radial-gradient(circle closest-corner, transparent 0, rgba(230, 193, 61, .25) 100%);\r\n    background: -webkit-radial-gradient(circle closest-corner, transparent 0, rgba(230, 193, 61, .25) 100%);\r\n    content: \"\";\r\n    mix-blend-mode: lighten;\r\n  }\r\n\r\n  .filter-sierra {\r\n    -webkit-filter: sepia(.25) contrast(1.5) brightness(.9) hue-rotate(-15deg);\r\n    filter: sepia(.25) contrast(1.5) brightness(.9) hue-rotate(-15deg);\r\n  }\r\n\r\n  .filter-sierra::before {\r\n    background: radial-gradient(circle closest-corner, rgba(128, 78, 15, .5) 0, rgba(0, 0, 0, .65) 100%);\r\n    background: -o-radial-gradient(circle closest-corner, rgba(128, 78, 15, .5) 0, rgba(0, 0, 0, .65) 100%);\r\n    background: -moz-radial-gradient(circle closest-corner, rgba(128, 78, 15, .5) 0, rgba(0, 0, 0, .65) 100%);\r\n    background: -webkit-radial-gradient(circle closest-corner, rgba(128, 78, 15, .5) 0, rgba(0, 0, 0, .65) 100%);\r\n    content: \"\";\r\n    mix-blend-mode: screen;\r\n  }\r\n\r\n  .filter-skyline {\r\n    -webkit-filter: sepia(.15) contrast(1.25) brightness(1.25) saturate(1.2);\r\n    filter: sepia(.15) contrast(1.25) brightness(1.25) saturate(1.2);\r\n  }\r\n\r\n  .filter-slumber {\r\n    -webkit-filter: sepia(.35) contrast(1.25) saturate(1.25);\r\n    filter: sepia(.35) contrast(1.25) saturate(1.25);\r\n  }\r\n\r\n  .filter-slumber::before {\r\n    background: rgba(125, 105, 24, .2);\r\n    content: \"\";\r\n    mix-blend-mode: darken;\r\n  }\r\n\r\n  .filter-stinson {\r\n    -webkit-filter: sepia(.35) contrast(1.25) brightness(1.1) saturate(1.25);\r\n    filter: sepia(.35) contrast(1.25) brightness(1.1) saturate(1.25);\r\n  }\r\n\r\n  .filter-stinson::before {\r\n    background: rgba(125, 105, 24, .45);\r\n    content: \"\";\r\n    mix-blend-mode: lighten;\r\n  }\r\n\r\n  .filter-sutro {\r\n    -webkit-filter: sepia(.4) contrast(1.2) brightness(.9) saturate(1.4) hue-rotate(-10deg);\r\n    filter: sepia(.4) contrast(1.2) brightness(.9) saturate(1.4) hue-rotate(-10deg);\r\n  }\r\n\r\n  .filter-sutro::before {\r\n    background: radial-gradient(circle closest-corner, transparent 50%, rgba(0, 0, 0, .5) 90%);\r\n    background: -o-radial-gradient(circle closest-corner, transparent 50%, rgba(0, 0, 0, .5) 90%);\r\n    background: -moz-radial-gradient(circle closest-corner, transparent 50%, rgba(0, 0, 0, .5) 90%);\r\n    background: -webkit-radial-gradient(circle closest-corner, transparent 50%, rgba(0, 0, 0, .5) 90%);\r\n    content: \"\";\r\n    mix-blend-mode: darken;\r\n  }\r\n\r\n  .filter-toaster {\r\n    -webkit-filter: sepia(.25) contrast(1.5) brightness(.95) hue-rotate(-15deg);\r\n    filter: sepia(.25) contrast(1.5) brightness(.95) hue-rotate(-15deg);\r\n  }\r\n\r\n  .filter-toaster::before {\r\n    background: radial-gradient(circle, #804e0f, rgba(0, 0, 0, .25));\r\n    background: -o-radial-gradient(circle, #804e0f, rgba(0, 0, 0, .25));\r\n    background: -moz-radial-gradient(circle, #804e0f, rgba(0, 0, 0, .25));\r\n    background: -webkit-radial-gradient(circle, #804e0f, rgba(0, 0, 0, .25));\r\n    content: \"\";\r\n    mix-blend-mode: screen;\r\n  }\r\n\r\n  .filter-valencia {\r\n    -webkit-filter: sepia(.25) contrast(1.1) brightness(1.1);\r\n    filter: sepia(.25) contrast(1.1) brightness(1.1);\r\n  }\r\n\r\n  .filter-valencia::before {\r\n    background: rgba(230, 193, 61, .1);\r\n    content: \"\";\r\n    mix-blend-mode: lighten;\r\n  }\r\n\r\n  .filter-vesper {\r\n    -webkit-filter: sepia(.35) contrast(1.15) brightness(1.2) saturate(1.3);\r\n    filter: sepia(.35) contrast(1.15) brightness(1.2) saturate(1.3);\r\n  }\r\n\r\n  .filter-vesper::before {\r\n    background: rgba(125, 105, 24, .25);\r\n    content: \"\";\r\n    mix-blend-mode: overlay;\r\n  }\r\n\r\n  .filter-walden {\r\n    -webkit-filter: sepia(.35) contrast(.8) brightness(1.25) saturate(1.4);\r\n    filter: sepia(.35) contrast(.8) brightness(1.25) saturate(1.4);\r\n  }\r\n\r\n  .filter-walden::before {\r\n    background: rgba(229, 240, 128, .5);\r\n    content: \"\";\r\n    mix-blend-mode: darken;\r\n  }\r\n\r\n  .filter-willow {\r\n    -webkit-filter: brightness(1.2) contrast(.85) saturate(.05) sepia(.2);\r\n    filter: brightness(1.2) contrast(.85) saturate(.05) sepia(.2);\r\n  }\r\n\r\n  .filter-xpro-ii {\r\n    -webkit-filter: sepia(.45) contrast(1.25) brightness(1.75) saturate(1.3) hue-rotate(-5deg);\r\n    filter: sepia(.45) contrast(1.25) brightness(1.75) saturate(1.3) hue-rotate(-5deg);\r\n  }\r\n\r\n  .filter-xpro-ii::before {\r\n    background: radial-gradient(circle closest-corner, rgba(0, 91, 154, .35) 0, rgba(0, 0, 0, .65) 100%);\r\n    background: -o-radial-gradient(circle closest-corner, rgba(0, 91, 154, .35) 0, rgba(0, 0, 0, .65) 100%);\r\n    background: -moz-radial-gradient(circle closest-corner, rgba(0, 91, 154, .35) 0, rgba(0, 0, 0, .65) 100%);\r\n    background: -webkit-radial-gradient(circle closest-corner, rgba(0, 91, 154, .35) 0, rgba(0, 0, 0, .65) 100%);\r\n    content: \"\";\r\n    mix-blend-mode: multiply;\r\n  }\r\n  */","import { imageFilterWithPreset } from '../../lib/ImageFilter';\r\nimport { Core } from '..';\r\nexport class Canvas {\r\n\r\n    public core: Core;\r\n    public div: HTMLElement;\r\n    public canvas: HTMLCanvasElement;\r\n    public ctx: CanvasRenderingContext2D;\r\n    public canvasFilter: HTMLCanvasElement;\r\n    public ctxFilter: CanvasRenderingContext2D;\r\n    public isActive: boolean = false;\r\n\r\n    public log: string;\r\n    public isViewChanging: boolean = false;\r\n    public loopNum: number = 0;\r\n    public needRenderloop: boolean = true;\r\n    public ablePan: boolean = true;\r\n\r\n    public mousePre: number [] = [0, 0];\r\n    public canvasOut: HTMLCanvasElement;\r\n    public ctxOut: CanvasRenderingContext2D;\r\n    public loopNeeded = false;\r\n    public isFiltered = false\r\n\r\n    constructor(core: Core, div: HTMLElement) {\r\n        this.core = core;\r\n        this.div = div;\r\n        this.loopNeeded = false;\r\n        this.init();\r\n        this.loopInit();\r\n    }\r\n    private init() {\r\n        const canvas = document.createElement('canvas');\r\n        const canvasOut = document.createElement('canvas');\r\n        const canvasFilter = document.createElement('canvas');\r\n        if (canvas && canvasOut) {\r\n            this.canvas = canvas;\r\n            this.canvas.width = this.div.clientWidth;\r\n            this.canvas.height = this.div.clientHeight;\r\n            this.div.append(this.canvas);\r\n\r\n            this.canvasOut = canvasOut;\r\n\r\n            this.canvasOut.style.border = '5px';\r\n            this.ctxOut = this.canvasOut.getContext('2d') as CanvasRenderingContext2D;\r\n            this.core.app.divHost.append(this.canvasOut);\r\n\r\n            this.canvasFilter = canvasFilter;\r\n            this.ctxFilter = this.canvasFilter.getContext('2d') as CanvasRenderingContext2D;\r\n            this.canvasFilter.width = this.div.clientWidth;\r\n            this.canvasFilter.height = this.div.clientHeight;\r\n\r\n            const ctx = this.canvas.getContext('2d');\r\n            if (ctx) {\r\n                this.ctx = ctx;\r\n                this.isActive = true;\r\n                this.initEvent();\r\n            }\r\n        }\r\n    }\r\n    public initEvent() {\r\n        this.canvas.addEventListener('keydown', (k: KeyboardEvent) => {});\r\n        this.canvas.addEventListener('keyup', (k: KeyboardEvent) => {});\r\n\r\n        // eslint-disable-next-line @typescript-eslint/no-unused-expressions\r\n        this.canvas.addEventListener('mousedown', (e: MouseEvent) => { this.core.controller.mouseInteraction.mouseDown(e); }, false);\r\n        this.canvas.addEventListener('mouseup', (e: MouseEvent) => { this.core.controller.mouseInteraction.mouseUp(e); }, false);\r\n        this.canvas.addEventListener('mousemove', (e: MouseEvent) => { this.core.controller.mouseInteraction.mouseMove(e); }, false);\r\n        this.canvas.addEventListener('wheel', (e: WheelEvent) => this.core.controller.mouseInteraction.mouseWheel(e, e.deltaY), false);\r\n        this.canvas.addEventListener('mouseout', (e: MouseEvent) => { this.core.controller.mouseInteraction.mouseOut(e); }, false);\r\n\r\n        this.canvas.addEventListener('touchstart', (t: TouchEvent) => this.core.controller.touchInteraction.touchstart(t), false);\r\n        this.canvas.addEventListener('touchmove', (t: any) => this.core.controller.touchInteraction.touchmove(t), false);\r\n        this.canvas.addEventListener('touchcancel', (t: TouchEvent) => this.core.controller.touchInteraction.touchcancel(t), false);\r\n        this.canvas.addEventListener('touchend', (t: TouchEvent) => this.core.controller.touchInteraction.touchend(t), false);\r\n    }\r\n    public capture() {\r\n        const img = new Image();\r\n        img.crossOrigin = 'anonymous';\r\n        img.src = this.canvasOut.toDataURL();\r\n        return img;\r\n    }\r\n    private loopInit() {\r\n        this.loop();\r\n    }\r\n    public resize() {\r\n        this.canvas.width = this.div.clientWidth;\r\n        this.canvas.height = this.div.clientHeight;\r\n    }\r\n    public loop() {\r\n        requestAnimationFrame(() => { this.loop(); });\r\n       \r\n\r\n        if (this.loopNum++ < 130) {\r\n\r\n            let before = performance.now();\r\n            this.renderPre(this.ctx);\r\n\r\n            let after = performance.now();\r\n            this.log = `level: , total frames: ${this.loopNum++} (FPS: ), a loop took: ${(after - before).toFixed(2)} ms to execute.`;\r\n            // console.debug(this.log);\r\n        }\r\n    }\r\n    public clear(ctx: CanvasRenderingContext2D) {\r\n        this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\r\n    }\r\n    public renderForce() {\r\n        // if (!this.loopNeeded) {\r\n            // this.loop();\r\n        this.loopNum = 0;\r\n        // }\r\n    }\r\n    public renderPre(ctx: CanvasRenderingContext2D) {\r\n        if (!this.isActive) { return; }\r\n        this.clear(this.ctx);\r\n\r\n        if (this.isFiltered) {\r\n            this.ctx.drawImage(this.canvasFilter, 0, 0);\r\n        }\r\n\r\n        this.render(ctx);\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D) {\r\n        // ctx.beginPath();\r\n        // ctx.arc(0, 0, 15, 0, 3.14 * 2);\r\n        // ctx.closePath()\r\n        // ctx.fill();\r\n    }\r\n    public updateFilter(id: number) {\r\n        // if (!this.isFiltered) {\r\n            // this.ctxFilter.canvas.width = this.core.imageWrapper.img.width\r\n            this.ctxFilter.canvas.width = this.core.imageWrapper.img.width\r\n            this.ctxFilter.canvas.height = this.core.imageWrapper.img.height\r\n            const type = imageFilterWithPreset(this.ctxFilter, this.core.imageWrapper.img, id);\r\n            this.ctx.drawImage(this.canvasFilter, 0, 0);\r\n\r\n            this.core.app.ui.divTextPresest.textContent = 'Filter: ' + type\r\n            // this.isFiltered = true\r\n        // }\r\n    }\r\n}","export const distance = (x0: number, y0: number, x1: number, y1: number) => {\r\n    return Math.sqrt((x0 - x1) * (x0 - x1) + (y0 - y1) * (y0 - y1));\r\n};\r\nexport const renderVertex = (ctx: CanvasRenderingContext2D, x: number, y: number, width: number, height: number, r: number = 0.5) => {\r\n    const angle = 3.14 * 0.5;\r\n    ctx.beginPath();\r\n    ctx.arc(x + width - r, y - height + r, r, angle * 3 , angle * 4 , false);\r\n    ctx.arc(x + width - r, y + height - r, r, angle * 0 , angle * 1 , false);\r\n    ctx.arc(x - width + r, y + height - r, r, angle * 1 , angle * 2 , false);\r\n    ctx.arc(x - width + r, y - height + r, r, angle * 2 , angle * 3 , false);\r\n    ctx.closePath();\r\n    ctx.strokeStyle  = '#000000';\r\n    ctx.fillStyle   = '#ffffff';\r\n    ctx.fill();\r\n    ctx.stroke();\r\n};\r\nexport const linearColorInterpolation = (c0: number[], c1: number[], interpolation = 0.5) => {\r\n    const cOut = [];\r\n    for (let i = 0 ; i < c0.length; ++i) {\r\n        const c = c0[i] + (c1[i] - c0[i]) * interpolation;\r\n        cOut.push(c);\r\n    }\r\n    return cOut;\r\n};\r\nexport const hexToCanvasColor = (hex: string, visibility: number | string = 0, isGray: boolean = false) => {\r\n    // if (hex[0] !== '#') {\r\n    //     let col = hex.split('(')[1].split(')')[0].split(',');\r\n    //     hex = this.RGBToHex(parseInt(col[0]), parseInt(col[1]), parseInt(col[2]));\r\n    // }\r\n    // Convert #AA77CC to rbga() format for Firefox\r\n    let thecol;\r\n    visibility = visibility || '1.0';\r\n    hex = hex.replace('#', '');\r\n    let r = parseInt(hex.substring(0, 2), 16);\r\n    let g = parseInt(hex.substring(2, 4), 16);\r\n    let b = parseInt(hex.substring(4, 6), 16);\r\n    if (isGray) {\r\n        // let v = (0.58 * (r / 255)) + (0.17 * (g / 255)) + (0.8 * (b / 255));\r\n        let v = (0.58 * r) + (0.17 * g) + (0.8 * b);\r\n        thecol = 'rgba(' + v + ',' + v + ',' + v + ',' + visibility + ')';\r\n    } else {\r\n        thecol = 'rgba(' + r + ',' + g + ',' + b + ',' + visibility + ')';\r\n    }\r\n    return thecol;\r\n};\r\n\r\nexport enum PUSH_ACTION {\r\n    GetImage = 'GetImage',\r\n\r\n}\r\n\r\nexport enum ENGINE {\r\n    Canvas = 'Canvas', // default\r\n    WebGL2 = 'WebGL2',\r\n    WebGPU = 'WebGPU',\r\n    WebAssembly = 'WebAssembly',\r\n}\r\nexport const hueSaturationLightness = (img: ImageData, Hue: number, Saturation: number, Lightness: number) => {\r\n    let imgOut = new ImageData(img.width, img.height);\r\n    for (let i = 0; i < img.data.length; i += 4) {\r\n        let r = img.data[i + 0];\r\n        let g = img.data[i + 1];\r\n        let b = img.data[i + 2];\r\n        let a = img.data[i + 3];\r\n\r\n        let hls = RGB2HSL(r, g, b);\r\n        // console.log(hls);\r\n        hls[0] += Hue;\r\n\r\n        hls[1] += Saturation;\r\n        if (hls[1] < 0) { hls[1] = 0; }\r\n\r\n        hls[2] += Lightness;\r\n\r\n        let col = HSL2RGB(hls[0], hls[1], hls[2]);\r\n        // imgOut.SetPixel(x, y, Color.FromArgb(255, (int)(col[0] * 255), (int)(col[1] * 255), (int)(col[2] * 255)));\r\n\r\n        imgOut.data[i + 0] = col[0];\r\n        imgOut.data[i + 1] = col[1];\r\n        imgOut.data[i + 2] = col[2];\r\n        imgOut.data[i + 3] = a;\r\n    }\r\n    return imgOut;\r\n};\r\n// https://gist.github.com/mjackson/5311256\r\nexport const RGB2HSL = (r: number, g: number, b: number) => { // 0 to 255\r\n    r /= 255; g /= 255; b /= 255;\r\n\r\n    let max = Math.max(r, g, b), min = Math.min(r, g, b);\r\n    let h = (max + min) / 2, s = (max + min) / 2, l = (max + min) / 2;\r\n\r\n    if (max === min) {\r\n        h = s = 0; // achromatic\r\n    } else {\r\n        let d = max - min;\r\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\r\n        switch (max) {\r\n            case r: h = (g - b) / d + (g < b ? 6 : 0); break;\r\n            case g: h = (b - r) / d + 2; break;\r\n            case b: h = (r - g) / d + 4; break;\r\n            default: break;\r\n        }\r\n        h /= 6;\r\n    }\r\n    return [h, s, l]; // 0 to 1\r\n};\r\nexport const HSL2RGB = (h: number, s: number, l: number) => { // 0 to 1\r\n    let r, g, b;\r\n\r\n    if (s === 0) {\r\n        r = g = b = l; // achromatic\r\n    } else {\r\n        const hue2rgb = (pp: number, qq: number, t: number) => {\r\n            if (t < 0) { t += 1; }\r\n            if (t > 1) { t -= 1; }\r\n            if (t < 1 / 6) { return pp + (qq - pp) * 6 * t; }\r\n            if (t < 1 / 2) { return qq; }\r\n            if (t < 2 / 3) { return pp + (qq - pp) * (2 / 3 - t) * 6; }\r\n            return pp;\r\n        };\r\n\r\n        let q = l < 0.5 ? l * (1 + s) : l + s - l * s;\r\n        let p = 2 * l - q;\r\n\r\n        r = hue2rgb(p, q, h + 1 / 3);\r\n        g = hue2rgb(p, q, h);\r\n        b = hue2rgb(p, q, h - 1 / 3);\r\n    }\r\n    return [\r\n        Math.max(0, Math.min(Math.round(r * 255), 255))\r\n        , Math.max(0, Math.min(Math.round(g * 255), 255))\r\n        , Math.max(0, Math.min(Math.round(b * 255), 255))\r\n    ];\r\n};","// import { renderVertex } from '../../../lib';\r\nimport { linearColorInterpolation } from '../../../lib';\r\nimport { Frame } from '..';\r\n\r\nexport class Renderer {\r\n    public frame: Frame;\r\n\r\n    private _opacity = 0.0;\r\n    private _t = 0.0;\r\n\r\n    private _strokeStyle = 'rgba(200, 200, 200, 1)';\r\n    private _fillStyleRuntime = '';\r\n\r\n    private _fillStyle = [200, 200, 200, 1.0];\r\n    private _fillStyleHover = [200, 200, 200, 0.5];\r\n\r\n    private _sizePoint: number = 3;\r\n    private _sizeMidPoint: number = 3;\r\n\r\n    constructor(frame: Frame) {\r\n        this.frame = frame;\r\n    }\r\n    get sizePoint() {\r\n        return this._sizePoint;\r\n    }\r\n    get sizeMidPoint() {\r\n        return this._sizeMidPoint;\r\n    }\r\n    public updateColorBG(r: number, g: number, b: number) {\r\n        console.log(r, g, b);\r\n        this._fillStyle[0] = r;\r\n        this._fillStyle[1] = g;\r\n        this._fillStyle[2] = b;\r\n\r\n        this._fillStyleHover[0] = r;\r\n        this._fillStyleHover[1] = g;\r\n        this._fillStyleHover[2] = b;\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D) {\r\n        // ctx.globalCompositeOperation = 'xor';\r\n        this.ColorInterpolation();\r\n        if (this.frame.isHover) {\r\n            ctx.fillStyle = this._fillStyleRuntime; // this.fillStyleHover;\r\n        } else {\r\n            ctx.fillStyle = this._fillStyleRuntime; // this.fillStyle;\r\n        }\r\n\r\n        ctx.beginPath();\r\n        ctx.rect(0, 0, ctx.canvas.width, this.frame.y);\r\n        ctx.rect(0, this.frame.y + this.frame.height, ctx.canvas.width, ctx.canvas.height);\r\n        ctx.rect(0, 0, this.frame.x, ctx.canvas.height);\r\n        ctx.rect(this.frame.x + this.frame.width , 0, ctx.canvas.width, ctx.canvas.height);\r\n        ctx.fill();\r\n\r\n        this.renderPost(ctx);\r\n        this._t += 0.15;\r\n    }\r\n    public renderPost(ctx: CanvasRenderingContext2D) {\r\n        // debuger\r\n        // ctx.beginPath();\r\n        // ctx.arc(0, 0, 15, 0, 3.14 * 2);\r\n        // ctx.closePath()\r\n        // ctx.fillStyle = '#ff0000';\r\n        // ctx.fill();\r\n\r\n        //\r\n        ctx.lineWidth = 1;\r\n        ctx.lineDashOffset = this._t;\r\n        ctx.setLineDash([4, 1]);\r\n        ctx.beginPath();\r\n        ctx.rect(this.frame.x, this.frame.y, this.frame.width, this.frame.height);\r\n        ctx.strokeStyle = this._strokeStyle;\r\n        ctx.stroke();\r\n\r\n        // guides\r\n        ctx.beginPath();\r\n        for (let i = 1 ; i < 3; ++i) {\r\n            ctx.moveTo(this.frame.x + this.frame.xOffGuid * i, this.frame.y);\r\n            ctx.lineTo(this.frame.x + this.frame.xOffGuid * i, this.frame.y + this.frame.height);\r\n            ctx.moveTo(this.frame.x, this.frame.y + this.frame.yOffGuid * i);\r\n            ctx.lineTo(this.frame.x + this.frame.width , this.frame.y + this.frame.yOffGuid * i);\r\n        }\r\n        ctx.stroke();\r\n        ctx.setLineDash([]);\r\n\r\n        // render the back circlr of selected point\r\n        if (this.frame.idHover !== -1) {\r\n            ctx.beginPath();\r\n            let p = [0, 0];\r\n\r\n            p[0] = this.frame.cpList[this.frame.idHover].x;\r\n            p[1] = this.frame.cpList[this.frame.idHover].y;\r\n\r\n            ctx.arc(p[0], p[1], 8 + 2 * Math.sin(this._t * 0.75), 0, 3.14 * 2);\r\n            ctx.closePath();\r\n            ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';\r\n            ctx.fill();\r\n        }\r\n        // end render the back circlr of selected point\r\n\r\n        // render each control point of the frame\r\n        if (this.frame.isHover) {\r\n            for (let i = 0 ; i < this.frame.cpList.length; ++i) {\r\n                this.frame.cpList[i].render(ctx);\r\n            }\r\n        }\r\n        // end render each control point of the frame\r\n\r\n    }\r\n    private ColorInterpolation() {\r\n        // let opacity = 0;\r\n        if (this.frame.isHover) {\r\n            this._opacity += 0.05; // this.tOpacityA;\r\n        } else {\r\n            this._opacity -= 0.035; // this.tOpacityB;\r\n        }\r\n\r\n        if (this._opacity > 1) {\r\n            this._opacity = 1.0;\r\n        }\r\n        if (this._opacity < 0) {\r\n            this._opacity = 0.0;\r\n        }\r\n\r\n        const col = linearColorInterpolation(this._fillStyle, this._fillStyleHover, this._opacity);\r\n        this._fillStyleRuntime = `rgba(${col[0]}, ${col[1]}, ${col[2]}, ${col[3]})`;\r\n    }\r\n}","\r\nimport { renderVertex, distance } from '../../../lib';\r\nimport { Frame } from '..';\r\n\r\nexport enum CP_TYPE {\r\n    Endpoint = 'Endpoint',\r\n    Midpoint = 'Midpoint'\r\n}\r\nexport class ControlPoint {\r\n    public x: number;\r\n    public y: number;\r\n    public frame: Frame;\r\n    public id: number;\r\n    public type: CP_TYPE;\r\n    constructor(frame: Frame, id: number, type: CP_TYPE) {\r\n        this.frame = frame;\r\n        this.id = id;\r\n        this.type = type;\r\n        this.update();\r\n    }\r\n    public isHoverCheck(x: number, y: number) {\r\n        if (distance(this.x, this.y, x, y) < this.frame.r) {\r\n            return this.id;\r\n        }\r\n        return -1;\r\n    }\r\n    public update() {\r\n        if (this.type === CP_TYPE.Endpoint) {\r\n            if (this.id === 0) {\r\n                this.x = this.frame.x;\r\n                this.y = this.frame.y;\r\n            } else if (this.id === 1) {\r\n                this.x = this.frame.x + this.frame.width;\r\n                this.y = this.frame.y;\r\n            } else if (this.id === 2) {\r\n                this.x = this.frame.x + this.frame.width;\r\n                this.y = this.frame.y + this.frame.height;\r\n            } else if (this.id === 3) {\r\n                this.x = this.frame.x;\r\n                this.y = this.frame.y + this.frame.height;\r\n            }\r\n        } else if (this.type === CP_TYPE.Midpoint) {\r\n            if (this.id === 4) {\r\n                this.x = this.frame.x + this.frame.width * 0.5;\r\n                this.y = this.frame.y;\r\n            } else if (this.id === 5) {\r\n                this.x = this.frame.x + this.frame.width;\r\n                this.y = this.frame.y + this.frame.height * 0.5;\r\n            } else if (this.id === 6) {\r\n                this.x = this.frame.x + this.frame.width * 0.5;\r\n                this.y = this.frame.y + this.frame.height;\r\n            } else if (this.id === 7) {\r\n                this.x = this.frame.x;\r\n                this.y = this.frame.y + this.frame.height * 0.5;\r\n            }\r\n        }\r\n\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D) {\r\n        // debuger\r\n        // ctx.beginPath();\r\n        // ctx.arc(this.x ,this.y, 10, 0, Math.PI * 2.0);\r\n        // ctx.closePath();\r\n        // ctx.fillStyle = '#ff0000';\r\n        // ctx.fill();\r\n\r\n        if (this.type === CP_TYPE.Endpoint) {\r\n            if (this.id === 0) {\r\n                renderVertex(ctx, this.frame.x, this.frame.y, this.frame.renderer.sizePoint, this.frame.renderer.sizePoint);\r\n            } else if (this.id === 1) {\r\n                renderVertex(ctx, this.frame.x + this.frame.width, this.frame.y, this.frame.renderer.sizePoint, this.frame.renderer.sizePoint);\r\n            } else if (this.id === 2) {\r\n                renderVertex(ctx, this.frame.x + this.frame.width, this.frame.y + this.frame.height, this.frame.renderer.sizePoint, this.frame.renderer.sizePoint);\r\n            } else if (this.id === 3) {\r\n                renderVertex(ctx, this.frame.x, this.frame.y + this.frame.height, this.frame.renderer.sizePoint, this.frame.renderer.sizePoint);\r\n            }\r\n        } else if (this.type === CP_TYPE.Midpoint) {\r\n            if (this.id === 4) {\r\n                renderVertex(ctx, this.frame.x + this.frame.width * 0.5, this.frame.y, this.frame.renderer.sizeMidPoint * 4, this.frame.renderer.sizeMidPoint);\r\n            } else if (this.id === 5) {\r\n                renderVertex(ctx, this.frame.x + this.frame.width, this.frame.y + this.frame.height * 0.5, this.frame.renderer.sizeMidPoint, this.frame.renderer.sizeMidPoint * 4);\r\n            } else if (this.id === 6) {\r\n                renderVertex(ctx, this.frame.x + this.frame.width * 0.5, this.frame.y + this.frame.height, this.frame.renderer.sizeMidPoint * 4, this.frame.renderer.sizeMidPoint);\r\n            } else if (this.id === 7) {\r\n                renderVertex(ctx, this.frame.x , this.frame.y + this.frame.height * 0.5, this.frame.renderer.sizeMidPoint, this.frame.renderer.sizeMidPoint * 4);\r\n            }\r\n        }\r\n    }\r\n}","// import { distance } from '../../lib';\r\nimport { Renderer } from './Core/Renderer';\r\nimport { ControlPoint, CP_TYPE } from './Core/ControlPoint';\r\nimport { Transform } from './Core/Transform';\r\nimport { Interaction } from './Core/Interaction';\r\nimport { Core } from '..';\r\n\r\n\r\nexport enum FramePreset {\r\n    Freeform = 'freeform',\r\n    Square = 'square',\r\n    Portrait = 'portrait',\r\n    Landscape = 'landscape',\r\n\r\n    Fixed_1_1 = 'fixed_1_1',\r\n    Fixed_16_9 = 'fixed_16_9'\r\n}\r\n\r\n\r\nexport class Frame {\r\n    public renderer: Renderer;\r\n    public transform: Transform;\r\n    public interaction: Interaction;\r\n    public idHover = -1;\r\n    public idSelected = -1;\r\n    public isHover = false;\r\n\r\n    public framePreset: FramePreset;\r\n\r\n    public x = 100;\r\n    public y = 100;\r\n    public widthMin = 200;\r\n    public heightMin = 200;\r\n    public width = 300;\r\n    public height = 300;\r\n\r\n    public xOffGuid = 0;\r\n    public yOffGuid = 0;\r\n\r\n    public r = 19;\r\n\r\n    public cv: number[] = [0, 0];\r\n    public core: Core;\r\n\r\n    public cpList: ControlPoint[] = [];\r\n\r\n    constructor(core: Core) {\r\n        this.core = core;\r\n        this.init();\r\n    }\r\n    public init() {\r\n        this.xOffGuid = this.width / 3;\r\n        this.yOffGuid = this.height / 3;\r\n\r\n        this.cpList = [\r\n            new ControlPoint(this, 0, CP_TYPE.Endpoint),\r\n            new ControlPoint(this, 1, CP_TYPE.Endpoint),\r\n            new ControlPoint(this, 2, CP_TYPE.Endpoint),\r\n            new ControlPoint(this, 3, CP_TYPE.Endpoint),\r\n\r\n            new ControlPoint(this, 4, CP_TYPE.Midpoint),\r\n            new ControlPoint(this, 5, CP_TYPE.Midpoint),\r\n            new ControlPoint(this, 6, CP_TYPE.Midpoint),\r\n            new ControlPoint(this, 7, CP_TYPE.Midpoint),\r\n        ];\r\n\r\n        if (this.core.app.param.colorCover) {\r\n            // this.fillStyle = this.core.app.param.colorCover;\r\n            // this.fillStyleHover = hexToCanvasColor(this.core.app.param.colorCover, 0.5);\r\n        }\r\n\r\n        this.interaction = new Interaction(this);\r\n        this.transform = new Transform(this);\r\n        this.renderer = new Renderer(this);\r\n        // this.update();\r\n\r\n    }\r\n    public setRatio(v: FramePreset.Freeform) {\r\n        this.framePreset = v;\r\n    }\r\n    public InitFrame() {\r\n        this.width = 200;\r\n        this.height = 200;\r\n\r\n        if (this.core.img) {\r\n            this.width = this.core.img.width;\r\n            this.height = this.core.img.height;\r\n        }\r\n\r\n        this.xOffGuid = this.width / 5;\r\n        this.yOffGuid = this.height / 5;\r\n\r\n        this.x = this.xOffGuid;\r\n        this.y = this.yOffGuid;\r\n\r\n        this.width = Math.floor(this.width - this.xOffGuid * 2);\r\n        this.height = Math.floor(this.height - this.yOffGuid * 2);\r\n\r\n        this.cv[0] = this.x + this.width * 0.5;\r\n        this.cv[1] = this.y + this.height * 0.5;\r\n\r\n        this.core.canvs.canvasOut.width = this.core.frame.width;\r\n        this.core.canvs.canvasOut.height = this.core.frame.height;\r\n\r\n        this.update();\r\n\r\n        this.updateUIWidthHeight();\r\n    }\r\n    public updateColorBG(r: number, g: number, b: number) {\r\n        this.renderer.updateColorBG(r, g, b);\r\n    }\r\n    public update() {\r\n        for (let i = 0 ; i < this.cpList.length; ++i) {\r\n            this.cpList[i].update();\r\n        }\r\n        this.transform.updateGuides();\r\n    }\r\n    public isHoverCheck(x: number, y: number) {\r\n        return this.interaction.isHoverCheck(x, y);\r\n    }\r\n    public mouseUp() {\r\n        return this.interaction.mouseUp();\r\n    }\r\n    public offsetByID(id: number, xOff: number, yOff: number) {\r\n        return this.transform.offsetByID(id, xOff, yOff);\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D) {\r\n        this.renderer.render(ctx);\r\n    }\r\n    public translate(xOff: number, yOff: number) {\r\n\r\n        // do not allow to move the frame out of the extent\r\n        if (this.x + xOff < 0 ||\r\n            this.x + this.width + xOff > this.core.canvs.canvas.width ||\r\n            this.y + yOff < 0 ||\r\n            this.y + this.height + yOff > this.core.canvs.canvas.height ) {\r\n            return;\r\n        }\r\n\r\n        this.offsetByID(this.idHover, xOff, yOff);\r\n        this.updateUIWidthHeight();\r\n\r\n    }\r\n    public updateUIWidthHeight() {\r\n        console.log('updateUIWidthHeight', this.width, this.height);\r\n\r\n        this.core.app.ui.divWidth.value = `${this.width}`;\r\n        this.core.app.ui.divHeight.value = `${this.height}`;\r\n        this.update();\r\n        this.core.canvs.renderForce();\r\n    }\r\n}","import { Frame } from '..';\r\nexport class Transform {\r\n    frame: Frame;\r\n    constructor(frame: Frame) {\r\n        this.frame = frame;\r\n    }\r\n    public offsetByID(id: number, xOff: number, yOff: number) {\r\n\r\n        switch (id) {\r\n            case 0:\r\n                this.frame.x += xOff;\r\n                this.frame.y += yOff;\r\n                this.frame.width -= xOff;\r\n                this.frame.height -= yOff;\r\n                break;\r\n            case 1:\r\n                this.frame.width += xOff;\r\n                this.frame.y += yOff;\r\n                this.frame.height -= yOff;\r\n                break;\r\n            case 2:\r\n                this.frame.width += xOff;\r\n                this.frame.height += yOff;\r\n                break;\r\n            case 3:\r\n                this.frame.x += xOff;\r\n                this.frame.width -= xOff;\r\n                this.frame.height += yOff;\r\n                break;\r\n            case 4:\r\n                this.frame.y += yOff;\r\n                this.frame.height -= yOff;\r\n                break;\r\n            case 5:\r\n                this.frame.width += xOff;\r\n                break;\r\n            case 6:\r\n                this.frame.height += yOff;\r\n                break;\r\n            case 7:\r\n                this.frame.x += xOff;\r\n                this.frame.width -= xOff;\r\n                break;\r\n            default:\r\n                this.frame.x += xOff;\r\n                this.frame.y += yOff;\r\n                break;\r\n        }\r\n\r\n        this.updateGuides();\r\n        this.frame.update();\r\n        this.frame.core.canvs.renderForce();\r\n    }\r\n    public updateGuides() {\r\n        this.frame.xOffGuid = this.frame.width / 3;\r\n        this.frame.yOffGuid = this.frame.height / 3;\r\n        this.frame.cv[0] = this.frame.x + this.frame.width * 0.5;\r\n        this.frame.cv[1] = this.frame.y + this.frame.height * 0.5;\r\n    }\r\n}","import { Frame } from '..';\r\nexport class Interaction {\r\n    frame: Frame;\r\n    constructor(frame: Frame) {\r\n        this.frame = frame;\r\n    }\r\n    public mouseUp() {\r\n        this.frame.isHover = false;\r\n        if (this.frame.idHover !== -1) {\r\n            this.frame.idSelected = this.frame.idHover;\r\n        }\r\n    }\r\n    public isHoverCheck(x: number, y: number) {\r\n\r\n        for (let i = 0; i < this.frame.cpList.length; ++i) {\r\n            const idCP = this.frame.cpList[i].isHoverCheck(x, y);\r\n            if (idCP !== -1) {\r\n                this.frame.isHover = true;\r\n                this.frame.idHover = idCP;\r\n                return true;\r\n            }\r\n        }\r\n\r\n        if (this.frame.x < x  && this.frame.x + this.frame.width > x &&\r\n            this.frame.y < y  && this.frame.y + this.frame.height > y) {\r\n            this.frame.idHover = -1;\r\n            this.frame.isHover = true;\r\n            return true;\r\n        }\r\n\r\n        this.frame.idHover = -1;\r\n        this.frame.isHover = false;\r\n        return false;\r\n    }\r\n}","class KNNColor {\r\n\r\n  public ncols: NColor[];\r\n  public k: number;\r\n  public minDiff: number;\r\n  public clusters: Cluster[];\r\n\r\n  constructor( _ncols: NColor[], _k = 3, _minDiff = 1) {\r\n    this.ncols = _ncols;\r\n    if (_minDiff < 1) { _minDiff = 1; }\r\n    this.k = _k;\r\n    this.minDiff = _minDiff;\r\n    this.init();\r\n  }\r\n  private init() {\r\n    console.log('a');\r\n\r\n    let rnd = getRandomBySeed(10);\r\n\r\n    let clusters: Cluster[] = [];\r\n    let seen: number[] = [];\r\n\r\n    console.log('b');\r\n\r\n    while (clusters.length < this.k) {\r\n      let idx = Math.floor(rnd() * this.ncols.length);\r\n      // let idx = Math.floor(Math.random() * this.ncols.length);\r\n      let found = false;\r\n      // console.log(idx);\r\n\r\n      for (let i = 0; i < seen.length; i++ ) {\r\n        if (idx === seen[i]) {\r\n          found = true;\r\n          break;\r\n        }\r\n      }\r\n      if (!found) {\r\n        seen.push(idx);\r\n        let cluster = new Cluster(this.ncols[idx]);\r\n        cluster.push(this.ncols[idx]);\r\n        clusters.push(cluster);\r\n      }\r\n    }\r\n\r\n    console.log('c');\r\n    let safeguard = 0;\r\n\r\n    while (true) {\r\n\r\n      if (safeguard++ > 10000  ) { console.log('braek'); break; }\r\n      let plists: NColor[][] = [];\r\n      for (let i = 0; i < this.k; i++) {\r\n        plists.push([]);\r\n      }\r\n\r\n      for (let j = 0; j < this.ncols.length; j++) {\r\n        let p: NColor = this.ncols[j];\r\n        let smallest_distance = Number.MAX_VALUE;\r\n        let idx = 0;\r\n        for (let i = 0; i < this.k; i++) {\r\n          let distance = this.euclidean(p, clusters[i].key);\r\n          if (distance < smallest_distance) {\r\n            smallest_distance = distance;\r\n            idx = i;\r\n          }\r\n        }\r\n        plists[idx].push(p);\r\n      }\r\n      // console.log('d');\r\n      // console.log(plists);\r\n      let diff = 0;\r\n      for (let i = 0; i < this.k; i++) {\r\n\r\n        let old: NColor = clusters[i].key;\r\n\r\n        let center: NColor = this.calculateCenter(plists[i], 3);  // what is 3\r\n        // console.log(center, plists[i])\r\n        let newCluster = new Cluster(center);\r\n        newCluster.values = plists[i];\r\n        let dist = this.euclidean(old, center);\r\n        console.log(dist);\r\n        if (isNaN(dist)) {\r\n          // dist = 0.0;\r\n          continue;\r\n        }\r\n        clusters[i] = newCluster;\r\n        diff = diff > dist ? diff : dist;\r\n      }\r\n      // console.log('e');\r\n      console.log('diff', diff);\r\n      if (diff < this.minDiff) { break; }\r\n      // break;\r\n    }\r\n    console.log('done!');\r\n    this.clusters = clusters;\r\n  }\r\n  private euclidean(p1: NColor, p2: NColor) {\r\n    // console.log(p1, p2);\r\n    let s = Math.pow(p1.r - p2.r, 2) + Math.pow(p1.g - p2.g, 2) + Math.pow(p1.b - p2.b, 2);\r\n    // console.log(s);\r\n    return Math.sqrt(s);\r\n  }\r\n  private calculateCenter( cols: NColor[],  n: number) {\r\n    let cenCol = new NColor(0, 0, 0);\r\n    for (let i = 0; i < cols.length; i++) {\r\n      cenCol.r += cols[i].r;\r\n      cenCol.g += cols[i].g;\r\n      cenCol.b += cols[i].b;\r\n    }\r\n    cenCol.r /= cols.length;\r\n    cenCol.g /= cols.length;\r\n    cenCol.b /= cols.length;\r\n    return cenCol;\r\n  }\r\n\r\n}\r\nclass Cluster {\r\n  public key: NColor;\r\n  public values: NColor[] = [];\r\n\r\n  constructor(_key: NColor) {\r\n    this.key = _key;\r\n  }\r\n  public push(_Value: NColor) {\r\n    this.values.push(_Value);\r\n  }\r\n  public getKey() {\r\n    return [this.key.r, this.key.g, this.key.b];\r\n  }\r\n}\r\nclass NColor {\r\n  public r = 0;\r\n  public g = 0;\r\n  public b = 0;\r\n  constructor( _r = 0, _g = 0, _b = 0) {\r\n    this.r = _r;\r\n    this.g = _g;\r\n    this.b = _b;\r\n  }\r\n}\r\nconst getRandomBySeed = (seed: number) => {\r\n  if (seed === undefined) {\r\n    seed = performance.now();\r\n  }\r\n  return () => {\r\n    seed = (seed * 9301 + 49297) % 233280;\r\n    return seed / 233280;\r\n  };\r\n};\r\n// .................................................\r\n\r\nexport const thumbnail = (img: HTMLImageElement, maxWidth: number, maxHeight: number) => {\r\n\r\n  // Create and initialize two canvas\r\n  const canvas = document.createElement('canvas');\r\n  const ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\r\n  const canvasCopy = document.createElement('canvas');\r\n  const copyContext = canvasCopy.getContext('2d') as CanvasRenderingContext2D;\r\n\r\n  // Determine new ratio based on max size\r\n  let ratio = 1;\r\n  if (img.width > maxWidth) {\r\n    ratio = maxWidth / img.width;\r\n  } else if (img.height > maxHeight) {\r\n    ratio = maxHeight / img.height;\r\n  }\r\n  // Draw original image in second canvas\r\n  canvasCopy.width = img.width;\r\n  canvasCopy.height = img.height;\r\n  copyContext.drawImage(img, 0, 0);\r\n\r\n  // Copy and resize second canvas to first canvas\r\n  canvas.width = img.width * ratio;\r\n  canvas.height = img.height * ratio;\r\n  ctx.drawImage(canvasCopy, 0, 0, canvasCopy.width, canvasCopy.height, 0, 0, canvas.width, canvas.height);\r\n\r\n  let imgOut = new Image();\r\n  imgOut.src = canvas.toDataURL();\r\n  imgOut.width = canvas.width;\r\n  imgOut.height = canvas.height;\r\n  return imgOut;\r\n\r\n};\r\nexport const process_image = (img: HTMLImageElement, k: number = 1 ) => {\r\n  const points: NColor[] = [];\r\n  console.log('1');\r\n  const width = 100;\r\n  const height = 100;\r\n  // img = thumbnail(img, width, height)\r\n  // let imgDiv = document.getElementById('theimg');\r\n  // imgDiv.append(img);\r\n  // ctx.drawImage(img, 0, 0, img.width, img.height);\r\n  // console.log(img.width, img.height);\r\n  // let data = ctx.getImageData(0, 0, img.width, img.height).data;\r\n  console.log('2');\r\n  const canvas = document.createElement('canvas');\r\n  const ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\r\n  ctx.drawImage(img, 0, 0, width, height);\r\n  console.log('3');\r\n  const data = ctx.getImageData(0, 0, width, height).data;\r\n  for (let i = 0, l = data.length; i < l;  i += 4) {\r\n    let r = data[i];\r\n    let g = data[i + 1];\r\n    let b = data[i + 2];\r\n\r\n    // console.log(r,g,b);\r\n    points.push( new NColor(r, g, b));\r\n  }\r\n  console.log('4');\r\n  let results = new KNNColor(points, k, 1);\r\n  console.log('5');\r\n  let hex = [];\r\n  for (let i = 0; i < results.clusters.length; i++) {\r\n    hex.push(results.clusters[i].getKey());\r\n  }\r\n  return hex;\r\n};","import { Core } from '..';\r\nexport class Renderer {\r\n    public core: Core;\r\n    public t = 0.0;\r\n    public isCapture = false;\r\n    constructor(core: Core) {\r\n        this.core = core;\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D) {\r\n\r\n        // this.translation[0] = this.rect.cv[0];\r\n        // this.translation[1] = this.rect.cv[1];\r\n\r\n        // console.log(this.translation);\r\n        // this.ctx.translate(this.translation[0], this.translation[1]);\r\n        // this.ctx.scale(this.zoom, this.zoom);\r\n        // this.ctx.rotate(this.rotation)\r\n        // this.ctx.translate(this.rect.cv[0], this.rect.cv[1]);\r\n        // this.ctx.translate(100, 100);\r\n\r\n        // this.Render(ctx);\r\n        if (this.core.img) {\r\n            ctx.save();\r\n            \r\n            let type = 1;\r\n            switch (type) {\r\n                case 0:\r\n                    const mat = new DOMMatrix([1, 0, 0, 1, 0, 0]);\r\n\r\n                    const xPos = this.core.img.width; // * .5;\r\n                    const yPos = this.core.img.height; // * .5;\r\n\r\n                    const xPosRatio = this.core.frame.cv[0] / this.core.img.width; // * 0.01;\r\n                    const yPosRatio = this.core.frame.cv[1] / this.core.img.height; // * 0.01;\r\n\r\n                    console.log(xPosRatio, yPosRatio)\r\n                    console.log(1 - xPosRatio, 1 - yPosRatio)\r\n\r\n                    ctx.setTransform(mat\r\n                        .translate(xPos * xPosRatio, yPos * yPosRatio)\r\n                        .rotate(this.core.controller.rotationRadian)\r\n                        .scale(this.core.controller.zoomLevel)\r\n                        .translate(xPos * (1 - xPosRatio ), yPos * (1 - yPosRatio))\r\n                    );\r\n                    ctx.drawImage(this.core.img, -this.core.img.width, -this.core.img.height);\r\n                    break;\r\n\r\n                case 1:\r\n                    ctx.translate(this.core.img.width * 0.5, this.core.img.height * 0.5);\r\n                    ctx.rotate(this.core.controller.rotationRadian);\r\n                    ctx.scale(this.core.controller.zoomLevel, this.core.controller.zoomLevel);\r\n                    ctx.drawImage(this.core.img, -this.core.img.width * 0.5, -this.core.img.height * 0.5);\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n\r\n\r\n\r\n\r\n            // ctx.beginPath();\r\n            // ctx.arc(0, 0, 10,  0, 3.14 * 2);\r\n            // ctx.closePath()\r\n            // ctx.fill();\r\n\r\n            ctx.restore();\r\n        }\r\n\r\n        this.captureImage();\r\n\r\n\r\n        // this.ctx.restore();\r\n        // this.ctx.save();\r\n\r\n        // this.ctx.translate(this.translation[0], this.translation[1]);\r\n        this.core.frame.render(ctx);\r\n\r\n\r\n\r\n        let op = 1 - this.t;\r\n        // console.log(op);\r\n\r\n        if (op <  0) {\r\n            op = 0;\r\n        }\r\n\r\n\r\n        ctx.beginPath();\r\n        const xx = this.core.controller.touchInteraction.touchPre[0];\r\n        const yy = this.core.controller.touchInteraction.touchPre[1];\r\n        ctx.arc(xx, yy, op * 10,  0, 3.14 * 2);\r\n        ctx.closePath();\r\n\r\n\r\n        // console.log(`rgba(255, 255, 255, ${op})`)\r\n\r\n        ctx.fillStyle = `rgba(255, 255, 255, ${op})`;\r\n        ctx.fill();\r\n\r\n\r\n        ctx.restore();\r\n\r\n        // this.ctx.restore();\r\n        this.t += 0.025;\r\n    }\r\n    private captureImage() {\r\n\r\n        if (this.core.controller.isDrag) {\r\n            this.updateCanvasCapture();\r\n        }\r\n\r\n        if (this.isCapture) {\r\n            // console.log(this.core.frame.x);\r\n            this.core.canvs.ctxOut.drawImage(this.core.canvs.canvas, -this.core.frame.x, -this.core.frame.y);\r\n        }\r\n        // console.log(this.core.canvs.ctxOut, this.core.canvs);\r\n    }\r\n    public updateCanvasCapture() {\r\n            // this.core.frame.cv[0] = this.core.frame.x + this.core.frame.width * 0.5;\r\n            // this.core.frame.cv[1] = this.core.frame.y + this.core.frame.height * 0.5;\r\n\r\n            this.core.canvs.canvasOut.width = this.core.frame.width;\r\n            this.core.canvs.canvasOut.height = this.core.frame.height;\r\n    }\r\n}","import { Core } from '..';\r\nexport class ImageWrapper {\r\n    public core: Core;\r\n    public img: HTMLImageElement;\r\n    constructor(core: Core, img: HTMLImageElement) {\r\n        this.core = core;\r\n        this.img = img;\r\n    }\r\n\r\n\r\n}","import { EventController } from '..';\r\nexport class TouchInteraction {\r\n    public controller: EventController;\r\n    public down = false;\r\n    public touchPre: number[] = [0, 0];\r\n    public zoom: number = 1;\r\n    constructor(controller: EventController) {\r\n        this.controller = controller;\r\n    }\r\n    public touchstart(e: TouchEvent) {\r\n        this.controller.core.renderer.t = 0.0;\r\n        // console.log('touchstart', e);\r\n\r\n        var rect = this.controller.core.canvs.canvas.getBoundingClientRect();\r\n        const evX = e.targetTouches[0].pageX - rect.left;\r\n        const evY = e.targetTouches[0].pageY - rect.top;\r\n        this.touchPre[0] = evX;\r\n        this.touchPre[1] = evY;\r\n        this.controller.touchStartRotation = true;\r\n        this.controller.touchStartScale = true;\r\n\r\n        this.controller.pointDown(evX, evY);\r\n\r\n        e.preventDefault();\r\n    }\r\n    public touchmove(e: TouchEvent) {\r\n        // console.log('touchmove', e);\r\n\r\n        if(e.targetTouches.length > 1) {\r\n            this.controller.rotationByTouch(e);\r\n            this.controller.scaleByTouch(e);\r\n            return \r\n        }\r\n\r\n        var rect = this.controller.core.canvs.canvas.getBoundingClientRect();\r\n        const evX = e.targetTouches[0].pageX - rect.left;\r\n        const evY = e.targetTouches[0].pageY - rect.top;\r\n        this.touchPre[0] = evX;\r\n        this.touchPre[1] = evY;\r\n\r\n        this.controller.pointDrag(evX, evY);\r\n\r\n        e.preventDefault();\r\n    }\r\n    public touchcancel(e: TouchEvent) {\r\n        // console.debug('touchcancel', e);\r\n        this.controller.touchStartRotation = false;\r\n        this.controller.touchStartScale = false;\r\n        e.preventDefault();\r\n    }\r\n    public touchend(e: TouchEvent) {\r\n        this.controller.pointUp(-1, -1);\r\n\r\n        e.preventDefault();\r\n    }\r\n}","import { EventController } from '..';\r\nexport class MouseInteraction {\r\n    public controller: EventController;\r\n    constructor(core: EventController) {\r\n        this.controller = core;\r\n    }\r\n    public mouseDown(e: MouseEvent) {\r\n        this.controller.pointDown(e.offsetX, e.offsetY);\r\n    }\r\n    public mouseUp(e: MouseEvent) {\r\n        this.controller.isDrag = false;\r\n        this.controller.pointUp(e.offsetX, e.offsetY);\r\n    }\r\n    public mouseWheel(e: WheelEvent, v: number) {\r\n        this.controller.zoom(e.deltaY);\r\n    }\r\n    public mouseMove(e: MouseEvent) {\r\n        if (this.controller.isDown) {\r\n            this.controller.pointDrag(e.offsetX, e.offsetY);\r\n        } else {\r\n            this.controller.pointMove(e.offsetX, e.offsetY);\r\n        }\r\n    }\r\n    public mouseOut(e: MouseEvent) {\r\n        this.controller.pointOut(e.offsetX, e.offsetY);\r\n    }\r\n}","export enum CURSOR {\r\n    Default = 'default',\r\n    Auto = 'audo',\r\n    Crosshair = 'CROSSHAIR',\r\n    Move = 'move',\r\n    Pointer = 'pointer',\r\n    Text = 'text',\r\n    Wait = 'wait',\r\n    Help = 'help',\r\n    NWResize = 'nw-resize', // 0, 2\r\n    NEResize = 'ne-resize', // 1, 3\r\n    NSResize = 'ns-resize', // 4 6\r\n    EResize = 'e-resize', // 5 7\r\n}\r\nexport class ActiveCursor {\r\n    public div: HTMLElement|undefined;\r\n    constructor(div?: HTMLElement) {\r\n        this.div = div;\r\n    }\r\n    public default() {\r\n        if (this.div) {\r\n            if (this.div.style.cursor !== CURSOR.Default) { this.div.style.cursor = CURSOR.Default; }\r\n        } else {\r\n            if (document.body.style.cursor !== CURSOR.Default) { document.body.style.cursor = CURSOR.Default; }\r\n        }\r\n    }\r\n    public auto() {\r\n      if (this.div) {\r\n          if (this.div.style.cursor !== CURSOR.Auto) { this.div.style.cursor = CURSOR.Auto; }\r\n      } else {\r\n          if (document.body.style.cursor !== CURSOR.Auto) { document.body.style.cursor = CURSOR.Auto; }\r\n      }\r\n  }\r\n    public creating() {\r\n        if (this.div) {\r\n            if (this.div.style.cursor !== CURSOR.Crosshair) { this.div.style.cursor = CURSOR.Crosshair; }\r\n        } else {\r\n            if (document.body.style.cursor !== CURSOR.Crosshair) { document.body.style.cursor = CURSOR.Crosshair; }\r\n        }\r\n    }\r\n    public dragging() {\r\n        if (this.div) {\r\n            if (this.div.style.cursor !== CURSOR.Move) { this.div.style.cursor = CURSOR.Move; }\r\n        } else {\r\n            if (document.body.style.cursor !== CURSOR.Move) { document.body.style.cursor = CURSOR.Move; }\r\n        }\r\n    }\r\n    public hovering() {\r\n        if (this.div) {\r\n            if (this.div.style.cursor !== CURSOR.Pointer) { this.div.style.cursor = CURSOR.Pointer; }\r\n        } else {\r\n            if (document.body.style.cursor !== CURSOR.Pointer) { document.body.style.cursor = CURSOR.Pointer; }\r\n        }\r\n    }\r\n    public texting() {\r\n        if (this.div) {\r\n            if (this.div.style.cursor !== CURSOR.Text) { this.div.style.cursor = CURSOR.Text; }\r\n        } else {\r\n            if (document.body.style.cursor !== CURSOR.Text) { document.body.style.cursor = CURSOR.Text; }\r\n        }\r\n    }\r\n    public set_e_resize() {\r\n      if (this.div) {\r\n          if (this.div.style.cursor !== CURSOR.EResize) { this.div.style.cursor = CURSOR.EResize; }\r\n      } else {\r\n          if (document.body.style.cursor !== CURSOR.EResize) { document.body.style.cursor = CURSOR.EResize; }\r\n      }\r\n      }\r\n      public set_ne_resize() {\r\n          if (this.div) {\r\n              if (this.div.style.cursor !== CURSOR.NEResize) { this.div.style.cursor = CURSOR.NEResize; }\r\n          } else {\r\n              if (document.body.style.cursor !== CURSOR.NEResize) { document.body.style.cursor = CURSOR.NEResize; }\r\n          }\r\n      }\r\n      public set_ns_resize() {\r\n          if (this.div) {\r\n              if (this.div.style.cursor !== CURSOR.NSResize) { this.div.style.cursor = CURSOR.NSResize; }\r\n          } else {\r\n              if (document.body.style.cursor !== CURSOR.NSResize) { document.body.style.cursor = CURSOR.NSResize; }\r\n          }\r\n      }\r\n      public set_nw_resize() {\r\n          if (this.div) {\r\n              if (this.div.style.cursor !== CURSOR.NWResize) { this.div.style.cursor = CURSOR.NWResize; }\r\n          } else {\r\n              if (document.body.style.cursor !== CURSOR.NWResize) { document.body.style.cursor = CURSOR.NWResize; }\r\n          }\r\n    }\r\n}","import { Core } from '..';\r\nimport { TouchInteraction } from './Event/TouchInteraction';\r\nimport { MouseInteraction } from './Event/MouseInteraction';\r\nimport { ActiveCursor } from './ActiveCursor';\r\nexport class EventController {\r\n\r\n    public core: Core;\r\n    public activeCursor: ActiveCursor;\r\n    public mouseInteraction: MouseInteraction;\r\n    public touchInteraction: TouchInteraction;\r\n\r\n    public isDown = false;\r\n    public isDrag = false;\r\n\r\n    public mousePre = [0, 0];\r\n    public zoomLevel: number = 1;\r\n    public rotationRadian: number = 0;\r\n    // public translation: number[] = [0, 0];\r\n\r\n    // touch for rotation\r\n    private scalePre = 1;\r\n    private anglePre = 0;\r\n    public touchStartRotation = false;\r\n    public touchStartScale = false;\r\n\r\n    constructor(core: Core) {\r\n        this.core = core;\r\n        this.activeCursor = new ActiveCursor();\r\n        this.touchInteraction = new TouchInteraction(this);\r\n        this.mouseInteraction = new MouseInteraction(this);\r\n\r\n    }\r\n    public import(url: string) {\r\n        this.reset();\r\n    }\r\n    public reset() {\r\n\r\n    }\r\n    public updateWidthByInput(v: number) {\r\n        if (v < this.core.frame.widthMin) {\r\n            this.core.frame.width = this.core.frame.widthMin;\r\n        } else if (v + this.core.frame.x > this.core.imageWrapper.img.width) {\r\n            this.core.frame.width = this.core.imageWrapper.img.width - this.core.frame.x;\r\n        } else {\r\n            this.core.frame.width = v;\r\n        }\r\n        this.updateSizeByInputPost();\r\n    }\r\n    public updateHeightByInput(v: number) {\r\n        if (v < this.core.frame.heightMin) {\r\n            this.core.frame.height = this.core.frame.heightMin;\r\n        } else if (v + this.core.frame.y > this.core.imageWrapper.img.height) {\r\n            this.core.frame.height = this.core.imageWrapper.img.height - this.core.frame.y;\r\n        } else {\r\n            this.core.frame.height = v;\r\n        }\r\n        this.updateSizeByInputPost();\r\n    }\r\n    private updateSizeByInputPost() {\r\n        this.core.frame.update();\r\n        this.core.canvs.renderForce();\r\n        this.core.canvs.canvasOut.width = this.core.frame.width;\r\n        this.core.canvs.canvasOut.height = this.core.frame.height;\r\n    }\r\n    public offsetByInput(v: number) {\r\n        // console.log(v, this.core.frame.idSelected);\r\n\r\n        if (this.core.frame.idSelected === 0 || this.core.frame.idSelected === 4 || this.core.frame.idSelected === 7 ) {\r\n            v *= -1;\r\n        }\r\n\r\n        this.core.frame.offsetByID(this.core.frame.idSelected, v, v);\r\n        this.core.renderer.updateCanvasCapture();\r\n\r\n    }\r\n    public updateCursor() {\r\n        if (this.core.frame.isHover) {\r\n            // console.log(this.core.frame.idHover)\r\n            if (this.core.frame.idHover === -1) {\r\n                this.activeCursor.dragging();\r\n            } else if (this.core.frame.idHover === 0 || this.core.frame.idHover === 2) {\r\n                this.activeCursor.set_nw_resize();\r\n            } else if (this.core.frame.idHover === 1 || this.core.frame.idHover === 3) {\r\n                this.activeCursor.set_ne_resize();\r\n            } else if (this.core.frame.idHover === 5 || this.core.frame.idHover === 7) {\r\n                this.activeCursor.set_e_resize();\r\n            } else if (this.core.frame.idHover === 4 || this.core.frame.idHover === 6) {\r\n                this.activeCursor.set_ns_resize();\r\n            }\r\n        } else {\r\n            this.activeCursor.default();\r\n        }\r\n    }\r\n    public rotate(v: number) {\r\n        this.rotationRadian = v;\r\n        this.postUpdate();\r\n    }\r\n    public pointDown(x: number, y: number) {\r\n        this.isDown = true;\r\n        this.core.frame.isHoverCheck(x, y);\r\n        this.mousePre[0] = x;\r\n        this.mousePre[1] = y;\r\n\r\n        this.postUpdate();\r\n    }\r\n    public pointUp(x: number, y: number) {\r\n        this.isDown = false;\r\n        this.core.frame.mouseUp();\r\n        this.postUpdate();\r\n    }\r\n    public pointOut(x: number, y: number) {\r\n        this.isDown = false;\r\n        this.core.frame.isHover = false;\r\n        this.isDrag = false;\r\n        // this.anglePre = 0.0;\r\n        this.postUpdate();\r\n    }\r\n    public pointMove(x: number, y: number) {\r\n        this.core.frame.isHoverCheck(x, y);\r\n\r\n        this.mousePre[0] = x;\r\n        this.mousePre[1] = y;\r\n\r\n        this.updateCursor();\r\n\r\n\r\n        this.postUpdate();\r\n    }\r\n    public pointDrag(x: number, y: number) {\r\n        this.isDrag = true;\r\n        // this.core.frame.isHover(x, y);\r\n        // console.log(x, y);\r\n\r\n        if (this.core.frame.isHover) {\r\n            this.mouseDragRect(x, y);\r\n        } else {\r\n            this.mouseDragPan(x, y);\r\n        }\r\n        // return;\r\n\r\n        this.postUpdate();\r\n    }\r\n    public mouseDragRect = (x: number, y: number) => {\r\n        const xOff = x - this.mousePre[0];\r\n        const yOff = y - this.mousePre[1];\r\n        this.core.frame.translate(xOff, yOff);\r\n\r\n\r\n        // let cos = Math.cos(angle * (3.14159265358979 / 180.0));\r\n        // let sin = Math.sin(angle * (3.14159265358979 / 180.0));\r\n        // let x = v.x * cos - v.y * sin;\r\n        // let y = v.x * sin + v.y * cos;\r\n\r\n\r\n        // this.translation[0] += xOff;\r\n        // this.translation[1] += yOff;\r\n\r\n\r\n        this.mousePre[0] = x;\r\n        this.mousePre[1] = y;\r\n        // this.pointDrag(x, y);\r\n    }\r\n    public mouseDragPan = (x: number, y: number) => {\r\n        this.pan(x, y);\r\n    }\r\n    public zoom(v: number) {\r\n        // console.log(e.deltaY);\r\n        if (v < 0) {\r\n            this.zoomLevel += this.zoomLevel * 0.19;\r\n        } else {\r\n            this.zoomLevel -= this.zoomLevel * 0.19;\r\n        }\r\n\r\n        this.postUpdate();\r\n    }\r\n    // public RemapByZoom(e: MouseEventData) {\r\n    //     e.x = (e.x - this.translation[0]) / this.zoom;\r\n    //     e.y = (e.y - this.translation[1]) / this.zoom;\r\n    //     return e;\r\n    // }\r\n    public pan(x: number, y: number) {\r\n        // if (!this.ablePan) { return;}\r\n        // const xOff = e.x - this.mousePre[0];\r\n        // const yOff = e.y - this.mousePre[1];\r\n        // this.translation[0] += xOff;\r\n        // this.translation[1] += yOff;\r\n        // console.log(this.translation);\r\n    }\r\n    public postUpdate() {\r\n        this.core.canvs.renderForce();\r\n    }\r\n    public downloadImage() {\r\n        // this.core.canvs.canvasOut;\r\n\r\n        const a = document.createElement('a');\r\n        a.href = this.core.canvs.canvasOut.toDataURL();\r\n        a.download = 'image.png';\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n    }\r\n    public rotationByTouch(e: TouchEvent) {\r\n        this.core.canvs.renderForce();\r\n\r\n        let t0;\r\n        let t1;\r\n        if (e.targetTouches[0].clientY < e.targetTouches[1].clientY) {\r\n            t0 = e.targetTouches[0];\r\n            t1 = e.targetTouches[1];\r\n        } else {\r\n            t0 = e.targetTouches[1];\r\n            t1 = e.targetTouches[0];\r\n        }\r\n\r\n        const angle = Math.atan2(t1.clientX - t0.clientX, t1.clientY - t0.clientY );\r\n        const theAngle =  this.anglePre - angle; \r\n\r\n        // it happens one time when touch starts\r\n        if (this.touchStartRotation) {\r\n            this.anglePre = this.rotationRadian;\r\n            this.touchStartRotation = false;\r\n            this.anglePre = angle;\r\n            return;\r\n        }\r\n\r\n        this.rotationRadian += theAngle;\r\n        this.anglePre = angle;\r\n    }\r\n    public scaleByTouch(e: TouchEvent) {\r\n        this.core.canvs.renderForce();\r\n\r\n        let t0;\r\n        let t1;\r\n        if (e.targetTouches[0].clientY < e.targetTouches[1].clientY) {\r\n            t0 = e.targetTouches[0];\r\n            t1 = e.targetTouches[1];\r\n        } else {\r\n            t0 = e.targetTouches[1];\r\n            t1 = e.targetTouches[0];\r\n        }\r\n\r\n        const distance = Math.sqrt( \r\n            (t1.clientX - t0.clientX) * (t1.clientX - t0.clientX) +  \r\n            (t1.clientY - t0.clientY) * (t1.clientY - t0.clientY)\r\n        );\r\n\r\n\r\n\r\n        if (this.scalePre > distance) {\r\n            if (this.zoomLevel > 0.4) {\r\n                this.zoomLevel -= 0.015;\r\n            }\r\n        } else {\r\n            if (this.zoomLevel < 2.0) {\r\n                this.zoomLevel += 0.015;\r\n            }\r\n        }\r\n\r\n        // const theZoom = this.scalePre - distance * 0.001; \r\n\r\n        // it happens one time when touch starts\r\n        if (this.touchStartScale) {\r\n            this.scalePre = this.zoomLevel;\r\n            this.touchStartScale = false;\r\n            this.scalePre = distance;\r\n            return;\r\n        }\r\n\r\n        \r\n\r\n        // console.log(theZoom);\r\n        // this.zoomLevel += theZoom;\r\n        this.scalePre = distance;\r\n    }\r\n}","import { Canvas } from './Canvas';\r\nimport { Frame } from './Frame';\r\nimport { process_image } from '../lib/DominantColor';\r\nimport { RGB2HSL, HSL2RGB } from '../lib';\r\nimport { Renderer } from './Renderer';\r\nimport { ImageWrapper } from './ImageWrapper';\r\nimport { EventController } from './EventController';\r\nimport { ExpreeImageFilterTool } from '..';\r\nexport class Core {\r\n    public app: ExpreeImageFilterTool;\r\n    public div: HTMLElement;\r\n\r\n    public imageWrapper: ImageWrapper;\r\n    public frame: Frame;\r\n    public renderer: Renderer;\r\n    public canvs: Canvas;\r\n    public controller: EventController;\r\n    public ctx: CanvasRenderingContext2D;\r\n    public img: HTMLImageElement;\r\n\r\n    constructor(app: ExpreeImageFilterTool) {\r\n        this.app = app;\r\n\r\n        this.initApp();\r\n        this.initCanvas(); // \r\n        this.importImage('https://raw.githubusercontent.com/NamjuLee/data/master/img/bg/babyPolarBearSmall.jpg');\r\n        // this.importImage('https://raw.githubusercontent.com/NamjuLee/data/master/img/bg/zoom-James-River-Kayaking.jpg');\r\n\r\n    }\r\n    private initApp() {\r\n        this.frame = new Frame(this);\r\n        this.renderer = new Renderer(this);\r\n        this.controller = new EventController(this);\r\n    }\r\n    private initCanvas() {\r\n        const div = document.createElement('div');\r\n        div.id = 'ExpressImageDivCanvas';\r\n        // div.style.width = '400px';\r\n        // div.style.height = '400px';\r\n        // div.style.margin = '50px';\r\n        div.style.overflow = 'hidden';\r\n        div.style.textAlign = 'center';\r\n        // div.style.backgroundColor = '#ff0000';\r\n        this.div = div;\r\n        this.app.div.append(this.div);\r\n\r\n        this.canvs = new Canvas(this, div);\r\n        this.canvs.render = (ctx: CanvasRenderingContext2D) => { this.renderer.render(ctx); };\r\n    }\r\n    public importImage(url: string) {\r\n        const image = new Image();\r\n        image.crossOrigin = 'anonymous';\r\n        image.src = url;\r\n        image.style.pointerEvents = 'none';\r\n        this.renderer.isCapture = false;\r\n        image.onload = () => {\r\n            this.imageWrapper = new ImageWrapper(this, image);\r\n\r\n            this.canvs.canvasOut.width = image.width;\r\n            this.canvs.canvasOut.height = image.height;\r\n\r\n            this.canvs.canvas.width = image.width;\r\n            this.canvs.canvas.height = image.height;\r\n\r\n            // this.div.style.width = image.width + 'px';\r\n            this.div.style.height = image.height + 'px';\r\n\r\n            this.img = image;\r\n\r\n            console.log(image);\r\n            const result = process_image(image);\r\n            // console.log(result);\r\n\r\n            // // deSaturation\r\n            const colResult = [result[0][0], result[0][1], result[0][2]];\r\n            let hls0 = RGB2HSL(colResult[0], colResult[1], colResult[2]);\r\n            let hls1 = [...hls0];\r\n\r\n\r\n            // console.log(hls);\r\n            hls0[0] += 0.0; // Hue;\r\n            hls0[1] += -0.05; // Saturation;\r\n            if (hls0[1] < 0) { hls0[1] = 0; }\r\n            hls0[2] += 0.0; // Lightness;\r\n            let col0 = HSL2RGB(hls0[0], hls0[1], hls0[2]);\r\n            console.log('col0', col0);\r\n            this.app.div.style.backgroundColor = `rgb(${col0[0]},${col0[1]},${col0[2]})`;\r\n\r\n            this.app.ui.updateStyle(col0[0], col0[1], col0[2]);\r\n            this.app.divHost.style.backgroundColor = `rgb(${col0[0]},${col0[1]},${col0[2]})`;\r\n\r\n            hls1[0] += 0.0; // Hue;\r\n            hls1[1] += 0.0; // Saturation;\r\n            if (hls1[1] < 0) { hls1[1] = 0; }\r\n            hls1[2] += -0.02; // Lightness;\r\n            let col1 = HSL2RGB(hls1[0], hls1[1], hls1[2]);\r\n            console.log('col1', col1);\r\n            this.frame.updateColorBG(col1[0], col1[1], col1[2]);\r\n\r\n            this.frame.InitFrame();\r\n\r\n\r\n            this.renderer.isCapture = true;\r\n            this.canvs.renderForce();\r\n        };\r\n    }\r\n}","import { ExpreeImageFilterTool } from '..';\r\nexport class UI {\r\n    public expreeImageTool: ExpreeImageFilterTool;\r\n    public divUI: HTMLElement;\r\n\r\n    public divSizeFrameBG: HTMLElement;\r\n    public divWidth: HTMLInputElement;\r\n    public divHeight: HTMLInputElement;\r\n\r\n    public divTextPresest: HTMLDivElement;\r\n\r\n    constructor(expreeImageTool: ExpreeImageFilterTool) {\r\n        this.expreeImageTool = expreeImageTool;\r\n\r\n        const txt = document.createElement('p');\r\n        txt.textContent = 'Expree Image';\r\n        txt.style.fontSize = '12px;';\r\n        txt.style.color = '#afafaf';\r\n        txt.style.position = 'absolute';\r\n        txt.style.top = '0px';\r\n        txt.style.left = '20px';\r\n        this.expreeImageTool.divHost.append(txt);\r\n\r\n        const divUI = document.createElement('div') as HTMLElement;\r\n        this.divUI = divUI;\r\n        this.divUI.style.width = '100%';\r\n        this.divUI.style.height = '100px';\r\n        this.divUI.style.backgroundColor = 'rgba(0,0,0,0)';\r\n        this.expreeImageTool.divHost.append(this.divUI);\r\n    }\r\n    public updateStyle(r: number, g: number, b: number) {\r\n        this.divSizeFrameBG.style.backgroundColor = `rgb(${r},${b},${g})`;\r\n    }\r\n    public initPost() {\r\n\r\n        this.divSizeFrameBG = document.createElement('div');\r\n        this.divSizeFrameBG.style.textAlign = 'center';\r\n        this.divSizeFrameBG.style.backgroundColor = '#afafaf';\r\n        this.divSizeFrameBG.style.padding = '10px';\r\n        this.divSizeFrameBG.textContent = 'Size ';\r\n\r\n\r\n        this.divWidth = document.createElement('input');\r\n        this.divWidth.style.width = '50px';\r\n        this.divWidth.setAttribute('type', 'text');\r\n        this.divWidth.setAttribute('min', '100');\r\n        // this.divWidth.setAttribute('max', '500');\r\n        // this.divWidth.setAttribute('value', '300');\r\n        this.divSizeFrameBG.append(this.divWidth);\r\n        this.divWidth.oninput = () => {\r\n            const value = Number.parseFloat(this.divWidth.value);\r\n            if (value) {\r\n                this.expreeImageTool.core.controller.updateWidthByInput(value);\r\n            }\r\n        };\r\n\r\n        this.divHeight = document.createElement('input');\r\n        this.divHeight.style.width = '50px';\r\n        this.divHeight.setAttribute('type', 'text');\r\n        this.divHeight.setAttribute('min', '100');\r\n        // this.divHeight.setAttribute('max', '50');\r\n        // this.divHeight.setAttribute('value', '10');\r\n        this.divSizeFrameBG.append(this.divHeight);\r\n        this.divHeight.oninput = () => {\r\n            const value = Number.parseFloat(this.divHeight.value);\r\n            if (value) {\r\n                this.expreeImageTool.core.controller.updateHeightByInput(value);\r\n            }\r\n        };\r\n\r\n        this.divUI.append(this.divSizeFrameBG);\r\n\r\n\r\n        let btn = document.createElement('button');\r\n        btn.textContent = 'Reset';\r\n        this.divUI.append(btn);\r\n        btn.onclick = () => {\r\n            // console.log('play.....');\r\n            this.expreeImageTool.core.controller.reset();\r\n        };\r\n\r\n\r\n        btn = document.createElement('button');\r\n        btn.textContent = 'Download';\r\n        this.divUI.append(btn);\r\n        btn.onclick = () => {\r\n            // console.log('play.....');\r\n            this.expreeImageTool.core.controller.downloadImage();\r\n        };\r\n\r\n\r\n        btn = document.createElement('button');\r\n        btn.textContent = 'Capture';\r\n        this.divUI.append(btn);\r\n        btn.onclick = () => {\r\n            const img = this.expreeImageTool.core.canvs.capture();\r\n            // console.log(img);\r\n            this.divUI.append(img);\r\n        };\r\n\r\n\r\n        let slider = document.createElement('input');\r\n        slider.style.width = '500px';\r\n        slider.type = 'range';\r\n        slider.min = '0';  // '-3.13';\r\n        slider.max = '0.99'; // '3.13';\r\n        slider.step = '0.01';\r\n        slider.value = '0';\r\n        slider.oninput = () => {\r\n            // console.log(slider.value);\r\n            this.expreeImageTool.core.canvs.updateFilter(+slider.value);\r\n            // this.expreeImageTool.core.controller.rotate(+slider.value);\r\n        };\r\n        this.divUI.append(slider);\r\n\r\n        this.divTextPresest= document.createElement('div');\r\n        this.divTextPresest.textContent = 'Filter: normal';\r\n        this.divTextPresest.style.padding = '10px';\r\n        this.divUI.append(this.divTextPresest);\r\n\r\n\r\n        const divURL = document.createElement('input');\r\n        // divURL.textContent = 'https://raw.githubusercontent.com/NamjuLee/data/master/img/building%20footprint.png';\r\n        divURL.setAttribute('type', 'text');\r\n        divURL.setAttribute('value', 'https://raw.githubusercontent.com/NamjuLee/data/master/img/building%20footprint.png');\r\n        this.divUI.append(divURL);\r\n        divURL.oninput = () => {\r\n            console.log(divURL);\r\n            this.expreeImageTool.core.controller.reset();\r\n            this.expreeImageTool.core.importImage(divURL.textContent as string);\r\n        };\r\n        divURL.addEventListener('keyup', (event: KeyboardEvent) => {\r\n            if (event.keyCode === 13) { // Enter\r\n                event.preventDefault();\r\n                this.expreeImageTool.core.controller.reset();\r\n                this.expreeImageTool.core.importImage(divURL.value as string);\r\n            }\r\n        });\r\n\r\n\r\n        // var x = document.createElement('INPUT');\r\n        // x.setAttribute('type', 'text');\r\n        // x.setAttribute('value', 'Hello World!');\r\n\r\n        let divTitle = document.createElement('div');\r\n        divTitle.textContent = 'Offset: ';\r\n        divTitle.style.padding = '10px';\r\n\r\n        let divInput = document.createElement('input');\r\n        divInput.style.width = '30px';\r\n        divInput.setAttribute('type', 'text');\r\n        divInput.setAttribute('min', '-50');\r\n        divInput.setAttribute('max', '50');\r\n        divInput.setAttribute('value', '10');\r\n\r\n        // divInput.\r\n        // divInput.setAttribute('min', '10');\r\n        divTitle.append(divInput);\r\n        this.divUI.append(divTitle);\r\n        divInput.addEventListener('keyup', (event: KeyboardEvent) => {\r\n            if (event.keyCode === 13) { // Enter\r\n                event.preventDefault();\r\n                console.log('divInput.value', divInput.value);\r\n\r\n                let value = Number.parseFloat(divInput.value);\r\n\r\n                this.expreeImageTool.core.controller.offsetByInput(value);\r\n                // console.log(value);\r\n                // if(divInput.value.includes('-')) {\r\n                //     console.log('-', divInput.value.includes('-'));\r\n\r\n                //     this.expreeImageTool.core.controller.offsetByInput(Number.parseFloat(divInput.value) * -1);\r\n                // } else {\r\n                //     this.expreeImageTool.core.controller.offsetByInput(Number.parseFloat(divInput.value));\r\n                //     console.log('+', divInput.value.includes('-'));\r\n                // }\r\n            }\r\n        });\r\n\r\n\r\n        // let divRatio = document.createElement('div');\r\n        // divRatio.textContent = 'ddddd: ';\r\n        // divRatio.style.padding = '10px';\r\n        // this.divUI.append(divRatio)\r\n\r\n        btn = document.createElement('button');\r\n        btn.textContent = 'dd';\r\n        // btn.style.float = 'left';\r\n        this.divUI.append(btn);\r\n        btn.onclick = () => {\r\n            const img = this.expreeImageTool.core.canvs.capture();\r\n            // console.log(img);\r\n            this.divUI.append(img);\r\n        };\r\n        // // .............................................\r\n        // divTitle = document.createElement('div');\r\n        // // divTitle.style.float =\r\n        // // divTitle.textContent = 'Offset: '\r\n\r\n\r\n\r\n        // divInput = document.createElement('input');\r\n        // // divInput.style.borderLeft = '10px';\r\n        // divInput.setAttribute('type', 'text');\r\n        // divInput.setAttribute('value', '5');\r\n        // divTitle.append(divInput);\r\n        // this.divUI.append(divTitle);\r\n        // divInput.addEventListener('keyup', (event: KeyboardEvent) => {\r\n        //     if (event.keyCode === 13) { // Enter\r\n        //         event.preventDefault();\r\n        //         this.expreeImageTool.core.controller.offsetByInput(+divInput.value);\r\n        //     }\r\n        // });\r\n\r\n        // divInput = document.createElement('input');\r\n        // divInput.style.borderLeft = '10px';\r\n        // divInput.setAttribute('type', 'text');\r\n        // divInput.setAttribute('value', '5');\r\n        // this.divUI.append(divInput);\r\n        // divInput.addEventListener('keyup', (event: KeyboardEvent) => {\r\n        //     if (event.keyCode === 13) { // Enter\r\n        //         event.preventDefault();\r\n        //         this.expreeImageTool.core.controller.offsetByInput(+divInput.value);\r\n        //     }\r\n        // });\r\n\r\n    }\r\n}\r\n","import { Core }from './Core';\r\nimport { UI } from './UI';\r\n\r\nexport interface IImageEditorParam {\r\n    id: string;\r\n    ui?: boolean;\r\n    colorCover?: string;\r\n}\r\nexport class ExpreeImageFilterTool {\r\n\r\n    public core: Core;\r\n    public ui: UI;\r\n    public divHost: HTMLElement;\r\n    public div: HTMLElement;\r\n    public param: IImageEditorParam;\r\n\r\n    constructor(param: IImageEditorParam) {\r\n        this.param = param;\r\n        const divHost = document.getElementById(this.param.id);\r\n        const div = document.createElement('div');\r\n        if (divHost && div) {\r\n            this.div = div;\r\n            this.div.id = 'ExpressImage';\r\n            this.div.style.padding = '50px';\r\n\r\n            this.divHost = divHost;\r\n            this.divHost.append(this.div);\r\n            // this.divHost.style.padding = '50px';\r\n\r\n            if (this.param.ui === undefined) {\r\n                this.param.ui = true;\r\n            }\r\n\r\n            if (this.param.ui) {\r\n                // console.log(this.param.ui);\r\n                this.ui = new UI(this);\r\n                this.ui.initPost();\r\n            }\r\n\r\n            this.core = new Core(this);\r\n            // template for the style of canvas\r\n            // this.core.canvs.div.style.margin = '50px';\r\n            // this.core.canvs.div.style.padding = '50px';\r\n\r\n        }\r\n    }\r\n    public Dummy() {\r\n        //\r\n    }\r\n}\r\n","import { ExpreeImageFilterTool, IImageEditorParam } from './ExpreeImageFilterTool';\r\nexport class Demo520ImageFilterTool {\r\n    expreeImageTool: ExpreeImageFilterTool;\r\n    static Init(id: string) {\r\n        const parma: IImageEditorParam = {\r\n            id: id,\r\n            // ui: true,\r\n            colorCover: '#ff0000',\r\n        };\r\n        const n = new Demo520ImageFilterTool(parma);\r\n        n.Dummy();\r\n    }\r\n    constructor(parma: IImageEditorParam) {\r\n        this.expreeImageTool = new ExpreeImageFilterTool(parma);\r\n    }\r\n    public Dummy() {\r\n        // TODO\r\n    }\r\n}\r\n"],"names":["filterPreset","normal","filter","sepia","contrast","brightness","saturate","hueRotate","filter1977","aden","tint","background0","blendMode","amaro","ashby","brannan","brooklyn","charmes","clarendon","crema","dogpatch","earlybird","background1","gingham","ginza","hefe","helena","hudson","inkwell","juno","kelvin","lark","lofi","maven","mayfair","moon","nashville","perpetua","poprocket","reyes","rise","sierra","skyline","slumber","stinson","sutro","toaster","valencia","vesper","walden","willow","xpro2","imageFilterPost","ctx","globalCompositeOperation","RadialGradient","colInner","colOutter","setTransform","canvas","width","height","grd","createRadialGradient","addColorStop","fillStyle","fillRect","Canvas","constructor","core","div","canvasFilter","ctxFilter","isActive","log","isViewChanging","loopNum","needRenderloop","ablePan","mousePre","canvasOut","ctxOut","loopNeeded","isFiltered","this","init","loopInit","document","createElement","clientWidth","clientHeight","append","style","border","getContext","app","divHost","initEvent","addEventListener","k","e","controller","mouseInteraction","mouseDown","mouseUp","mouseMove","mouseWheel","deltaY","mouseOut","t","touchInteraction","touchstart","touchmove","touchcancel","touchend","capture","img","Image","crossOrigin","src","toDataURL","loop","resize","requestAnimationFrame","before","performance","now","renderPre","after","toFixed","clear","clearRect","renderForce","drawImage","render","updateFilter","id","imageWrapper","type","index","i","push","theIndex","length","idPreset","Math","floor","preset","console","imageFilter","imageFilterWithPreset","ui","divTextPresest","textContent","renderVertex","x","y","r","beginPath","arc","angle","closePath","strokeStyle","fill","stroke","PUSH_ACTION","ENGINE","RGB2HSL","g","b","max","min","h","s","l","d","HSL2RGB","hue2rgb","pp","qq","q","p","round","Renderer","frame","_opacity","_t","_strokeStyle","_fillStyleRuntime","_fillStyle","_fillStyleHover","_sizePoint","_sizeMidPoint","sizePoint","sizeMidPoint","updateColorBG","ColorInterpolation","isHover","rect","renderPost","lineWidth","lineDashOffset","setLineDash","moveTo","xOffGuid","lineTo","yOffGuid","idHover","cpList","sin","col","c0","c1","interpolation","cOut","c","linearColorInterpolation","CP_TYPE","FramePreset","ControlPoint","update","isHoverCheck","x0","y0","x1","y1","sqrt","Endpoint","Midpoint","renderer","Transform","offsetByID","xOff","yOff","updateGuides","canvs","cv","Interaction","idSelected","idCP","Frame","transform","interaction","framePreset","widthMin","heightMin","param","colorCover","setRatio","v","InitFrame","updateUIWidthHeight","translate","divWidth","value","divHeight","KNNColor","_ncols","_k","_minDiff","ncols","minDiff","clusters","rnd","getRandomBySeed","seen","idx","found","cluster","Cluster","safeguard","plists","j","smallest_distance","Number","MAX_VALUE","distance","euclidean","key","diff","old","center","calculateCenter","newCluster","values","dist","isNaN","p1","p2","pow","cols","n","cenCol","NColor","_key","_Value","getKey","_r","_g","_b","seed","undefined","isCapture","save","mat","DOMMatrix","xPos","yPos","xPosRatio","yPosRatio","rotate","rotationRadian","scale","zoomLevel","restore","captureImage","op","xx","touchPre","yy","isDrag","updateCanvasCapture","ImageWrapper","TouchInteraction","down","zoom","getBoundingClientRect","evX","targetTouches","pageX","left","evY","pageY","top","touchStartRotation","touchStartScale","pointDown","preventDefault","rotationByTouch","scaleByTouch","pointDrag","pointUp","MouseInteraction","offsetX","offsetY","isDown","pointMove","pointOut","CURSOR","ActiveCursor","default","cursor","Default","body","auto","Auto","creating","Crosshair","dragging","Move","hovering","Pointer","texting","Text","set_e_resize","EResize","set_ne_resize","NEResize","set_ns_resize","NSResize","set_nw_resize","NWResize","EventController","activeCursor","scalePre","anglePre","mouseDragRect","mouseDragPan","pan","import","url","reset","updateWidthByInput","updateSizeByInputPost","updateHeightByInput","offsetByInput","updateCursor","postUpdate","downloadImage","a","href","download","appendChild","click","removeChild","t0","t1","clientY","atan2","clientX","theAngle","Core","initApp","initCanvas","importImage","overflow","textAlign","image","pointerEvents","onload","result","points","data","getImageData","results","hex","process_image","colResult","hls0","hls1","col0","backgroundColor","updateStyle","col1","UI","expreeImageTool","divUI","divSizeFrameBG","txt","fontSize","color","position","initPost","padding","setAttribute","oninput","parseFloat","btn","onclick","slider","step","divURL","event","keyCode","divTitle","divInput","ExpreeImageFilterTool","getElementById","Dummy","Demo520ImageFilterTool","static","parma"],"sourceRoot":""}