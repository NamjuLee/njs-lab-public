"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[1202],{1202:(t,i,s)=>{s.r(i),s.d(i,{SceneCreativeCoding:()=>xi});var e=s(32899);class h{constructor(t){this.scene=void 0,this.scene=t}MouseEventController(t){t.CLICK_TYPE!==e.uh.LEFT?t.CLICK_TYPE!==e.uh.MIDDLE?t.CLICK_TYPE!==e.uh.DOWN_RIGHT?t.CLICK_TYPE!==e.uh.DOUBLE?t.CLICK_TYPE!==e.uh.MOVE?t.CLICK_TYPE!==e.uh.DRAG?t.CLICK_TYPE!==e.uh.DOWN?t.CLICK_TYPE!==e.uh.WHEEL?t.CLICK_TYPE!==e.uh.UP||this.MouseUpPre(t):this.MouseWheelPre(t):this.MouseDownPre(t):this.MouseDragPre(t):this.MouseMovePre(t):this.MouseDoubleClickPre(t):this.MouseRightClickPre(t):this.MouseMiddleClickPre(t):this.MouseLeftClickPre(t)}MouseDown(t){}MouseDownPre(t){this.scene.MouseDown(t.x,t.y),this.MouseDown(t)}MouseLeftClick(t){}MouseLeftClickPre(t){this.scene.MouseLeftClick(t.x,t.y),this.MouseLeftClick(t)}MouseMiddleClick(t){}MouseMiddleClickPre(t){this.scene.MouseMiddleClick(t.x,t.y),this.MouseMiddleClick(t)}MouseRightClick(t){}MouseRightClickPre(t){this.scene.MouseRightClick(t.x,t.y),this.MouseRightClick(t)}MouseUp(t){}MouseUpPre(t){this.scene.MouseUp(t.x,t.y),this.MouseUp(t)}MouseDoubleClick(t){}MouseDoubleClickPre(t){this.scene.MouseDoubleClick(t.x,t.y),this.MouseDoubleClick(t)}MouseMove(t){}MouseMovePre(t){this.scene.MouseMove(t.x,t.y),this.MouseMove(t)}MouseDrag(t){}MouseDragPre(t){this.scene.MouseDrag(t.x,t.y),this.MouseDrag(t)}MouseWheel(t){}MouseWheelPre(t){this.scene.MouseWheel(t.x,t.y,t.wheel),this.MouseWheel(t)}}class n{constructor(t){this.scene=void 0,this.scene=t}}var o=s(43523);class l{constructor(t){this.scene=void 0,this.indeCanvas=void 0,this.mOffX=-12,this.mOffY=-12,this.scene=t,this.scene.definitions.push(this),this.InitIndeCanvas()}InitIndeCanvas(){this.scene.implementation.app.needUI?this.indeCanvas=new o.D(this.scene.implementation.app.viewController.NUIWrapper.NUI.independentPanelWrapper,50,50,650,350,!0):this.indeCanvas=new o.D(this.scene.implementation.app.viewController.NUIWrapper.NUI.independentPanelWrapper,1,-25,650,450,!0),this.indeCanvas.title="Circle Grid with Attractors 2",this.indeCanvas.btnHam.isHidden=!0,this.indeCanvas.btnMini.isHidden=!0,this.indeCanvas.RenderIndependentCanvas=t=>this.RenderIndependentCanvas(t)}Dummy(){}get width(){return this.indeCanvas.canvas.width}get height(){return this.indeCanvas.canvas.height}init(t){}RenderIndependentCanvas(t){}MouseMove(t,i){}MouseMovePre(t,i){this.indeCanvas.IsMouseInsidePanel(t,i)&&this.MouseMove(t-this.indeCanvas.vec.x+this.mOffX,i-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseDown(t,i){}MouseDownPre(t,i){this.indeCanvas.IsMouseInsidePanel(t,i)&&this.MouseDown(t-this.indeCanvas.vec.x+this.mOffX,i-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseUp(t,i){}MouseUpPre(t,i){this.indeCanvas.IsMouseInsidePanel(t,i)&&this.MouseUp(t-this.indeCanvas.vec.x+this.mOffX,i-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseDrag(t,i){}MouseDragPre(t,i){this.indeCanvas.IsMouseInsidePanel(t,i)&&this.MouseDrag(t-this.indeCanvas.vec.x+this.mOffX,i-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseLeftClick(t,i){}MouseLeftClickPre(t,i){this.indeCanvas.IsMouseInsidePanel(t,i)&&this.MouseLeftClick(t-this.indeCanvas.vec.x+this.mOffX,i-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseMiddleClick(t,i){}MouseMiddleClickPre(t,i){this.indeCanvas.IsMouseInsidePanel(t,i)&&this.MouseMiddleClick(t-this.indeCanvas.vec.x+this.mOffX,i-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseRightClick(t,i){}MouseRightClickPre(t,i){this.indeCanvas.IsMouseInsidePanel(t,i)&&this.MouseRightClick(t-this.indeCanvas.vec.x+this.mOffX,i-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseDoubleClick(t,i){}MouseDoubleClickPre(t,i){this.indeCanvas.IsMouseInsidePanel(t,i)&&this.MouseDoubleClick(t-this.indeCanvas.vec.x+this.mOffX,i-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseWheel(t,i,s){}MouseWheelPre(t,i,s){this.indeCanvas.IsMouseInsidePanel(t,i)&&this.MouseWheel(t-this.indeCanvas.vec.x+this.mOffX,i-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY,s)}}class c extends l{constructor(t){super(t),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50}init(){}RenderIndependentCanvas(t){t.fillStyle="#eeeeee",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),this.xpos=this.xpos+this.xspeed*this.xdirection,this.ypos=this.ypos+this.yspeed*this.ydirection,(this.xpos>this.width-this.rad||this.xpos<this.rad)&&(this.xdirection*=-1),(this.ypos>this.height-this.rad||this.ypos<this.rad)&&(this.ydirection*=-1),t.fillStyle="#ff0000",t.beginPath(),t.arc(this.xpos,this.ypos,this.rad,0,6.28),t.closePath(),t.fill()}}class a extends l{constructor(t){super(t),this.Balls=[],this.Balls.push(new r(this,50,50)),this.Balls.push(new r(this,100,100))}RenderIndependentCanvas(t){t.fillStyle="#eeeeee",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill();for(let i of this.Balls)i.Render(t)}MouseDown(t,i){this.Balls.push(new r(this,t,i))}}class r{static GetRandomHex(){return this.RGBToHex(Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random()))}static RGBToHex(t,i,s){return"#"+[Math.round(t),Math.round(i),Math.round(s)].map((t=>{const i=t.toString(16);return 1===i.length?"0"+i:i})).join("")}constructor(t,i,s){this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.BallBounceClass=void 0,this.color=void 0,this.BallBounceClass=t,this.xpos=i,this.ypos=s,this.xdirection=2*Math.random()-1,this.ydirection=2*Math.random()-1,this.rad=50*Math.random()+10,this.color=r.GetRandomHex()}Render(t){this.xpos=this.xpos+this.xspeed*this.xdirection,this.ypos=this.ypos+this.yspeed*this.ydirection,(this.xpos>this.BallBounceClass.width-this.rad||this.xpos<this.rad)&&(this.xdirection*=-1),(this.ypos>this.BallBounceClass.height-this.rad||this.ypos<this.rad)&&(this.ydirection*=-1),t.fillStyle=this.color,t.beginPath(),t.arc(this.xpos,this.ypos,this.rad,0,6.28),t.closePath(),t.fill()}}class d extends l{constructor(t){super(t),this.mouse=[0,0],this.pts=void 0,this.init()}init(){this.mouse=[0,0]}RenderIndependentCanvas(t){this.pts=[];let i=this.width/40,s=this.height/40;for(let h=0;h<40;h+=1)for(let t=0;t<40;t+=1)this.pts.push([t*i,h*s]);let e=0;for(let h of this.pts){if(e%2===0){let i=[50,50,50,1],s=this.Distance(h[0],h[1],this.mouse[0],this.mouse[1]);i[0]=s,t.strokeStyle="rgba(".concat(i[0],",").concat(i[1],",").concat(i[2],",").concat(i[3],")"),t.beginPath(),t.arc(h[0],h[1],s/10,0,6.28),t.stroke()}e++}}Distance(t,i,s,e){return Math.sqrt((t-s)*(t-s)+(i-e)*(i-e))}MouseMove(t,i){this.mouse=[t,i]}}class p extends l{constructor(t){super(t),this.mouse=[0,0],this.pts=void 0,this.attrs=[[0,0]],this.strength=50,this.falloff=5e-5,this.init()}init(){this.mouse=[0,0]}RenderIndependentCanvas(t){this.pts=[];let i=this.width/60,s=this.height/40;for(let h=0;h<40;h+=1)for(let t=0;t<60;t+=1)this.pts.push([t*i,h*s]);let e=0;for(let h of this.pts){if(e%2===0){let i=[50,255,0,1],s=0;for(let t of this.attrs){let i=this.Attractor(h,t,this.strength,this.falloff);s<i&&(s=i)}i[2]+=3*s,t.strokeStyle="rgba(".concat(i[0],",").concat(i[1],",").concat(i[2],",").concat(i[3],")"),t.beginPath(),t.arc(h[0],h[1],10+s,0,6.28),t.stroke()}e++}}Attractor(t,i,s,e){let h=this.Sub(t,i),n=this.Length(h);return s*Math.exp(-e*n*n)}Sub(t,i){return[t[0]-i[0],t[1]-i[1]]}Unitize(t){let i=this.Length(t);return[t[0]/i,t[1]/i]}Length(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}MouseMove(t,i){this.attrs[this.attrs.length-1]=[t,i]}MouseDown(t,i){this.attrs.push([t,i])}MouseWheel(t,i,s){this.falloff+=1e-7*s}}class u extends l{constructor(t){super(t),this.mouse=[0,0],this.pts=void 0,this.attrs=[[0,0]],this.strength=50,this.falloff=5e-5,this.init()}init(){this.mouse=[0,0]}RenderIndependentCanvas(t){this.pts=[];let i=this.width/50,s=this.height/20;for(let h=0;h<20;h+=1)for(let t=0;t<50;t+=1)this.pts.push([t*i,h*s]);let e=0;for(let h of this.pts){if(e%2===0){let i=[0,20,0,1],s=0;for(let t of this.attrs){let i=this.Attractor(h,t,this.strength,this.falloff);s<i&&(s=i)}i[2]+=3*s,t.strokeStyle="rgba(".concat(i[0],",").concat(i[1],",").concat(i[2],",").concat(i[3],")"),t.beginPath(),t.arc(h[0],h[1],10+s,0,6.28),t.stroke()}e++}}Attractor(t,i,s,e){let h=this.Sub(t,i),n=this.Length(h);return s*Math.exp(-e*n*n)}Sub(t,i){return[t[0]-i[0],t[1]-i[1]]}Unitize(t){let i=this.Length(t);return[t[0]/i,t[1]/i]}Length(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}MouseMove(t,i){this.attrs[this.attrs.length-1]=[t,i]}MouseDown(t,i){this.attrs.push([t,i])}MouseWheel(t,i,s){this.falloff+=1e-7*s}}class x extends l{constructor(t){super(t),this.mouse=[0,0],this.lines=[],this.indeCanvas.title="Line",this.init()}init(){this.lines.push(new y(10,10,50,50))}RenderIndependentCanvas(t){t.fillStyle="#eeeeee",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill();for(let i of this.lines)i.Render(t)}MouseMove(t,i){this.mouse=[t,i]}MouseDown(){const t=this.lines[this.lines.length-1].p1;this.lines.push(new y(t[0],t[1],this.mouse[0],this.mouse[1]))}}class y{constructor(t,i,s,e){this.p0=void 0,this.p1=void 0,this.p0=[t,i],this.p1=[s,e]}Render(t){t.strokeStyle="red",t.beginPath(),t.moveTo(this.p0[0],this.p0[1]),t.lineTo(this.p1[0],this.p1[1]),t.closePath(),t.stroke()}}class f extends l{constructor(t){super(t),this.mouse=[0,0],this.lines=[],this.indeCanvas.title="Line",this.init()}init(){this.lines.push(new v(10,10,50,50))}RenderIndependentCanvas(t){t.fillStyle="#eeeeee",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill();for(let i of this.lines)i.Render(t)}MouseMove(t,i){this.mouse=[t,i]}MouseDown(){this.lines.length>5&&this.lines.shift();const t=this.lines[this.lines.length-1].p1;this.lines.push(new v(t[0],t[1],this.mouse[0],this.mouse[1]))}}class v{constructor(t,i,s,e){this.p0=void 0,this.p1=void 0,this.p0=[t,i],this.p1=[s,e]}Render(t){t.strokeStyle="red",t.beginPath(),t.moveTo(this.p0[0],this.p0[1]),t.lineTo(this.p1[0],this.p1[1]),t.closePath(),t.stroke()}}class g{static GetRandomPath(t,i,s,h){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10,o=[];for(let l=0;l<n;++l){let n=e.$H.GetRandomIntInclusive(t,s),l=e.$H.GetRandomIntInclusive(i,h);o.push(new e.h9(n,l,0))}return o}constructor(){}}class m{constructor(t){this.boids=[],this.targets=void 0,this.boids=[],this.targets=t}AddAgent(t,i){let s=new C(new e.h9(t,i));s.InitTarget(this.targets),this.boids.push(s)}Update(){this.Col();for(let t of this.boids)t.Update()}Col(){for(let t of this.boids)t.col=!1;for(let t=0;t<this.boids.length;++t){let i=this.boids[t];if(!i.isRenderable)break;for(let s=t+1;s<this.boids.length;++s){let t=this.boids[s];if(i.p.Distance(t.p)<30){t.col=!0;break}}}}GetPoint(){let t=[];for(let i of this.boids)i.isRenderable&&t.push(i.p);return t}Render(t){this.boids.forEach((i=>{i.Render(t)}))}}class C{constructor(t){this.maxForce=5,this.maxVelocity=5,this.maxSpeed=5,this.mass=10.2,this.isRenderable=!0,this.p=void 0,this.targets=void 0,this.target=void 0,this.targetID=0,this.col=!1,this.desiredVelocity=void 0,this.steering=void 0,this.velocity=new e.h9(0,0,0),this.p=t,this.target=new e.h9(t.x,t.y,t.z)}InitTarget(t){this.targets=t,this.target=this.targets[this.targetID]}Update(){this.UpdateTarget(),this.UpdateVecSlowDown2()}UpdateTarget(){this.p.Distance(this.target)<9&&(this.targetID++,this.targetID<this.targets.length&&(this.target=this.targets[this.targetID],this.targetID,this.targets.length))}UpdateVec0(){this.desiredVelocity=new e.h9(this.target.x-this.p.x,this.target.y-this.p.y,this.target.z-this.p.z),this.desiredVelocity.Unitize(),this.desiredVelocity.x*=this.maxVelocity,this.desiredVelocity.y*=this.maxVelocity,this.desiredVelocity.z*=this.maxVelocity;let t=this.desiredVelocity.x-this.velocity.x<this.maxForce?this.desiredVelocity.x-this.velocity.x:this.maxForce,i=this.desiredVelocity.y-this.velocity.y<this.maxForce?this.desiredVelocity.y-this.velocity.y:this.maxForce,s=this.desiredVelocity.z-this.velocity.z<this.maxForce?this.desiredVelocity.z-this.velocity.z:this.maxForce;this.steering=new e.h9(t/this.mass,i/this.mass,s/this.mass),this.velocity.x=this.velocity.x+this.steering.x<this.maxSpeed?this.velocity.x+this.steering.x:this.maxSpeed,this.velocity.y=this.velocity.y+this.steering.y<this.maxSpeed?this.velocity.y+this.steering.y:this.maxSpeed,this.velocity.z=this.velocity.z+this.steering.z<this.maxSpeed?this.velocity.z+this.steering.z:this.maxSpeed,this.col?(this.p.x+=.8*-this.steering.x,this.p.y+=.8*-this.steering.y,this.p.z+=.8*-this.steering.z):(this.p.x+=this.velocity.x,this.p.y+=this.velocity.y,this.p.z+=this.velocity.z)}UpdateVec1(){this.desiredVelocity=new e.h9(this.target.x-this.p.x,this.target.y-this.p.y,this.target.z-this.p.z),this.desiredVelocity.Unitize(),this.desiredVelocity.x*=this.maxVelocity,this.desiredVelocity.y*=this.maxVelocity,this.desiredVelocity.z*=this.maxVelocity;let t=this.desiredVelocity.x-this.velocity.x,i=this.desiredVelocity.y-this.velocity.y,s=this.desiredVelocity.z-this.velocity.z;this.steering=new e.h9(t/this.mass,i/this.mass,s/this.mass),this.velocity.x=this.velocity.x+this.steering.x<this.maxSpeed?this.velocity.x+this.steering.x:this.maxSpeed,this.velocity.y=this.velocity.y+this.steering.y<this.maxSpeed?this.velocity.y+this.steering.y:this.maxSpeed,this.velocity.z=this.velocity.z+this.steering.z<this.maxSpeed?this.velocity.z+this.steering.z:this.maxSpeed,this.col?(this.p.x+=.8*-this.steering.x,this.p.y+=.8*-this.steering.y,this.p.z+=.8*-this.steering.z):(this.p.x+=this.velocity.x,this.p.y+=this.velocity.y,this.p.z+=this.velocity.z)}UpdateVecSlowDown1(){this.desiredVelocity=new e.h9(this.target.x-this.p.x,this.target.y-this.p.y,this.target.z-this.p.z),this.desiredVelocity.Unitize(),this.desiredVelocity.x*=this.maxVelocity,this.desiredVelocity.y*=this.maxVelocity,this.desiredVelocity.z*=this.maxVelocity;let t=this.desiredVelocity.x-this.velocity.x,i=this.desiredVelocity.y-this.velocity.y,s=this.desiredVelocity.z-this.velocity.z;if(this.steering=new e.h9(t/this.mass,i/this.mass,s/this.mass),this.velocity.x=this.velocity.x+this.steering.x<this.maxSpeed?this.velocity.x+this.steering.x:this.maxSpeed,this.velocity.y=this.velocity.y+this.steering.y<this.maxSpeed?this.velocity.y+this.steering.y:this.maxSpeed,this.velocity.z=this.velocity.z+this.steering.z<this.maxSpeed?this.velocity.z+this.steering.z:this.maxSpeed,this.col)this.p.x+=.8*-this.steering.x,this.p.y+=.8*-this.steering.y,this.p.z+=.8*-this.steering.z;else{let t=this.maxSpeed/this.velocity.Length();t=t<1?t:1,this.p.x+=this.velocity.x*t,this.p.y+=this.velocity.y*t,this.p.z+=this.velocity.z*t}}UpdateVecSlowDown2(){this.desiredVelocity=new e.h9(this.target.x-this.p.x,this.target.y-this.p.y,this.target.z-this.p.z);let t=150,i=this.desiredVelocity.Length();i<t?(this.desiredVelocity.Unitize(),this.desiredVelocity.x*=this.maxVelocity*(i/t),this.desiredVelocity.y*=this.maxVelocity*(i/t),this.desiredVelocity.z*=this.maxVelocity*(i/t)):(this.desiredVelocity.Unitize(),this.desiredVelocity.x*=this.maxVelocity,this.desiredVelocity.y*=this.maxVelocity,this.desiredVelocity.z*=this.maxVelocity);let s=this.desiredVelocity.x-this.velocity.x,h=this.desiredVelocity.y-this.velocity.y,n=this.desiredVelocity.z-this.velocity.z;if(this.steering=new e.h9(s,h,n),this.velocity.x=this.velocity.x+this.steering.x<this.maxSpeed?this.velocity.x+this.steering.x:this.maxSpeed,this.velocity.y=this.velocity.y+this.steering.y<this.maxSpeed?this.velocity.y+this.steering.y:this.maxSpeed,this.velocity.z=this.velocity.z+this.steering.z<this.maxSpeed?this.velocity.z+this.steering.z:this.maxSpeed,this.col)this.p.x+=.8*-this.steering.x,this.p.y+=.8*-this.steering.y,this.p.z+=.8*-this.steering.z;else{let t=this.maxSpeed/this.velocity.Length();t=t<1?t:1,this.p.x+=this.velocity.x*t,this.p.y+=this.velocity.y*t,this.p.z+=this.velocity.z*t}}Render(t){this.RenderDesiredVelocity(t),this.RenderCurrentVelocity(t),this.RenderCircle(t)}RenderDesiredVelocity(t){t.lineWidth=.5,t.strokeStyle="#00ff00",t.beginPath(),t.moveTo(this.p.x,this.p.y),t.lineTo(this.p.x+20*this.desiredVelocity.x,this.p.y+20*this.desiredVelocity.y),t.closePath(),t.stroke()}RenderCurrentVelocity(t){t.lineWidth=.5,t.strokeStyle="#ff0000",t.beginPath(),t.moveTo(this.p.x,this.p.y),t.lineTo(this.p.x+20*this.velocity.x,this.p.y+20*this.velocity.y),t.closePath(),t.stroke()}RenderCircle(t){t.strokeStyle="#000000",t.lineWidth=.5,t.beginPath(),t.moveTo(this.targets[0].x,this.targets[0].y);for(let i=1;i<this.targets.length;++i)t.lineTo(this.targets[i].x,this.targets[i].y);t.closePath(),t.stroke(),t.beginPath(),t.arc(this.p.x,this.p.y,10,0,6.28),t.closePath(),t.stroke()}}C.list=[];class M extends l{constructor(t){super(t),this.mouse=[0,0],this.BoidContoller1=void 0,this.indeCanvas.title="BoidSystem01",this.init()}init(){let t=g.GetRandomPath(0,0,this.width,this.height);this.BoidContoller1=new m(t)}RenderIndependentCanvas(t){t.fillStyle="#eeeeee",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),this.BoidContoller1.Update(),this.BoidContoller1.Render(t),this.Circle(t)}MouseMove(t,i){this.mouse=[t,i]}MouseDown(){this.BoidContoller1.AddAgent(this.mouse[0],this.mouse[1])}Circle(t){for(let i=0;i<6.28;i+=.5)for(let s=0;s<3.14;s+=.5){let e=50*Math.cos(i)*Math.sin(s),h=50*Math.sin(i)*Math.sin(s);t.beginPath(),t.arc(e,h,2,0,6.28),t.closePath(),t.fill()}}}class w{constructor(){this.boids=[],this.boids=[]}AddAgent(t,i,s,h){let n=new P(new e.h9(t,i),new e.h9(0,0),new e.h9(s,h));this.boids.push(n)}Update(){for(let t of this.boids)t.Update()}GetPoint(){let t=[];for(let i of this.boids)i.isRenderable&&t.push(i.p);return t}Render(t){this.boids.forEach((i=>{i.Render(t)}))}}class P{constructor(t,i,s){this.maxForce=2,this.maxVelocity=2,this.maxSpeed=.9,this.mass=100.2,this.isRenderable=!0,this.p=void 0,this.p0=void 0,this.p1=void 0,this.targets=void 0,this.target=void 0,this.targetID=0,this.col=!1,this.desiredVelocity=void 0,this.steering=void 0,this.velocity=new e.h9(0,0,0),this.wanderAngle=0,this.CIRCLE_DISTANCE=50,this.CIRCLE_RADIUS=50,this.ANGLE_CHANGE=15,this.t=0,this.MAX_QUEUE_AHEAD=15,this.MAX_QUEUE_RADIUS=10,this.trajectory=[],this.timerTrajectory=0,P.list.push(this),this.p=t,this.p0=i,this.p1=s,this.UpdateTarget()}Update(){this.UpdateVec1()}UpdateTarget(){let t=e.$H.GetRandomInt(this.p0.x,this.p1.x),i=e.$H.GetRandomInt(this.p0.y,this.p1.y);this.target=new e.h9(t,i)}UpdateVec1(){this.desiredVelocity=new e.h9(this.target.x-this.p.x,this.target.y-this.p.y,this.target.z-this.p.z),this.desiredVelocity.Unitize(),this.desiredVelocity.x*=this.maxVelocity,this.desiredVelocity.y*=this.maxVelocity,this.desiredVelocity.z*=this.maxVelocity;let t=this.desiredVelocity.x-this.velocity.x<this.maxForce?this.desiredVelocity.x-this.velocity.x:this.maxForce,i=this.desiredVelocity.y-this.velocity.y<this.maxForce?this.desiredVelocity.y-this.velocity.y:this.maxForce,s=this.desiredVelocity.z-this.velocity.z<this.maxForce?this.desiredVelocity.z-this.velocity.z:this.maxForce;this.steering=new e.h9(t/this.mass,i/this.mass,s/this.mass),this.velocity.x=this.velocity.x+this.steering.x<this.maxSpeed?this.velocity.x+this.steering.x:this.maxSpeed,this.velocity.y=this.velocity.y+this.steering.y<this.maxSpeed?this.velocity.y+this.steering.y:this.maxSpeed,this.velocity.z=this.velocity.z+this.steering.z<this.maxSpeed?this.velocity.z+this.steering.z:this.maxSpeed,this.Queue(),this.p.x+=this.velocity.x,this.p.y+=this.velocity.y,this.p.z+=this.velocity.z,this.t+=.01,this.t>3&&(this.t=0,this.UpdateTarget())}UpdateVec0(){this.steering=this.Wander(new e.h9(this.velocity.x,this.velocity.y,this.velocity.z)),this.steering.x=this.steering.x<this.maxForce?this.steering.x:this.maxForce,this.steering.y=this.steering.y<this.maxForce?this.steering.y:this.maxForce,this.steering.z=this.steering.z<this.maxForce?this.steering.z:this.maxForce,this.steering.x/=this.mass,this.steering.y/=this.mass,this.steering.z/=this.mass,this.velocity.x+this.steering.x<this.maxSpeed?this.velocity.x=this.velocity.x+this.steering.x:this.velocity.x=this.maxSpeed,this.velocity.y+this.steering.y<this.maxSpeed?this.velocity.y=this.velocity.y+this.steering.y:this.velocity.y=this.maxSpeed,this.velocity.z+this.steering.z<this.maxSpeed?this.velocity.z=this.velocity.z+this.steering.z:this.velocity.z=this.maxSpeed,this.Queue(),console.log(this.maxSpeed),this.p.x+=this.velocity.x,this.p.y+=this.velocity.y,this.p.z+=this.velocity.z}Wander(t){let i=new e.h9(t.x,t.y,t.z);i.Normalize(),i.Scale(this.CIRCLE_DISTANCE);let s=new e.h9(0,-1);return s.Scale(this.CIRCLE_RADIUS),s=this.SetAngle(s,this.wanderAngle),this.wanderAngle+=Math.random()*this.ANGLE_CHANGE-.5*this.ANGLE_CHANGE,i.Add(s)}SetAngle(t,i){let s=t.Length();return t.x=Math.cos(i)*s,t.y=Math.sin(i)*s,t}GetNeighborAhead(){var t=void 0,i=this.velocity.Clone();i.Normalize(),i.Scale(this.MAX_QUEUE_AHEAD);let s=this.p.Clone().Add(i);for(let h=0;h<P.list.length;h++){let i=P.list[h],n=e.h9.Distance(s,i.p);if(i!==this&&n<=this.MAX_QUEUE_RADIUS){t=i;break}}return t}Queue(){return void 0!==this.GetNeighborAhead()&&this.velocity.Scale(.3),new e.h9(0,0)}Render(t){this.RenderCircle(t)}RenderDesiredVelocity(t){}RenderCurrentVelocity(t){}RenderCircle(t){this.timerTrajectory+=1,this.timerTrajectory%5===0&&(this.trajectory.length>30&&this.trajectory.shift(),this.trajectory.push(new e.h9(this.p.x,this.p.y)),this.timerTrajectory=0);for(let i=0;i<this.trajectory.length;++i)t.fillStyle="rgba(100, 100, 100 ,0.1)",t.beginPath(),t.arc(this.trajectory[i].x,this.trajectory[i].y,.2*i,0,6.28),t.closePath(),t.fill();t.strokeStyle="#000000",t.lineWidth=.5,t.fillStyle="#000000",t.beginPath(),t.arc(this.p.x,this.p.y,2.5,0,6.28),t.closePath(),t.fill(),t.beginPath(),t.arc(this.p.x,this.p.y,10,0,6.28),t.closePath(),t.stroke()}}P.list=[];class S extends l{constructor(t){super(t),this.mouse=[0,0],this.BoidContoller=void 0,this.dragTime=0,this.indeCanvas.title="BoidSystem01",this.init()}init(){this.BoidContoller=new w}RenderIndependentCanvas(t){t.fillStyle="#eeeeee",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),this.BoidContoller.Update(),this.BoidContoller.Render(t)}MouseMove(t,i){this.mouse=[t,i]}MouseDown(){this.BoidContoller.AddAgent(this.mouse[0],this.mouse[1],this.width,this.height)}MouseDrag(t,i){this.dragTime>5&&(this.BoidContoller.AddAgent(t,i,this.width,this.height),this.dragTime=0),this.dragTime++}}class b{constructor(){this.boids=[],this.boids=[]}AddAgent(t,i,s,h){let n=new D(new e.h9(t,i),new e.h9(0,0),new e.h9(s,h));this.boids.push(n)}Update(){for(let t of this.boids)t.Update()}UpdateTarget(t,i){for(let s of this.boids)s.target.x=t,s.target.y=i}GetPoint(){let t=[];for(let i of this.boids)i.isRenderable&&t.push(i.p);return t}Render(t){this.boids.forEach((i=>{i.Render(t)}))}}class D{constructor(t,i,s){this.maxForce=2,this.maxVelocity=2,this.maxSpeed=.9,this.mass=100.2,this.isRenderable=!0,this.p=void 0,this.p0=void 0,this.p1=void 0,this.targets=void 0,this.target=void 0,this.targetID=0,this.col=!1,this.desiredVelocity=void 0,this.steering=void 0,this.velocity=new e.h9(0,0,0),this.wanderAngle=0,this.CIRCLE_DISTANCE=50,this.CIRCLE_RADIUS=50,this.ANGLE_CHANGE=15,this.t=0,this.MAX_QUEUE_AHEAD=15,this.MAX_QUEUE_RADIUS=15,this.SEPARATION_RADIUS=10,this.MAX_SEPARATION=.5,D.list.push(this),this.p=t,this.p0=i,this.p1=s,this.UpdateTarget()}Update(){this.UpdateVec1()}UpdateTarget(){let t=e.$H.GetRandomInt(this.p0.x,this.p1.x),i=e.$H.GetRandomInt(this.p0.y,this.p1.y);this.target=new e.h9(t,i)}UpdateVec1(){this.desiredVelocity=new e.h9(this.target.x-this.p.x,this.target.y-this.p.y,this.target.z-this.p.z),this.desiredVelocity.Unitize(),this.desiredVelocity.x*=this.maxVelocity,this.desiredVelocity.y*=this.maxVelocity,this.desiredVelocity.z*=this.maxVelocity;let t=this.desiredVelocity.x-this.velocity.x<this.maxForce?this.desiredVelocity.x-this.velocity.x:this.maxForce,i=this.desiredVelocity.y-this.velocity.y<this.maxForce?this.desiredVelocity.y-this.velocity.y:this.maxForce,s=this.desiredVelocity.z-this.velocity.z<this.maxForce?this.desiredVelocity.z-this.velocity.z:this.maxForce;this.steering=new e.h9(t/this.mass,i/this.mass,s/this.mass),this.velocity.x=this.velocity.x+this.steering.x<this.maxSpeed?this.velocity.x+this.steering.x:this.maxSpeed,this.velocity.y=this.velocity.y+this.steering.y<this.maxSpeed?this.velocity.y+this.steering.y:this.maxSpeed,this.velocity.z=this.velocity.z+this.steering.z<this.maxSpeed?this.velocity.z+this.steering.z:this.maxSpeed,this.Queue(),this.p.x+=this.velocity.x,this.p.y+=this.velocity.y,this.p.z+=this.velocity.z,this.t+=.01,this.t>3&&(this.t=0)}Queue(){var t=this.GetNeighborAhead();return void 0!==t&&this.BrakingForceOverlap(t),new e.h9(0,0)}BrakingForceOverlap(t){let i=new e.h9(0,0);i.x=.8*-this.steering.x,i.y=.8*-this.steering.y,this.velocity.Scale(-1),i=i.Add(this.velocity),e.h9.Distance(this.p,t.p)<=this.MAX_QUEUE_RADIUS?this.velocity.Scale(.3):this.velocity=i}HardStop(){this.velocity.Scale(.3)}BrakingForce(){let t=new e.h9(0,0);t.x=.8*-this.steering.x,t.y=.8*-this.steering.y,this.velocity.Scale(-1),t=t.Add(this.velocity),this.velocity=t}GetNeighborAhead(){var t=void 0,i=this.velocity.Clone();i.Normalize(),i.Scale(this.MAX_QUEUE_AHEAD);let s=this.p.Clone().Add(i);for(let h=0;h<D.list.length;h++){let i=D.list[h],n=e.h9.Distance(s,i.p);if(i!==this&&n<=this.MAX_QUEUE_RADIUS){t=i;break}}return t}Separation(){let t=new e.h9(0,0),i=0;for(let s=0;s<D.list.length;s++){let h=D.list[s];h!==this&&e.h9.Distance(h.p,this.p)<=this.SEPARATION_RADIUS&&(t.x+=h.p.x-this.p.x,t.y+=h.p.y-this.p.y,t.z+=h.p.z-this.p.z,i++)}return 0!==i&&(t.x/=i,t.y/=i,t.z/=i,t.Scale(-1)),t.Normalize(),t.Scale(this.MAX_SEPARATION),t}Render(t){this.RenderCircle(t)}RenderDesiredVelocity(t){}RenderCurrentVelocity(t){}RenderCircle(t){t.strokeStyle="#000000",t.lineWidth=.5,t.beginPath(),t.arc(this.p.x,this.p.y,10,0,6.28),t.closePath(),t.stroke()}}D.list=[];class R extends l{constructor(t){super(t),this.mouse=[0,0],this.BoidContoller=void 0,this.indeCanvas.title="BoidSystem01",this.init()}init(){this.BoidContoller=new b}RenderIndependentCanvas(t){t.fillStyle="#eeeeee",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill(),this.BoidContoller.Update(),this.BoidContoller.Render(t)}MouseMove(t,i){this.mouse=[t,i],this.BoidContoller.UpdateTarget(t,i)}MouseDown(){this.BoidContoller.AddAgent(this.mouse[0],this.mouse[1],this.width,this.height)}}class V extends l{constructor(t){super(t),this.mouse=[0,0],this.lines=[],this.indeCanvas.title="BoidSystem04",this.init()}init(){this.lines.push(new I(10,10,50,50))}RenderIndependentCanvas(t){t.fillStyle="#eeeeee",t.beginPath(),t.rect(0,0,t.canvas.width,t.canvas.height),t.closePath(),t.fill();for(let i of this.lines)i.Render(t)}MouseMove(t,i){this.mouse=[t,i]}MouseDown(){this.lines.length>5&&this.lines.shift();const t=this.lines[this.lines.length-1].p1;this.lines.push(new I(t[0],t[1],this.mouse[0],this.mouse[1]))}}class I{constructor(t,i,s,e){this.p0=void 0,this.p1=void 0,this.p0=[t,i],this.p1=[s,e]}Render(t){t.strokeStyle="red",t.beginPath(),t.moveTo(this.p0[0],this.p0[1]),t.lineTo(this.p1[0],this.p1[1]),t.closePath(),t.stroke()}}class A{constructor(t,i,s){let h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.velocity=new e.h9(0,0,0),this.force=new e.h9(0,.01,0),this.gravity=new e.h9(0,.95,0),this.v=new e.h9(0,0,0),this.r=10,this.m=.1,this.v=new e.h9(t,i,0),this.m=h}Update(t,i,s,e){this.velocity.Add(this.gravity),this.velocity.Mult(e),this.force.Mult(s/this.m),this.velocity.Add(this.force),this.v.x+=this.velocity.x*s,this.v.y+=this.velocity.y*s,this.v.z+=this.velocity.z*s,this.UpdateEdge(t,i)}UpdateEdge(t,i){(this.v.x>t||this.v.x<0)&&(this.velocity.x=-1*this.velocity.x),this.v.y>i&&(this.velocity.y=-.95*this.velocity.y,this.v.y=i)}Render(t){t.beginPath(),t.arc(this.v.x,this.v.y,this.r,0,2*Math.PI),t.closePath(),t.fill()}}var k=s(83047);class z{constructor(t,i,s,e,h){let n=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.body=void 0,this.scene=void 0,this.angle=void 0,this.position=void 0,this.width=void 0,this.height=void 0,this.scene=t,this.width=e,this.height=h;this.body=k.Bodies.rectangle(i,s,e,h,{isStatic:n,restitution:.5,friction:.5}),k.World.add(this.scene.world,this.body)}Render(t){this.angle=this.body.angle,this.position=this.body.position,this.DrawRectByCen(t,this.position.x,this.position.y,this.width,this.height,this.angle)}DrawRectByCen(t,i,s,e,h,n){const o=.5*e,l=.5*h;t.save(),t.translate(this.position.x,this.position.y),t.rotate(n),t.beginPath(),t.rect(-o,-l,this.width,this.height),t.fill(),t.restore()}}class B{constructor(t){this.Dynamic01=void 0,this.dNode=void 0,this.t=0,this.engine=void 0,this.world=void 0,this.MBoxes=[],this.ground=void 0,this.Dynamic01=t,this.dNode=new A(100,100,0),this.InitMatter()}InitMatter(){this.engine=k.Engine.create(),this.world=this.engine.world,k.Engine.run(this.engine),this.MBoxes.push(new z(this,0,400,500,50,!0)),this.MBoxes.push(new z(this,100,100,50,50)),setInterval((()=>{this.MouseDown(100+10*(Math.random()-.5),0)}),1e3)}Update(){this.dNode.Update(this.Dynamic01.width,this.Dynamic01.height,this.t,.9),this.t+=.1}MouseDown(t,i){this.MBoxes.push(new z(this,t,i,100*Math.random(),100*Math.random()))}MouseDrag(t,i){this.MBoxes.push(new z(this,t,i,100*Math.random(),100*Math.random()))}Render(t){this.dNode.Render(t);for(let i=0;i<this.MBoxes.length;++i)this.MBoxes[i].Render(t)}}class E extends l{constructor(t){super(t),this.mouse=[0,0],this.DynamicSystem=void 0,this.indeCanvas.title="Dynamic01",console.log("init Dynamic01 ,"),this.init()}init(){this.DynamicSystem=new B(this)}RenderIndependentCanvas(t){this.DynamicSystem.Update(),this.DynamicSystem.Render(t)}MouseMove(t,i){this.mouse=[t,i]}MouseDrag(t,i){this.DynamicSystem.MouseDrag(t,i)}MouseDown(t,i){this.DynamicSystem.MouseDown(t,i)}}class L extends l{constructor(t){super(t),this.mouse=[0,0],this.DynamicSystem=void 0,this.indeCanvas.title="Dynamic02",console.log("init Dynamic02"),this.init()}init(){this.DynamicSystem=new B(this)}RenderIndependentCanvas(t){this.DynamicSystem.Update(),this.DynamicSystem.Render(t)}MouseMove(t,i){this.mouse=[t,i]}MouseDown(){}}class N extends l{constructor(t){super(t),this.mouse=[0,0],this.DynamicSystem=void 0,this.indeCanvas.title="Dynamic03",console.log("init Dynamic03"),this.init()}init(){this.DynamicSystem=new B(this)}RenderIndependentCanvas(t){this.DynamicSystem.Update(),this.DynamicSystem.Render(t)}MouseMove(t,i){this.mouse=[t,i]}MouseDown(){}}class T{constructor(t){this.scene=void 0,this.scene=t}Render(t){}}class U extends T{constructor(t,i,s,e,h){let n=arguments.length>5&&void 0!==arguments[5]&&arguments[5];super(t),this.body=void 0,this.scene=void 0,this.angle=void 0,this.position=void 0,this.width=void 0,this.height=void 0,this.width=e,this.height=h;this.body=k.Bodies.rectangle(i,s,e,h,{isStatic:n,restitution:.5,friction:.5}),k.World.add(this.scene.world,this.body)}Render(t){this.angle=this.body.angle,this.position=this.body.position,this.DrawRectByCen(t,this.position.x,this.position.y,this.width,this.height,this.angle)}DrawRectByCen(t,i,s,e,h,n){const o=.5*e,l=.5*h;t.save(),t.translate(this.position.x,this.position.y),t.rotate(n),t.beginPath(),t.rect(-o,-l,this.width,this.height),t.fill(),t.restore()}}class F extends T{constructor(t,i,s,e){let h=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(t),this.body=void 0,this.scene=void 0,this.angle=void 0,this.position=void 0,this.radius=void 0,this.radius=e;this.body=k.Bodies.circle(i,s,this.radius,{isStatic:h,restitution:.5,friction:.5}),k.World.add(this.scene.world,this.body)}Render(t){this.angle=this.body.angle,this.position=this.body.position,this.DrawCircle(t,this.position.x,this.position.y,this.radius,this.angle)}DrawCircle(t,i,s,e,h){t.save(),t.translate(i,s),t.rotate(h),t.beginPath(),t.arc(0,0,this.radius,0,2*Math.PI),t.fill(),t.restore()}}class H{constructor(t){this.MatterSandbox=void 0,this.t=0,this.engine=void 0,this.world=void 0,this.MBoxes=[],this.ground=void 0,this.MatterSandbox=t,this.InitMatter()}InitMatter(){this.engine=k.Engine.create(),this.world=this.engine.world,k.Engine.run(this.engine),this.MBoxes.push(new U(this,0,400,500,50,!0)),this.MBoxes.push(new U(this,100,100,50,50)),setInterval((()=>{this.MouseDown(100+10*(Math.random()-.5),0)}),1e3)}Update(){}MouseDown(t,i){this.MBoxes.push(new F(this,t,i,100*Math.random()))}MouseDrag(t,i){this.MBoxes.push(new U(this,t,i,100*Math.random(),100*Math.random()))}Render(t){for(let i=0;i<this.MBoxes.length;++i)this.MBoxes[i].Render(t)}}class W{constructor(t){this.MatterSandbox=void 0,this.MatterSandbox=t}}class O extends l{constructor(t){super(t),this.mouse=[0,0],this.sceneMatter=void 0,this.core=void 0,this.indeCanvas.title="MatterSandbox",console.log("init MatterSandbox"),this.core=new W(this),this.init()}init(){this.sceneMatter=new H(this)}RenderIndependentCanvas(t){this.sceneMatter.Update(),this.sceneMatter.Render(t)}MouseMove(t,i){this.mouse=[t,i]}MouseDrag(t,i){this.sceneMatter.MouseDrag(t,i)}MouseDown(t,i){this.sceneMatter.MouseDown(t,i)}}class G extends l{constructor(t){super(t),this.mouse=[0,0],this.p=void 0,this.indeCanvas.title="OOP",this.init()}init(){this.p=new _(100,100,10),console.log("oop init")}RenderIndependentCanvas(t){console.log("oop loop"),this.p.Render(t),console.log(this.p.age)}MouseMove(t,i){this.mouse=[t,i]}MouseDown(){}}class _{constructor(t,i,s){this.age=void 0,this.height=void 0,this.weight=void 0,this.age=t,this.height=i,this.weight=s}Render(t){t.beginPath(),t.arc(this.age,this.height,this.weight,0,6.28),t.closePath(),t.fill(),this.age+=.01,this.age>102&&this.Compute()}Compute(){this.height+=.1}}const X=(t,i,s,e,h,n,o,l)=>{let c=h*e*(n-2)*(n-2);Y(t,i,s,c,1+6*c,n,o,l)},Y=(t,i,s,e,h,n,o,l)=>{let c=1/h;for(let a=0;a<o;a++){for(let t=1;t<n-1;t++)for(let h=1;h<n-1;h++)i[j(h,t,n)]=(s[j(h,t,n)]+e*(i[j(h+1,t,n)]+i[j(h-1,t,n)]+i[j(h,t+1,n)]+i[j(h,t-1,n)]))*c;K(t,i,n,l)}},j=(t,i,s)=>t+i*s,q=(t,i,s,e,h,n,o)=>{for(let l=1;l<h-1;l++)for(let n=1;n<h-1;n++)e[j(n,l,h)]=-.5*(t[j(n+1,l,h)]-t[j(n-1,l,h)]+i[j(n,l+1,h)]-i[j(n,l-1,h)])/h,s[j(n,l,h)]=0;K(0,e,h,o),K(0,s,h,o),Y(0,s,e,1,6,h,n,o);for(let l=1;l<h-1;l++)for(let e=1;e<h-1;e++)t[j(e,l,h)]-=.5*(s[j(e+1,l,h)]-s[j(e-1,l,h)])*h,i[j(e,l,h)]-=.5*(s[j(e,l+1,h)]-s[j(e,l-1,h)])*h;K(1,t,h,o),K(2,i,h,o)},Q=(t,i,s,e,h,n,o,l)=>{let c,a,r,d,p,u,x,y,f,v,g,m,C,M,w,P,S=n*(o-2),b=n*(o-2),D=o-2;for(P=1,M=1;P<o-1;P++,M++)for(w=1,C=1;w<o-1;w++,C++){f=S*e[j(w,P,o)],v=b*h[j(w,P,o)],g=C-f,m=M-v,g<.5&&(g=.5),g>D+.5&&(g=D+.5),c=Math.floor(g),a=c+1,m<.5&&(m=.5),m>D+.5&&(m=D+.5),r=Math.floor(m),d=r+1,u=g-c,p=1-u,y=m-r,x=1-y;let t=c,n=a,l=r,R=d;i[j(w,P,o)]=p*(x*s[j(t,l,o)]+y*s[j(t,R,o)])+u*(x*s[j(n,l,o)]+y*s[j(n,R,o)])}K(t,i,o,l)},K=(t,i,s,e)=>{for(let h=1;h<s-1;h++)i[j(h,0,s)]=2===t?-i[j(h,1,s)]:i[j(h,1,s)],i[j(h,s-1,s)]=2===t?-i[j(h,s-2,s)]:i[j(h,s-2,s)];for(let h=1;h<s-1;h++)i[j(0,h,s)]=1===t?-i[j(1,h,s)]:i[j(1,h,s)],i[j(s-1,h,s)]=1===t?-i[j(s-2,h,s)]:i[j(s-2,h,s)];i[j(0,0,s)]=.5*(i[j(1,0,s)]+i[j(0,1,s)]),i[j(0,s-1,s)]=.5*(i[j(1,s-1,s)]+i[j(0,s-2,s)]),i[j(s-1,0,s)]=.5*(i[j(s-2,0,s)]+i[j(s-1,1,s)]),i[j(s-1,s-1,s)]=.5*(i[j(s-2,s-1,s)]+i[j(s-1,s-2,s)]),i[j(Math.floor(.5*s),0,s)]=0,i[j(Math.floor(.5*s),1,s)]=0,i[j(Math.floor(.5*s),2,s)]=0,i[j(Math.floor(.5*s),3,s)]=0,i[j(Math.floor(.5*s),4,s)]=0,i[j(Math.floor(.5*s),5,s)]=0,i[j(Math.floor(.5*s),6,s)]=0,i[j(Math.floor(.5*s),7,s)]=0,i[j(Math.floor(.5*s),s-1,s)]=0,i[j(Math.floor(.5*s),s-2,s)]=0,i[j(Math.floor(.5*s),s-3,s)]=0,i[j(Math.floor(.5*s),s-4,s)]=0,i[j(Math.floor(.5*s),s-5,s)]=0,i[j(Math.floor(.5*s),s-6,s)]=0,i[j(Math.floor(.5*s),s-7,s)]=0,i[j(Math.floor(.5*s),s-8,s)]=0;for(let h=0;h<e.length;++h)i[j(e[h][0],e[h][1],s)]=0};var J=s(45637);class ${constructor(t,i,s){this.N=100,this.iter=16,this.SCALE=4,this.t=0,this.visScale=.01,this.dt=void 0,this.diff=void 0,this.visc=void 0,this.s=void 0,this.density=void 0,this.Vx=void 0,this.Vy=void 0,this.Vx0=void 0,this.Vy0=void 0,this.cellFixed=[],this.dt=t,this.diff=i,this.visc=s,this.s=new Float32Array(this.N*this.N).fill(0),this.density=new Float32Array(this.N*this.N).fill(.01),this.Vx=new Float32Array(this.N*this.N).fill(0),this.Vx0=new Float32Array(this.N*this.N).fill(0),this.Vy=new Float32Array(this.N*this.N).fill(0),this.Vy0=new Float32Array(this.N*this.N).fill(0)}step(){let t=this.visc,i=this.diff,s=this.dt,e=this.Vx,h=this.Vy,n=this.Vx0,o=this.Vy0,l=this.s,c=this.density;X(1,n,e,t,s,this.N,this.iter,this.cellFixed),X(2,o,h,t,s,this.N,this.iter,this.cellFixed),q(n,o,e,h,this.N,this.iter,this.cellFixed),Q(1,e,n,n,o,s,this.N,this.cellFixed),Q(2,h,o,n,o,s,this.N,this.cellFixed),q(e,h,n,o,this.N,this.iter,this.cellFixed),X(0,l,c,i,s,this.N,this.iter,this.cellFixed),Q(0,c,l,e,h,s,this.N,this.cellFixed)}addDensity(t,i,s){let e=j(t,i,this.N);this.density[e]+=s}addVelocity(t,i,s,e){let h=j(t,i,this.N);this.Vx[h]+=s,this.Vy[h]+=e}renderD(t){for(let i=0;i<this.N;i++)for(let s=0;s<this.N;s++){let e=i*this.SCALE,h=s*this.SCALE,n=this.density[j(i,s,this.N)];if(0===n)t.fillStyle="rgb(255, 255, 255)";else{const i=(0,J.GM)(n*this.visScale);t.fillStyle="rgb(".concat(i[0],", ").concat(i[1],",").concat(i[2],")")}t.beginPath(),t.rect(e,h,this.SCALE,this.SCALE),t.fill(),t.lineWidth=.2,t.strokeStyle="#ff0000"}}renderV(t){for(let i=0;i<this.N;i++)for(let s=0;s<this.N;s++){let e=i*this.SCALE,h=s*this.SCALE,n=this.Vx[j(i,s,this.N)],o=this.Vy[j(i,s,this.N)];Math.abs(n)<.1&&Math.abs(o)<=.1||(t.lineWidth=2,t.beginPath(),t.moveTo(e,h),t.lineTo(e+n*this.SCALE,h+o*this.SCALE),t.stroke())}}}class Z extends l{constructor(t){super(t),this.divText=void 0,this.mouse=void 0,this.pts=void 0,this.fluid=void 0,this.t=0,this.vecs=[],this.emmiters=[],this.xx=1,this.yy=1,this.img=void 0,this.init(),this.initUI();const i=new Image;i.src="https://raw.githubusercontent.com/NamjuLee/data/master/img/Boston_02.jpg",i.setAttribute("crossOrigin",""),i.onload=()=>{this.img=i;const t=document.createElement("canvas").getContext("2d");if(t){t.drawImage(i,0,0,this.fluid.N,this.fluid.N);const s=t.getImageData(0,0,this.fluid.N,this.fluid.N);if(s)for(let t=0;t<this.fluid.N;++t)for(let i=0;i<this.fluid.N;++i){s.data[4*(i+this.fluid.N*t)]<200&&this.fluid.cellFixed.push([i,t])}}}}initUI(){let t=document.createElement("div");t.style.position="absolute",t.style.left="450px",t.style.height="50px",this.indeCanvas.bodyDiv.divHost.appendChild(t);let i=document.createElement("button");i.textContent="Reset",i.style.width="60px",i.style.height="20px",i.onclick=()=>{this.init()},t.appendChild(i);let s=document.createElement("div");s.innerHTML="time",s.style.height="50px",s.style.width="100px",t.appendChild(s);let e=document.createElement("input");e.type="range",e.min="0.0001",e.max="0.7",e.step="0.0001",e.oninput=()=>{const t=+e.value;this.fluid.dt=t,console.log("this.fluid.visScale",this.fluid.visScale)},s.appendChild(e);let h=document.createElement("div");h.innerHTML="Vis Scale",h.style.height="50px",h.style.width="100px",t.appendChild(h);let n=document.createElement("input");n.type="range",n.min="0.000001",n.max="0.8",n.step="0.00001",n.oninput=()=>{const t=+n.value;this.fluid.visScale=t,console.log("this.fluid.visScale",this.fluid.visScale)},h.appendChild(n);const o=document.createElement("div");o.innerHTML="Viscosity",o.style.height="50px",o.style.width="100px",t.appendChild(o);const l=document.createElement("input");l.type="range",l.min="0.000000",l.max="0.0001",l.step="0.0000001",l.oninput=()=>{const t=+l.value;this.fluid.visc=t,console.log("this.fluid.visScale",this.fluid.visScale)},o.appendChild(l);const c=document.createElement("div");c.innerHTML="rotation",c.style.height="50px",c.style.width="100px",t.appendChild(c);const a=document.createElement("input");a.type="range",a.min="0.000000",a.max="360",a.step="0.0000001",a.oninput=()=>{const t=+a.value;this.rotation(t),console.log("val",t)},c.appendChild(a);const r=document.createElement("div");r.innerHTML="rotation",r.style.height="50px",r.style.width="100px",this.divText=r,t.appendChild(r);const d=document.createElement("div");d.innerHTML="Ref:<br>Fluid Simulation <br>By Daniel Shiffman",d.style.height="50px",d.style.width="300px",d.style.fontSize="14px",t.appendChild(d),this.emmiters.push([Math.floor(.5*this.fluid.N),Math.floor(.5*this.fluid.N)])}init(){this.fluid=new $(.02,0,1e-7),this.emmiters=[],this.emmiters.push([Math.floor(.5*this.fluid.N),Math.floor(.5*this.fluid.N)])}RenderIndependentCanvas(t){for(let i=0;i<this.emmiters.length;++i){let t=this.emmiters[i][0],s=this.emmiters[i][1];for(let i=-1;i<=1;i++)for(let e=-1;e<=1;e++)this.fluid.addDensity(t+i,s+e,5*Math.random())}for(let i=0;i<this.emmiters.length;++i){let t=this.emmiters[i][0],s=this.emmiters[i][1];for(let i=0;i<2;i++)this.fluid.addVelocity(t,s,this.xx,this.yy)}this.fluid.step(),this.fluid.renderD(t)}MouseLeftClick(t,i){const s=Math.floor(t/this.fluid.SCALE),e=Math.floor(i/this.fluid.SCALE);this.emmiters.push([s,e])}MouseDrag(t,i){const s=Math.floor(t/this.fluid.SCALE),e=Math.floor(i/this.fluid.SCALE);this.fluid.cellFixed.push([s,e])}rotation(t){const i=t*Math.PI/180;this.xx=Math.cos(i),this.yy=Math.sin(i)}MouseMove(t,i){const s=Math.floor(t/this.fluid.SCALE),e=Math.floor(i/this.fluid.SCALE),h=this.fluid.density[s+e*this.fluid.N];h&&(this.divText.innerHTML="".concat(h))}}class tt{constructor(t,i,s){this.x=void 0,this.y=void 0,this.z=void 0,this.x=t,this.y=i,this.z=s}dot2(t,i){return this.x*t+this.y*i}dot3(t,i,s){return this.x*t+this.y*i+this.z*s}}const it=[new tt(1,1,0),new tt(-1,1,0),new tt(1,-1,0),new tt(-1,-1,0),new tt(1,0,1),new tt(-1,0,1),new tt(1,0,-1),new tt(-1,0,-1),new tt(0,1,1),new tt(0,-1,1),new tt(0,1,-1),new tt(0,-1,-1)],st=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],et=new Array(512),ht=new Array(512),nt=1/6;Math.sqrt(3),Math.sqrt(3);(t=>{t>0&&t<1&&(t*=65536),(t=Math.floor(t))<256&&(t|=t<<8);for(let i=0;i<256;i++){let s;s=1&i?st[i]^255&t:st[i]^t>>8&255,et[i]=et[i+256]=s,ht[i]=ht[i+256]=it[s%12]}})(0);const ot=(t,i,s)=>{let e,h,n,o,l,c,a,r,d,p,u=.3333333333333333*(t+i+s),x=Math.floor(t+u),y=Math.floor(i+u),f=Math.floor(s+u),v=(x+y+f)*nt,g=t-x+v,m=i-y+v,C=s-f+v;g>=m?m>=C?(l=1,c=0,a=0,r=1,d=1,p=0):g>=C?(l=1,c=0,a=0,r=1,d=0,p=1):(l=0,c=0,a=1,r=1,d=0,p=1):m<C?(l=0,c=0,a=1,r=0,d=1,p=1):g<C?(l=0,c=1,a=0,r=0,d=1,p=1):(l=0,c=1,a=0,r=1,d=1,p=0);let M=g-l+nt,w=m-c+nt,P=C-a+nt,S=g-r+2*nt,b=m-d+2*nt,D=C-p+2*nt,R=g-1+.5,V=m-1+.5,I=C-1+.5;x&=255,y&=255,f&=255;let A=ht[x+et[y+et[f]]],k=ht[x+l+et[y+c+et[f+a]]],z=ht[x+r+et[y+d+et[f+p]]],B=ht[x+1+et[y+1+et[f+1]]],E=.6-g*g-m*m-C*C;E<0?e=0:(E*=E,e=E*E*A.dot3(g,m,C));let L=.6-M*M-w*w-P*P;L<0?h=0:(L*=L,h=L*L*k.dot3(M,w,P));let N=.6-S*S-b*b-D*D;N<0?n=0:(N*=N,n=N*N*z.dot3(S,b,D));let T=.6-R*R-V*V-I*I;return T<0?o=0:(T*=T,o=T*T*B.dot3(R,V,I)),32*(e+h+n+o)};class lt extends l{constructor(t){super(t),this.divText=void 0,this.mouse=void 0,this.pts=void 0,this.t=0,this.interval=1,this.res=5,this.scale=100,this.vecs=[],this.emmiters=[],this.xx=1,this.yy=1,this.img=void 0,this.init(),this.initUI(),this.indeCanvas.canvas.width=300,this.indeCanvas.canvas.height=300}initUI(){let t=document.createElement("div");t.style.position="absolute",t.style.left="450px",t.style.height="50px",this.indeCanvas.bodyDiv.divHost.appendChild(t);let i=document.createElement("button");i.textContent="Reset",i.style.width="60px",i.style.height="20px",i.onclick=()=>{this.init()},t.appendChild(i);let s=document.createElement("div");s.innerHTML="time",s.style.height="50px",s.style.width="100px",t.appendChild(s);let e=document.createElement("input");e.type="range",e.min="0.001",e.max="10.0",e.step="0.0001",e.oninput=()=>{const t=+e.value;this.interval=t},s.appendChild(e);let h=document.createElement("div");h.innerHTML="Res",h.style.height="50px",h.style.width="100px",t.appendChild(h);let n=document.createElement("input");n.type="range",n.min="1",n.max="10",n.step="1",n.oninput=()=>{this.res=+n.value},h.appendChild(n);const o=document.createElement("div");o.innerHTML="Scale",o.style.height="50px",o.style.width="100px",t.appendChild(o);const l=document.createElement("input");l.type="range",l.min="1",l.max="200",l.value="100",l.step="1",l.oninput=()=>{this.scale=+l.value},o.appendChild(l)}init(){}RenderIndependentCanvas(t){for(let i=0;i<t.canvas.height;i+=this.res)for(let s=0;s<t.canvas.width;s+=this.res){const e="hsl("+(180-180*(Math.round(10*Math.abs(ot(s/this.scale,i/this.scale,.01*this.t)))/10))+",50%,50%)";t.beginPath(),t.rect(s,i,this.res,this.res),t.closePath(),t.fillStyle=e,t.fill()}this.t+=this.interval}MouseLeftClick(t,i){}MouseDrag(t,i){}rotation(t){}MouseMove(t,i){}}var ct,at=s(51899);!function(t){t.Cp="cp",t.L1="l1",t.L2="l2",t.R1="r1",t.R2="r2"}(ct||(ct={}));class rt{constructor(t){this.canvasBase=void 0,this.ctxBase=void 0,this.canvas=void 0,this.ctx=void 0,this.img=void 0,this.cp=void 0,this.cpL1=void 0,this.cpL2=void 0,this.cpR1=void 0,this.cpR2=void 0,this.capture=void 0,this.r=void 0,this.offset=15,this.m=new at.h(0,0,0),t.style.background="#eeeeee",this.canvasBase=document.createElement("canvas"),this.canvasBase.style.position="absolute",t.append(this.canvasBase),this.ctxBase=this.canvasBase.getContext("2d"),this.canvasBase.width=300,this.canvasBase.height=300,this.r=150,this.ctxBase.translate(this.r,this.r),this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.width=this.canvasBase.width,this.canvas.height=this.canvasBase.height,this.ctx=this.canvas.getContext("2d"),this.ctx.translate(this.r,this.r),t.append(this.canvas),this.initEvent(),this.init()}initEvent(){this.canvas.addEventListener("mousedown",(t=>{const i=this.MousePostProcess(t);this.mouseDown(i[0],i[1])})),this.canvas.addEventListener("mousemove",(t=>{const i=this.MousePostProcess(t);this.mouseMove(i[0],i[1])})),this.canvas.addEventListener("mouseup",(t=>{const i=this.MousePostProcess(t);this.mouseUp(i[0],i[1])}))}MousePostProcess(t){const i=t.offsetX-this.r,s=t.offsetY-this.r;return this.m.x=i,this.m.y=s,[i,s]}init(){this.cp=new pt(this,0,0,ct.Cp),this.cpL1=new ut(this,10,10,ct.L1),this.cpL1.updatePosByRadian(3),this.cpR1=new xt(this,10,10,ct.R1),this.cpR1.updatePosByRadian(-3);let t=this.r,i=this.ctxBase.createImageData(2*t,2*t),s=i.data;for(let e=-t;e<t;e++)for(let i=-t;i<t;i++){let[h,n]=yt(e,i);if(h>t)continue;let o=(e+t+(i+t)*(2*t))*4,l=ft(n),c=1,a=1,[r,d,p]=vt(l,c,a),u=255;s[o]=r,s[o+1]=d,s[o+2]=p,s[o+3]=u}this.ctxBase.putImageData(i,0,0),this.ctxBase.beginPath(),this.ctxBase.arc(0,0,1,0,2*Math.PI),this.ctxBase.closePath(),this.ctxBase.fill(),this.render(this.ctx)}render(t){t.clearRect(-this.r,-this.r,2*this.r,2*this.r),this.cp.render(t),this.cpL1.render(t),this.cpR1.render(t)}mouseDrag(t,i){}mouseMove(t,i){if(this.capture)if(this.capture.id===ct.Cp){const s=new at.h(t,i,0);let e=s.Length();e=e>this.r?this.r:e;const h=(0,at.d)(s,e);this.capture.updatePos(h)}else if(this.capture.id===ct.L1){const s=new at.h(t,i,0);let e=s.Length();e=e>this.r?this.r:e;const h=(0,at.d)(s,e);this.capture.updatePos(h)}else if(this.capture.id===ct.R1){const s=new at.h(t,i,0);let e=s.Length();e=e>this.r?this.r:e;const h=(0,at.d)(s,e);this.capture.updatePos(h)}this.render(this.ctx)}mouseDown(t,i){this.capture=this.GetPoint(t,i)}mouseUp(t,i){this.capture=void 0}GetPoint(t,i){return this.cp.getDistance(t,i)<this.cp.r?this.cp:this.cpL1.getDistance(t,i)<this.cp.r?this.cpL1:this.cpR1.getDistance(t,i)<this.cp.r?this.cpR1:void 0}}class dt{constructor(t,i,s,e){this.colorPicker=void 0,this.vec=void 0,this.r=15,this.radian=0,this.radius=10,this.id=void 0,this.color="#ffffff",this.colorPicker=t,this.vec=new at.h(i,s,0),this.id=e}getRadian(){return this.radian=Math.atan2(this.vec.x,this.vec.y),this.radian-=.5*Math.PI,this.radian*=-1,this.radian}updatePosByRadian(t){this.vec.x=Math.cos(t),this.vec.y=Math.sin(t),this.vec.x*=this.radius,this.vec.y*=this.radius}updatePos(t){this.id===ct.Cp&&(this.vec.x=t.x,this.vec.y=t.y,this.radius=this.vec.Length(),this.getRadian(),this.colorPicker.cpL1.radius=this.radius,this.colorPicker.cpL1.updatePosByRadian(this.colorPicker.cpL1.radian+this.colorPicker.cpL1.radian-this.radian),this.colorPicker.cpR1.radius=this.radius)}updateposByCPOffset(t){}getDistance(t,i){return Math.sqrt((this.vec.x-t)*(this.vec.x-t)+(this.vec.y-i)*(this.vec.y-i))}render(t){const i=this.colorPicker.ctxBase.getImageData(this.vec.x+this.colorPicker.r,this.vec.y+this.colorPicker.r,2,2);this.color="rgb(".concat(i.data[0],", ").concat(i.data[1],", ").concat(i.data[2],")"),t.strokeStyle="#ffffff",t.lineWidth=3,t.beginPath(),t.moveTo(0,0),t.lineTo(this.vec.x,this.vec.y),t.closePath(),t.stroke(),t.beginPath(),t.arc(this.vec.x,this.vec.y,this.r,0,2*Math.PI),t.closePath(),t.fillStyle=this.color,t.fill(),t.stroke()}}class pt extends dt{constructor(t,i,s,e){super(t,i,s,e)}}class ut extends dt{constructor(t,i,s,e){super(t,i,s,e)}updatePos(t){this.vec.x=t.x,this.vec.y=t.y,this.radius=this.vec.Length(),this.getRadian(),console.log(-this.radius);let i=this.colorPicker.cp.radian;this.colorPicker.cpR1.updatePosByRadian(-this.radian+2*i)}}class xt extends dt{constructor(t,i,s,e){super(t,i,s,e)}updatePos(t){this.vec.x=t.x,this.vec.y=t.y,this.radius=this.vec.Length(),this.getRadian(),console.log(-this.radius);let i=this.colorPicker.cp.radian;this.colorPicker.cpL1.updatePosByRadian(-this.radian+2*i)}updateposByCPOffset(t){this.radian+=t,this.vec.x=Math.cos(this.radian),this.vec.y=Math.sin(this.radian),this.vec.x*=this.radius,this.vec.y*=this.radius}}const yt=(t,i)=>[Math.sqrt(t*t+i*i),Math.atan2(i,t)],ft=t=>(t+Math.PI)/(2*Math.PI)*360,vt=(t,i,s)=>{var e=s*i,h=t/60,n=e*(1-Math.abs(h%2-1)),o=s-e,l=[0,0,0];return"undefined"===typeof t?l=[0,0,0]:h<1?l=[e,n,0]:h<2?l=[n,e,0]:h<3?l=[0,e,n]:h<4?l=[0,n,e]:h<5?l=[n,0,e]:h<=6&&(l=[e,0,n]),[255*(l[0]+o),255*(l[1]+o),255*(l[2]+o)]};class gt extends l{constructor(t){super(t),this.classColorPicker=void 0,this.indeCanvas.canvas.width=300,this.indeCanvas.canvas.height=300;const i=new rt(this.indeCanvas.bodyDiv.divHost);console.log(i)}initUI(){}init(){}RenderIndependentCanvas(t){}MouseLeftClick(t,i){}MouseDrag(t,i){}rotation(t){}MouseMove(t,i){}Mouseup(t,i){}}class mt extends l{constructor(t){super(t),this.p=[0,0],this.map=void 0,this.init()}init(){let t=performance.now();this.map=new Mt([[1,0,1,1,1,1,1],[1,1,1,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,0,0,0,0,0,1],[1,1,1,1,1,1,1]]);let i=performance.now();console.log("time: ",i-t)}RenderIndependentCanvas(t){this.map&&(this.map.Render(t,this.p),t.fillStyle="#ff0000",t.beginPath(),t.arc(this.p[0],this.p[1],5,0,6.28),t.closePath(),t.fill())}MouseMove(t,i){this.p=[t,i]}MouseDown(t,i){this.p=[t,i]}}class Ct{constructor(t,i,s,e){this.map=void 0,this.x=-1,this.y=-1,this.type=void 0,this.scale=50,this.fill=!1,this.visited=!1,this.dist=-1,this.start=!1,this.end=!1,this.connections=[],this.map=t,this.x=i,this.y=s,this.type=e,0===this.type?this.fill=!0:this.fill=!1}pushConnections(t){t.fill||this.connections.push(t)}Render(t,i){let s=(this.x+.5)*this.scale,e=(this.y+.5)*this.scale;const h=Math.sqrt((i[0]-s)*(i[0]-s)+(i[1]-e)*(i[1]-e));if(t.lineWidth=4,t.strokeStyle="#ffffff",t.beginPath(),t.rect(this.x*this.scale,this.y*this.scale,this.scale,this.scale),t.closePath(),this.fill?t.fillStyle="rgba(0,0,0, 0.85)":t.fillStyle="rgba(255,0,0, 0.5)",t.fill(),t.stroke(),h<.5*this.scale){t.strokeStyle="#ff0000",t.lineWidth=2;for(let i=0;i<this.connections.length;++i)t.beginPath(),t.moveTo((this.x+.5)*this.scale,(this.y+.5)*this.scale),t.lineTo((this.connections[i].x+.5)*this.scale,(this.connections[i].y+.5)*this.scale),t.stroke()}this.start?(t.fillStyle="#0000ff",t.beginPath(),t.arc((this.x+.5)*this.scale,(this.y+.5)*this.scale,5,0,6.28),t.closePath(),t.fill()):this.end&&(t.fillStyle="#00ff00",t.beginPath(),t.arc((this.x+.5)*this.scale,(this.y+.5)*this.scale,5,0,6.28),t.closePath(),t.fill())}}class Mt{constructor(t){this.pixels=[],this.fires=[],this.start=void 0,this.exit=void 0,this.path=[],this.t=0,this.count=1;for(let i=0;i<t.length;++i){const s=[];for(let e=0;e<t[i].length;++e)s.push(new Ct(this,e,i,t[i][e]));this.pixels.push(s)}this.InitConnections(),this.start=this.pixels[0][0],this.exit=this.pixels[t.length-1][t[0].length-1],this.start.start=!0,this.exit.end=!0,this.path=this.ComputePath(this.start,this.exit)}ComputePath(t,i){let s=[t];for(;s.length>0;){let t=s[0];s.shift(),t.visited=!0,console.log(t);for(let i=0;i<t.connections.length;++i)if(!t.connections[i].fill&&!t.connections[i].visited){const e=this.ComputeCost(t,t.connections[i]),h=t.dist+e;(-1===t.connections[i].dist||h<t.connections[i].dist)&&(t.connections[i].dist=h,s.push(t.connections[i]))}}console.log(this);let e=[];if(-1!==i.dist){e.push(i);let s=i;for(;;){let i=s;for(let t=0;t<s.connections.length;++t)s.connections[t].dist<i.dist&&(i=s.connections[t]);if(s=i,e.push(s),s===t)break}}return console.log(),console.log("there are ",e.length," to exit"),e}ComputeCost(t,i){return Math.sqrt((i.x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y))}InitConnections(){for(let t=0;t<this.pixels.length;++t)for(let i=0;i<this.pixels[0].length;++i){const s=this.pixels[t][i];0!==t&&t<this.pixels.length-1&&0!==i&&i<this.pixels[0].length-1?(s.pushConnections(this.pixels[t-1][i]),s.pushConnections(this.pixels[t+1][i]),s.pushConnections(this.pixels[t][i-1]),s.pushConnections(this.pixels[t][i+1])):0===t?(s.pushConnections(this.pixels[t+1][i]),0<i&&i<this.pixels[0].length-1?(s.pushConnections(this.pixels[t][i-1]),s.pushConnections(this.pixels[t][i+1])):0===i?s.pushConnections(this.pixels[t][i+1]):i===this.pixels[0].length-1&&s.pushConnections(this.pixels[t][i-1])):t===this.pixels.length-1?(s.pushConnections(this.pixels[t-1][i]),0<i&&i<this.pixels[0].length-1?(s.pushConnections(this.pixels[t][i-1]),s.pushConnections(this.pixels[t][i+1])):0===i?s.pushConnections(this.pixels[t][i+1]):i===this.pixels[0].length-1&&s.pushConnections(this.pixels[t][i-1])):0===i?(s.pushConnections(this.pixels[t][i+1]),0<t&&t<this.pixels.length-1?(s.pushConnections(this.pixels[t-1][i]),s.pushConnections(this.pixels[t+1][i])):0===t?s.pushConnections(this.pixels[t+1][i]):t===this.pixels.length-1&&s.pushConnections(this.pixels[t-1][i])):i===this.pixels[0].length-1&&(s.pushConnections(this.pixels[t][i-1]),0<t&&t<this.pixels.length-1?(s.pushConnections(this.pixels[t-1][i]),s.pushConnections(this.pixels[t+1][i])):0===t?s.pushConnections(this.pixels[t+1][i]):t===this.pixels.length-1&&s.pushConnections(this.pixels[t-1][i]))}}Render(t,i){for(let s=0;s<this.pixels.length;++s)for(let e=0;e<this.pixels[0].length;++e)this.pixels[s][e].Render(t,i);this.path&&this.path.length>0&&this.RenderPath(t,this.path)}RenderPath(t,i){t.strokeStyle="#000000",t.lineWidth=5,t.beginPath(),t.moveTo(50*(i[0].x+.5),50*(i[0].y+.5));for(let s=1;s<i.length;++s)t.lineTo(50*(i[s].x+.5),50*(i[s].y+.5));t.stroke()}}class wt extends l{constructor(t){super(t),this.p=[0,0],this.map=void 0,this.init()}init(){const t=[10,8];let i=performance.now();this.map=new St(t[0],t[1],[[0,0],[1,0],[1,1],[4,2],[4,3],[4,5],[2,4],[3,4],[7,4],[8,4],[9,4],[7,5],[8,5],[9,5],[7,6],[8,6],[9,6]]);let s=performance.now();console.log("time: ",s-i)}RenderIndependentCanvas(t){this.map.Render(t,this.p),t.fillStyle="#ff0000",t.beginPath(),t.arc(this.p[0],this.p[1],5,0,6.28),t.closePath(),t.fill()}MouseMove(t,i){this.p=[t,i]}MouseDown(t,i){this.p=[t,i]}}class Pt{constructor(t,i){this.x=-1,this.y=-1,this.scale=50,this.fill=!1,this.visited=!1,this.connections=[],this.x=t,this.y=i}Render(t,i){let s=(this.x+.5)*this.scale,e=(this.y+.5)*this.scale;const h=Math.sqrt((i[0]-s)*(i[0]-s)+(i[1]-e)*(i[1]-e));if(t.lineWidth=4,t.beginPath(),t.rect(this.x*this.scale,this.y*this.scale,this.scale,this.scale),t.closePath(),this.fill&&(this.visited?t.fillStyle="rgba(255,0,0, 0.5)":t.fillStyle="rgba(0,255,0, 0.5)",t.fill()),t.stroke(),h<.5*this.scale){t.lineWidth=1;for(let i=0;i<this.connections.length;++i)t.beginPath(),t.moveTo((this.x+.5)*this.scale,(this.y+.5)*this.scale),t.lineTo((this.connections[i].x+.5)*this.scale,(this.connections[i].y+.5)*this.scale),t.stroke()}}}class St{constructor(t,i,s){this.pixels=[];for(let e=0;e<i;++e){const i=[];for(let s=0;s<t;++s)i.push(new Pt(s,e));this.pixels.push(i)}this.InitFill(s),this.InitConnections(),this.Compute(s)}Compute(t){let i=0;for(let s=0;s<t.length;++s){let e=t[s][0],h=t[s][1],n=this.pixels[h][e];if(n.visited)continue;let o=[n];for(i++;o.length>0;){let t=o[0];t.visited=!0,o.shift();for(let i=0;i<t.connections.length;++i)t.connections[i].fill&&!t.connections[i].visited&&o.push(t.connections[i])}}console.log("there are ",i," group of cells")}InitFill(t){for(let i=0;i<t.length;++i){let s=t[i][0],e=t[i][1];this.pixels[e][s].fill=!0}}InitConnections(){for(let t=0;t<this.pixels.length;++t)for(let i=0;i<this.pixels[0].length;++i){const s=this.pixels[t][i];0!==t&&t<this.pixels.length-1&&0!==i&&i<this.pixels[0].length-1?(s.connections.push(this.pixels[t-1][i]),s.connections.push(this.pixels[t+1][i]),s.connections.push(this.pixels[t][i-1]),s.connections.push(this.pixels[t][i+1])):0===t?(s.connections.push(this.pixels[t+1][i]),0<i&&i<this.pixels[0].length-1?(s.connections.push(this.pixels[t][i-1]),s.connections.push(this.pixels[t][i+1])):0===i?s.connections.push(this.pixels[t][i+1]):i===this.pixels[0].length-1&&s.connections.push(this.pixels[t][i-1])):t===this.pixels.length-1?(s.connections.push(this.pixels[t-1][i]),0<i&&i<this.pixels[0].length-1?(s.connections.push(this.pixels[t][i-1]),s.connections.push(this.pixels[t][i+1])):0===i?s.connections.push(this.pixels[t][i+1]):i===this.pixels[0].length-1&&s.connections.push(this.pixels[t][i-1])):0===i?(s.connections.push(this.pixels[t][i+1]),0<t&&t<this.pixels.length-1?(s.connections.push(this.pixels[t-1][i]),s.connections.push(this.pixels[t+1][i])):0===t?s.connections.push(this.pixels[t+1][i]):t===this.pixels.length-1&&s.connections.push(this.pixels[t-1][i])):i===this.pixels[0].length-1&&(s.connections.push(this.pixels[t][i-1]),0<t&&t<this.pixels.length-1?(s.connections.push(this.pixels[t-1][i]),s.connections.push(this.pixels[t+1][i])):0===t?s.connections.push(this.pixels[t+1][i]):t===this.pixels.length-1&&s.connections.push(this.pixels[t-1][i]))}}Render(t,i){for(let s=0;s<this.pixels.length;++s)for(let e=0;e<this.pixels[0].length;++e)this.pixels[s][e].Render(t,i)}}class bt extends l{constructor(t){super(t),this.p=[0,0];const i=new Rt;console.log(i)}init(){}RenderIndependentCanvas(t){t.fillStyle="#ff0000",t.beginPath(),t.arc(this.p[0],this.p[1],5,0,6.28),t.closePath(),t.fill()}MouseDown(t,i){this.p=[t,i]}}class Dt{constructor(t){this.id=-1,this.friends=[],this.dis=0,this.visited=!1,this.id=t}push(t){for(let i=0;i<this.friends.length;++i)if(this.friends[i]===t)return;this.friends.push(t),t.push(this)}Reset(){this.visited=!1,this.dis=0}findPerson(t){let i=[];if(0===this.friends.length)return-1;for(this.visited=!0,i.push(this);i.length>0;){let s=i[0];if(i.shift(),s){if(t===s.id)return s.dis;for(let t=0;t<s.friends.length;++t)s.friends[t]&&!s.friends[t].visited&&(s.friends[t].visited=!0,s.friends[t].dis=s.dis+1,i.push(s.friends[t]))}}return-1}}class Rt{constructor(){this.people=[],this.index=0;for(this.index=0;this.index<5;++this.index)this.people.push(new Dt(this.index));const t=[[1,3],[1,4],[4,5],[4,3],[3,2]];for(this.index=0;this.index<t.length;++this.index)this.BuildRelationship(t[this.index][0]-1,t[this.index][1]-1);this.PrintRelationship(),this.Compute(5)}Reset(){for(this.index=0;this.index<this.people.length;++this.index)this.people[this.index].visited=!1,this.people[this.index].dis=0}BuildRelationship(t,i){this.people[t].push(this.people[i])}PrintRelationship(){for(this.index=0;this.index<this.people.length;++this.index){let t="";for(let i=0;i<this.people[this.index].friends.length;++i)t+=" ".concat(this.people[this.index].friends[i].id);console.log("id: ",this.people[this.index].id,", freindsID",t)}}Compute(t){for(let i=0;i<t;++i){let s=0;for(let e=0;e<t;++e)if(i!==e){let t=this.people[i].findPerson(e);s+=t,console.log(i,e,t),this.Reset()}console.log(i,s),console.log("------")}}}class Vt extends l{constructor(t){super(t),this.p=[0,0],this.map=void 0,this.init()}init(){let t=performance.now();this.map=new kt(["###.######","#*#.#...*#","#.#......#","#........#","#.......@#","##########"]);let i=performance.now();console.log("time: ",i-t)}RenderIndependentCanvas(t){this.map&&(this.map.Render(t,this.p),t.fillStyle="#ff0000",t.beginPath(),t.arc(this.p[0],this.p[1],5,0,6.28),t.closePath(),t.fill())}MouseMove(t,i){this.p=[t,i]}MouseDown(t,i){this.p=[t,i]}}class It{constructor(t,i,s,e){this.map=void 0,this.x=-1,this.y=-1,this.type=void 0,this.scale=50,this.fill=!1,this.fire=!1,this.exit=!1,this.visited=!1,this.cost=0,this.temp=0,this.connections=[],this.map=t,this.x=i,this.y=s,this.type=e,"#"===this.type?this.fill=!0:"."===this.type?this.fill=!1:"*"===this.type?(this.fire=!0,this.map.fires.push(this)):"@"===this.type&&this.map.SetAgent(this)}pushConnections(t){t.fill||this.connections.push(t)}Render(t,i){let s=(this.x+.5)*this.scale,e=(this.y+.5)*this.scale;const h=Math.sqrt((i[0]-s)*(i[0]-s)+(i[1]-e)*(i[1]-e));if(t.lineWidth=4,t.strokeStyle="#ffffff",t.beginPath(),t.rect(this.x*this.scale,this.y*this.scale,this.scale,this.scale),t.closePath(),this.fill?t.fillStyle="rgba(0,0,0, 0.85)":this.fire?t.fillStyle="rgba(255,0,0, 0.5)":t.fillStyle="rgba(255,255,0, 0.5)",t.fill(),t.stroke(),h<.5*this.scale){t.lineWidth=1;for(let i=0;i<this.connections.length;++i)t.beginPath(),t.moveTo((this.x+.5)*this.scale,(this.y+.5)*this.scale),t.lineTo((this.connections[i].x+.5)*this.scale,(this.connections[i].y+.5)*this.scale),t.stroke()}this.exit&&(t.fillStyle="#0000ff",t.beginPath(),t.arc((this.x+.5)*this.scale,(this.y+.5)*this.scale,5,0,6.28),t.closePath(),t.fill())}}class At{constructor(t){this.current=void 0,this.current=t}Render(t){t.fillStyle="#00ff00",t.beginPath();const i=Math.sin(this.current.map.t)+1.1;t.arc((this.current.x+.5)*this.current.scale,(this.current.y+.5)*this.current.scale,6*i+2,0,6.28),t.closePath(),t.fill()}}class kt{constructor(t){this.pixels=[],this.fires=[],this.exit=void 0,this.agent=void 0,this.path=[],this.t=0,this.count=1,this.fail=!1,this.done=!1;for(let i=0;i<t.length;++i){const s=[];for(let e=0;e<t[i].length;++e){let h=t[i].charAt(e);s.push(new It(this,e,i,h))}this.pixels.push(s)}this.InitConnections(),this.ComputeExit(),console.log(this)}Update(){this.ComputeFire(),this.ComputeAgent()}ComputeFire(){let t=[];for(let i=0;i<this.fires.length;++i)for(let s=0;s<this.fires[i].connections.length;++s)this.fires[i].connections[s].fill||(this.fires[i].connections[s].fire=!0,t.push(this.fires[i].connections[s]));for(let i=0;i<t.length;++i)this.fires.push(t[i])}ComputeAgent(){if(this.agent.current===this.exit)return console.log("Done! by ",this.count),void(this.done=!0);this.path=this.ComputePath(this.agent.current,this.exit),this.path&&this.path.length>0&&(this.agent.current=this.path[this.path.length-2],console.log(this.path),this.count++)}ComputeExit(){for(let t=0;t<this.pixels.length;++t)for(let i=0;i<this.pixels[t].length;++i)if((this.pixels[t][i].connections.length<3&&0===t||0===i||t===this.pixels.length-1||i===this.pixels[0].length-1)&&!this.pixels[t][i].fill){let s=!1;for(let e=0;e<this.pixels[t][i].connections.length;++e)!1===this.pixels[t][i].connections[e].fill&&(s=!0);s&&(this.pixels[t][i].exit=!0,this.exit=this.pixels[t][i])}}ResetCost(){for(let t=0;t<this.pixels.length;++t)for(let i=0;i<this.pixels[t].length;++i)this.pixels[t][i].fill||this.pixels[t][i].fire||(this.pixels[t][i].cost=0,this.pixels[t][i].temp=-1,this.pixels[t][i].visited=!1)}ComputePath(t,i){this.ResetCost();let s=[t];for(;s.length>0;){let t=s[0];t.visited=!0,s.shift();for(let i=0;i<t.connections.length;++i)if(!t.connections[i].fill&&!t.connections[i].visited){const e=this.ComputeCost(t,t.connections[i]),h=t.temp+e;(-1===t.connections[i].temp||h<t.connections[i].temp)&&(t.connections[i].temp=h,s.push(t.connections[i]))}}let e=[];if(-1!==i.temp){e.push(i);let s=i;for(;;){let i=s;for(let t=0;t<s.connections.length;++t)s.connections[t].fill||s.connections[t].temp<i.temp&&(i=s.connections[t]);if(i===s)return void(this.fail=!0);if(s=i,e.push(s),s===t)break}}return e}ComputeCost(t,i){return Math.sqrt((i.x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y))}SetAgent(t){this.agent=new At(t)}InitConnections(){for(let t=0;t<this.pixels.length;++t)for(let i=0;i<this.pixels[0].length;++i){const s=this.pixels[t][i];0!==t&&t<this.pixels.length-1&&0!==i&&i<this.pixels[0].length-1?(s.pushConnections(this.pixels[t-1][i]),s.pushConnections(this.pixels[t+1][i]),s.pushConnections(this.pixels[t][i-1]),s.pushConnections(this.pixels[t][i+1])):0===t?(s.pushConnections(this.pixels[t+1][i]),0<i&&i<this.pixels[0].length-1?(s.pushConnections(this.pixels[t][i-1]),s.pushConnections(this.pixels[t][i+1])):0===i?s.pushConnections(this.pixels[t][i+1]):i===this.pixels[0].length-1&&s.pushConnections(this.pixels[t][i-1])):t===this.pixels.length-1?(s.pushConnections(this.pixels[t-1][i]),0<i&&i<this.pixels[0].length-1?(s.pushConnections(this.pixels[t][i-1]),s.pushConnections(this.pixels[t][i+1])):0===i?s.pushConnections(this.pixels[t][i+1]):i===this.pixels[0].length-1&&s.pushConnections(this.pixels[t][i-1])):0===i?(s.pushConnections(this.pixels[t][i+1]),0<t&&t<this.pixels.length-1?(s.pushConnections(this.pixels[t-1][i]),s.pushConnections(this.pixels[t+1][i])):0===t?s.pushConnections(this.pixels[t+1][i]):t===this.pixels.length-1&&s.pushConnections(this.pixels[t-1][i])):i===this.pixels[0].length-1&&(s.pushConnections(this.pixels[t][i-1]),0<t&&t<this.pixels.length-1?(s.pushConnections(this.pixels[t-1][i]),s.pushConnections(this.pixels[t+1][i])):0===t?s.pushConnections(this.pixels[t+1][i]):t===this.pixels.length-1&&s.pushConnections(this.pixels[t-1][i]))}}Render(t,i){if(this.done||!(this.agent&&this.agent.current.fire||this.fail)){this.t+=.1,this.t>10&&(this.t=0,this.fail||this.Update());for(let s=0;s<this.pixels.length;++s)for(let e=0;e<this.pixels[0].length;++e)this.pixels[s][e].Render(t,i);this.agent&&this.agent.Render(t),this.path&&this.path.length>0&&this.RenderPath(t,this.path)}else console.log("impossible")}RenderPath(t,i){t.strokeStyle="#000000",t.lineWidth=5,t.beginPath(),t.moveTo(50*(i[0].x+.5),50*(i[0].y+.5));for(let s=1;s<i.length-1;++s)t.lineTo(50*(i[s].x+.5),50*(i[s].y+.5));t.stroke()}}class zt extends l{constructor(t){super(t),this.p=[0,0],this.map=void 0,this.init()}init(){const t=[5,7];let i=performance.now();this.map=new Et(t[1],t[0],[[0,2,4,4],[1,1,2,5],[4,0,6,2]]);let s=performance.now();console.log("time: ",s-i)}RenderIndependentCanvas(t){this.map.Render(t,this.p),t.fillStyle="#ff0000",t.beginPath(),t.arc(this.p[0],this.p[1],5,0,6.28),t.closePath(),t.fill()}MouseMove(t,i){this.p=[t,i]}MouseDown(t,i){this.p=[t,i]}}class Bt{constructor(t,i){this.x=-1,this.y=-1,this.scale=50,this.fill=!1,this.visited=!1,this.connections=[],this.x=t,this.y=i}Render(t,i){let s=(this.x+.5)*this.scale,e=(this.y+.5)*this.scale;const h=Math.sqrt((i[0]-s)*(i[0]-s)+(i[1]-e)*(i[1]-e));if(t.lineWidth=4,t.beginPath(),t.rect(this.x*this.scale,this.y*this.scale,this.scale,this.scale),t.closePath(),this.fill&&(this.visited?t.fillStyle="rgba(255,0,0, 0.5)":t.fillStyle="rgba(0,255,0, 0.5)",t.fill()),t.stroke(),h<.5*this.scale){t.lineWidth=1;for(let i=0;i<this.connections.length;++i)t.beginPath(),t.moveTo((this.x+.5)*this.scale,(this.y+.5)*this.scale),t.lineTo((this.connections[i].x+.5)*this.scale,(this.connections[i].y+.5)*this.scale),t.stroke()}}Add(t){t.fill||this.connections.push(t)}}class Et{constructor(t,i,s){this.pixels=[];for(let e=0;e<i;++e){const i=[];for(let s=0;s<t;++s)i.push(new Bt(s,e));this.pixels.push(i)}this.InitFill(s),this.InitConnections(),this.Compute()}Compute(){for(let t=0;t<this.pixels.length;++t)for(let i=0;i<this.pixels[0].length;++i){let s=this.pixels[t][i];if(!s.fill&&!s.visited){let t=this.PropagationBFS(s);console.log(t)}}}PropagationBFS(t){let i=[t],s=0;for(;i.length>0;){let t=i[0];if(i.shift(),!t.visited){t.visited=!0,s++;for(let s=0;s<t.connections.length;++s)t.connections[s].visited||i.push(t.connections[s])}}return s}InitFill(t){for(let i=0;i<t.length;++i){let s=t[i][0],e=t[i][1],h=t[i][2],n=t[i][3];for(let t=e;t<n;++t)for(let i=s;i<h;++i)this.pixels[t][i].fill=!0}}InitConnections(){for(let t=0;t<this.pixels.length;++t)for(let i=0;i<this.pixels[0].length;++i){const s=this.pixels[t][i];0!==t&&t<this.pixels.length-1&&0!==i&&i<this.pixels[0].length-1?(s.Add(this.pixels[t-1][i]),s.Add(this.pixels[t+1][i]),s.Add(this.pixels[t][i-1]),s.Add(this.pixels[t][i+1])):0===t?(s.Add(this.pixels[t+1][i]),0<i&&i<this.pixels[0].length-1?(s.Add(this.pixels[t][i-1]),s.Add(this.pixels[t][i+1])):0===i?s.Add(this.pixels[t][i+1]):i===this.pixels[0].length-1&&s.Add(this.pixels[t][i-1])):t===this.pixels.length-1?(s.Add(this.pixels[t-1][i]),0<i&&i<this.pixels[0].length-1?(s.Add(this.pixels[t][i-1]),s.Add(this.pixels[t][i+1])):0===i?s.Add(this.pixels[t][i+1]):i===this.pixels[0].length-1&&s.Add(this.pixels[t][i-1])):0===i?(s.Add(this.pixels[t][i+1]),0<t&&t<this.pixels.length-1?(s.Add(this.pixels[t-1][i]),s.Add(this.pixels[t+1][i])):0===t?s.Add(this.pixels[t+1][i]):t===this.pixels.length-1&&s.Add(this.pixels[t-1][i])):i===this.pixels[0].length-1&&(s.Add(this.pixels[t][i-1]),0<t&&t<this.pixels.length-1?(s.Add(this.pixels[t-1][i]),s.Add(this.pixels[t+1][i])):0===t?s.Add(this.pixels[t+1][i]):t===this.pixels.length-1&&s.Add(this.pixels[t-1][i]))}}Render(t,i){for(let s=0;s<this.pixels.length;++s)for(let e=0;e<this.pixels[0].length;++e)this.pixels[s][e].Render(t,i)}}class Lt extends l{constructor(t){super(t),this.p=[0,0],this.graph=void 0,this.init()}init(){let t=performance.now();this.graph=new Tt([5,4],[[3,1],[3,2],[4,3],[5,3]]);let i=performance.now();console.log("time: ",i-t)}RenderIndependentCanvas(t){this.graph.Render(t,this.p),t.fillStyle="#ff0000",t.beginPath(),t.arc(this.p[0],this.p[1],5,0,6.28),t.closePath(),t.fill()}MouseMove(t,i){this.p=[t,i]}MouseDown(t,i){this.p=[t,i]}}class Nt{constructor(t){this.id=-1,this.visited=!1,this.children=[],this.id=t}Render(t,i){}}class Tt{constructor(t,i){this.nodes=[];for(let s=0;s<t[0];++s)this.nodes.push(new Nt(s));for(let s=0;s<i.length;++s){const t=i[s][0]-1,e=i[s][1]-1;this.nodes[e].children.push(this.nodes[t])}this.ComputeConnections(),console.log(this)}ComputeConnections(){for(let t=0;t<this.nodes.length;++t){let i=this.BFS(this.nodes[t]);this.Reset(),console.log(t+1,i)}}BFS(t){let i=[t],s=0;for(;i.length>0;){let t=i[0];if(i.shift(),!t.visited){t.visited=!0,s++;for(let s=0;s<t.children.length;++s)t.children[s].visited||i.push(t.children[s])}}return s}Reset(){for(let t=0;t<this.nodes.length;++t)this.nodes[t].visited=!1}Render(t,i){}}class Ut extends l{constructor(t){super(t),this.p=[0,0],this.map=void 0,this.init()}init(){let t=performance.now();this.map=new Wt([".###.#####..","#.kk#...#v#.","#..k#.#.#.#.","#..##k#...#.","#.#v#k###.#.","#..#v#....#.","#...v#v####.",".####.#vv.k#",".......####."]);let i=performance.now();console.log("time: ",i-t)}RenderIndependentCanvas(t){this.map.Render(t,this.p),t.fillStyle="#ff0000",t.beginPath(),t.arc(this.p[0],this.p[1],5,0,6.28),t.closePath(),t.fill()}MouseMove(t,i){this.p=[t,i]}MouseDown(t,i){this.p=[t,i]}}class Ft{constructor(t,i,s,e){this.map=void 0,this.x=-1,this.y=-1,this.scale=50,this.fill=!1,this.wolf=!1,this.sheep=!1,this.visited=!1,this.connections=[],this.type=void 0,this.map=t,this.x=i,this.y=s,this.type=e,"#"===this.type?this.fill=!0:"."===this.type?this.map.pixelsComputedNeeded.push(this):"v"===this.type?(this.wolf=!0,this.map.pixelsComputedNeeded.push(this)):"k"===this.type&&(this.sheep=!0,this.map.pixelsComputedNeeded.push(this))}Render(t,i){let s=(this.x+.5)*this.scale,e=(this.y+.5)*this.scale;const h=Math.sqrt((i[0]-s)*(i[0]-s)+(i[1]-e)*(i[1]-e));if(t.lineWidth=4,t.beginPath(),t.rect(this.x*this.scale,this.y*this.scale,this.scale,this.scale),t.closePath(),this.fill&&(this.visited?t.fillStyle="rgba(255,0,0, 0.5)":t.fillStyle="rgba(0,255,0, 0.5)",t.fill()),t.stroke(),this.wolf&&(t.fillStyle="#ff0000",t.beginPath(),t.arc((this.x+.5)*this.scale,(this.y+.5)*this.scale,5,0,6.28),t.closePath(),t.fill()),this.sheep&&(t.fillStyle="#00ff00",t.beginPath(),t.arc((this.x+.5)*this.scale,(this.y+.5)*this.scale,5,0,6.28),t.closePath(),t.fill()),h<.5*this.scale){t.lineWidth=1;for(let i=0;i<this.connections.length;++i)t.beginPath(),t.moveTo((this.x+.5)*this.scale,(this.y+.5)*this.scale),t.lineTo((this.connections[i].x+.5)*this.scale,(this.connections[i].y+.5)*this.scale),t.stroke()}}Add(t){t.fill||this.connections.push(t)}}class Ht{constructor(){this.s=0,this.w=0}}class Wt{constructor(t){this.pixels=[],this.pixelsComputedNeeded=[],this.s=0,this.w=0;for(let e=0;e<t.length;++e){const i=[];for(let s=0;s<t[e].length;++s){let h=t[e].charAt(s);i.push(new Ft(this,s,e,h))}this.pixels.push(i)}this.InitConnections();let i=performance.now();this.ComputeBFS();let s=performance.now();console.log("BFS time: ",s-i);for(let e=0;e<this.pixelsComputedNeeded.length;++e)this.pixelsComputedNeeded[e].visited=!1;i=performance.now(),this.ComputeDFS(),s=performance.now(),console.log("DFS time: ",s-i);for(let e=0;e<this.pixelsComputedNeeded.length;++e)this.pixelsComputedNeeded[e].visited=!1;i=performance.now(),this.ComputeDFSValue(),s=performance.now(),console.log("DFS by Value time: ",s-i)}ComputeDFSValue(){let t=0,i=0;for(let s=0;s<this.pixelsComputedNeeded.length;++s){if(this.pixelsComputedNeeded[s].visited)continue;let e=new Ht;this.DFSValue(this.pixelsComputedNeeded[s],e),0===e.s&&0===e.w||(e.w<e.s?t+=e.s:i+=e.w)}console.log("sheep : ",t,", wolf : ",i)}DFSValue(t,i){if(!t.visited){t.visited=!0,t.sheep&&i.s++,t.wolf&&i.w++;for(let s=0;s<t.connections.length;++s)this.DFSValue(t.connections[s],i)}}ComputeDFS(){let t=0,i=0;for(let s=0;s<this.pixelsComputedNeeded.length;++s)this.pixelsComputedNeeded[s].visited||(this.s=0,this.w=0,this.DFS(this.pixelsComputedNeeded[s]),0===this.s&&0===this.w||(this.w<this.s?t+=this.s:i+=this.w));console.log("sheep : ",t,", wolf : ",i)}DFS(t){if(!t.visited){t.visited=!0,t.sheep&&this.s++,t.wolf&&this.w++;for(let i=0;i<t.connections.length;++i)this.DFS(t.connections[i])}}ComputeBFS(){let t=0,i=0;for(let s=0;s<this.pixelsComputedNeeded.length;++s){if(this.pixelsComputedNeeded[s].visited)continue;let e=[this.pixelsComputedNeeded[s]];this.pixelsComputedNeeded[s].visited=!0;let h=0,n=0;for(;e.length>0;){let t=e[0];e.shift(),t.wolf&&(n+=1),t.sheep&&(h+=1);for(let i=0;i<t.connections.length;++i)t.connections[i].visited||(t.connections[i].visited=!0,e.push(t.connections[i]))}0===h&&0===n||(n<h?t+=h:i+=n)}console.log("sheep : ",t,", wolf : ",i)}InitConnections(){for(let t=0;t<this.pixels.length;++t)for(let i=0;i<this.pixels[0].length;++i){const s=this.pixels[t][i];0!==t&&t<this.pixels.length-1&&0!==i&&i<this.pixels[0].length-1?(s.Add(this.pixels[t-1][i]),s.Add(this.pixels[t+1][i]),s.Add(this.pixels[t][i-1]),s.Add(this.pixels[t][i+1])):0===t?(s.Add(this.pixels[t+1][i]),0<i&&i<this.pixels[0].length-1?(s.Add(this.pixels[t][i-1]),s.Add(this.pixels[t][i+1])):0===i?s.Add(this.pixels[t][i+1]):i===this.pixels[0].length-1&&s.Add(this.pixels[t][i-1])):t===this.pixels.length-1?(s.Add(this.pixels[t-1][i]),0<i&&i<this.pixels[0].length-1?(s.Add(this.pixels[t][i-1]),s.Add(this.pixels[t][i+1])):0===i?s.Add(this.pixels[t][i+1]):i===this.pixels[0].length-1&&s.Add(this.pixels[t][i-1])):0===i?(s.Add(this.pixels[t][i+1]),0<t&&t<this.pixels.length-1?(s.Add(this.pixels[t-1][i]),s.Add(this.pixels[t+1][i])):0===t?s.Add(this.pixels[t+1][i]):t===this.pixels.length-1&&s.Add(this.pixels[t-1][i])):i===this.pixels[0].length-1&&(s.Add(this.pixels[t][i-1]),0<t&&t<this.pixels.length-1?(s.Add(this.pixels[t-1][i]),s.Add(this.pixels[t+1][i])):0===t?s.Add(this.pixels[t+1][i]):t===this.pixels.length-1&&s.Add(this.pixels[t-1][i]))}}Render(t,i){for(let s=0;s<this.pixels.length;++s)for(let e=0;e<this.pixels[0].length;++e)this.pixels[s][e].Render(t,i)}}class Ot extends l{constructor(t){super(t),this.p=[0,0],this.map=void 0,this.init()}init(){let t=performance.now();this.map=new Xt([10,10,3,3,5],[[2,2],[3,2],[3,3],[6,4],[1,1],[4,1],[1,4]]);let i=performance.now();console.log("time: ",i-t)}RenderIndependentCanvas(t){this.map&&(this.map.Render(t,this.p),t.fillStyle="#ff0000",t.beginPath(),t.arc(this.p[0],this.p[1],5,0,6.28),t.closePath(),t.fill())}MouseMove(t,i){this.p=[t,i]}MouseDown(t,i){this.p=[t,i]}}class Gt{constructor(t,i,s){this.map=void 0,this.hover=!1,this.x=-1,this.y=-1,this.type=void 0,this.scale=50,this.fill=!1,this.fire=!1,this.exit=!1,this.visited=!1,this.cost=0,this.temp=0,this.connections=[],this.map=t,this.x=i,this.y=s}Render(t){t.lineWidth=4,t.strokeStyle="#ffffff",t.beginPath(),t.rect(50+this.x-.5*this.scale,50+this.y-.5*this.scale,this.scale,this.scale),t.closePath(),this.fill?t.fillStyle="rgba(0,0,0, 0.85)":this.hover?t.fillStyle="rgba(255,0,0, 0.8)":t.fillStyle="rgba(255,255,0, 0.5)",t.fill(),t.stroke(),t.fillStyle="#0000ff",t.beginPath(),t.arc(50+this.x,50+this.y,3,0,6.28),t.closePath(),t.fill()}RenderHover(t){this.hover=!0,this.Render(t)}}class _t{constructor(t,i,s){this.map=void 0,this.pixels=[],this.connections=[],this.x=void 0,this.y=void 0,this.isPath=!0,this.visited=!1,this.scale=50,this.start=!1,this.end=!1,this.temp=-1,this.x=i,this.y=s,this.map=t}Compute(){for(let t=0;t<this.pixels.length;++t)if(this.pixels[t].fill)return void(this.isPath=!1)}pushConnections(t){t.isPath&&this.connections.push(t)}Render(t,i){const s=Math.sqrt((i[0]-this.x)*(i[0]-this.x)+(i[1]-this.y)*(i[1]-this.y));this.isPath?t.fillStyle="rgba(0,0,0, 1)":t.fillStyle="rgba(0,0,0, 0.3)";for(let e=0;e<this.pixels.length;++e)s<10&&this.isPath?this.map.pixelsHover=this.pixels:this.pixels[e].hover=!1;if(t.beginPath(),t.arc(this.x,this.y,9,0,6.28),t.closePath(),t.fill(),s<10){t.strokeStyle="#000000",t.lineWidth=10;for(let i=0;i<this.connections.length;++i)t.beginPath(),t.moveTo(this.x,this.y),t.lineTo(this.connections[i].x,this.connections[i].y),t.stroke()}this.start&&(t.fillStyle="rgba(255,0,255 , 1)",t.beginPath(),t.arc(this.x,this.y,12,0,6.28),t.closePath(),t.fill()),this.end&&(t.fillStyle="rgba(0,255,255, 1)",t.beginPath(),t.arc(this.x,this.y,12,0,6.28),t.closePath(),t.fill())}}class Xt{constructor(t,i){this.connectionMap=[],this.pixels=[],this.pixelsHover=[],this.scale=50,this.fires=[],this.exit=void 0,this.path=[],this.t=0,this.count=1,this.fail=!1,this.done=!1;for(let h=0;h<t[0];++h){const i=[];for(let s=0;s<t[1];++s)i.push(new Gt(this,s*this.scale,h*this.scale));this.pixels.push(i)}for(let h=0;h<i.length-2;++h)this.pixels[i[h][1]][i[h][0]].fill=!0;this.InitConnections(t[2],t[3]);const s=this.FindGhost(i[i.length-2]);s&&(s.start=!0);const e=this.FindGhost(i[i.length-1]);e&&(e.end=!0),s&&e&&(this.path=this.ComputePath(s,e))}FindGhost(t){const i=this.pixels[t[0]][t[1]];let s;for(let e=0;e<this.connectionMap.length;++e)for(let t=0;t<this.connectionMap[0].length;++t)for(let h=0;h<this.connectionMap[e][t].pixels.length;++h)this.connectionMap[e][t].pixels[h]===i&&this.connectionMap[e][t].isPath&&(s=this.connectionMap[e][t]);if(s)return s}Update(){}ComputeFire(){let t=[];for(let i=0;i<this.fires.length;++i)for(let s=0;s<this.fires[i].connections.length;++s)this.fires[i].connections[s].fill||(this.fires[i].connections[s].fire=!0,t.push(this.fires[i].connections[s]));for(let i=0;i<t.length;++i)this.fires.push(t[i])}ComputeExit(){for(let t=0;t<this.pixels.length;++t)for(let i=0;i<this.pixels[t].length;++i)if((this.pixels[t][i].connections.length<3&&0===t||0===i||t===this.pixels.length-1||i===this.pixels[0].length-1)&&!this.pixels[t][i].fill){let s=!1;for(let e=0;e<this.pixels[t][i].connections.length;++e)!1===this.pixels[t][i].connections[e].fill&&(s=!0);s&&(this.pixels[t][i].exit=!0,this.exit=this.pixels[t][i])}}ResetCost(){for(let t=0;t<this.connectionMap.length;++t)for(let i=0;i<this.connectionMap[t].length;++i)this.connectionMap[t][i].isPath&&(this.connectionMap[t][i].temp=-1,this.connectionMap[t][i].visited=!1)}ComputePath(t,i){this.ResetCost();let s=[t];for(;s.length>0;){let t=s[0];t.visited=!0,s.shift();for(let i=0;i<t.connections.length;++i)if(!t.connections[i].visited){const e=this.ComputeCost(t,t.connections[i]),h=t.temp+e;(-1===t.connections[i].temp||h<t.connections[i].temp)&&(t.connections[i].temp=h,s.push(t.connections[i]))}}let e=[];if(-1!==i.temp){e.push(i);let s=i;for(;;){let i=s;for(let t=0;t<s.connections.length;++t)s.connections[t].isPath&&s.connections[t].temp<i.temp&&(i=s.connections[t]);if(i===s)return this.fail=!0,null;if(s=i,e.push(s),s===t)break}}return e}ComputeCost(t,i){return Math.sqrt((i.x-t.x)*(i.x-t.x)+(i.y-t.y)*(i.y-t.y))}InitConnections(t,i){this.connectionMap=[];for(let s=0;s<this.pixels.length-t+1;++s){const e=[];for(let h=0;h<this.pixels[0].length-i+1;++h){const n=new _t(this,h*this.scale+75,s*this.scale+75);for(let e=0;e<i;++e)for(let i=0;i<t;++i)n.pixels.push(this.pixels[s+e][h+i]);n.Compute(),e.push(n)}this.connectionMap.push(e)}for(let s=0;s<this.connectionMap.length;++s)for(let t=0;t<this.connectionMap.length;++t){const i=this.connectionMap[s][t];0!==s&&s<this.connectionMap.length-1&&0!==t&&t<this.connectionMap[0].length-1?(i.pushConnections(this.connectionMap[s-1][t]),i.pushConnections(this.connectionMap[s+1][t]),i.pushConnections(this.connectionMap[s][t-1]),i.pushConnections(this.connectionMap[s][t+1])):0===s?(i.pushConnections(this.connectionMap[s+1][t]),0<t&&t<this.connectionMap[0].length-1?(i.pushConnections(this.connectionMap[s][t-1]),i.pushConnections(this.connectionMap[s][t+1])):0===t?i.pushConnections(this.connectionMap[s][t+1]):t===this.connectionMap[0].length-1&&i.pushConnections(this.connectionMap[s][t-1])):s===this.connectionMap.length-1?(i.pushConnections(this.connectionMap[s-1][t]),0<t&&t<this.connectionMap[0].length-1?(i.pushConnections(this.connectionMap[s][t-1]),i.pushConnections(this.connectionMap[s][t+1])):0===t?i.pushConnections(this.connectionMap[s][t+1]):t===this.connectionMap[0].length-1&&i.pushConnections(this.connectionMap[s][t-1])):0===t?(i.pushConnections(this.connectionMap[s][t+1]),0<s&&s<this.connectionMap.length-1?(i.pushConnections(this.connectionMap[s-1][t]),i.pushConnections(this.connectionMap[s+1][t])):0===s?i.pushConnections(this.connectionMap[s+1][t]):s===this.connectionMap.length-1&&i.pushConnections(this.connectionMap[s-1][t])):t===this.connectionMap[0].length-1&&(i.pushConnections(this.connectionMap[s][t-1]),0<s&&s<this.connectionMap.length-1?(i.pushConnections(this.connectionMap[s-1][t]),i.pushConnections(this.connectionMap[s+1][t])):0===s?i.pushConnections(this.connectionMap[s+1][t]):s===this.connectionMap.length-1&&i.pushConnections(this.connectionMap[s-1][t]))}}Render(t,i){this.t+=.1,this.t>10&&(this.t=0,this.fail||this.Update());for(let s=0;s<this.pixels.length;++s)for(let i=0;i<this.pixels[0].length;++i)this.pixels[s][i].Render(t);if(this.pixelsHover)for(let s=0;s<this.pixelsHover.length;++s)this.pixelsHover[s].RenderHover(t);if(this.connectionMap)for(let s=0;s<this.connectionMap.length;++s)for(let e=0;e<this.connectionMap.length;++e)this.connectionMap[s][e].Render(t,i);this.path&&this.path.length>0&&(this.RenderPath(t,this.path),console.log("dddd"))}RenderPath(t,i){t.strokeStyle="#000000",t.lineWidth=5,t.beginPath(),t.moveTo(i[0].x,i[0].y);for(let s=1;s<i.length;++s)t.lineTo(i[s].x,i[s].y);t.stroke()}}class Yt extends l{constructor(t){super(t),this.p=[0,0],this.map=void 0,this.init()}init(){let t=performance.now();this.map=new qt(11,[[5,2],[9,7],[4,4],[3,9]]);let i=performance.now();console.log("time: ",i-t)}RenderIndependentCanvas(t){this.map.Render(t,this.p),t.fillStyle="#ff0000",t.beginPath(),t.arc(this.p[0],this.p[1],5,0,6.28),t.closePath(),t.fill()}MouseMove(t,i){this.p=[t,i]}MouseDown(t,i){this.p=[t,i]}}class jt{constructor(t,i,s,e){this.map=void 0,this.x=-1,this.y=-1,this.connections=[],this.scale=10,this.r=!1,this.yC=!1,this.b=!1,this.selected=!1,this.map=t,this.x=i,this.y=s,this.scale=e}Render(t,i){t.strokeStyle="#ffffff",t.fillStyle="rgba(255,255,255, 1)",t.lineWidth=1,t.beginPath(),t.rect(this.x,this.y,this.scale,this.scale),t.closePath(),this.r?t.fillStyle="rgba(255,0,0, 1)":this.yC?t.fillStyle="rgba(255,255,0, 1)":this.b&&(t.fillStyle="rgba(0,0,255, 1)"),t.stroke(),t.fill(),this.selected&&(t.fillStyle="#ffffff",t.beginPath(),t.arc(this.x+.5*this.scale,this.y+.5*this.scale,5,0,6.28),t.closePath(),t.fill())}}class qt{constructor(t,i){this.scale=15,this.pixels=[],this.pixelsComputedNeeded=[],this.s=0,this.w=0;for(let s=0;s<t;++s){const i=[];for(let e=0;e<t;++e)i.push(new jt(this,s*this.scale,e*this.scale,this.scale));this.pixels.push(i)}this.InitConnections(),this.ComputeData(i)}ComputeData(t){for(let i=0;i<t.length;++i){const s=this.pixels[t[i][0]-1][t[i][1]-1];s.selected=!0,s.r?console.log("red, 1"):s.yC?console.log("yellow, 3"):s.b&&console.log("blue, 2")}}InitConnections(){for(let t=0;t<.5*this.pixels.length;++t)for(let i=0;i<.5*this.pixels[0].length;++i){const s=this.pixels[t][i];let e=i%3,h=t%3;0===e&&t>=i?s.r=!0:1===e&&t>=i?s.b=!0:2===e&&t>=i&&(s.yC=!0),0===h&&i>=t?s.r=!0:1===h&&i>=t?s.b=!0:2===h&&i>=t&&(s.yC=!0)}for(let t=0;t<.5*this.pixels.length;++t)for(let i=0;i<.5*this.pixels[0].length;++i){const s=this.pixels[t][i];let e=t,h=this.pixels[0].length-i-1;const n=this.pixels[e][h];n.r=s.r,n.yC=s.yC,n.b=s.b}for(let t=0;t<.5*this.pixels.length;++t)for(let i=0;i<this.pixels[0].length;++i){const s=this.pixels[t][i];let e=this.pixels.length-t-1,h=i;const n=this.pixels[e][h];n.r=s.r,n.yC=s.yC,n.b=s.b}}Render(t,i){for(let s=0;s<this.pixels.length;++s)for(let e=0;e<this.pixels[0].length;++e)this.pixels[s][e].Render(t,i)}}class Qt extends l{constructor(t){super(t),this.p=[0,0],this.init()}init(){let t=performance.now();const i=new Kt("DOG");let s=performance.now();console.log("time: ",s-t),console.log(i)}RenderIndependentCanvas(t){t.fillStyle="#ff0000",t.beginPath(),t.arc(this.p[0],this.p[1],5,0,6.28),t.closePath(),t.fill()}MouseMove(t,i){this.p=[t,i]}MouseDown(t,i){this.p=[t,i]}}class Kt{constructor(t){let i=t.length,s=5+4*(i-1);console.log(s),console.log(i);for(let e=0;e<5;++e){let i="",h=0;for(let n=0;n<s;++n)i+=0===e||4===e?n%4===2?n<s-5?"#":"*":".":1===e||3===e?n%2===1?n<s-5?"#":"*":".":n%4===0?n<s-5?"#":"*":n%2===0?t[h++]:".";console.log(i)}}}class Jt extends l{constructor(t){super(t),this.p=[0,0],this.graph=void 0,this.init()}init(){let t=performance.now();this.graph=new Zt([4,5,1],[[1,2],[1,3],[1,4],[2,4],[3,4]]);let i=performance.now();console.log("time: ",i-t)}RenderIndependentCanvas(t){this.graph.Render(t,this.p),this.RenderMouse(t)}RenderMouse(t){t.fillStyle="#ff0000",t.beginPath(),t.arc(this.p[0],this.p[1],5,0,6.28),t.closePath(),t.fill()}MouseMove(t,i){this.p=[t,i]}MouseDown(t,i){this.p=[t,i]}}class $t{constructor(){this.visitedNum=[]}Add(t){this.visitedNum.push(t)}Print(){for(let t=0;t<this.visitedNum.length;++t)console.log(this.visitedNum[t])}}class Zt{constructor(t,i){this.edges=[],this.nodes=[];for(let e=0;e<t[0];++e)this.nodes.push(new ii(e));for(let e=0;e<i.length;++e){const t=i[e],s=this.nodes[t[0]-1],h=this.nodes[t[1]-1],n=new ti(s,h);this.edges.push(n)}let s=new $t;this.ComputeDFS(t[t.length-1]-1,s),s.Print();for(let e=0;e<this.nodes.length;++e)this.nodes[e].visited=!1;s=new $t,this.ComputeBFS(t[t.length-1]-1,s),s.Print()}ComputeBFS(t,i){this.BFS(this.nodes[t],i)}BFS(t,i){let s=[t];for(;s.length>0;){let t=s[0];if(s.shift(),!t.visited){t.visited=!0,i.Add(t.id+1);for(let i=t.edges.length-1;i>-1;--i)t.edges[i].n0.visited||s.push(t.edges[i].n0),t.edges[i].n1.visited||s.push(t.edges[i].n1)}}}ComputeDFS(t,i){this.DFS(this.nodes[t],i)}DFS(t,i){if(t.visited)return i;i.Add(t.id+1),t.visited=!0;for(let s=t.edges.length-1;s>-1;--s)this.DFS(t.edges[s].n0,i),this.DFS(t.edges[s].n1,i);return i}Render(t,i){for(let s=0;s<this.edges.length;++s)this.edges[s].Render(t);for(let s=0;s<this.nodes.length;++s)this.nodes[s].Render(t)}}class ti{constructor(t,i){this.n0=void 0,this.n1=void 0,this.n0=t,this.n1=i,this.n0.edges.push(this),this.n1.edges.push(this)}Render(t){t.beginPath(),t.moveTo(this.n0.x,this.n0.y),t.lineTo(this.n1.x,this.n1.y),t.closePath(),t.stroke()}}class ii{constructor(t){this.edges=[],this.x=-1,this.y=-1,this.id=-1,this.visited=!1,this.x=300*(Math.random()+1),this.y=300*(Math.random()+1),this.id=t,console.log(this.x,this.y)}Render(t){t.fillStyle="#ff0000",t.beginPath(),t.arc(this.x,this.y,10,0,6.28),t.closePath(),t.stroke(),t.font="15px Arial",t.fillText((this.id+1).toString(),this.x-5,this.y+5)}}class si extends l{constructor(t){super(t),this.p=[0,0],this.myWork=void 0,this.init()}init(){this.myWork=new ei(10,[[10,10],[50,15],[45,65],[25,80],[9,10]]),this.myWork.toJson(),console.log("building run....")}RenderIndependentCanvas(t){t.fillStyle="#ff0000",t.beginPath(),t.arc(this.p[0],this.p[1],5,0,6.28),t.closePath(),t.fill()}MouseMove(t,i){this.p=[t,i]}MouseDown(t,i){this.p=[t,i]}}class ei{constructor(t,i){this.site=void 0,this.apts=[],this.sun=void 0,this.sun=new li,this.init(),this.InitOpti()}init(){this.site=new oi;for(let t=0;t<10;++t)this.apts.push(new ni)}InitOpti(){}toJson(){for(let t=0;t<10;++t)this.apts[t].toJson()}}class hi{constructor(t){this.host=void 0,this.scoreBySun=void 0,this.host=t}getFloor(){return[0,0]}computeSVec(t){this.scoreBySun.update(12,0)}toJson(){}}class ni{constructor(){this.unit=[],this.Init()}Init(){for(let t=0;t<10;++t)this.unit.push(new hi(this))}toJson(){for(let t=0;t<this.unit.length;++t)this.unit[t].toJson()}}class oi{constructor(){this.vecsSite=[]}SiteInitByVecs(t){this.vecsSite=t}Render(t){}}class li{constructor(){this.vec=[0,0,0]}ComputeVAl(t){for(let i=0;i<t.unit.length;++i){const s=t.unit[i];this.Compute(s)}}Compute(t){t.computeSVec(this.vec)}}var ci=s(11977);class ai extends l{constructor(t){super(t),this.mouse=new ci.h9(0,0),this.gridSystem=void 0,this.xNum=10,this.yNum=10,this.mode=0,this.connectivity=!1,this.distance=0,this.p0=new ci.h9(-1,-1),this.p1=new ci.h9(1,1),this.capture=void 0,this.titleA=void 0,this.titleB=void 0,this.titleC=void 0,this.titleD=void 0,this.titleE=void 0,this.indeCanvas.title="GridOptiA",this.init(),this.InitUI()}InitUI(){const t=document.createElement("div");t.style.position="absolute",t.style.left="650px",t.style.height="400px",t.style.width="200px",t.style.marginTop="10px",t.style.paddingLeft="10px",t.style.background="#aaaaaa",this.titleA=document.createElement("p"),this.titleA.textContent="X axis: 20",t.append(this.titleA);const i=document.createElement("input");i.type="range",i.min="2",i.max="20",i.oninput=()=>{const t=+i.value;this.xNum=t,this.titleA.textContent="X axis: "+t,this.init()},t.append(i),this.titleB=document.createElement("p"),this.titleB.textContent="Y axis: 20",t.append(this.titleB);const s=document.createElement("input");s.type="range",s.min="2",s.max="20",s.oninput=()=>{const t=+s.value;this.yNum=t,this.titleB.textContent="Y axis: "+t,this.init()},t.append(s),this.titleC=document.createElement("p"),this.titleC.textContent="mode: 0",t.append(this.titleC);const e=document.createElement("input");e.type="range",e.min="0",e.max="8",e.defaultValue="0",e.oninput=()=>{const t=+e.value;this.mode=t,this.titleC.textContent="mode: "+t,this.init()},t.append(e),this.titleD=document.createElement("p"),this.titleD.textContent="connectivity: false",t.append(this.titleD);const h=document.createElement("input");h.type="checkbox",h.oninput=()=>{const t=h.checked;this.connectivity=t,this.titleD.textContent="connectivity: "+t,this.init()},t.append(h),this.titleE=document.createElement("p"),this.titleE.textContent="distance: 0",t.append(this.titleE);const n=document.createElement("input");n.type="range",n.min="0",n.max="2000",n.defaultValue="0",n.oninput=()=>{const t=+n.value;this.distance=.001*t,this.titleE.textContent="distance: "+t,this.init()},t.append(n),this.scene.canvas.hostDiv.append(t)}init(){this.gridSystem=ci.O2.GetGrid(this.xNum,this.yNum,this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.mode)}RenderIndependentCanvas(t){t.save(),t.translate(.5*this.width,.5*this.height),t.scale(100,100),t.beginPath(),t.fillStyle="#ededed",t.rect(.5*-this.width,.5*-this.height,this.width,this.height),t.fill(),this.gridSystem.Update(),this.RenderLine(t),this.RenderPoints(t)}RenderLine(t){if(this.connectivity)for(let i=0;i<this.gridSystem.vs.length-1;++i)for(let s=i+1;s<this.gridSystem.vs.length;++s)this.gridSystem.vs[s].Distance(this.gridSystem.vs[i])<this.distance&&ci.gi.LineByVecs(t,this.gridSystem.vs[i],this.gridSystem.vs[s],.002,"rgba(0, 0, 255, 0.9)")}RenderPoints(t){ci.gi.PointByNVec(t,this.gridSystem.v0,.05),ci.gi.PointByNVec(t,this.gridSystem.v1,.05);for(let i=0;i<this.gridSystem.vs.length;++i)ci.gi.PointByNVec(t,this.gridSystem.vs[i],.01);ci.gi.Point(t,this.mouse.x,this.mouse.y,.01),t.restore()}MouseMove(t,i){let s=.01*(t-.5*this.width),e=.01*(i-.5*this.height);this.mouse.x=s,this.mouse.y=e}MouseDown(t,i){this.mouse.Distance(this.p0)<.1?this.capture=this.p0:this.mouse.Distance(this.p1)<.1?this.capture=this.p1:this.capture=void 0}MouseDrag(t,i){let s=.01*(t-.5*this.width),e=.01*(i-.5*this.height);this.mouse.x=s,this.mouse.y=e,this.capture&&(this.capture.x=s,this.capture.y=e,this.init())}}class ri extends l{constructor(t){super(t),this.data=[],this.p=[0,0],this.pixelMap=void 0,this.captureVec=void 0,this.dataHtml=void 0,this.init(),this.InitUI()}InitUI(){const t=document.createElement("div");t.style.position="absolute",t.style.marginLeft="10px";let i=document.createElement("div");if(!i)return;t.append(i),i.style.cssFloat="left",i.innerHTML="x res: ";let s=document.createElement("input");if(s.oninput=()=>{const t=+s.value;this.pixelMap.rx=Math.floor(t)%2===0?Math.floor(t):Math.floor(t)+1,this.pixelMap.Init()},s.innerText="x res: ",s.type="range",s.min="6",s.max="40",s.value="15",s.style.cssFloat="left",s.style.marginRight="25px",t.append(s),i=document.createElement("div"),!i)return;t.append(i),i.style.cssFloat="left",i.innerHTML="y res: ";let e=document.createElement("input");if(e.oninput=()=>{const t=+e.value;this.pixelMap.ry=Math.floor(t)%2===0?Math.floor(t):Math.floor(t)+1,this.pixelMap.Init()},e.type="range",e.min="6",e.max="40",e.value="15",e.style.cssFloat="left",t.append(e),i=document.createElement("div"),!i)return;t.append(i),i.style.cssFloat="left",i.style.marginLeft="10px",i.innerHTML="Mode: ";let h=document.createElement("input");h.oninput=()=>{const t=+h.value;this.pixelMap.mode=t,this.pixelMap.Init()},h.type="range",h.min="0",h.max="5",h.value="0",h.style.cssFloat="left",h.style.width="50px",t.append(h),i=document.createElement("div"),i&&(t.append(i),i.style.cssFloat="left",i.style.marginLeft="10px",i.innerHTML="data : ",this.dataHtml=i,this.scene.implementation.app.divHost.append(t))}init(){this.pixelMap=new di(new e.h9(100,100),new e.h9(400,300));this.data=this.InitData(800,5,this.width-5,25,this.height-5,.5,4)}InitData(t,i,s,h,n,o,l){const c=[];for(let a=0;a<t;++a){const t=i+Math.random()*s,a=h+Math.random()*n,r=o+Math.random()*l;c.push(new e.h9(t,a,r))}return c}MouseDown(t,i){this.captureVec=this.pixelMap.IsHover(t,i)}MouseMove(t,i){if(this.pixelMap.MoveInspection(t,i),this.pixelMap.selPixel){const t=this.pixelMap.selPixel.data.num.toFixed(4);this.dataHtml.innerText="data: "+t}else this.dataHtml.innerText="data: "}MouseDrag(t,i){this.captureVec&&this.pixelMap.DragControlPoint(t,i)}MouseUp(t,i){this.captureVec=void 0}RenderIndependentCanvas(t){for(let i=0;i<this.data.length;++i)ci.gi.PointByNVec(t,this.data[i],this.data[i].z,"rgba(0, 0, 0, 0.5)");this.pixelMap.UpdateData(this.data),this.pixelMap.RenderPixel(t),this.pixelMap.RenderCorner(t),this.pixelMap.RenderSelPixel(t)}}class di{constructor(t,i){this.v0=void 0,this.v1=void 0,this.rx=void 0,this.ry=void 0,this.ddx=void 0,this.ddy=void 0,this.pts=[],this.ptList=[],this.listPixels=[],this.m=void 0,this.t=0,this.mode=0,this.selPixel=void 0,this.v0=t,this.v1=i,this.rx=20,this.ry=20,this.ddx=0,this.ddy=0,this.m=new e.h9(0,0),this.Init()}IsHover(t,i){this.m.x=t,this.m.y=i;let s=this.pts[0][0];return e.h9.Distance(this.m,s)<8?s:(s=this.pts[0][this.pts[0].length-1],e.h9.Distance(this.m,s)<8?s:(s=this.pts[this.pts.length-1][this.pts[0].length-1],e.h9.Distance(this.m,s)<8?s:(s=this.pts[this.pts.length-1][0],e.h9.Distance(this.m,s)<8?s:void 0)))}Move(t,i){this.MoveInspection(t,i)}MoveInspection(t,i){this.m.x=t,this.m.y=i;for(let s=0;s<this.listPixels.length;++s){if(e.h9.IsInsideOfVecs(this.m,this.listPixels[s].recVec))return void(this.selPixel=this.listPixels[s]);this.selPixel=void 0}}DragControlPoint(t,i){this.m.x=t,this.m.y=i;let s=this.pts[0][0];e.h9.Distance(this.m,s)<60&&(this.v0.x=t,this.v0.y=i),s=this.pts[0][this.pts[0].length-1],e.h9.Distance(this.m,s)<60&&(this.v1.x=t,this.v0.y=i),s=this.pts[this.pts.length-1][this.pts[0].length-1],e.h9.Distance(this.m,s)<60&&(this.v1.x=t,this.v1.y=i),s=this.pts[this.pts.length-1][0],e.h9.Distance(this.m,s)<60&&(this.v0.x=t,this.v1.y=i),this.Init()}Init(){switch(this.ddx=(this.v1.x-this.v0.x)/(this.rx-1),this.ddy=(this.v1.y-this.v0.y)/(this.ry-1),this.pts=[],this.ptList=[],this.listPixels=[],this.InitGrid(),this.mode){case 0:this.ComputeRec();break;case 1:this.ComputeTriA();break;case 2:this.ComputeTriB();break;case 3:this.ComputeDia();break;case 4:this.ComputeLShape();break;default:this.ComputeHex()}}UpdateData(t){for(let i=0;i<this.listPixels.length;++i)this.listPixels[i].data.num=0;for(let i=0;i<t.length;++i){const s=t[i];for(let t=0;t<this.listPixels.length;++t)e.h9.IsInsideOfVecs(s,this.listPixels[t].recVec)&&(this.listPixels[t].data.num+=s.z)}}InitGrid(){this.pts=[];for(let t=0;t<this.ry;++t){let i=this.v0.y+t*this.ddy,s=[];for(let t=0;t<this.rx;++t){let h=this.v0.x+t*this.ddx;const n=new e.h9(h,i,0);s.push(n),this.ptList.push(n)}this.pts.push(s)}}ComputeRec(){this.listPixels=[];for(let t=0;t<this.ry;t+=1)for(let i=0;i<this.rx;i+=1)if(i<this.rx-1&&t<this.ry-1){let s=new pi(this);s.recVec.push(this.pts[t][i]),s.recVec.push(this.pts[t][i+1]),s.recVec.push(this.pts[t+1][i+1]),s.recVec.push(this.pts[t+1][i]),this.listPixels.push(s)}}ComputeTriA(){this.listPixels=[];for(let t=0;t<this.ry;t+=1)for(let i=0;i<this.rx;i+=1)if(i<this.rx-1&&t<this.ry-1){let s=new pi(this);s.recVec.push(this.pts[t][i]),s.recVec.push(this.pts[t][i+1]),s.recVec.push(this.pts[t+1][i]),this.listPixels.push(s),s=new pi(this),s.recVec.push(this.pts[t][i+1]),s.recVec.push(this.pts[t+1][i+1]),s.recVec.push(this.pts[t+1][i]),this.listPixels.push(s)}}ComputeDia(){this.listPixels=[];for(let t=0;t<this.ry;t+=1)for(let i=0;i<this.rx;i+=1)if(i<this.rx-2&&t<this.ry-1){let s=new pi(this);s.recVec.push(this.pts[t][i]),s.recVec.push(this.pts[t][i+1]),s.recVec.push(this.pts[t+1][i+2]),s.recVec.push(this.pts[t+1][i+1]),this.listPixels.push(s)}}ComputeLShape(){this.listPixels=[];for(let t=0;t<this.ry;t+=3)for(let i=0;i<this.rx;i+=2)if(i<this.rx-2&&t<this.ry-2){let s=new pi(this);s.recVec.push(this.pts[t][i]),s.recVec.push(this.pts[t][i+2]),s.recVec.push(this.pts[t+1][i+2]),s.recVec.push(this.pts[t+1][i+1]),s.recVec.push(this.pts[t+2][i+1]),s.recVec.push(this.pts[t+2][i]),this.listPixels.push(s),s=new pi(this),s.recVec.push(this.pts[t+2][i]),s.recVec.push(this.pts[t+3][i]),s.recVec.push(this.pts[t+3][i+2]),s.recVec.push(this.pts[t+1][i+2]),s.recVec.push(this.pts[t+1][i+1]),s.recVec.push(this.pts[t+2][i+1]),this.listPixels.push(s)}}ComputeTriB(){this.listPixels=[];for(let t=0;t<this.ry;t+=1)for(let i=0;i<this.rx;i+=1)if(i<this.rx-1&&t<this.ry-1){let s=new pi(this);s.recVec.push(this.pts[t][i]),s.recVec.push(this.pts[t][i+1]),s.recVec.push(this.pts[t+1][i+1]),this.listPixels.push(s),s=new pi(this),s.recVec.push(this.pts[t][i]),s.recVec.push(this.pts[t+1][i+1]),s.recVec.push(this.pts[t+1][i]),this.listPixels.push(s)}}ComputeHex(){this.listPixels=[];let t=!0;for(let i=0;i<this.ry;i+=2){for(let s=0;s<this.rx;s+=2)if(t){if(s%2===0&&s<this.rx-2&&i%2===0&&i<this.ry-2){let t=new pi(this);t.recVec.push(this.pts[i][s+1]),t.recVec.push(this.pts[i+1][s+2]),t.recVec.push(this.pts[i+2][s+2]),t.recVec.push(this.pts[i+3][s+1]),t.recVec.push(this.pts[i+2][s]),t.recVec.push(this.pts[i+1][s]),this.listPixels.push(t)}}else if(s%2===0&&s<this.rx-2&&i%2===0&&i<this.ry-2){let t=new pi(this);t.recVec.push(this.pts[i][s+2]),t.recVec.push(this.pts[i+1][s+3]),t.recVec.push(this.pts[i+2][s+3]),t.recVec.push(this.pts[i+3][s+2]),t.recVec.push(this.pts[i+2][s+1]),t.recVec.push(this.pts[i+1][s+1]),this.listPixels.push(t)}t=!t}}RenderPixel(t){for(let i=0;i<this.listPixels.length;++i)this.listPixels[i].Render(t)}RenderCorner(t){let i=this.pts[0][0];ci.gi.PointByNVecAni(t,i,7,this.t,"rgba(255, 0, 0, 1)"),t.stroke(),i=this.pts[0][this.pts[0].length-1],ci.gi.PointByNVecAni(t,i,7,this.t,"rgba(255, 0, 0, 1)"),t.stroke(),i=this.pts[this.pts.length-1][this.pts[0].length-1],ci.gi.PointByNVecAni(t,i,7,this.t,"rgba(255, 0, 0, 1)"),t.stroke(),i=this.pts[this.pts.length-1][0],ci.gi.PointByNVecAni(t,i,7,this.t,"rgba(255, 0, 0, 1)"),t.stroke(),this.t+=.07}RenderSelPixel(t){if(this.selPixel){t.lineWidth=3,t.strokeStyle="#ffffff",t.beginPath(),t.moveTo(this.selPixel.recVec[0].x,this.selPixel.recVec[0].y);for(let i=1;i<this.selPixel.recVec.length;++i)t.lineTo(this.selPixel.recVec[i].x,this.selPixel.recVec[i].y);t.closePath(),t.stroke()}}}class pi{static GetID(){return pi.ID++}constructor(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new e.h9(0,0,0);this.map=void 0,this.vec=void 0,this.norV=void 0,this.nPix=[],this.recVec=void 0,this.i=-1,this.j=-1,this.k=-1,this.u=-1,this.v=-1,this.id=void 0,this.color=[],this.data=void 0,this.map=t,this.vec=i,this.nPix=[],this.recVec=[],this.i=-1,this.j=-1,this.k=-1,this.id=pi.GetID(),this.data={}}ToString(){return"Pixel"+this.id}Update(){}Render(t){t.lineWidth=1,t.strokeStyle="#000000",t.fillStyle="rgba(255, 0, 255, ".concat(.05*this.data.num," )"),t.beginPath(),t.moveTo(this.recVec[0].x,this.recVec[0].y);for(let i=1;i<this.recVec.length;++i)t.lineTo(this.recVec[i].x,this.recVec[i].y);t.closePath(),t.fill(),t.stroke()}}pi.ID=0;class ui extends l{constructor(t){super(t),this.p=[0,0]}init(){}RenderIndependentCanvas(t){t.fillStyle="#ff0000",t.beginPath(),t.arc(this.p[0],this.p[1],5,0,6.28),t.closePath(),t.fill()}MouseDown(t,i){this.p=[t,i]}}class xi{constructor(t){this.implementation=void 0,this.canvas=void 0,this.activeCommandController=void 0,this.geomeetryCommon=void 0,this.definitions=[],this.implementation=t,this.canvas=t.app.model.graphicsCoreWrapper.canvasWrapper.canvas,this.activeCommandController=new h(this),this.geomeetryCommon=new n(this),this.Init(),this.InitDefinition()}Init(){this.definitions=[]}get width(){return this.implementation.app.model.graphicsCoreWrapper.canvasWrapper.canvas.canvas.width}get height(){return this.implementation.app.model.graphicsCoreWrapper.canvasWrapper.canvas.canvas.height}InitDefinition(){for(let t of this.definitions)t.init(this.implementation.app.model.graphicsCoreWrapper.canvasWrapper.canvas.ctx)}Render(t){}MouseMove(t,i){for(let s of this.definitions)s.MouseMovePre(t,i)}MouseLeftClick(t,i){for(let s of this.definitions)s.MouseLeftClickPre(t,i)}MouseDown(t,i){for(let s of this.definitions)s.MouseDownPre(t,i)}MouseUp(t,i){for(let s of this.definitions)s.MouseUpPre(t,i)}MouseDrag(t,i){for(let s of this.definitions)s.MouseDragPre(t,i)}MouseMiddleClick(t,i){for(let s of this.definitions)s.MouseMiddleClickPre(t,i)}MouseRightClick(t,i){for(let s of this.definitions)s.MouseRightClickPre(t,i)}MouseDoubleClick(t,i){for(let s of this.definitions)s.MouseDoubleClickPre(t,i)}MouseWheel(t,i,s){for(let e of this.definitions)e.MouseWheelPre(t,i,s)}Dispose(){this.definitions=[]}LoadDefinition(t){if("Blank"===t){new ui(this).Dummy()}if("BallBounce"===t){new c(this).Dummy()}if("BallBounceClass"===t){new a(this).Dummy()}if("CircleGrid"===t){new d(this).Dummy()}if("CircleGridAttractors1"===t){new p(this).Dummy()}if("CircleGridAttractors2"===t){new u(this).Dummy()}if("Line"===t){new x(this).Dummy()}if("Line2"===t){new f(this).Dummy()}if("BoidSystem01"===t){new M(this).Dummy()}if("BoidSystem02"===t){new S(this).Dummy()}if("BoidSystem03"===t){new R(this).Dummy()}if("BoidSystem04"===t){new V(this).Dummy()}if("DynamicSystem01"===t){new E(this).Dummy()}if("DynamicSystem02"===t){new L(this).Dummy()}if("DynamicSystem03"===t){new N(this).Dummy()}if("MatterSandbox"===t){new O(this).Dummy()}if("OOP01"===t){new G(this).Dummy()}if("FireExit"===t){new Vt(this).Dummy()}if("BaconsLaw"===t){new bt(this).Dummy()}if("Cabbage"===t){new wt(this).Dummy()}if("NumOfArea"===t){new zt(this).Dummy()}if("ComputerFinder"===t){new Lt(this).Dummy()}if("MazeExit"===t){new mt(this).Dummy()}if("Koze"===t){new Ut(this).Dummy()}if("UnitMoving"===t){new Ot(this).Dummy()}if("Tile"===t){new Yt(this).Dummy()}if("OKVIRI"===t){new Qt(this).Dummy()}if("AlgorithmDFSBFS"===t){new Jt(this).Dummy()}if("GridOptiA"===t){new ai(this).Dummy()}if("FluidSimulation"===t){new Z(this).Dummy()}if("PerlinHeatmap"===t){new lt(this).Dummy()}if("ColorPicker"===t){new gt(this).Dummy()}if("temp"===t){new mt(this).Dummy()}if("temp"===t){new mt(this).Dummy()}if("temp"===t){new mt(this).Dummy()}if("temp"===t){new mt(this).Dummy()}if("Building"===t){new si(this).Dummy()}if("customBinSystemA"===t){new ri(this).Dummy()}}}},43523:(t,i,s)=>{s.d(i,{D:()=>u});var e=s(11977),h=s(18279),n=s(81114),o=s(4244),l=s(92060),c=s(96349),a=s(60198),r=s(30266),d=s(53583),p=s(56745);class u extends o.J{constructor(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:300,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:170,n=arguments.length>5&&void 0!==arguments[5]&&arguments[5];super(t),this.independentPanelWrapper=void 0,this.divInput=void 0,this.btnClose=void 0,this.btnMini=void 0,this.btnHam=void 0,this.btnResize=void 0,this.bodyDiv=void 0,this.subMenu=void 0,this.subs=[],this._content=void 0,this.canvas=void 0,this.ctx=void 0,this.isActive=!0,this.independentPanelWrapper=t,this.title="njslabSandbox V3",this.width=e,this.height=h,0===i&&0===s?(this.vec.x=.5*t.width-.5*this.width,this.vec.y=.5*t.height-.5*this.height):(this.vec.x=i,this.vec.y=s),this.filletR=7,this.InitTop(),n&&(this.bodyDiv=new d.k(this,this.vec.x,this.vec.y+this.HeadHeight,this.width,this.height-this.HeadHeight)),this.InitCanvas(this.bodyDiv.div)}get IsMinimized(){return this.isMinimized}set IsMinimized(t){this.isMinimized=t,this.btnResize.isHidden=t,this.bodyDiv&&this.bodyDiv.Hide(t)}get Width(){return this.width}set Width(t){let i=t-this.width;this.width=t,this.btnHam.vec.x+=i,this.subMenu.vec.x+=i,this.bodyDiv&&(this.bodyDiv.Width=t)}get Height(){return this.height}set Height(t){this.height=t,this.bodyDiv&&(this.bodyDiv.Height=t)}get content(){return this._content}set content(t){this._content=t,this.bodyDiv&&(this.bodyDiv.content=t)}get HasSubMenu(){return this.hasSubMenu}set HasSubMenu(t){this.hasSubMenu=t,this.subMenu.IsHidden=!t}InitTop(){this.btnClose=new l.E(this,this.vec.x,this.vec.y),this.btnMini=new c.$(this,this.vec.x+25,this.vec.y),this.btnHam=new a.g(this,this.vec.x-25+this.width,this.vec.y),this.btnResize=new r.C(this,this.vec.x+this.width-10,this.vec.y+this.height-10,10,10),this.subMenu=new p.q(this),this.subs.push(this.btnClose,this.btnMini,this.btnHam)}Translate(t){if(!this.isMoveable)return;let i=t.x-t.preX,s=t.y-t.preY;this.vec.x+=i,this.vec.y+=s;for(let e=0;e<this.boundarVecs.length;++e)this.boundarVecs[e].x+=i,this.boundarVecs[e].y+=s;for(let e=0;e<this.subs.length;++e)this.subs[e].Translate(t);this.btnResize.vec.x+=i,this.btnResize.vec.y+=s,this.subMenu.Translate(i,s),this.bodyDiv&&this.bodyDiv.Translate(i,s)}Remove(){this.RemovePost();for(let t=0;t<this.subs.length;++t)this.subs[t].Remove();this.bodyDiv&&this.bodyDiv.Remove(),this.btnResize.Remove(),this.independentPanelWrapper.indePanelRender.Remove(this)}RenderPost(t){let i;this.ComputeBoundary(),i=h.mK.HexToCanvasColor(n.X.theme.mainMenuNormal,this.transparent),this.isMinimized||n.X.RoundedRectFillWithColorMainMenu(t,this.title,this.boundarVecs,this.filletR,0,this.isOver,this.isSelected,i),n.X.TopRoundedRectFill(t,this.title,e.h9.GetBoundaryByVecWidthHeight(this.vec,this.width,this.HeadHeight),this.filletR,0,this.isOver,this.isSelected,this.theme.colSelectedBG,!1),this.RenderHeadTitle(t),this.isMinimized||this.RenderBodyContent(t),this.hasSubMenu&&this.subMenu.RenderPost(t),this.RenderBtnHorizontal(t)}RenderBtnHorizontal(t){}RenderHeadTitle(t){t.save(),t.fillStyle="#ffffff",t.textBaseline="top",t.textAlign="center",t.font="100 12px Arial",t.shadowBlur=0,t.shadowOffsetY=0,t.shadowOffsetX=0,t.fillText(this.title,this.vec.x+.5*this.width,this.vec.y+.5*this.HeadHeight-7),t.restore()}RenderBodyContent(t){}RemovePost(){this.isActive=!1}InitCanvas(t){this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.zIndex="0",t.appendChild(this.canvas),this.canvas.id="NCanvasRenderer",this.canvas.className="njslab-web-core-canvas-renderer",this.canvas.style.pointerEvents="none",this.ctx=this.canvas.getContext("2d"),this.canvas.width=t.clientWidth,this.canvas.height=t.clientHeight,this.btnResize.ResizePropagation=(t,i)=>{this.canvas.width=t,this.canvas.height=i},this.LoopIndependentCanvas(this.ctx)}LoopIndependentCanvas(t){this.isActive&&(t.clearRect(0,0,this.canvas.width,this.canvas.height),requestAnimationFrame((()=>{this.LoopIndependentCanvas(t)})),this.RenderIndependentCanvas(t))}RenderIndependentCanvas(t){console.log("implementation needed")}ResizeCanvas(t,i){this.canvas.width=t,this.canvas.height=i}}}}]);
//# sourceMappingURL=1202.90f699e1.chunk.js.map