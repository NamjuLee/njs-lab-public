"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[5900],{61769:function(t,i,e){e.r(i),e.d(i,{Renderer:function(){return u},Solution:function(){return o},pointOnSegment2D:function(){return f}});var s=e(60136),n=e(29388),h=e(15671),r=e(43144),a=e(26943),o=function(){function t(i){(0,h.Z)(this,t),this.divHost=void 0,this.renderer=void 0,this.divHost=i,this.divHost.style.display="flex",this.divHost.style.alignItems="center";var e=document.createElement("div");e.style.marginLeft="auto",e.style.marginRight="auto",e.style.backgroundColor="#555",e.style.width="1000px",e.style.height="600px",this.divHost.appendChild(e),this.renderer=new u(e)}return(0,r.Z)(t,[{key:"destroy",value:function(){for(this.renderer.destroy();this.divHost.lastElementChild;)this.divHost.removeChild(this.divHost.lastElementChild)}}]),t}(),u=function(t){(0,s.Z)(e,t);var i=(0,n.Z)(e);function e(t){var s;return(0,h.Z)(this,e),(s=i.call(this,t)).walls=[],s.sun=void 0,s.t=0,s.canvas.style.position="relative",s.canvas.style.width="100%",s.canvas.style.height="100%",s.sun=new y(new a.P(300,100,0)),s.walls.push(new c(100,200,400,500)),s.walls.push(new c(100,500,500,600)),s.walls.push(new c(500,100,400,400)),s.start(),s}return(0,r.Z)(e,[{key:"mouseMove",value:function(t,i){this.sun.updateDirection(t,i)}},{key:"render",value:function(t){this.t+=.01,this.update(t),this.walls.forEach((function(i){i.draw(t)})),this.sun.draw(t,this.t)}},{key:"update",value:function(t){for(var i=this.sun.getSunLine(),e=0;e<this.walls.length;++e){var s=x(i.p0.x,i.p0.y,i.p1.x,i.p1.y,this.walls[e].p0.x,this.walls[e].p0.y,this.walls[e].p1.x,this.walls[e].p1.y);if(void 0!==s){var n=p(this.sun.rayVec,this.walls[e].nVec);t.beginPath(),t.moveTo(s.x,s.y),t.lineTo(s.x+n.x,s.y+n.y),t.closePath(),t.stroke()}}for(var h=l(i,this.walls),r=0;r<h.length;++r){var a=h[r];t.beginPath(),t.arc(a.x,a.y,5,0,2*Math.PI),t.closePath(),t.stroke()}}}]),e}(a.bb),l=function(t,i){for(var e,s=[],n=1e4,h=0;h<i.length;++h){var r=i[h],a=x(t.p0.x,t.p0.y,t.p1.x,t.p1.y,r.p0.x,r.p0.y,r.p1.x,r.p1.y);if(void 0!==a){var o=v(t.p0.x,t.p0.y,0,a.x,a.y,0);o<n&&(e=a,r,n=o)}}return void 0!==e&&s.push(e),s},v=function(t,i,e,s,n,h){return Math.sqrt((t-s)*(t-s)+(i-n)*(i-n)+(e-h)*(e-h))},y=function(){function t(i){(0,h.Z)(this,t),this.v=void 0,this.target=new a.P(0,0,0),this.rayVec=new a.P(0,0,0),this.v=i}return(0,r.Z)(t,[{key:"draw",value:function(t,i){t.lineWidth=.1,t.beginPath(),t.moveTo(this.v.x,this.v.y),t.lineTo(this.target.x,this.target.y),t.stroke(),t.lineWidth=.5,t.beginPath(),t.moveTo(this.v.x,this.v.y),t.lineTo(this.v.x+50*this.rayVec.x,this.v.y+50*this.rayVec.y),t.stroke(),t.fillStyle="#FDB813",t.beginPath(),t.arc(this.v.x,this.v.y,Math.sin(9*i)+9,0,2*Math.PI),t.fill()}},{key:"updateDirection",value:function(t,i){this.target.x=t,this.target.y=i,this.rayVec.x=this.v.x+this.target.x,this.rayVec.y=this.v.y+this.target.y,this.rayVec.x=this.target.x-this.v.x,this.rayVec.y=this.target.y-this.v.y}},{key:"getSunLine",value:function(){return{p0:this.v,p1:new a.P(this.v.x+1e3*this.rayVec.x,this.v.y+1e3*this.rayVec.y)}}}]),t}(),c=function(){function t(i,e,s,n){(0,h.Z)(this,t),this.p0=void 0,this.p1=void 0,this.nVec=void 0,this.p0=new a.P(i,e),this.p1=new a.P(s,n),this.computeNormal()}return(0,r.Z)(t,[{key:"draw",value:function(t){t.lineWidth=3,t.beginPath(),t.moveTo(this.p0.x,this.p0.y),t.lineTo(this.p1.x,this.p1.y),t.stroke()}},{key:"computeNormal",value:function(){var t=new a.P(this.p1.x-this.p0.x,this.p1.y-this.p0.y,0);this.nVec=(0,a.ir)(t,new a.P(0,0,1)),this.nVec=(0,a.Fv)(this.nVec)}}]),t}(),p=function(t,i){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=d(t,i);return new a.P((2*s*i.x-t.x)*-e,(2*s*i.y-t.y)*-e,(2*s*i.z-t.z)*-e)},d=function(t,i){return t.x*i.x+t.y*i.y+t.z*i.z},f=function(t,i,e,s,n,h){if(e!==n){if(e<=t&&t<=n)return!0;if(e>=t&&t>=n)return!0}else{if(s<=i&&i<=h)return!0;if(s>=i&&i>=h)return!0}return!1},x=function(t,i,e,s,n,h,r,a){var o=(a-h)*(e-t)-(r-n)*(s-i),u=(r-n)*(i-h)-(a-h)*(t-n),l=(e-t)*(i-h)-(s-i)*(t-n);if(0!==o){var v=u/o,y=l/o;return v>=0&&v<=1&&y>=0&&y<=1?{x:t+v*(e-t),y:i+v*(s-i)}:void 0}}}}]);
//# sourceMappingURL=5900.0fae9ca7.chunk.js.map