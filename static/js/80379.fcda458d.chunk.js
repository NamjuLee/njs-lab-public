"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[80379],{80379:(e,t,i)=>{i.r(t),i.d(t,{AppFace:()=>a});var n=i(65812),s=i(19559);class a{static Init(e){new a(e)}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";this.canvasSD=void 0,this.implementation=void 0,this.host=void 0,this.divText=void 0;const t=document.getElementById(e);t&&(this.host=t),this.InitHTML(),this.init()}async init(){const e=document.createElement("video");this.host.append(e),e.id="video";const t=document.createElement("canvas");this.host.append(t),await v(t)}InitHTML(){const e=document.createElement("button");e.style.width="100px",e.style.height="20px",e.style.marginLeft="20px",e.style.zIndex="5",e.name="Clear",e.innerText="Clear",e.value="Clear",e.onclick=()=>{console.log(this),this.canvasSD.Clear()},this.host.appendChild(e),this.divText=document.createElement("div"),this.divText.id="classText",this.divText.style.zIndex="5",this.divText.innerText="class: ",this.divText.style.marginLeft="20px",this.host.appendChild(this.divText)}Init(e){console.log("this is init...")}Clear(){this.canvasSD.Clear()}}let o;const d=function(){const e=/Android/i.test(navigator.userAgent),t=/iPhone|iPad|iPod/i.test(navigator.userAgent);return e||t}();let c,l,h,r;const v=async e=>{console.log(n.setBackend),await n.setBackend("webgl"),await g(),o.play(),c=o.videoWidth,l=o.videoHeight,o.width=c,o.height=l,e.width=c,e.height=l,e.style.width=c+"px",e.style.height=l+"px",h=e.getContext("2d"),h.translate(e.width,0),h.scale(-1,1),h.fillStyle="#32EEDB",h.strokeStyle="#32EEDB",h.lineWidth=.5,r=await s.z({maxFaces:1e3}),console.log(r),m()},g=async()=>{o=document.getElementById("video");const e=await navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user",width:d?void 0:500,height:d?void 0:500}});return o.srcObject=e,new Promise((e=>{o.onloadedmetadata=()=>{e(o)}}))},m=async()=>{console.log("ren");const e=await r.estimateFaces(o);console.log(e[0].faceInViewConfidence),console.log("rendering"),requestAnimationFrame(m)}}}]);
//# sourceMappingURL=80379.fcda458d.chunk.js.map