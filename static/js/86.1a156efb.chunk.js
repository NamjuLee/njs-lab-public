"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[86],{10086:function(t,i,e){e.r(i),e.d(i,{execution:function(){return u}});var s=e(53304);class r{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.weights=[],this.bias=void 0,this.degree=3,this.leraningRate=.02,this.optimizer=void 0,this.degree=t;for(let i=0;i<5;++i){const t=s.VD$(s.iD$(2*Math.random()-1));this.weights.push(t)}this.bias=s.VD$(s.iD$(2*Math.random()-1)),this.optimizer=s.p_j.adam(this.leraningRate)}predict1d(t){return t.mul(this.weights[0]).add(this.bias)}predict2d(t){return t.square().mul(this.weights[1]).add(t.mul(this.weights[0])).add(this.bias)}predict3d(t){return t.pow(s.iD$(3)).mul(this.weights[2]).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict4d(t){return t.pow(s.iD$(4)).mul(this.weights[3]).add(t.pow(s.iD$(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predict5d(t){return t.pow(s.iD$(5)).mul(this.weights[4]).add(t.pow(s.iD$(4)).mul(this.weights[3])).add(t.pow(s.iD$(3)).mul(this.weights[2])).add(t.square().mul(this.weights[1])).add(t.mul(this.weights[0])).add(this.bias)}predictResult(t){return 5===this.degree?this.predict5d(t):4===this.degree?this.predict4d(t):3===this.degree?this.predict3d(t):2===this.degree?this.predict2d(t):(this.degree,this.predict1d(t))}loss(t,i){return t.sub(i).square().mean()}async predict(t){const i=s.lub((()=>this.predictResult(s.RRF(t))));let e=i.dataSync();return i.dispose(),e}train(t,i){s.lub((()=>{const e=s.RRF(t),r=s.RRF(i);this.optimizer.minimize((()=>this.loss(this.predictResult(e),r)))}))}}class h{constructor(){this.a=1,this.bias=0}predict(t){const i=[];for(let e=0;e<t.length;++e)i.push(this.predictByNum(t[e]));return i}predictByNum(t){return this.a*t+this.bias}fit(t,i){let e=0,s=0;for(let n=0;n<t.length;++n)e+=t[n],s+=i[n];let r=e/t.length,h=s/t.length,d=0,a=0;for(let n=0;n<t.length;++n)d+=(t[n]-r)*(i[n]-h),a+=(t[n]-r)*(t[n]-r);this.a=d/a,this.bias=h-this.a*r}}class d{constructor(){this.learningRate=.02,this.error=Number.MAX_SAFE_INTEGER,this.weight=1,this.bias=0}predict(t){const i=[];for(let e=0;e<t.length;++e)i.push(this.predictByNum(t[e]));return i}predictByNum(t){return this.weight*t+this.bias}train(t,i){for(let e=0;e<t.length;++e){let s=t[e],r=i[e],h=this.weight*s+this.bias;this.error=r-h,this.weight=this.weight+this.error*s*this.learningRate,this.bias=this.bias+this.error*this.learningRate}}}const a=t=>{let i=[],e=n(t);for(let s of t)i.push((s-e[0])/(e[1]-e[0]));return i},n=t=>{let i=Number.MAX_VALUE,e=Number.MIN_VALUE;for(let s of t)i>s&&(i=s),e<s&&(e=s);return[i,e]},u=async t=>{const i=a([1,3,5]),e=a([10,11.5,12]),s=a([1,3,5]);(new h).fit(i,e);const n=new d;for(let r=0;r<1e4;++r)if(n.train(i,e),r%1e3===0){await n.predict(s)}const u=new r(1);for(let r=0;r<2e3;++r)if(u.train(i,e),r%400===0){await u.predict(s)}await u.predict(s)}}}]);
//# sourceMappingURL=86.1a156efb.chunk.js.map