{"version":3,"file":"static/js/81436.c2c28cd3.chunk.js","mappings":"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","sources":["njslab/app-legacy/Implementation/Demos/Demo500ImageViewer/Implementation/index.ts","njslab/app-legacy/Implementation/Demos/Demo500ImageViewer/index.ts"],"sourcesContent":["import { NVector3 } from '../../../../NJSCore/Core/CoreGeometry/NGeometry';\r\n\r\nexport class Implementation {\r\n    divHost: HTMLElement;\r\n    div: HTMLElement;\r\n    ctx: CanvasRenderingContext2D;\r\n    rect: Rect;\r\n    constructor(id: string) {\r\n        const divHost = document.getElementById(id);\r\n        if (divHost) {\r\n            this.divHost = divHost;\r\n            this.divHost.style.backgroundColor = '#999999';\r\n            // this.divHost.style.pointerEvents = 'none';\r\n            this.InitApp();\r\n        }\r\n\r\n    }\r\n    public InitApp() {\r\n        this.rect = new Rect();\r\n\r\n        let btn = document.createElement('button');\r\n        btn.textContent = 'Capture';\r\n        this.divHost.append(btn);\r\n        btn.onclick = () => {\r\n            vecHistory.push(new NVector3(posX, posY));\r\n            console.log(vecHistory);\r\n        };\r\n        btn = document.createElement('button');\r\n        btn.textContent = 'Play';\r\n        this.divHost.append(btn);\r\n        btn.onclick = () => {\r\n            console.log('play.....');\r\n\r\n        };\r\n\r\n\r\n        const div = document.createElement('div');\r\n        div.style.width = '400px';\r\n        div.style.height = '400px';\r\n        div.style.margin = '50px';\r\n        div.style.overflow = 'hidden';\r\n        div.style.backgroundColor = '#ffffff';\r\n        // div.style.pointerEvents = 'none';\r\n        //   -webkit-user-select: none;\r\n        //   -khtml-user-select: none;\r\n        //   -moz-user-select: none;\r\n        //   -o-user-select: none;\r\n        //   user-select: none;\r\n\r\n        this.divHost.append(div);\r\n\r\n\r\n        const image = new Image();\r\n        image.src = 'https://raw.githubusercontent.com/NamjuLee/data/master/img/bg/zoom-James-River-Kayaking.jpg';\r\n        image.style.pointerEvents = 'none';\r\n        image.onload = () => {\r\n\r\n            div.style.width = image.width + 'px';\r\n            div.style.height = image.height + 'px';\r\n            // div.style.pointerEvents = 'none';\r\n\r\n            this.InitCanvas(image);\r\n\r\n            div.append(image);\r\n        };\r\n\r\n        // image.style.an =\r\n        // `keyframes important1 {\r\n        //     from { margin-top: 50px; }\r\n        //     50%  { margin-top: 150px !important; } /* ignored */\r\n        //     to   { margin-top: 100px; }\r\n        //   }`\r\n\r\n        let down = false;\r\n\r\n        let scale = 1;\r\n        let angle = 0;\r\n        let preX = 0;\r\n        let preY = 0;\r\n\r\n        let posX = 0;\r\n        let posY = 0;\r\n\r\n        let vecHistory: NVector3[] = [];\r\n\r\n        div.addEventListener('mousedown', e => {\r\n            down = true;\r\n            console.log('down', e);\r\n            preX = e.x;\r\n            preY = e.y;\r\n        });\r\n        div.addEventListener('mousemove', e => {\r\n            if (down) {\r\n\r\n                const x = preX - e.x;\r\n                const y = preY - e.y;\r\n\r\n                posX += -x;\r\n                posY += -y;\r\n\r\n                let value = [\r\n                    'translate(' + posX + 'px, ' + posY + 'px)',\r\n                    'scale3d(' + scale + ', ' + scale + ', 1)',\r\n                    'rotate(' +  angle + 'deg)'\r\n                ];\r\n\r\n                this.UpdateValue(image, value);\r\n\r\n                preX = e.x;\r\n                preY = e.y;\r\n\r\n                this.rect.render(this.ctx);\r\n            }\r\n        });\r\n        div.addEventListener('mouseup', e => {\r\n            console.log('up', e);\r\n            down = false;\r\n        });\r\n\r\n        div.addEventListener('wheel', e => {\r\n            const v = -e.deltaY * 0.001;\r\n            scale += v;\r\n            console.log( e.deltaY * 0.01 );\r\n\r\n            let value = [\r\n                'translate(' + posX + 'px, ' + posY + 'px)',\r\n                'scale3d(' + scale + ', ' + scale + ', 1)',\r\n                'rotate(' +  angle + 'deg)'\r\n            ];\r\n            this.UpdateValue(image, value);\r\n        });\r\n        this.div = div;\r\n    }\r\n    public InitCanvas(image: HTMLImageElement) {\r\n\r\n        const canvas = document.createElement('canvas');\r\n        canvas.style.width = image.width + 'px';\r\n        canvas.style.height = image.height + 'px';\r\n        canvas.style.zIndex = '10';\r\n        canvas.style.position = 'absolute';\r\n\r\n        this.div.append(canvas);\r\n\r\n        this.ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\r\n\r\n        this.rect.render(this.ctx);\r\n\r\n    }\r\n    UpdateValue(image: HTMLImageElement, value: string[]) {\r\n        let valueJoined = value.join(' ');\r\n        image.style.webkitTransform = valueJoined;\r\n        // image.style.mozTransform = valueJoined;\r\n        image.style.transform = valueJoined;\r\n    }\r\n\r\n    Render() {\r\n        // TODO\r\n    }\r\n\r\n\r\n}\r\n\r\nconst distance = (x0: number, y0: number, x1: number, y1: number) => {\r\n    return Math.sqrt((x0 - x1) * (x0 - x1) + (y0 - y1) * (y0 - y1));\r\n};\r\n\r\nclass Rect {\r\n    x = 100;\r\n    y = 50;\r\n    width = 50;\r\n    height = 50;\r\n\r\n    r = 50;\r\n    isHover = false;\r\n    constructor() {\r\n        // TODO\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D) {\r\n        // ctx.globalCompositeOperation = 'xor';\r\n        ctx.fillStyle = 'rgba(255, 0, 0, 1)';\r\n        ctx.beginPath();\r\n        ctx.rect(0, 0, ctx.canvas.width, this.y);\r\n        ctx.rect(0, this.y + this.height, ctx.canvas.width, ctx.canvas.height);\r\n        ctx.rect(0, 0, this.x, ctx.canvas.height);\r\n        ctx.rect(this.x + this.width , 0, ctx.canvas.width, ctx.canvas.height);\r\n        ctx.fill();\r\n        // ctx.globalCompositeOperation = 'source-over';\r\n    }\r\n    public IsHover(x: number, y: number) {\r\n            if (distance(x, y, this.x, this.y) < this.r) {\r\n                this.isHover = true;\r\n                return true;\r\n            }\r\n        this.isHover = false;\r\n        return false;\r\n    }\r\n}","import { Implementation } from './Implementation';\r\nexport class ImageEditor {\r\n    implementation: Implementation;\r\n    static Init(id: string) {\r\n        const n = new ImageEditor(id);\r\n        n.Dummy();\r\n    }\r\n    constructor(id: string = 'SandBox') {\r\n        this.implementation = new Implementation(id);\r\n    }\r\n    public Dummy() {\r\n        //\r\n    }\r\n}\r\n"],"names":["Implementation","constructor","id","divHost","div","ctx","rect","document","getElementById","this","style","backgroundColor","InitApp","Rect","btn","createElement","textContent","append","onclick","vecHistory","push","NVector3","posX","posY","console","log","width","height","margin","overflow","image","Image","src","pointerEvents","onload","InitCanvas","down","scale","preX","preY","addEventListener","e","x","y","value","UpdateValue","render","v","deltaY","canvas","zIndex","position","getContext","valueJoined","join","webkitTransform","transform","Render","r","isHover","fillStyle","beginPath","fill","IsHover","x0","y0","x1","y1","Math","sqrt","ImageEditor","static","Dummy","implementation"],"sourceRoot":""}