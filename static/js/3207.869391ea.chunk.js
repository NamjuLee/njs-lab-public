"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[3207],{85610:(t,e,i)=>{i.d(e,{h:()=>s,z:()=>n});var r=i(39880);const n=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[1,1,1];const s=r.Ue(),o=r.Ue(),a=r.Ue(),h=r.Ue(),u=r.Ue();r.vc(h,e),r.aC(s,i[0]),r.gT(o,i[1]),r.QO(a,i[2]),r.xJ(u,n),r.Jp(t,s,u),r.Jp(t,o,t),r.Jp(t,a,t),r.Jp(t,h,t)},s=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[2,2,4],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,0],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,1,0];const s=r.Ue(),o=r.Ue(),a=r.Ue();r.G3(o,2*Math.PI/5,t,.1,100),r.zB(s,e,i,n),r.Jp(a,o,s);return{viewMatrix:s,projectionMatrix:o,viewProjectionMatrix:a,cameraOption:{eye:e,center:i,zoomMax:100,zoomSpeed:2}}}},33207:(t,e,i)=>{i.r(e),i.d(e,{Solution:()=>u});var r=i(88679),n=i(39880);const s=function(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_DST;const r=t.createBuffer({size:e.byteLength,usage:i,mappedAtCreation:!0});return new Float32Array(r.getMappedRange()).set(e),r.unmap(),r};var o=i(85610);const a=i(27089),h="\n// vertex shader\n\nstruct Uniforms {\n    mvpMatrix : mat4x4<f32>,\n};\n@binding(0) @group(0) var<uniform> uniforms : Uniforms;\n\nstruct Output {\n    @builtin(position) Position : vec4<f32>,\n    @location(0) vColor : vec4<f32>,\n};\n\n@vertex\nfn vs_main(@location(0) pos: vec4<f32>, @location(1) color: vec4<f32>) -> Output {\n    var output: Output;\n    output.Position = uniforms.mvpMatrix * pos;\n    output.vColor = color;\n    return output;\n}\n\n// fragment shader\n\n @fragment\nfn fs_main(@location(0) vColor: vec4<f32>) -> @location(0) vec4<f32> {\n    return vColor;\n}\n";class u{constructor(t){this.divHost=void 0,this.canvas=void 0,this.ctx=void 0,this.device=void 0,this.format=void 0,this.size=void 0,this.pipeline=void 0,this.isAnimation=!0,this.camera=void 0,this.uniformBuffer=void 0,this.uniformBindGroup=void 0,this.textureView=void 0,this.depthTexture=void 0,this.renderPassDescription=void 0,this.numberOfVertices=void 0,this.vertexBuffer=void 0,this.colorBuffer=void 0,this.rotation=r.al(0,0,0),this.requestAni=void 0,this.loop=()=>{this.isAnimation?(this.rotation[0]+=.01,this.rotation[1]+=.01,this.rotation[2]+=.01):this.rotation=[0,0,0],this.drawing(),this.isAnimation&&(this.requestAni=requestAnimationFrame(this.loop))},this.divHost=document.getElementById(t),this.canvas=document.createElement("canvas"),this.divHost.appendChild(this.canvas),this.initWebGPU()}async initWebGPU(){if(!navigator.gpu)throw new Error("Not Support WebGPU");const t=await navigator.gpu.requestAdapter({powerPreference:"high-performance"});if(!t)throw new Error("No Adapter Found");const e=await t.requestDevice();this.ctx=this.canvas.getContext("webgpu");const i=navigator.gpu.getPreferredCanvasFormat?navigator.gpu.getPreferredCanvasFormat():this.ctx.getPreferredFormat(t);window.devicePixelRatio;this.canvas.width=this.divHost.clientWidth,this.canvas.height=this.divHost.clientHeight,this.ctx.configure({device:e,format:i,alphaMode:"opaque"}),this.size={width:this.canvas.width,height:this.canvas.height},this.device=e,this.format=i,this.camera=new c(this),this.initPipeline(this.device,this.format)}async initPipeline(t,e){const i={positions:new Float32Array([-1,-1,1,1,-1,1,1,1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,1,-1,-1,-1,-1,-1,-1,1,-1,1,1,1,1,1,1,1,-1,1,1,-1,-1,1,-1,-1,1,1,-1,-1,1,-1,-1,-1,1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1]),colors:new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0,0,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1])};this.numberOfVertices=i.positions.length/3,this.vertexBuffer=s(t,i.positions),this.colorBuffer=s(t,i.colors),this.pipeline=t.createRenderPipeline({layout:"auto",vertex:{module:t.createShaderModule({code:h}),entryPoint:"vs_main",buffers:[{arrayStride:12,attributes:[{shaderLocation:0,format:"float32x3",offset:0}]},{arrayStride:12,attributes:[{shaderLocation:1,format:"float32x3",offset:0}]}]},fragment:{module:t.createShaderModule({code:h}),entryPoint:"fs_main",targets:[{format:this.format}]},primitive:{topology:"triangle-list",cullMode:"back"},depthStencil:{format:"depth24plus",depthWriteEnabled:!0,depthCompare:"less"}}),this.uniformBuffer=t.createBuffer({size:64,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST}),this.uniformBindGroup=t.createBindGroup({layout:this.pipeline.getBindGroupLayout(0),entries:[{binding:0,resource:{buffer:this.uniformBuffer,offset:0,size:64}}]}),this.textureView=this.ctx.getCurrentTexture().createView(),this.depthTexture=t.createTexture({size:[this.canvas.width,this.canvas.height,1],format:"depth24plus",usage:GPUTextureUsage.RENDER_ATTACHMENT}),this.renderPassDescription={colorAttachments:[{view:this.textureView,clearValue:{r:0,g:0,b:0,a:1},loadValue:{r:0,g:0,b:0,a:1},loadOp:"clear",storeOp:"store"}],depthStencilAttachment:{view:this.depthTexture.createView(),depthClearValue:1,depthLoadOp:"clear",depthStoreOp:"store"}},this.requestAni=requestAnimationFrame(this.loop)}drawing(){this.camera.update(),this.device.queue.writeBuffer(this.uniformBuffer,0,this.camera.mvpMatrix),this.textureView=this.ctx.getCurrentTexture().createView(),this.renderPassDescription.colorAttachments[0].view=this.textureView;const t=this.device.createCommandEncoder(),e=t.beginRenderPass(this.renderPassDescription);e.setPipeline(this.pipeline),e.setVertexBuffer(0,this.vertexBuffer),e.setVertexBuffer(1,this.colorBuffer),e.setBindGroup(0,this.uniformBindGroup),e.draw(this.numberOfVertices),e.end(),this.device.queue.submit([t.finish()])}destroy(){for(this.device.destroy(),cancelAnimationFrame(this.requestAni);this.divHost.lastElementChild;)this.divHost.removeChild(this.divHost.lastElementChild)}}class c{constructor(t){this.solution=void 0,this.canvas=void 0,this.modelMatrix=void 0,this.mvpMatrix=void 0,this.vMatrix=void 0,this.vpMatrix=void 0,this.rotation=r.al(0,0,0),this.translation=r.al(0,0,0),this.camera=void 0,this.vp=void 0,this.solution=t,this.canvas=t.canvas,this.modelMatrix=n.Ue(),this.mvpMatrix=n.Ue(),this.vMatrix=n.Ue(),this.vpMatrix=n.Ue(),this.vp=(0,o.h)(this.canvas.width/this.canvas.height),this.vpMatrix=this.vp.viewProjectionMatrix,this.camera=a(this.canvas,this.vp.cameraOption)}update(){const t=this.vp.projectionMatrix;this.vMatrix=this.camera.matrix,n.Jp(this.vpMatrix,t,this.vMatrix),(0,o.z)(this.modelMatrix,this.translation,this.rotation),n.Jp(this.mvpMatrix,this.vpMatrix,this.modelMatrix)}}},88679:(t,e,i)=>{i.d(e,{$X:()=>a,EU:()=>x,Fv:()=>c,IH:()=>o,Ue:()=>n,VC:()=>p,al:()=>s,fF:()=>d,jI:()=>g,kC:()=>v,kK:()=>f,lM:()=>l,lu:()=>M,od:()=>h,tk:()=>u,uD:()=>m});var r=i(50907);function n(){var t=new r.WT(3);return r.WT!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function s(t,e,i){var n=new r.WT(3);return n[0]=t,n[1]=e,n[2]=i,n}function o(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t}function a(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t}function h(t,e,i,r){return t[0]=e[0]+i[0]*r,t[1]=e[1]+i[1]*r,t[2]=e[2]+i[2]*r,t}function u(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function c(t,e){var i=e[0],r=e[1],n=e[2],s=i*i+r*r+n*n;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function v(t,e,i){var r=e[0],n=e[1],s=e[2],o=i[0],a=i[1],h=i[2];return t[0]=n*h-s*a,t[1]=s*o-r*h,t[2]=r*a-n*o,t}function d(t,e,i){var r=e[0],n=e[1],s=e[2],o=i[3]*r+i[7]*n+i[11]*s+i[15];return o=o||1,t[0]=(i[0]*r+i[4]*n+i[8]*s+i[12])/o,t[1]=(i[1]*r+i[5]*n+i[9]*s+i[13])/o,t[2]=(i[2]*r+i[6]*n+i[10]*s+i[14])/o,t}function f(t,e,i){var r=e[0],n=e[1],s=e[2];return t[0]=r*i[0]+n*i[3]+s*i[6],t[1]=r*i[1]+n*i[4]+s*i[7],t[2]=r*i[2]+n*i[5]+s*i[8],t}function p(t,e,i){var r=i[0],n=i[1],s=i[2],o=i[3],a=e[0],h=e[1],u=e[2],c=n*u-s*h,v=s*a-r*u,d=r*h-n*a,f=n*d-s*v,p=s*c-r*d,l=r*v-n*c,m=2*o;return c*=m,v*=m,d*=m,f*=2,p*=2,l*=2,t[0]=a+c+f,t[1]=h+v+p,t[2]=u+d+l,t}function l(t,e,i,r){var n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[0],s[1]=n[1]*Math.cos(r)-n[2]*Math.sin(r),s[2]=n[1]*Math.sin(r)+n[2]*Math.cos(r),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function m(t,e,i,r){var n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[2]*Math.sin(r)+n[0]*Math.cos(r),s[1]=n[1],s[2]=n[2]*Math.cos(r)-n[0]*Math.sin(r),t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function g(t,e,i,r){var n=[],s=[];return n[0]=e[0]-i[0],n[1]=e[1]-i[1],n[2]=e[2]-i[2],s[0]=n[0]*Math.cos(r)-n[1]*Math.sin(r),s[1]=n[0]*Math.sin(r)+n[1]*Math.cos(r),s[2]=n[2],t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t}function x(t,e){var i=t[0],r=t[1],n=t[2],s=e[0],o=e[1],a=e[2],h=Math.sqrt(i*i+r*r+n*n)*Math.sqrt(s*s+o*o+a*a),u=h&&function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}(t,e)/h;return Math.acos(Math.min(Math.max(u,-1),1))}var M=a;!function(){var t=n()}()}}]);
//# sourceMappingURL=3207.869391ea.chunk.js.map