{"version":3,"file":"static/js/1267.66673a39.chunk.js","mappings":"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","sources":["njslab/Workshop/workshop-pixel/04_pixelMapConnection.ts","njslab/Workshop/workshop-vector/base/RendererCanvas.ts"],"sourcesContent":["import { RendererCanvas } from '../workshop-vector/base/RendererCanvas';\r\n\r\nexport class Solution extends RendererCanvas {\r\n    t: number = 0.0;\r\n    pMap: PixelMap = undefined;\r\n    constructor(div: HTMLDivElement) {\r\n        super(div);\r\n        this.ctx.translate(this.ctx.canvas.width * 0.5, this.ctx.canvas.height * 0.5);\r\n        this.init();\r\n    }\r\n    public init() {\r\n        const size = 300;\r\n        this.pMap = new PixelMap(new Vector3(-size, -size, 0), new Vector3(size, size, 0) ,5, 5);\r\n        this.start();\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D): void {\r\n\r\n        this.pMap.render(ctx);\r\n    }\r\n    public mouseMove(x: number, y: number): void {\r\n        this.pMap.picking(x - this.ctx.canvas.width * 0.5, y - this.ctx.canvas.height * 0.5);\r\n    }\r\n\r\n    public mouseClick(x: number, y: number): void {\r\n        //\r\n    }\r\n}\r\n\r\nclass PixelMap {\r\n    public pixelList: Pixel[] = []\r\n    public minV: Vector3;\r\n    public maxV: Vector3;\r\n    public rx = 10;\r\n    public ry = 10;\r\n    public intervalX;\r\n    public intervalY;\r\n    constructor(minV: Vector3, maxV: Vector3, rx: number, ry: number) {\r\n        this.minV = minV;\r\n        this.maxV = maxV;\r\n        this.rx = rx;\r\n        this.ry = ry;\r\n        this.init()\r\n        this.initGridNeighbor();\r\n    }\r\n    public init(){\r\n        this.pixelList = []\r\n        const x = this.minV.x\r\n        const y = this.minV.y\r\n\r\n        this.intervalX = (this.maxV.x - this.minV.x) / (this.rx - 1)\r\n        this.intervalY = (this.maxV.y - this.minV.y) / (this.ry - 1)\r\n        \r\n        for(let j = 0 ; j < this.ry; j++) {\r\n            for(let i = 0 ; i < this.rx; i++) {\r\n                const xV = x + i * this.intervalX;\r\n                const yV = y + j * this.intervalY;\r\n\r\n                let pix = new Pixel(this, xV , yV , 0);\r\n                pix.xi = i;\r\n                pix.yi = j;\r\n                this.pixelList.push(pix);\r\n            }\r\n        }\r\n\r\n    }\r\n    private initGridNeighbor() {\r\n        for (let j = 0; j < this.ry; ++j) {\r\n            for (let i = 0; i < this.rx; ++i) {\r\n                let k = i + j * this.rx;\r\n                let px = this.pixelList[k];\r\n                if (i > 0) { px.nPix.push(this.pixelList[k - 1]); }\r\n                if (i < this.rx - 1) { px.nPix.push(this.pixelList[k + 1]); }\r\n                if (j > 0) { px.nPix.push(this.pixelList[k - this.rx]); }\r\n                if (j < this.ry - 1) { px.nPix.push(this.pixelList[k + this.rx]); }\r\n                if ((i > 0) && (j < this.ry - 1)) { px.nPix.push(this.pixelList[k + this.rx - 1]); }\r\n                if ((i > 0) && (j > 0)) { px.nPix.push(this.pixelList[k - this.rx - 1]); }\r\n                if ((i < this.rx - 1) && (j < this.ry - 1)) { px.nPix.push(this.pixelList[k + this.rx + 1]); }\r\n                if ((i < this.rx - 1) && (j > 0)) { px.nPix.push(this.pixelList[k - this.rx + 1]); }\r\n            }\r\n        }\r\n    }\r\n    public picking(x: number, y: number) {\r\n        const mv = new Vector3(x,y,0)\r\n        let dis = Number.MAX_VALUE;\r\n        let id = -1\r\n        for(let i = 0 ; i < this.pixelList.length; ++i) {\r\n           const theDis = distance(this.pixelList[i].vec, mv)\r\n           if (dis > theDis) {\r\n            dis = theDis\r\n            id = i;\r\n           }\r\n           this.pixelList[i].hover = false\r\n        }\r\n        if (id > -1) {\r\n            this.pixelList[id].hover = true\r\n        }\r\n    }\r\n    public render(ctx) {\r\n        this.pixelList.forEach((p: Pixel) => {\r\n            p.render(ctx);\r\n        })\r\n    }\r\n}\r\n\r\nclass Pixel {\r\n    public xi: number\r\n    public yi: number\r\n    public pMap: PixelMap;\r\n    public vec: Vector3;\r\n    public hover: boolean = false;\r\n    public nPix: Pixel[] = [];\r\n    constructor(pMap: PixelMap, x: number, y: number, z: number) {\r\n        this.pMap = pMap;\r\n        this.vec = new Vector3(x,y,z);\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D) {\r\n        const width = this.pMap.intervalX \r\n        const height = this.pMap.intervalY\r\n\r\n        ctx.beginPath()\r\n        ctx.rect(this.vec.x - width * 0.5, this.vec.y - height * 0.5, width, height)\r\n        ctx.closePath()\r\n        ctx.stroke()\r\n        if (this.hover) {\r\n            ctx.fillStyle = '#555';\r\n            ctx.fill()\r\n        } \r\n\r\n        ctx.beginPath();\r\n        ctx.arc(this.vec.x, this.vec.y, this.vec.r, 0, Math.PI * 2.0);\r\n        ctx.closePath();\r\n        if (this.hover) {\r\n            ctx.fillStyle = '#999';\r\n        } else {\r\n            ctx.fillStyle = '#333';\r\n        }\r\n        ctx.fill();\r\n\r\n        if (this.hover) {\r\n            for(let i = 0 ; i < this.nPix.length; ++i) {\r\n                ctx.beginPath();\r\n                ctx.moveTo(this.vec.x, this.vec.y)\r\n                ctx.lineTo(this.nPix[i].vec.x, this.nPix[i].vec.y)\r\n                ctx.closePath();\r\n                ctx.stroke()\r\n            }\r\n\r\n            ctx.strokeText(`x: ${this.xi}, y: ${this.yi}` ,this.vec.x, this.vec.y)\r\n        }\r\n\r\n        \r\n    }\r\n}\r\n\r\nclass Vector3 {\r\n    public x: number = 0.0;\r\n    public y: number = 0.0;\r\n    public z: number = 0.0;\r\n    public r: number = 3\r\n    constructor(x,y,z) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.z = z;\r\n    }\r\n}\r\n\r\n\r\nconst distance = (v0: Vector3, v1: Vector3) => {\r\n    return Math.sqrt(distance2(v0, v1));\r\n}\r\nconst distance2 = (v0: Vector3, v1: Vector3) => {\r\n    return (v0.x - v1.x) * (v0.x - v1.x) + (v0.y - v1.y) * (v0.y - v1.y) + (v0.z - v1.z) * (v0.z - v1.z);\r\n}","export class RendererCanvas {\r\n    public divHost: HTMLDivElement;\r\n    public canvas: HTMLCanvasElement;\r\n    public ctx: CanvasRenderingContext2D;\r\n    public isDown: boolean = false;\r\n    public debugMode: boolean = false;\r\n    public isStatic: boolean = false;\r\n    public m: number[] = [0,0];\r\n\r\n    private prevent: boolean = false;\r\n    private delay: number = 250;\r\n    private timer: NodeJS.Timer | number;\r\n    private isDrag: boolean = false;\r\n\r\n    constructor(div: HTMLDivElement) {\r\n        this.divHost = div;\r\n        const bounding = this.divHost.getBoundingClientRect();\r\n        this.canvas = document.createElement('canvas') as HTMLCanvasElement;\r\n        // this.canvas.style.position = 'absolute';\r\n        this.canvas.width = bounding.width;\r\n        this.canvas.height = bounding.height;\r\n        this.divHost.appendChild(this.canvas);\r\n        this.ctx = this.canvas.getContext('2d') as CanvasRenderingContext2D;\r\n        this.canvas.onclick = (e: MouseEvent) => {\r\n            this.timer = setTimeout(() => {\r\n                if (!this.prevent) {\r\n                    this.mouseClick(e.offsetX, e.offsetY);\r\n                }\r\n                this.isDrag = false;\r\n                this.prevent = false;\r\n            },\r\n                this.delay);\r\n        };\r\n        this.canvas.onwheel = (e: WheelEvent) => {\r\n            this.mouseWheel(e);\r\n        };\r\n        this.canvas.ondblclick = (e: MouseEvent) => {\r\n            this.mouseUpdate(e.offsetX, e.offsetY);\r\n            clearTimeout(this.timer as number);\r\n            this.prevent = true;\r\n            this.mouseDoubleClick(e.offsetX, e.offsetY);\r\n        };\r\n        this.canvas.onmousedown = (e: MouseEvent) => {\r\n            this.mouseUpdate(e.offsetX, e.offsetY);\r\n            this.isDown = true;\r\n            this.mouseDown(e.offsetX, e.offsetY);\r\n        };\r\n        this.canvas.onmouseup = (e: MouseEvent) => {\r\n            this.mouseUpdate(e.offsetX, e.offsetY);\r\n            this.isDown = false;\r\n            this.isDrag = false;\r\n            this.mouseUp(e.offsetX, e.offsetY);\r\n        };\r\n        this.canvas.onmousemove = (e: MouseEvent) => {\r\n            this.mouseUpdate(e.offsetX, e.offsetY);\r\n            if (this.isDown) {\r\n                this.isDrag = true;\r\n                this.prevent = true;\r\n                this.mouseDrag(e.offsetX, e.offsetY);\r\n            } else {\r\n                this.mouseMove(e.offsetX, e.offsetY);\r\n            }\r\n        };\r\n        window.addEventListener('resize', this.resize);\r\n        // this.loop(this.ctx);\r\n    }\r\n    public start() {\r\n        this.loop(this.ctx);\r\n    }\r\n    private resize = () => {\r\n        const bounding = this.divHost.getBoundingClientRect();\r\n        this.canvas.width = bounding.width;\r\n        this.canvas.height = bounding.height;\r\n    }\r\n    public destroy() {\r\n        window.removeEventListener('resize', this.resize);\r\n        this.isStatic = true;\r\n        try {\r\n            while (this.divHost !== undefined && this.divHost.lastElementChild !== undefined) {\r\n                this.divHost.removeChild(this.divHost.lastElementChild);\r\n            }\r\n        } catch (error) { }\r\n        this.destroyPost();\r\n    }\r\n    public destroyPost() {\r\n\r\n    }\r\n    public loop(ctx: CanvasRenderingContext2D) {\r\n        if (this.isStatic) { return; }\r\n        requestAnimationFrame(() => { this.loop(ctx); });\r\n        ctx.clearRect(ctx.canvas.width * -0.5, ctx.canvas.height * -0.5, ctx.canvas.width, ctx.canvas.height);\r\n        this.render(ctx);\r\n        this.renderPost();\r\n    }\r\n    public renderPost() {\r\n        this.renderMouse(this.ctx, this.m[0], this.m[1]);\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D) {\r\n        // Binding needed\r\n    }\r\n    public mouseClick(x: number, y: number) {\r\n        // Binding needed\r\n        if (this.debugMode) { console.log('click'); }\r\n    }\r\n    public mouseDoubleClick(x: number, y: number) {\r\n        // Binding needed\r\n        if (this.debugMode) { console.log('d-click'); }\r\n    }\r\n    public mouseDown(x: number, y: number) {\r\n        // Binding needed\r\n        if (this.debugMode) { console.log('down'); }\r\n    }\r\n    public mouseUp(x: number, y: number) {\r\n        // Binding needed\r\n        if (this.debugMode) { console.log('up'); }\r\n    }\r\n    public mouseMove(x: number, y: number) {\r\n\r\n        // Binding needed\r\n        if (this.debugMode) { console.log('move'); }\r\n    }\r\n    public mouseDrag(x: number, y: number) {\r\n        // Binding needed\r\n        if (this.debugMode) { console.log('drag'); }\r\n    }\r\n    public mouseWheel(v: WheelEvent) {\r\n        // Binding needed\r\n        if (this.debugMode) { console.log('wheel', v); }\r\n    }\r\n    public renderMouse(ctx: CanvasRenderingContext2D, x: number, y: number) {\r\n        ctx.fillStyle = '#f00';\r\n        ctx.beginPath();\r\n        ctx.arc(this.m[0], this.m[1], 3, 0, Math.PI * 2.0)\r\n        ctx.fillText(`x: ${this.m[0]}, y:${this.m[1]}`,this.m[0] - 15, this.m[1] - 8)\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    }\r\n    public mouseUpdate(x: number, y: number): void {\r\n        this.m[0] = Math.floor(x - this.canvas.width * 0.5);\r\n        this.m[1] = Math.floor(y - this.canvas.height * 0.5);\r\n    }\r\n}"],"names":["Solution","RendererCanvas","constructor","div","super","t","pMap","undefined","this","ctx","translate","canvas","width","height","init","size","PixelMap","Vector3","start","render","mouseMove","x","y","picking","mouseClick","minV","maxV","rx","ry","pixelList","intervalX","intervalY","initGridNeighbor","j","i","xV","yV","pix","Pixel","xi","yi","push","k","px","nPix","mv","dis","Number","MAX_VALUE","id","length","theDis","distance","vec","hover","forEach","p","z","beginPath","rect","closePath","stroke","fillStyle","fill","arc","r","Math","PI","moveTo","lineTo","strokeText","v0","v1","sqrt","distance2","divHost","isDown","debugMode","isStatic","m","prevent","delay","timer","isDrag","resize","bounding","getBoundingClientRect","document","createElement","appendChild","getContext","onclick","e","setTimeout","offsetX","offsetY","onwheel","mouseWheel","ondblclick","mouseUpdate","clearTimeout","mouseDoubleClick","onmousedown","mouseDown","onmouseup","mouseUp","onmousemove","mouseDrag","window","addEventListener","loop","destroy","removeEventListener","lastElementChild","removeChild","error","destroyPost","requestAnimationFrame","clearRect","renderPost","renderMouse","console","log","v","fillText","floor"],"sourceRoot":""}