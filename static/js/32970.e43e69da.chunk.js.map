{"version":3,"file":"static/js/32970.e43e69da.chunk.js","mappings":"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","sources":["njslab/app-legacy/Implementation/Demos/Demo60ImageProcessor/AppImageProcessor/CanvasRanderer/Canvas/Canvas.ts","njslab/app-legacy/Implementation/Demos/Demo60ImageProcessor/AppImageProcessor/CanvasRanderer/EventInteraction/MouseInteraction.ts","njslab/app-legacy/NJSCore/CV/ConvolutionalFilter/PixelMapFilter.ts","njslab/app-legacy/Implementation/Demos/Demo60ImageProcessor/AppImageProcessor/CanvasRanderer/ActiveCommandController/ActiveCommandController.ts","njslab/app-legacy/Implementation/Demos/Demo60ImageProcessor/AppImageProcessor/CanvasRanderer/View/index.ts","njslab/app-legacy/Implementation/Demos/Demo60ImageProcessor/AppImageProcessor/CanvasRanderer/Implmentation/ImageProcessor/index.ts","njslab/app-legacy/Implementation/Demos/Demo60ImageProcessor/AppImageProcessor/CanvasRanderer/Implmentation/VideoProcessor/index.ts","njslab/app-legacy/Implementation/Demos/Demo60ImageProcessor/AppImageProcessor/CanvasRanderer/Implmentation/index.ts","njslab/app-legacy/Implementation/Demos/Demo60ImageProcessor/AppImageProcessor/CanvasRanderer/index.ts","njslab/app-legacy/Implementation/Demos/Demo60ImageProcessor/AppImageProcessor/index.ts","njslab/app-legacy/Implementation/Demos/Demo60ImageProcessor/index.ts"],"sourcesContent":["import { Deltatime, CanvasLoopController } from '../../../../../../NJSCore';\r\nimport { MouseEventData } from '../EventInteraction/MouseInteraction';\r\nimport { CanvasRanderer } from '..';\r\n\r\nexport class Canvas {\r\n    renderer: CanvasRanderer;\r\n    div: HTMLElement;\r\n    canvas: HTMLCanvasElement;\r\n    ctx: CanvasRenderingContext2D;\r\n    isActive: boolean = false;\r\n    scale: number = 0.5;\r\n    translation: number[] = [0, 0];\r\n    translationZoom: number[] = [0, 0];\r\n    deltaTime: Deltatime;\r\n    canvasLoopController: CanvasLoopController;\r\n\r\n    log: string;\r\n    // frameRate: number = 60;\r\n    isViewChanging: boolean = false;\r\n    loopNum: number = 0;\r\n    needRenderloop: boolean = true;\r\n\r\n    ablePan: boolean = true;\r\n    pause: boolean = false;\r\n    constructor(renderer: CanvasRanderer, div: HTMLElement) {\r\n        this.renderer = renderer;\r\n        this.div = div;\r\n        this.Init();\r\n    }\r\n    private Init() {\r\n        const canvas = document.createElement('canvas');\r\n        if (canvas) {\r\n            this.canvas = canvas;\r\n            this.canvas.width = this.div.clientWidth;\r\n            this.canvas.height = this.div.clientHeight;\r\n            this.div.append(this.canvas);\r\n            const ctx = this.canvas.getContext('2d');\r\n            if (ctx) {\r\n                this.ctx = ctx;\r\n                this.isActive = true;\r\n            }\r\n        }\r\n        this.deltaTime = new Deltatime();\r\n        this.canvasLoopController = new CanvasLoopController(60);\r\n    }\r\n    public LoopInit() {\r\n        this.translation[0] = this.ctx.canvas.width * 0.5;\r\n        this.translation[1] = this.ctx.canvas.height * 0.5;\r\n\r\n\r\n        this.SetLevel4();\r\n        this.initBinder(this.ctx);\r\n        this.Loop();\r\n    }\r\n    public Loop() {\r\n        let before = performance.now();\r\n        this.deltaTime.UpdateFPS();\r\n\r\n        if (this.canvasLoopController.level > 3) {\r\n            if (this.canvasLoopController.level === 6) { // level 6\r\n                requestAnimationFrame(() => { this.Loop(); });\r\n                // this.Clear(this.ctx);\r\n                this.RenderPre(this.ctx);\r\n            } else if (this.canvasLoopController.level === 5) {\r\n                if (this.isViewChanging) {\r\n                    requestAnimationFrame(() => { this.Loop(); });\r\n                } else {\r\n                    // setTimeout(() => {\r\n                    requestAnimationFrame(() => { this.Loop(); });\r\n                    // }, 1000 / this.frameRate);\r\n                }\r\n                // this.Clear(this.ctx);\r\n                this.RenderPre(this.ctx);\r\n            } else if (this.canvasLoopController.level === 4) {\r\n                if (this.isViewChanging) {\r\n                    requestAnimationFrame(() => { this.Loop(); });\r\n                } else {\r\n                    // setTimeout(() => {\r\n                    requestAnimationFrame(() => { this.Loop(); });\r\n                    // }, 1000 / this.frameRate);\r\n                }\r\n                if (!this.canvasLoopController.stop) {\r\n                    this.RenderPre(this.ctx);\r\n                    this.canvasLoopController.TimerForStop();\r\n                } else {\r\n                    return;\r\n                }\r\n            }\r\n\r\n        } else if (this.canvasLoopController.level === 1) { // level 1 - 3\r\n            if (this.isViewChanging) {\r\n                // this.Clear(this.ctx);\r\n            } else {\r\n                // this.Clear(this.ctx);\r\n                this.RenderPre(this.ctx);\r\n            }\r\n        } else {\r\n            // this.Clear(this.ctx);\r\n            this.RenderPre(this.ctx);\r\n        }\r\n        let after = performance.now();\r\n        this.log = `level:  ${this.canvasLoopController.level}, total frames: ${this.loopNum++} (FPS: ${this.deltaTime.frameRate.toFixed(0)}), a loop took: ${(after - before).toFixed(2)} ms to execute.`;\r\n        // this.LogOut();\r\n    }\r\n    public SetLevel1() { this.canvasLoopController.level = 1; this.Loop(); }\r\n    public SetLevel2() { this.canvasLoopController.level = 2; this.Loop(); }\r\n    public SetLevel3() { this.canvasLoopController.level = 3; this.Loop(); }\r\n    public RenderSetLevel4() {\r\n        this.canvasLoopController.stop = true;\r\n    }\r\n    public SetLevel4() {\r\n        this.canvasLoopController.Reset();\r\n        setTimeout(() => {\r\n            this.canvasLoopController.level = 4;\r\n            this.Loop();\r\n        }, 500);\r\n    }\r\n    public SetLevel5() {\r\n        this.canvasLoopController.Reset();\r\n        setTimeout(() => {\r\n            this.canvasLoopController.level = 5;\r\n            this.Loop();\r\n        }, 500);\r\n    }\r\n    public SetLevel6() {\r\n        this.canvasLoopController.stop = false;\r\n        this.canvasLoopController.Reset();\r\n        setTimeout(() => {\r\n            this.canvasLoopController.level = 6;\r\n            console.log('ddddddddddddddddddddddd');\r\n            this.Loop();\r\n        }, 500);\r\n    }\r\n    public Clear(ctx: CanvasRenderingContext2D) {\r\n        // this.ctx.clearRect(-this.translation[0], -this.translation[1], this.ctx.canvas.width, this.ctx.canvas.height);\r\n        this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\r\n\r\n    }\r\n    public Zoom(e: MouseEventData) {\r\n        // const offsetX = (e.xs);\r\n        // const offsetY = (e.ys);\r\n        // console.log(offsetX, this.translation[0]);\r\n\r\n        if (e.wheel < 0) {\r\n            this.scale += this.scale * 0.09;\r\n            // console.log('in', this.zoom);\r\n            // this.translation[0] += (this.ctx.canvas.width * 0.5 - offsetX) / this.zoom;\r\n            // this.translation[1] += (this.ctx.canvas.height * 0.5 - offsetY) / this.zoom;\r\n            // this.translationZoom[0] = (offsetX);\r\n            // this.translationZoom[1] = (offsetY);\r\n        } else {\r\n            // console.log('out', this.zoom);\r\n            this.scale -= this.scale * 0.09;\r\n\r\n            // this.translation[0] -= (this.ctx.canvas.width * 0.5 - offsetX) / this.zoom;\r\n            // this.translation[1] -= (this.ctx.canvas.height * 0.5 - offsetY) / this.zoom;\r\n            // this.translation[0] -= (this.translation[0]) - offsetX;\r\n            // this.translation[1] -= (this.translation[1]) - offsetY;\r\n            // this.translation[0] += (offsetX / this.zoom);\r\n            // this.translation[1] += (offsetY / this.zoom);\r\n            // this.translationZoom[0] = (offsetX);\r\n            // this.translationZoom[1] = (offsetY);\r\n            // this.translation[0] += offsetX / this.zoom;\r\n            // this.translation[1] += offsetY / this.zoom;\r\n        }\r\n\r\n    }\r\n    public RemapByZoom(e: MouseEventData) {\r\n        e.x = ((e.xs - this.translation[0]) / this.scale);\r\n        e.y = ((e.ys - this.translation[1]) / this.scale);\r\n        return e;\r\n    }\r\n    public Pan(e: MouseEventData) {\r\n        // console.log(e);\r\n        if (!this.ablePan) { return; }\r\n        const xOff = e.xs - e.preXs;\r\n        const yOff = e.ys - e.preYs;\r\n        this.translation[0] += xOff;\r\n        this.translation[1] += yOff;\r\n    }\r\n    public RenderForce() {\r\n        this.canvasLoopController.stop = false;\r\n    }\r\n    public RenderPre(ctx: CanvasRenderingContext2D) {\r\n        if (!this.isActive) { return; }\r\n        this.Clear(this.ctx);\r\n        this.ctx.save();\r\n        this.ctx.translate(this.translation[0], this.translation[1]);\r\n        this.ctx.scale(this.scale, this.scale);\r\n\r\n        // this.ctx.translate(this.translationZoom[0], this.translationZoom[1]);\r\n        // this.translationZoom[0] = this.translationZoom[1] = 0;\r\n\r\n        for (let i = -10; i < 10; ++i) {\r\n            for (let j = -10; j < 10; ++j) {\r\n                ctx.beginPath();\r\n                ctx.fillStyle = 'rgba(255, 0, 0, 0.9)';\r\n                ctx.arc(i * 10, j * 10, 2, 0, Math.PI * 2);\r\n                ctx.closePath();\r\n                ctx.fill();\r\n            }\r\n        }\r\n\r\n        this.RenderBinder(ctx);\r\n\r\n        this.ctx.restore();\r\n    }\r\n    public initBinder(ctx: CanvasRenderingContext2D) {\r\n\r\n    }\r\n    public RenderBinder(ctx: CanvasRenderingContext2D) {\r\n\r\n    }\r\n}","\r\nexport class ActiveCommandBase {\r\n  constructor() { /*.*/ }\r\n  public MouseEventController(e: any) {/*.*/ }\r\n  public KeyboardEventController(k: any) {/*.*/ }\r\n  public TouchEventController(t: any) {/*.*/ }\r\n  public GestureEventController(j: any) {/*.*/ }\r\n  public mouseLeftClick(e: any) {/*.*/ }\r\n  public mouseMiddleClick(e: any) {/*.*/ }\r\n  public mouseRightClick(e: any) {/*.*/ }\r\n  public mouseDoubleClick(e: any) {/*.*/ }\r\n  // .........................................\r\n  public mouseMove(e: any) {/*.*/ }\r\n  public mouseDrag(e: any) {/*.*/ }\r\n  public mouseDown(e: any) {/*.*/ }\r\n  public mouseUp(e: any) {/*.*/ }\r\n  public keydown(k: any) {/*.*/ }\r\n  public keyUp(k: any) {/*.*/ }\r\n}\r\n\r\nexport enum CLICK_TYPE {\r\n  LEFT = 'LEFT', MIDDLE = 'MIDDLE', RIGHT = 'RIGHT', WHEEL = 'WHEEL',\r\n  DRAG = 'DRAG', DRAG_LEFT = 'DRAG_LEFT', DRAG_MIDDLE = 'DRAG_MIDDLE', DRAG_RIGHT = 'DRAG_RIGHT',\r\n  MOVE = 'MOVE', DOUBLE = 'DOUBLE', UP = 'UP',\r\n  DOWN = 'DOWN', DOWN_MIDDLE = 'DOWN_MIDDLE', DOWN_RIGHT = 'DOWN_RIGHT'\r\n}\r\nexport class MouseEventData {\r\n  x: number = -1; y: number = -1; z: number = -1;\r\n  preX: number = -1; preY: number = -1; preZ: number = -1;\r\n  xs: number = -1; ys: number = -1;\r\n  preXs: number = -1; preYs: number = -1;\r\n  yGLPicking: number;\r\n  command: ActiveCommandBase; // = new CActiveCommandNone(this.app.activeCommands);\r\n  CLICK_TYPE: CLICK_TYPE = CLICK_TYPE.MOVE;\r\n  isDown: boolean = false;\r\n  isDoubleClick: boolean = false;\r\n  isMove: boolean = false;\r\n  pressedShift: boolean = false;\r\n  pressedAlt: boolean = false;\r\n  pressedCtrl: boolean = false;\r\n  wheel: number = 0;\r\n  preWheel: number = 0;\r\n  isActive: boolean = true;\r\n  // premEvent: MouseEventData;\r\n  native: MouseEvent;\r\n  constructor() {\r\n      //\r\n  }\r\n  public DeepCopy() {\r\n      let mEvent = new MouseEventData();\r\n      mEvent.x = this.x; mEvent.y = this.y; mEvent.z = this.z;\r\n      mEvent.preX = this.preX; mEvent.preY = this.preY; mEvent.preZ = this.preZ;\r\n      mEvent.xs = this.x; mEvent.ys = this.y;\r\n      mEvent.preXs = this.preXs; mEvent.preYs = this.preYs;\r\n      mEvent.pressedAlt = this.pressedAlt; mEvent.pressedShift = this.pressedShift; mEvent.pressedCtrl = this.pressedCtrl;\r\n      mEvent.isDoubleClick = this.isDoubleClick; mEvent.isDown = this.isDown; mEvent.isMove = this.isMove;\r\n      mEvent.wheel = this.wheel; mEvent.preWheel = this.preWheel;\r\n      mEvent.yGLPicking = this.yGLPicking;\r\n      mEvent.CLICK_TYPE = this.CLICK_TYPE;\r\n      mEvent.command = this.command;\r\n      mEvent.native = this.native;\r\n      return mEvent;\r\n  }\r\n}\r\n\r\nexport interface IMouseInteractionMenu {\r\n  MouseInteractionMenu: (mouseEventData: MouseEventData) => void;\r\n}\r\nexport class MouseInteraction {\r\n  mouseInteractionUI: IMouseInteractionMenu;\r\n  mouseEventDataPre: MouseEventData = new MouseEventData();\r\n  isEnable: boolean = true;\r\n  clickCount: number = 0;\r\n  click: boolean = false;\r\n  prevent: boolean = false;\r\n  delay: number = 250;\r\n  timer: NodeJS.Timer | number;\r\n  down: boolean = false;\r\n  e: MouseEventData;\r\n  private _stopPropagation: boolean = false;\r\n  constructor() {\r\n\r\n  }\r\n  public InitNativeMouseEvent(div: HTMLElement) {\r\n    div.onclick = (e: MouseEvent) => {\r\n      this.prevent = false;\r\n      this.timer = setTimeout(\r\n        () => {\r\n          if (!this.prevent) {\r\n            this.MouseClick(e);\r\n          }\r\n          this.prevent = false;\r\n        },\r\n        this.delay);\r\n    };\r\n    div.ondblclick = (e: MouseEvent) => {\r\n      clearTimeout(this.timer as number);\r\n      this.prevent = true;\r\n      this.MouseDoubleClick(e);\r\n    };\r\n    div.onmousedown = (e: MouseEvent) => { this.MouseDown(e); };\r\n    div.onmouseup = (e: MouseEvent) => { this.MouseUp(e); };\r\n    div.onmousemove = (e: MouseEvent) => { this.MouseMove(e); };\r\n    div.addEventListener('wheel', (e: WheelEvent) => this.MouseWheel(e, e.deltaY));\r\n  }\r\n  public MouseDown(e: MouseEvent) {\r\n    this.click = true;\r\n    this.down = true;\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.DOWN;\r\n    mEvent.isDown = true;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  public MouseClick(e: MouseEvent) {\r\n    if (!this.click) { return; }\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    if (e.button === 0) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.LEFT;\r\n    } else if (e.button === 1) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.MIDDLE;\r\n    } else if (e.button === 2) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.RIGHT;\r\n    }\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  public MouseDoubleClick(e: MouseEvent) {\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.DOUBLE;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  public MouseDrag(e: MouseEvent) {\r\n    this.click = false;\r\n    this.prevent = true;\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.DRAG;\r\n    mEvent.isDown = true;\r\n    if (e.buttons === 1) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.DRAG;\r\n    } else if (e.buttons === 4) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.DRAG_MIDDLE;\r\n    } else if (e.buttons === 2) {\r\n      mEvent.CLICK_TYPE = CLICK_TYPE.DRAG_RIGHT;\r\n    }\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  public MouseMove(e: MouseEvent) {\r\n    if (this.down) { this.MouseDrag(e); return; }\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.MOVE;\r\n    mEvent.isDown = true;\r\n    this.prevent = true;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  public MouseUp(e: MouseEvent) {\r\n    this.down = false;\r\n    this.click = true;\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.UP;\r\n    mEvent.isDown = false;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  public MouseWheel(e: MouseEvent, v: number) {\r\n    let mEvent = this.CommonEventBuilder(e);\r\n    mEvent.wheel = v;\r\n    mEvent.CLICK_TYPE = CLICK_TYPE.WHEEL;\r\n    this.MouseEvenEmitting(mEvent);\r\n  }\r\n  public CommonEventBuilder(e: MouseEvent): MouseEventData {\r\n    let mEvent: MouseEventData = new MouseEventData();\r\n    mEvent.preXs = this.mouseEventDataPre.xs;\r\n    mEvent.preYs = this.mouseEventDataPre.ys;\r\n    mEvent.preX = this.mouseEventDataPre.x;\r\n    mEvent.preY = this.mouseEventDataPre.y;\r\n    // mEvent.premEvent = this.mouseEventDataPre;\r\n\r\n    mEvent.pressedShift = e.shiftKey;\r\n    mEvent.pressedAlt = e.altKey;\r\n    mEvent.pressedCtrl = e.ctrlKey;\r\n\r\n    mEvent.xs = e.offsetX;\r\n    mEvent.ys = e.offsetY;\r\n    mEvent.preWheel = this.mouseEventDataPre.wheel;\r\n    mEvent.wheel = 0;\r\n    mEvent.native = e;\r\n    this.mouseEventDataPre = mEvent;\r\n    this.e = mEvent;\r\n    return mEvent;\r\n  }\r\n  public get stopPropagation() {\r\n    return this._stopPropagation;\r\n  }\r\n  public set stopPropagation(v: boolean) {\r\n    if (v) {\r\n      this._stopPropagation = v;\r\n    } else {\r\n      setTimeout(() => { this._stopPropagation = v; }, 500);\r\n    }\r\n  }\r\n  private MouseEvenEmitting(mouseEventData: MouseEventData) {\r\n    this.MouseEventEmittingForViewController(mouseEventData);\r\n    if (this._stopPropagation) { return; }\r\n    this.MouseEventEmittingBinder(mouseEventData);\r\n  }\r\n  private MouseEventEmittingForViewController(mouseEventData: MouseEventData) {\r\n    if (this.mouseInteractionUI) { this.mouseInteractionUI.MouseInteractionMenu(mouseEventData); }\r\n  }\r\n  public MouseEventEmittingBinder(mouseEventData: MouseEventData) {\r\n    // binding needed\r\n    // this.ioWrapper.core.activeCommandController.MouseEventController(mouseEventData);\r\n  }\r\n}","import { NVector3, ColorUtility } from '../../';\nexport enum KERNEL {\n    NORMAL = 'NORMAL',\n    GAUSSIAN_BLUR_1 = 'GAUSSIAN_BLUR_1',\n    GAUSSIAN_BLUR_2 = 'GAUSSIAN_BLUR_2',\n    GAUSSIAN_BLUR_3 = 'GAUSSIAN_BLUR_3',\n    BOX_BLUR = 'BOX_BLUR',\n    TRIANGLE_BLUR = 'TRIANGLE_BLUR',\n    EMBOSS = 'EMBOSS',\n    UNSHARPEN = 'UNSHARPEN',\n    SHARPENESS = 'SHARPENESS',\n    SHARPEN = 'SHARPEN',\n    EDGE_DETECTION_1 = 'EDGE_DETECTION_1',\n    EDGE_DETECTION_2 = 'EDGE_DETECTION_2',\n    EDGE_DETECTION_3 = 'EDGE_DETECTION_3',\n    EDGE_DETECTION_4 = 'EDGE_DETECTION_4',\n    EDGE_DETECTION_5 = 'EDGE_DETECTION_5',\n    EDGE_DETECTION_6 = 'EDGE_DETECTION_6',\n    SOBEL_HORIZONTAL = 'SOBEL_HORIZONTAL',\n    SOBEL_VERTICAL = 'SOBEL_VERTICAL',\n    PREVIT_HORIZONTAL = 'PREVIT_HORIZONTAL',\n    PREVIT_VERTICAL = 'PREVIT_VERTICAL',\n}\nexport const CONVOLUTIONAL_KERNEL = {\n\n    NORMAL : [  0, 0, 0,\n                0, 1, 0,\n                0, 0, 0],\n\n    GAUSSIAN_BLUR_1 : [\n                0.045, 0.122, 0.045,\n                0.122, 0.332, 0.122,\n                0.045, 0.122, 0.045],\n\n    GAUSSIAN_BLUR_2: [\n                1, 2, 1,\n                2, 4, 2,\n                1, 2, 1],\n\n    GAUSSIAN_BLUR_3: [\n                0, 1, 0,\n                1, 1, 1,\n                0, 1, 0 ],\n\n    BOX_BLUR: [\n                0.111, 0.111, 0.111,\n                0.111, 0.111, 0.111,\n                0.111, 0.111, 0.111],\n\n    TRIANGLE_BLUR: [\n                0.0625, 0.125, 0.0625,\n                0.125, 0.25, 0.125,\n                0.0625, 0.125, 0.0625],\n\n    EMBOSS: [\n                -2, -1, 0,\n                -1, 1, 1,\n                0, 1, 2],\n\n    UNSHARPEN: [\n                -1, -1, -1,\n                -1, 9, -1,\n                -1, -1, -1 ],\n\n    SHARPENESS: [\n                0, -1, 0,\n                -1, 5, -1,\n                0, -1, 0 ],\n\n    SHARPEN: [\n                -1, -1, -1,\n                -1, 16, -1,\n                -1, -1, -1 ],\n\n    EDGE_DETECTION_1: [\n                -0.125, -0.125, -0.125,\n                -0.125, 1, -0.125,\n                -0.125, -0.125, -0.125],\n\n    EDGE_DETECTION_2: [\n                -1, -1, -1,\n                -1, 8, -1,\n                -1, -1, -1],\n\n    EDGE_DETECTION_3: [\n                -5, 0, 0,\n                0, 0, 0,\n                0, 0, 5],\n\n    EDGE_DETECTION_4: [\n                -1, -1, -1,\n                0, 0, 0,\n                1, 1, 1],\n\n    EDGE_DETECTION_5: [\n                -1, -1, -1,\n                2, 2, 2,\n                -1, -1, -1],\n\n    EDGE_DETECTION_6: [\n                -5, -5, -5,\n                -5, 39, -5,\n                -5, -5, -5],\n\n    SOBEL_HORIZONTAL: [\n                1, 2, 3,\n                0, 0, 0,\n                -1, -2, -1],\n\n    SOBEL_VERTICAL: [\n                1, 0, -1,\n                2, 0, -2,\n                1, 0, -1],\n\n    PREVIT_HORIZONTAL: [\n                1, 1, 1,\n                0, 0, 0,\n                -1, -1, -1],\n\n    PREVIT_VERTICAL: [\n                1, 0, -1,\n                1, 0, -1,\n                1, 0, -1],\n\n};\n\nexport class PixelMapFilter {\n    public pixels: Pixel[];\n    public bitmap: ImageData;\n    public bitmapResult: ImageData;\n    public height = -1;\n    public width = -1;\n\n    public isGray = false;\n\n    public constructor(bitmap: ImageData, isGray: boolean = false) {\n        this.isGray = isGray;\n\n        // this.bitmap = new ImageData(bitmap.width, bitmap.height);\n        this.bitmap = bitmap;\n        this.pixels = [];\n\n        this.height = bitmap.height;\n        this.width = bitmap.width;\n        // console.log(this.width, this.height);\n        let x = 0;\n        let y = -1;\n        let j = 0;\n        if (this.isGray) {\n            for (let i = 0; i < this.bitmap.data.length; i += 4 ) {\n\n                if (j++ % this.bitmap.width === 0) {\n                    x = 0;\n                    y++;\n                } else {\n                    x++;\n                }\n                // console.log('x: ', x, 'y:', y);\n                let c = new Color(this.bitmap.data[i + 0], this.bitmap.data[i + 1], this.bitmap.data[i + 2], this.bitmap.data[i + 3]);\n                let col = ColorUtility.RGBtoGray(c.R, c.G, c.B);\n                let nc = Color.FromArgb(255, Math.floor(col), Math.floor(col), Math.floor(col));\n                let p = new Pixel(this, x, this.height - y - 1, nc);\n                this.pixels.push(p);\n            }\n        } else {\n            for (let i = 0; i < this.bitmap.data.length; i += 4 ) {\n\n                if (i % this.bitmap.width === 0) {\n                    x = 0;\n                    y++;\n                } else {\n                    x++;\n                }\n                // console.log('x: ', x, 'y:', y);\n\n                let c = new Color(this.bitmap.data[i + 0], this.bitmap.data[i + 1], this.bitmap.data[i + 2], this.bitmap.data[i + 3]);\n                let p = new Pixel(this, x, this.height - y - 1, c);\n                this.pixels.push(p);\n            }\n        }\n        this.InitGridNeighbor();\n    }\n    public InitGridNeighbor() {\n        for (let j = 0; j < this.height; ++j) {\n            for (let i = 0; i < this.width; ++i) {\n                let k = j * this.width + i;\n                let px0: Pixel = this.pixels[k];\n\n                if ((i > 0) && (j < this.height - 1)) {\n                    px0.npix.push(this.pixels[k + this.width - 1]);\n                    px0.UP_LEFT = this.pixels[k + this.width - 1];\n                }\n                if (j < this.height - 1) {\n                    px0.npix.push(this.pixels[k + this.width]);\n                    px0.UP_MIDDLE = this.pixels[k + this.width];\n                }\n\n                if ((i < this.width - 1) && (j < this.height - 1)) {\n                    px0.npix.push(this.pixels[k + this.width + 1]);\n                    px0.UP_RIGHT = this.pixels[k + this.width + 1];\n                }\n\n                if (i > 0) {\n                    px0.npix.push(this.pixels[k - 1]);\n                    px0.MIDDLE_LEFT = this.pixels[k - 1];\n                }\n\n                if (i < this.width - 1) {\n                    px0.npix.push(this.pixels[k + 1]);\n                    px0.MIDDLE_RIGHT = this.pixels[k + 1];\n                }\n\n                if ((i > 0) && (j > 0)) {\n                    px0.npix.push(this.pixels[k - this.width - 1]);\n                    px0.DOWN_LEFT = this.pixels[k - this.width - 1];\n                }\n\n                if (j > 0) {\n                    px0.npix.push(this.pixels[k - this.width]);\n                    px0.DOWN_MIDDLE = this.pixels[k - this.width];\n                }\n                if ((i < this.width - 1) && (j > 0)) {\n                    px0.npix.push(this.pixels[k - this.width + 1]);\n                    px0.DOWN_RIGHT = this.pixels[k - this.width + 1];\n                }\n            }\n        }\n    }\n    public update(bitmap: ImageData) {\n        this.bitmap = bitmap;\n\n        let index = 0;\n\n        for (let i = 0; i < this.bitmap.data.length; i += 4 ) {\n            this.pixels[index].color.R = this.bitmap.data[i + 0];\n            this.pixels[index].color.G = this.bitmap.data[i + 1];\n            this.pixels[index].color.B = this.bitmap.data[i + 2];\n            this.pixels[index].color.A = this.bitmap.data[i + 3];\n            index++;\n        }\n    }\n    public computeConvolution(kernel: number[]) {\n        console.log(kernel);\n        for (let p of this.pixels) {\n            p.ComputeByKernelList(kernel);\n        }\n    }\n\n    // public GetPts() {\n    //     List<NVector3> pts = new List<NVector3>();\n    //     foreach (Pixel p in this.pixels) { pts.Add(p.p); }\n    //     return pts;\n    // }\n    // public List<Mesh> GetMesh(bool isGray) {\n    //     List<Mesh> mesh = new List<Mesh>();\n    //     foreach (Pixel p in this.pixels) { mesh.Add(p.GetMesh(isGray)); }\n    //     return mesh;\n    // }\n\n    public getBitmap() {\n        // Bitmap bitmap = new Bitmap(this.width, this.height);\n\n        this.bitmapResult = new ImageData(this.bitmap.width, this.bitmap.height);\n        let k = 0;\n\n        for (let i = 0; i < this.bitmapResult.data.length; i += 4) {\n            let col = this.pixels[k].colNew;\n            this.bitmapResult.data[i + 0] = col.R;\n            this.bitmapResult.data[i + 1] = col.G;\n            this.bitmapResult.data[i + 2] = col.B;\n            this.bitmapResult.data[i + 3] = col.A;\n            k++;\n        }\n        // for (int y = 0; y < this.height; y++)\n        // {\n        //     for (int x = 0; x < this.width; x++)\n        //     {\n        //         int k = y * width + x;\n        //         bitmap.SetPixel(x, y, this.pixels[k].colNew);\n        //     }\n        // }\n\n        return this.bitmapResult;\n    }\n\n}\nexport class Pixel {\n    public pm: PixelMapFilter;\n    public p0: NVector3;\n    public p1: NVector3 ;\n    public p: NVector3 ;\n\n    public width = 0.5;\n    public height = 0.5;\n\n    public temp = 0.0;\n\n    public i: number;\n    public j: number;\n\n    public UP_LEFT: Pixel;\n    public UP_MIDDLE: Pixel;\n    public UP_RIGHT: Pixel;\n\n    public MIDDLE_LEFT: Pixel;\n    public MIDDLE_RIGHT: Pixel;\n\n    public DOWN_LEFT: Pixel;\n    public DOWN_MIDDLE: Pixel;\n    public DOWN_RIGHT: Pixel;\n\n    public val = 0.0;\n    public npix: Pixel[] = [];\n\n    public color: Color;\n    public colNew: Color;\n\n    constructor( pm: PixelMapFilter, x: number, y: number, c: Color) {\n        this.pm = pm;\n        this.color = Color.FromArgb(255, c.R, c.G, c.B);\n        this.colNew = Color.FromArgb(255, c.R, c.G, c.B);\n        this.p = new NVector3(x, y, 0);\n    }\n    public ComputeByKernelList(kernel: number[]) {\n\n        let weight = 0.0;\n        let r = 0;\n        let g = 0;\n        let b = 0;\n\n        if (this.UP_LEFT !== undefined) {\n            r += this.UP_LEFT.color.R * kernel[0];\n            g += this.UP_LEFT.color.G * kernel[0];\n            b += this.UP_LEFT.color.B * kernel[0];\n            weight += kernel[0];\n        }\n        if (this.UP_MIDDLE !== undefined) {\n            r += this.UP_MIDDLE.color.R * kernel[1];\n            g += this.UP_MIDDLE.color.G * kernel[1];\n            b += this.UP_MIDDLE.color.B * kernel[1];\n            weight += kernel[1];\n        }\n        if (this.UP_RIGHT !== undefined) {\n            r += this.UP_RIGHT.color.R * kernel[2];\n            g += this.UP_RIGHT.color.G * kernel[2];\n            b += this.UP_RIGHT.color.B * kernel[2];\n            weight += kernel[2];\n        }\n\n        if (this.MIDDLE_LEFT !== undefined) {\n            r += this.MIDDLE_LEFT.color.R * kernel[3];\n            g += this.MIDDLE_LEFT.color.G * kernel[3];\n            b += this.MIDDLE_LEFT.color.B * kernel[3];\n            weight += kernel[3];\n        }\n\n        r += this.color.R * kernel[4];\n        g += this.color.G * kernel[4];\n        b += this.color.B * kernel[4];\n        weight += kernel[4];\n\n        if (this.MIDDLE_RIGHT !== undefined) {\n            r += this.MIDDLE_RIGHT.color.R * kernel[5];\n            g += this.MIDDLE_RIGHT.color.G * kernel[5];\n            b += this.MIDDLE_RIGHT.color.B * kernel[5];\n            weight += kernel[5];\n        }\n        if (this.DOWN_LEFT !== undefined) {\n            r += this.DOWN_LEFT.color.R * kernel[6];\n            g += this.DOWN_LEFT.color.G * kernel[6];\n            b += this.DOWN_LEFT.color.B * kernel[6];\n            weight += kernel[6];\n        }\n        if (this.DOWN_MIDDLE !== undefined) {\n            r += this.DOWN_MIDDLE.color.R * kernel[7];\n            g += this.DOWN_MIDDLE.color.G * kernel[7];\n            b += this.DOWN_MIDDLE.color.B * kernel[7];\n            weight += kernel[7];\n        }\n        if (this.DOWN_RIGHT !== undefined) {\n            r += this.DOWN_RIGHT.color.R * kernel[8];\n            g += this.DOWN_RIGHT.color.G * kernel[8];\n            b += this.DOWN_RIGHT.color.B * kernel[8];\n            weight += kernel[8];\n        }\n        if (weight <= 0) { weight = 1; }\n\n        this.colNew = Color.FromArgb(255, this.CutColorValue(r / weight), this.CutColorValue(g / weight), this.CutColorValue(b / weight));\n    }\n    public ComputeKernelWeight(kernel: number[]) {\n        let weight = 0;\n        for (let d of kernel) { weight += d; }\n        if (weight <= 0) {return 1; }\n        return weight;\n    }\n    public CutColorValue(v: number) {\n        if (v < 0.0) {return 0; } else if (255 < v) {return 255; } else {return Math.floor(v); }\n    }\n\n    // public GetMesh(bool isGray)\n    // {\n    //     Mesh mesh = new Mesh();\n    //     mesh.Vertices.Add(p.X - this.width, p.Y - this.height, 0);\n    //     mesh.Vertices.Add(p.X + this.width, p.Y - this.height, 0);\n    //     mesh.Vertices.Add(p.X + this.width, p.Y + this.height, 0);\n    //     mesh.Vertices.Add(p.X - this.width, p.Y + this.height, 0);\n\n    //     mesh.VertexColors.Add(this.colNew);\n    //     mesh.VertexColors.Add(this.colNew);\n    //     mesh.VertexColors.Add(this.colNew);\n    //     mesh.VertexColors.Add(this.colNew);\n\n    //     mesh.Faces.AddFace(0, 1, 3);\n    //     mesh.Faces.AddFace(1, 2, 3);\n    //     mesh.Normals.ComputeNormals();\n    //     mesh.Compact();\n\n    //     return mesh;\n    // }\n}\nexport class Color {\n    R: number;\n    G: number;\n    B: number;\n    A: number;\n    public static FromArgb(a: number, r: number, g: number, b: number) {\n        return new Color(r, g, b, a);\n    }\n    constructor(r: number, g: number, b: number, a: number) {\n        this.R = r;\n        this.G = g;\n        this.B = b;\n        this.A = a;\n    }\n}","import { CLICK_TYPE, NVector3 } from '../../../../../../NJSCore';\r\nimport { MouseEventData } from '../EventInteraction/MouseInteraction';\r\n// import { MouseEventData } from '../../AppCoreWrapper/IOWrapper/EventInteraction/MouseInteraction';\r\nimport { CanvasRanderer } from '..';\r\n\r\nexport class ActiveCommandController {\r\n    renderer: CanvasRanderer;\r\n    mouse: NVector3 = new NVector3(0, 0);\r\n\r\n    constructor(renderer: CanvasRanderer) {\r\n        this.renderer = renderer;\r\n    }\r\n    public MouseEventController(e: MouseEventData) {\r\n        const eUI = e.DeepCopy();\r\n        eUI.x = e.xs;\r\n        eUI.y = e.ys;\r\n\r\n        this.renderer.canvas.RenderForce();\r\n\r\n        if (e.CLICK_TYPE === CLICK_TYPE.LEFT) {\r\n            this.MouseLeftClickPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.MIDDLE) {\r\n            this.MouseMiddleClickPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.DOWN_RIGHT) {\r\n            this.MouseRightClickPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.DOUBLE) {\r\n            this.MouseDoubleClickPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.MOVE) {\r\n            this.MouseMovePre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.DRAG) {\r\n            this.MouseDragPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.DOWN) {\r\n            this.MouseDownPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.WHEEL) {\r\n            this.MouseWheelPre(e); return;\r\n        } else if (e.CLICK_TYPE === CLICK_TYPE.UP) { this.MouseUpPre(e); return; }\r\n\r\n    }\r\n\r\n    // .......................................................\r\n    public MouseDown(e: MouseEventData) {/* */ }\r\n    public MouseDownPre(e: MouseEventData) {\r\n        this.MouseDown(e);\r\n    }\r\n    public MouseLeftClick(e: MouseEventData) {/* */ }\r\n    public MouseLeftClickPre(e: MouseEventData) {\r\n        // console.log('left click');\r\n        this.MouseLeftClick(e);\r\n    }\r\n    public MouseMiddleClick(e: MouseEventData) {/* */ }\r\n    public MouseMiddleClickPre(e: MouseEventData) {\r\n\r\n        this.MouseMiddleClick(e);\r\n    }\r\n    public MouseRightClick(e: MouseEventData) { /* */ }\r\n    public MouseRightClickPre(e: MouseEventData) {\r\n\r\n        this.MouseRightClick(e);\r\n    }\r\n    public MouseUp(e: MouseEventData) { /* */ }\r\n    public MouseUpPre(e: MouseEventData) {\r\n\r\n        this.MouseUp(e);\r\n\r\n    }\r\n    public MouseDoubleClick(e: MouseEventData) {/* */ }\r\n    public MouseDoubleClickPre(e: MouseEventData) {\r\n        // console.log('d click');\r\n        this.MouseDoubleClick(e);\r\n    }\r\n    public MouseMove(e: MouseEventData) {/* */ }\r\n    public MouseMovePre(e: MouseEventData) {\r\n        // console.log('move');\r\n\r\n        this.MouseMove(e);\r\n    }\r\n    public MouseDrag(e: MouseEventData) {/* */ }\r\n    public MouseDragPre(e: MouseEventData) {\r\n        this.mouse.x = e.x;\r\n        this.mouse.y = e.y;\r\n\r\n        this.renderer.canvas.Pan(e);\r\n\r\n        this.MouseDrag(e);\r\n    }\r\n    public MouseWheel(e: MouseEventData) {/* */ }\r\n    public MouseWheelPre(e: MouseEventData) {\r\n        this.renderer.canvas.Zoom(e);\r\n        this.MouseWheel(e);\r\n    }\r\n    public pushActionFromPulldown(v: string) {\r\n        const command = v.split('@');\r\n        switch (command[0]) {\r\n            case '':\r\n                //\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n\r\n    }\r\n}","import { KERNEL } from '../../../../../../NJSCore//CV/ConvolutionalFilter/PixelMapFilter';\r\nimport { CanvasRanderer } from '..';\r\nexport class View {\r\n    divUI: HTMLElement;\r\n    divConsole: HTMLElement;\r\n    divLocalMain: HTMLElement;\r\n    canvasRanderer: CanvasRanderer;\r\n    constructor(canvasRanderer: CanvasRanderer) {\r\n        this.canvasRanderer = canvasRanderer;\r\n        this.divLocalMain = this.canvasRanderer.hostDiv;\r\n\r\n        this.initUI();\r\n    }\r\n    initUI() {\r\n        const divUI = document.createElement('div');\r\n        if (!divUI) { return; } this.divUI = divUI;\r\n        this.divLocalMain.append(divUI);\r\n        this.divUI.style.marginLeft = '10px';\r\n        this.divUI.style.width = '100%';\r\n        // this.divUI.style.display = 'grid';\r\n\r\n        const btn = document.createElement('button');\r\n        btn.textContent = 'toggle';\r\n        btn.onclick = () => {\r\n            this.canvasRanderer.implmentation.toggle();\r\n        };\r\n        this.divUI.append(btn);\r\n\r\n        let input = document.createElement('input');\r\n        input.oninput = () => {\r\n            const val = +input.value as number;\r\n            console.log(val);\r\n\r\n\r\n\r\n            let kernel = KERNEL.NORMAL;\r\n\r\n            if (val === 0) { kernel = KERNEL.NORMAL; }\r\n            else if (val === 1) { kernel = KERNEL.BOX_BLUR; }\r\n            else if (val === 2) { kernel = KERNEL.EDGE_DETECTION_1; }\r\n            else if (val === 3) { kernel = KERNEL.EDGE_DETECTION_2; }\r\n            else if (val === 4) { kernel = KERNEL.EDGE_DETECTION_3; }\r\n            else if (val === 5) { kernel = KERNEL.EDGE_DETECTION_4; }\r\n            else if (val === 6) { kernel = KERNEL.EDGE_DETECTION_5; }\r\n            else if (val === 7) { kernel = KERNEL.EDGE_DETECTION_6; }\r\n            else if (val === 8) { kernel = KERNEL.EMBOSS; }\r\n            else if (val === 9) { kernel = KERNEL.GAUSSIAN_BLUR_1; }\r\n            else if (val === 10) { kernel = KERNEL.GAUSSIAN_BLUR_2; }\r\n            else if (val === 11) { kernel = KERNEL.GAUSSIAN_BLUR_3; }\r\n            else if (val === 12) { kernel = KERNEL.PREVIT_HORIZONTAL; }\r\n            else if (val === 13) { kernel = KERNEL.PREVIT_VERTICAL; }\r\n            else if (val === 14) { kernel = KERNEL.SHARPEN; }\r\n            else if (val === 15) { kernel = KERNEL.SHARPENESS; }\r\n            else if (val === 16) { kernel = KERNEL.SOBEL_HORIZONTAL; }\r\n            else if (val === 17) { kernel = KERNEL.SOBEL_VERTICAL; }\r\n            else if (val === 18) { kernel = KERNEL.TRIANGLE_BLUR; }\r\n            else if (val === 19) { kernel = KERNEL.UNSHARPEN; }\r\n\r\n            this.divConsole.innerHTML = 'Convolutional filter: ' + kernel ;\r\n\r\n            this.canvasRanderer.implmentation.setFilter(kernel);\r\n            // this.app.appCore.updateOptionA(val);\r\n        };\r\n        input.type = 'range';\r\n        input.min = '0';\r\n        input.max = '19.0';\r\n        input.step = '1.0';\r\n        input.value = '0';\r\n        this.divUI.append(input);\r\n\r\n        let inputOff = document.createElement('input');\r\n        inputOff.oninput = () => {\r\n            const val = +inputOff.value as number;\r\n            console.log(val);\r\n            // this.app.appCore.updateOptionB(val);\r\n        };\r\n        inputOff.type = 'range';\r\n        inputOff.min = '1';\r\n        inputOff.max = '10.0';\r\n        inputOff.value = '4';\r\n        this.divUI.append(inputOff);\r\n\r\n        // let inputOpt = document.createElement('input');\r\n        // inputOpt.oninput = () => {\r\n        //     const val = +inputOpt.value as number;\r\n        //     this.app.appCore.updateOptionC(val);\r\n        // };\r\n        // inputOpt.type = 'range';\r\n        // inputOpt.min = '1';\r\n        // inputOpt.max = '8';\r\n        // inputOpt.value = '4';\r\n        // this.divUI.append(inputOpt);\r\n\r\n        this.divConsole = document.createElement('p');\r\n        if (!this.divConsole) { return; } this.divUI.append(this.divConsole);\r\n        this.divConsole.style.width = 'max-content';\r\n        this.divConsole.innerHTML = 'Convolutional filter: Normal';\r\n        // this.divConsole.innerHTML += '4. third slider for Opti level! <br> ';\r\n        // this.divConsole.innerHTML += '* num of node: ';\r\n    }\r\n}","import { PixelMapFilter, CONVOLUTIONAL_KERNEL, KERNEL } from '../../../../../../../NJSCore/CV/ConvolutionalFilter/PixelMapFilter';\r\n\r\nimport { Implmentation } from '..';\r\nexport class ImageProcessor {\r\n    canvas: HTMLCanvasElement;\r\n    ctx: CanvasRenderingContext2D;\r\n\r\n    implmentation: Implmentation;\r\n\r\n    img: HTMLImageElement;\r\n    imgDataOrigin: ImageData;\r\n\r\n    pixelMapFilter: PixelMapFilter;\r\n\r\n    constructor(implmentation: Implmentation, img: HTMLImageElement ) {\r\n        this.implmentation = implmentation;\r\n        this.img = img;\r\n\r\n        this.canvas = document.createElement('canvas');\r\n        this.canvas.width = this.img.width;\r\n        this.canvas.height = this.img.height;\r\n        this.ctx = this.canvas.getContext('2d') as CanvasRenderingContext2D;\r\n\r\n        this.ctx.drawImage(this.img, 0, 0, this.img.width, this.img.height);\r\n        console.log('this.img.width, this.img.height', this.img.width, this.img.height);\r\n        this.imgDataOrigin = this.ctx.getImageData(0, 0, this.img.width, this.img.height);\r\n\r\n\r\n    }\r\n    public setFilter(k: KERNEL) {\r\n        this.pixelMapFilter = new PixelMapFilter(this.imgDataOrigin);\r\n        this.pixelMapFilter.computeConvolution(CONVOLUTIONAL_KERNEL[k]);\r\n        const data = this.pixelMapFilter.getBitmap();\r\n\r\n        this.ctx.putImageData(data, 0, 0, 0, 0, this.img.width, this.img.height);\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D) {\r\n        // ctx.drawImage(this.img, 0, 0, this.img.width, this.img.height);\r\n        ctx.drawImage(this.canvas, - this.img.width * 0.5, - this.img.height * 0.5, this.img.width, this.img.height);\r\n\r\n        // ctx.putImageData(this.imgDataOrigin, 0, 0, 0, 0, this.img.width, this.img.height);\r\n        // ctx.putImageData(this.imgDataOrigin, - this.img.width * 0.5, - this.img.height * 0.5);\r\n\r\n    }\r\n\r\n}","import { PixelMapFilter, CONVOLUTIONAL_KERNEL, KERNEL } from '../../../../../../../NJSCore/CV/ConvolutionalFilter/PixelMapFilter';\r\n\r\nimport { Implmentation } from '..';\r\n\r\nexport class VideoProcessor {\r\n    canvas: HTMLCanvasElement;\r\n    ctx: CanvasRenderingContext2D;\r\n\r\n    implmentation: Implmentation;\r\n\r\n    img: HTMLImageElement;\r\n    imgDataOrigin: ImageData;\r\n\r\n    pixelMapFilter: PixelMapFilter;\r\n\r\n    public video: HTMLVideoElement;\r\n\r\n    width = 200;\r\n    height = 200;\r\n\r\n    kernel: number[] = CONVOLUTIONAL_KERNEL.NORMAL;\r\n\r\n    constructor(implmentation: Implmentation, hostDiv?: HTMLElement ) {\r\n        this.implmentation = implmentation;\r\n        this.img = new Image();\r\n\r\n        const width = 300;\r\n        const height = 300;\r\n\r\n        this.width = width;\r\n        this.height = height;\r\n\r\n        this.canvas = document.createElement('canvas');\r\n        this.canvas.width = width;\r\n        this.canvas.height = height;\r\n        this.ctx = this.canvas.getContext('2d') as CanvasRenderingContext2D;\r\n\r\n\r\n        const video = document.createElement('video');\r\n        video.id = this.implmentation.hostDiv.id + 'camera';\r\n        video.setAttribute('playsinline', '');\r\n        video.setAttribute('autoplay', '');\r\n        video.setAttribute('muted', '');\r\n        video.setAttribute('width', `${width}px`);\r\n        video.setAttribute('height', `${height}px`);\r\n        // video.setAttribute('frameRate', '');\r\n        // video.className = Camera.FILTERS[2];\r\n        // video.style.filter = 'blur(3px)';\r\n        // video.style.filter = 'contrast(150%)';\r\n        video.style.width = `${width}px`;\r\n        video.style.height = `${height}px`;\r\n\r\n        if (navigator.mediaDevices.getUserMedia) {\r\n            navigator.mediaDevices.getUserMedia({ video: true })\r\n              .then( (stream) => {\r\n                video.srcObject = stream;\r\n              })\r\n              .catch( (err0r) => {\r\n                console.debug('something went wrong...', err0r);\r\n              });\r\n        }\r\n\r\n        this.video = video;\r\n\r\n        if (video && hostDiv) {\r\n            hostDiv.appendChild(video);\r\n        }\r\n        this.pixelMapFilter = new PixelMapFilter(this.ctx.getImageData(0, 0, this.width, this.height));\r\n    }\r\n    public setFilter(k: KERNEL) {\r\n        this.kernel = CONVOLUTIONAL_KERNEL[k];\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D) {\r\n\r\n        if (this.video) {\r\n\r\n            this.ctx.drawImage(this.video, 0, 0, this.video.width, this.video.height);\r\n\r\n            this.pixelMapFilter.update(this.ctx.getImageData(0, 0,  this.video.width, this.video.height));\r\n            this.pixelMapFilter.computeConvolution(this.kernel);\r\n            this.imgDataOrigin = this.pixelMapFilter.getBitmap();\r\n\r\n            this.ctx.putImageData(this.imgDataOrigin, 0, 0);\r\n\r\n            ctx.drawImage(this.canvas, -this.video.width * 0.5, -this.video.height * 0.5, this.video.width, this.video.height);\r\n        }\r\n\r\n    }\r\n\r\n}","import { KERNEL } from '../../../../../../NJSCore/CV/ConvolutionalFilter/PixelMapFilter';\r\nimport { ImageProcessor } from './ImageProcessor';\r\nimport { VideoProcessor } from './VideoProcessor';\r\n\r\nexport const getImageFromURL = async (src: string = 'https://raw.githubusercontent.com/NamjuLee/data/master/img/bg/zoom-James-River-Kayaking.jpg') => {\r\n    return new Promise((resolve, reject) => {\r\n        const img = new Image();\r\n        img.src = src;\r\n        img.crossOrigin = 'Anonymous';\r\n        img.onload = () => resolve(img);\r\n        img.onerror = () => reject(new Error('cannot loade the img by url...'));\r\n    });\r\n};\r\n\r\nexport class Implmentation {\r\n    public hostDiv: HTMLElement;\r\n\r\n    public imageProcessor: ImageProcessor;\r\n    public videoProcessor: VideoProcessor;\r\n\r\n    private num = 0;\r\n\r\n    constructor(hostDiv: HTMLElement) {\r\n        this.hostDiv = hostDiv;\r\n    }\r\n    public async init(ctx: CanvasRenderingContext2D) {\r\n\r\n        const img = await getImageFromURL();\r\n        const image = img as HTMLImageElement;\r\n\r\n        this.imageProcessor = new ImageProcessor(this, image);\r\n        this.videoProcessor = new VideoProcessor(this, this.hostDiv);\r\n    }\r\n    public toggle() {\r\n        // console.log('dddd');\r\n        this.num++;\r\n    }\r\n    public setFilter(k: KERNEL) {\r\n        if (this.num % 2 === 0) {\r\n            this.videoProcessor.setFilter(k);\r\n        } else {\r\n            this.imageProcessor.setFilter(k);\r\n        }\r\n    }\r\n    public render(ctx: CanvasRenderingContext2D) {\r\n\r\n        if (this.num % 2 === 0) {\r\n            if (this.videoProcessor) {\r\n                this.videoProcessor.render(ctx);\r\n            }\r\n        } else {\r\n            if (this.imageProcessor) {\r\n                this.imageProcessor.render(ctx);\r\n            }\r\n        }\r\n\r\n    }\r\n}","import { Canvas } from './Canvas/Canvas';\r\nimport { MouseInteraction, MouseEventData } from './EventInteraction/MouseInteraction';\r\nimport { ActiveCommandController } from './ActiveCommandController/ActiveCommandController';\r\nimport { View } from './View';\r\nimport { Implmentation } from './Implmentation';\r\n\r\n\r\n\r\nexport class CanvasRanderer {\r\n    public id: string;\r\n    public hostDiv: HTMLElement;\r\n    public div: HTMLElement;\r\n\r\n    public canvas: Canvas;\r\n    public activeCommandController: ActiveCommandController;\r\n    public mouseInteraction: MouseInteraction;\r\n    public implmentation: Implmentation;\r\n    public view: View;\r\n\r\n    static Init(id: string = 'SandBox') {\r\n        new CanvasRanderer(id);\r\n    }\r\n    constructor(id: string = 'SandBox') {\r\n        this.id = id;\r\n        this.Init();\r\n        window['app'] = this;\r\n    }\r\n    private Init() {\r\n        const hostdiv = document.getElementById(this.id);\r\n        if (hostdiv) { this.hostDiv = hostdiv; } else { return; }\r\n\r\n        const div = document.createElement('div');\r\n        if (div) {\r\n            this.div = div;\r\n            this.div.style.width = '400px'; // '100%';\r\n            this.div.style.height = '300px'; // '100%';\r\n            this.div.style.background = '#dddddd';\r\n            this.hostDiv.append(this.div);\r\n        }\r\n        this.implmentation = new Implmentation(this.hostDiv);\r\n        this.canvas = new Canvas(this, div);\r\n\r\n        this.canvas.initBinder = (ctx: CanvasRenderingContext2D) => this.InitRender(ctx);\r\n        this.canvas.RenderBinder = (ctx: CanvasRenderingContext2D) => this.Render(ctx);\r\n        this.activeCommandController = new ActiveCommandController(this);\r\n        this.mouseInteraction = new MouseInteraction();\r\n        this.InitEventListener(div as HTMLDivElement);\r\n        this.view = new View(this);\r\n        this.canvas.LoopInit();\r\n        this.canvas.SetLevel6();\r\n    }\r\n    public InitEventListener(div: HTMLDivElement) {\r\n        this.mouseInteraction.InitNativeMouseEvent(div);\r\n        this.mouseInteraction.MouseEventEmittingBinder = (e: MouseEventData) => {\r\n            this.activeCommandController.MouseEventController(e);\r\n        };\r\n        window.addEventListener('resize', (e: UIEvent) => {\r\n            this.Resize(e, this.hostDiv.clientWidth, this.hostDiv.clientHeight);\r\n        });\r\n\r\n    }\r\n    public Resize(e: UIEvent, width: number, height: number) {\r\n        // console.log(width, height);\r\n    }\r\n    public InitRender(ctx: CanvasRenderingContext2D) {\r\n        this.implmentation.init(ctx);\r\n    }\r\n    public Render(ctx: CanvasRenderingContext2D) {\r\n        this.implmentation.render(ctx);\r\n    }\r\n\r\n}","import { CanvasRanderer } from './CanvasRanderer';\r\nexport class AppImageProcessor {\r\n    id: string;\r\n    renderer: CanvasRanderer;\r\n    hostDiv: HTMLElement;\r\n    div: HTMLElement;\r\n    version: number = 1;\r\n    static Init(id: string = 'SandBox') {\r\n        new AppImageProcessor(id, 1);\r\n    }\r\n    constructor(id: string = 'SandBox', version: number = 1) {\r\n        this.id = id;\r\n        this.version = version;\r\n        this.Init();\r\n    }\r\n    private Init() {\r\n\r\n        switch (this.version) {\r\n            case 1:\r\n                this.renderer = new CanvasRanderer(this.id);\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n\r\n\r\n    }\r\n}","import { AppImageProcessor } from './AppImageProcessor';\r\n// import { AppThreeTemplate } from './AppThreeTemplate';\r\n\r\nexport class Demo60ImageProcessor {\r\n    static Init(id: string) {\r\n        const n = new Demo60ImageProcessor(id);\r\n        n.Dummy();\r\n    }\r\n    constructor(id: string = 'SandBox') {\r\n        new AppImageProcessor(id);\r\n    }\r\n    Dummy() {\r\n        console.log('working');\r\n    }\r\n}\r\n"],"names":["Canvas","constructor","renderer","div","canvas","ctx","isActive","scale","translation","translationZoom","deltaTime","canvasLoopController","log","isViewChanging","loopNum","needRenderloop","ablePan","pause","this","Init","document","createElement","width","clientWidth","height","clientHeight","append","getContext","Deltatime","CanvasLoopController","LoopInit","SetLevel4","initBinder","Loop","before","performance","now","UpdateFPS","level","requestAnimationFrame","RenderPre","stop","TimerForStop","after","frameRate","toFixed","SetLevel1","SetLevel2","SetLevel3","RenderSetLevel4","Reset","setTimeout","SetLevel5","SetLevel6","console","Clear","clearRect","Zoom","e","wheel","RemapByZoom","x","xs","y","ys","Pan","xOff","preXs","yOff","preYs","RenderForce","save","translate","i","j","beginPath","fillStyle","arc","Math","PI","closePath","fill","RenderBinder","restore","CLICK_TYPE","KERNEL","MouseEventData","z","preX","preY","preZ","yGLPicking","command","MOVE","isDown","isDoubleClick","isMove","pressedShift","pressedAlt","pressedCtrl","preWheel","native","DeepCopy","mEvent","MouseInteraction","mouseInteractionUI","mouseEventDataPre","isEnable","clickCount","click","prevent","delay","timer","down","_stopPropagation","InitNativeMouseEvent","onclick","MouseClick","ondblclick","clearTimeout","MouseDoubleClick","onmousedown","MouseDown","onmouseup","MouseUp","onmousemove","MouseMove","addEventListener","MouseWheel","deltaY","CommonEventBuilder","DOWN","MouseEvenEmitting","button","LEFT","MIDDLE","RIGHT","DOUBLE","MouseDrag","DRAG","buttons","DRAG_MIDDLE","DRAG_RIGHT","UP","v","WHEEL","shiftKey","altKey","ctrlKey","offsetX","offsetY","stopPropagation","mouseEventData","MouseEventEmittingForViewController","MouseEventEmittingBinder","MouseInteractionMenu","ActiveCommandController","mouse","NVector3","MouseEventController","eUI","MouseUpPre","MouseWheelPre","MouseDownPre","MouseDragPre","MouseMovePre","MouseDoubleClickPre","MouseRightClickPre","MouseMiddleClickPre","MouseLeftClickPre","MouseLeftClick","MouseMiddleClick","MouseRightClick","pushActionFromPulldown","split","CONVOLUTIONAL_KERNEL","NORMAL","GAUSSIAN_BLUR_1","GAUSSIAN_BLUR_2","GAUSSIAN_BLUR_3","BOX_BLUR","TRIANGLE_BLUR","EMBOSS","UNSHARPEN","SHARPENESS","SHARPEN","EDGE_DETECTION_1","EDGE_DETECTION_2","EDGE_DETECTION_3","EDGE_DETECTION_4","EDGE_DETECTION_5","EDGE_DETECTION_6","SOBEL_HORIZONTAL","SOBEL_VERTICAL","PREVIT_HORIZONTAL","PREVIT_VERTICAL","PixelMapFilter","bitmap","isGray","pixels","bitmapResult","data","length","c","Color","col","ColorUtility","R","G","B","nc","FromArgb","floor","p","Pixel","push","InitGridNeighbor","k","px0","npix","UP_LEFT","UP_MIDDLE","UP_RIGHT","MIDDLE_LEFT","MIDDLE_RIGHT","DOWN_LEFT","DOWN_MIDDLE","DOWN_RIGHT","update","index","color","A","computeConvolution","kernel","ComputeByKernelList","getBitmap","ImageData","colNew","pm","p0","p1","temp","val","weight","r","g","b","undefined","CutColorValue","ComputeKernelWeight","d","a","View","canvasRanderer","divUI","divConsole","divLocalMain","hostDiv","initUI","style","marginLeft","btn","textContent","implmentation","toggle","input","oninput","value","innerHTML","setFilter","type","min","max","step","inputOff","ImageProcessor","img","imgDataOrigin","pixelMapFilter","drawImage","getImageData","putImageData","render","VideoProcessor","video","Image","id","setAttribute","navigator","mediaDevices","getUserMedia","then","stream","srcObject","catch","err0r","debug","appendChild","Implmentation","imageProcessor","videoProcessor","num","async","src","Promise","resolve","reject","crossOrigin","onload","onerror","Error","getImageFromURL","image","CanvasRanderer","static","activeCommandController","mouseInteraction","view","window","hostdiv","getElementById","background","InitRender","Render","InitEventListener","Resize","init","AppImageProcessor","version","Demo60ImageProcessor","Dummy"],"sourceRoot":""}