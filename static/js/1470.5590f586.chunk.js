"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[1470],{1470:function(t,i,e){e.r(i),e.d(i,{Renderer:function(){return o},Solution:function(){return h},dithering:function(){return d},getSlider:function(){return r}});var s=e(55913),a=e(87968);class n{constructor(t,i,e,s,a){this.renderer=void 0,this.x=void 0,this.y=void 0,this.radiusX=50,this.radiusY=50,this.blur=20,this.opacity=.85,this._isHover=!1,this._isCaptured=!1,this.mPre=[0,0],this.rgb=[255,255,255],this.globalCompositeOperation="lighten",this.renderer=t,this.x=i,this.y=e,this.globalCompositeOperation=s,this.rgb=a}isHover(t,i){return(0,a.distanceTo)(this.x,this.y,0,t,i,0)<.5*(this.radiusX+this.radiusY)?this._isHover=!0:this._isHover=!1,this._isHover}translation(t,i){this.x=t,this.y=i}render(t){t.globalCompositeOperation=this.globalCompositeOperation,t.filter="blur(".concat(this.blur,"px)"),t.beginPath(),t.ellipse(this.x,this.y,this.radiusX,this.radiusY,0,0,2*Math.PI),t.fillStyle="rgba(".concat(this.rgb[0],", ").concat(this.rgb[1],", ").concat(this.rgb[2],", ").concat(this.opacity,")"),t.fill(),t.filter="none",t.globalCompositeOperation="source-over",(this._isHover||this._isCaptured)&&(t.beginPath(),t.ellipse(this.x,this.y,this.radiusX,this.radiusY,0,0,2*Math.PI),t.stroke())}}class h{constructor(t){this.divHost=void 0,this.renderer=void 0,this.divHost=t,this.divHost.style.display="flex",this.divHost.style.alignItems="center";const i=document.createElement("div");i.style.marginLeft="auto",i.style.marginRight="auto",i.style.backgroundColor="#555",i.style.width="1000px",i.style.height="600px",this.divHost.appendChild(i),this.renderer=new o(i)}destroy(){for(this.renderer.destroy();this.divHost.lastElementChild;)this.divHost.removeChild(this.divHost.lastElementChild)}}class o extends s.bb{constructor(t){super(t),this.img=void 0,this.rotation=0,this.m=[0,0],this.switch=!0,this.capture=void 0,this.tints=[],this.canvas.style.position="relative",this.canvas.style.width="100%",this.canvas.style.height="100%",(0,s.t4)("https://www.glenstone.org/wp-content/uploads/2018/07/AV_Landscape-Hero-Contour-2993-1276x800.jpg").then((t=>{this.img=t}));const i=document.createElement("input");i.value="https://raw.githubusercontent.com/NamjuLee/data/master/img/person/HaminHaram.jpg",i.addEventListener("keydown",(t=>{"Enter"===t.code&&(0,s.t4)(i.value).then((t=>{this.img=t,this.tints=[],this.capture=void 0}))})),this.divHost.appendChild(i);const e=document.createElement("div");e.style.display="flex";const a=document.createElement("div");e.appendChild(a),a.textContent="Lighten  ",a.style.paddingRight="100px",a.style.color="aqua",a.onclick=()=>{this.tints.push(new n(this,.5*this.divHost.clientWidth,.5*this.divHost.clientHeight,s.vb.COLOR_DODGE,[125,125,125]))};const h=document.createElement("div");e.appendChild(h),h.style.paddingRight="100px",h.textContent="Darken",h.style.color="aqua",h.onclick=()=>{this.tints.push(new n(this,.5*this.divHost.clientWidth,.5*this.divHost.clientHeight,s.vb.OVERLAY,[0,0,0]))};const o=document.createElement("div");e.appendChild(o),o.textContent="Toggle",o.style.color="aqua",o.onclick=()=>{this.switch=!this.switch},this.divHost.appendChild(e);const d=document.createElement("div");d.style.display="flex",this.divHost.appendChild(d);const c=r("R1",20,400);d.appendChild(c.div),c.slider.oninput=()=>{this.capture&&(this.capture.radiusX=+c.slider.value)};const l=r("R2",20,400);d.appendChild(l.div),l.slider.oninput=()=>{this.capture&&(this.capture.radiusY=+l.slider.value)};const p=r("Feather",4,50);this.divHost.appendChild(p.div),p.slider.oninput=()=>{this.capture&&(this.capture.blur=+p.slider.value)};const u=r("Intensity",1,100);this.divHost.appendChild(u.div),u.slider.oninput=()=>{this.capture&&(this.capture.opacity=.01*+u.slider.value)};const v=document.createElement("input");v.type="color",v.addEventListener("input",(()=>{if(this.capture){const t=(0,s.Oo)(v.value);this.capture.rgb=t}})),this.divHost.appendChild(v);const m=document.createElement("input");m.onchange=()=>{this.capture&&(this.capture.globalCompositeOperation=m.value)},this.divHost.appendChild(m),this.start()}render(t){this.ctx.save(),this.ctx.translate(.5*this.canvas.width,.5*this.canvas.height),this.ctx.rotate(this.rotation),this.img&&this.ctx.drawImage(this.img,.5*-this.img.width,.5*-this.img.height),this.ctx.restore(),d(t),t.beginPath(),t.arc(this.m[0],this.m[1],5,0,2*Math.PI),t.closePath(),t.fill(),this.switch&&this.tints.forEach(((i,e)=>{i.render(t)}))}mouseDown(t,i){this.m=[t,i],void 0!==this.capture&&(this.capture._isCaptured=!1),this.tints.forEach(((e,s)=>{e.isHover(t,i)&&(this.capture=e)}))}mouseUp(t,i){}mouseDrag(t,i){this.m=[t,i],this.capture&&this.capture.translation(t,i)}mouseClick(t,i){this.m=[t,i],void 0!==this.capture&&(this.capture._isCaptured=!1),this.capture=void 0,this.tints.forEach(((e,s)=>{e.isHover(t,i)&&(this.capture=e,this.capture._isCaptured=!0)}))}mouseMove(t,i){this.m=[t,i],this.tints.forEach(((e,s)=>{e.isHover(t,i)}))}keyDown(t){}}const r=(t,i,e)=>{const s=document.createElement("div");s.style.display="flex";const a=document.createElement("input");a.type="range",a.min="".concat(i),a.max="".concat(e);const n=document.createElement("div");return n.textContent=t,n.style.color="#aaa",s.appendChild(a),s.appendChild(n),{div:s,slider:a}},d=t=>{const i=t.getImageData(0,0,t.canvas.width,t.canvas.height);let e=new ImageData(new Uint8ClampedArray(i.data),i.width,i.height);function s(t,e){return 4*t+e*i.width*4}for(let n=0;n<i.height;n++)for(let t=0;t<i.width;t++){let i=e.data[s(t,n)],a=i>125?255:0;e.data[s(t,n)]=e.data[s(t,n)+1]=e.data[s(t,n)+2]=a;let h=i-a;e.data[s(t+1,n)]=e.data[s(t+1,n)+1]=e.data[s(t+1,n)+2]=e.data[s(t+1,n)]+7*h/16,e.data[s(t-1,n+1)]=e.data[s(t-1,n+1)+1]=e.data[s(t-1,n+1)+2]=e.data[s(t-1,n+1)]+3*h/16,e.data[s(t,n+1)]=e.data[s(t,n+1)+1]=e.data[s(t,n+1)+2]=e.data[s(t,n+1)]+5*h/16,e.data[s(t+1,n+1)]=e.data[s(t+1,n+1)+1]=e.data[s(t+1,n+1)+2]=e.data[s(t+1,n+1)]+1*h/16}t.putImageData(e,0,0);const a=t.canvas.toDataURL();console.log(a)}}}]);
//# sourceMappingURL=1470.5590f586.chunk.js.map