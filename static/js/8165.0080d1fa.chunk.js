"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[8165],{98165:function(e,t,n){n.r(t),n.d(t,{Renderer:function(){return S},Solution:function(){return k}});var i=n(72791),o=n(67028);var s="undefined"!==typeof window?i.useLayoutEffect:i.useEffect;function r(e,t){for(;e;){if(e===t)return!0;e=Object.getPrototypeOf(e)}return!1}var a=n(50735),c=n(79966);const d={position:"absolute",zIndex:-1};function l(e,t){if("function"===typeof e)return e(t);if(Array.isArray(e))return e.map((e=>l(e,t)));if(u(e)){if(function(e){var t;return null===(t=e.props)||void 0===t?void 0:t.mapStyle}(e))return t.style=d,(0,i.cloneElement)(e,t);if(function(e){const t=e.type;return t&&t.deckGLViewProps}(e))return(0,i.cloneElement)(e,t)}return e}function u(e){return e&&"object"===typeof e&&"type"in e||!1}function p(e){if("function"===typeof e)return(0,i.createElement)(a.Z,{},e);if(Array.isArray(e))return e.map(p);if(u(e)){if(e.type===i.Fragment)return p(e.props.children);if(r(e.type,a.Z))return e}return e}const h={mixBlendMode:null};function v(e){e.redrawReason&&(e.deck._drawLayers(e.redrawReason),e.redrawReason=null)}const f=(0,i.forwardRef)(((e,t)=>{const[n,d]=(0,i.useState)(0),f=(0,i.useRef)({control:null,version:n,forceUpdate:()=>d((e=>e+1))}).current,w=(0,i.useRef)(null),y=(0,i.useRef)(null),g=(0,i.useMemo)((()=>function(e){let{children:t,layers:n=[],views:o=null}=e;const s=[],d=[],l={};return i.Children.forEach(p(t),(e=>{if(u(e)){const t=e.type;if(r(t,c.Z)){const n=function(e,t){const n={},i=e.defaultProps||{};for(const o in t)i[o]!==t[o]&&(n[o]=t[o]);return new e(n)}(t,e.props);d.push(n)}else s.push(e);if(r(t,a.Z)&&t!==a.Z&&e.props.id){const n=new t(e.props);l[n.id]=n}}else e&&s.push(e)})),Object.keys(l).length>0&&(Array.isArray(o)?o.forEach((e=>{l[e.id]=e})):o&&(l[o.id]=o),o=Object.values(l)),n=d.length>0?[...d,...n]:n,{layers:n,children:s,views:o}}(e)),[e.layers,e.views,e.children]);let m=!0;const k=t=>{var n;return m&&e.viewState?(f.viewStateUpdateRequested=t,null):(f.viewStateUpdateRequested=null,null===(n=e.onViewStateChange)||void 0===n?void 0:n.call(e,t))},S=t=>{var n;m?f.interactionStateUpdateRequested=t:(f.interactionStateUpdateRequested=null,null===(n=e.onInteractionStateChange)||void 0===n||n.call(e,t))},b=(0,i.useMemo)((()=>{const t={...e,style:null,width:"100%",height:"100%",parent:w.current,canvas:y.current,layers:g.layers,views:g.views,onViewStateChange:k,onInteractionStateChange:S};return delete t._customRender,f.deck&&f.deck.setProps(t),t}),[e]);(0,i.useEffect)((()=>{const t=e.Deck||o.Z;return f.deck=function(e,t,n){const i=new t({...n,_customRender:t=>{e.redrawReason=t;const n=i.getViewports();e.lastRenderedViewports!==n?e.forceUpdate():v(e)}});return i}(f,t,{...b,parent:w.current,canvas:y.current}),()=>{var e;return null===(e=f.deck)||void 0===e?void 0:e.finalize()}}),[]),s((()=>{v(f);const{viewStateUpdateRequested:e,interactionStateUpdateRequested:t}=f;e&&k(e),t&&S(t)})),(0,i.useImperativeHandle)(t,(()=>function(e){return{get deck(){return e.deck},pickObject:t=>e.deck.pickObject(t),pickMultipleObjects:t=>e.deck.pickMultipleObjects(t),pickObjects:t=>e.deck.pickObjects(t)}}(f)),[]);const C=f.deck&&f.deck.isInitialized?f.deck.getViewports():void 0,{ContextProvider:R,width:x,height:E,id:V,style:j}=e,{containerStyle:M,canvasStyle:U}=(0,i.useMemo)((()=>function(e){let{width:t,height:n,style:i}=e;const o={position:"absolute",zIndex:0,left:0,top:0,width:t,height:n},s={left:0,top:0};if(i)for(const r in i)r in h?s[r]=i[r]:o[r]=i[r];return{containerStyle:o,canvasStyle:s}}({width:x,height:E,style:j})),[x,E,j]);if(!f.viewStateUpdateRequested&&f.lastRenderedViewports===C||f.version!==n){f.lastRenderedViewports=C,f.version=n;const e=function(e){let{children:t,deck:n,ContextProvider:o}=e;const{viewManager:s}=n||{};if(!s||!s.views.length)return[];const c={},d=s.views[0].id;for(const i of t){let e=d,t=i;u(i)&&r(i.type,a.Z)&&(e=i.props.id||d,t=i.props.children);const n=s.getViewport(e),o=s.getViewState(e);if(n){o.padding=n.padding;const{x:i,y:s,width:r,height:a}=n;t=l(t,{x:i,y:s,width:r,height:a,viewport:n,viewState:o}),c[e]||(c[e]={viewport:n,children:[]}),c[e].children.push(t)}}return Object.keys(c).map((e=>{const{viewport:t,children:s}=c[e],{x:r,y:a,width:d,height:l}=t,u={position:"absolute",left:r,top:a,width:d,height:l},p="view-".concat(e),h=(0,i.createElement)("div",{key:p,id:p,style:u},...s);if(o){const s={viewport:t,container:n.canvas.offsetParent,eventManager:n.eventManager,onViewStateChange:t=>{t.viewId=e,n._onViewStateChange(t)}};return(0,i.createElement)(o,{key:p,value:s},h)}return h}))}({children:g.children,deck:f.deck,ContextProvider:R}),t=(0,i.createElement)("canvas",{key:"canvas",id:V||"deckgl-overlay",ref:y,style:U});f.control=(0,i.createElement)("div",{id:"".concat(V||"deckgl","-wrapper"),ref:w,style:M},[t,e])}return m=!1,f.control}));f.defaultProps=o.Z.defaultProps;var w=f,y=n(99764);class g{constructor(e){this.map=void 0,this.deckLayer=void 0,this.downloadImage=()=>{const e=this.map.getCanvas();console.log(e),console.log(this.deckLayer.deck.canvas);let t=document.createElement("canvas");t.width=e.width,t.height=e.height,t.getContext("2d").drawImage(this.deckLayer.deck.canvas,0,0);var n=document.createElement("a");n.download="filename.jpg",n.href=t.toDataURL(),n.click()},this.center=function(){},this.toMap=(e,t)=>{},this.toScreen=(e,t)=>{},this.mouseDown=e=>{},this.mouseUp=e=>{},this.mouseMove=e=>{},this.mouseClick=e=>{},this.mouseDClick=e=>{this.downloadImage()},this.initMap(e)}initMap(e){document.getElementById(e);const t=new w({container:"id",mapboxApiAccessToken:"pk.eyJ1IjoiZGVzaWduanUiLCJhIjoiY2xhNGU0YWo4MDlhYzNwdHBwenVvang4eiJ9.P3sX4l_3KjdPeRRbVS1VVg",mapStyle:"mapbox://styles/mapbox/dark-v9",longitude:-122.45,latitude:37.8,zoom:11,pitch:30,layers:[new y.Z({data:[{pickup:[-122.42,37.8],dropoff:[-122.48,37.76]},{pickup:[-122.43,37.8],dropoff:[-122.42,37.75]}],getSourcePosition:e=>e.pickup,getTargetPosition:e=>e.dropoff,getSourceColor:e=>[255,128,0],getTargetColor:e=>[0,128,255],strokeWidth:5})],onClick:console.log});console.log(t)}}var m=n(55913);class k{constructor(e){this.divHost=void 0,this.mapboxWrapper=void 0,this.renderer=void 0,this.mouseDown=e=>{},this.mouseUp=e=>{},this.mouseDrag=e=>{},this.mouseClick=e=>{console.log(e),console.log(e.lngLat)},this.mouseMove=e=>{},this.divHost=e,this.divHost.style.position="relative",this.mapboxWrapper=new g(this.divHost.id)}keyDown(e){}destroy(){for(this.renderer.destroy();this.divHost.lastElementChild;)this.divHost.removeChild(this.divHost.lastElementChild)}}class S extends m.bb{constructor(e,t){super(e),this.app=void 0,this.time=0,this.pts=[],this.mouseDown=(e,t)=>{},this.mouseUp=(e,t)=>{},this.mouseDrag=(e,t)=>{},this.app=t,this.canvas.id="mapboxCustom",this.canvas.style.position="absolute",this.canvas.style.width="100%",this.canvas.style.height="100%",this.canvas.style.pointerEvents="none",this.pts.push([-71.093161,42.358871]),this.start()}render(e){}}}}]);
//# sourceMappingURL=8165.0080d1fa.chunk.js.map