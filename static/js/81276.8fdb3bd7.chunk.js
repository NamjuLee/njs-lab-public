"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[81276],{81276:(t,e,s)=>{s.r(e),s.d(e,{AppML:()=>l});class i{constructor(t){this.app=void 0,this.ctx=void 0,this.canvas=void 0,this.vs=[],this.isDown=!1,this.radius=3,this.div=void 0,this.app=t;const e=document.getElementById("classText");e&&(this.div=e),this.canvas=document.createElement("canvas"),this.app.host&&(this.app.host.appendChild(this.canvas),this.canvas.width=300,this.canvas.height=300),this.canvas.style.background="#ffffff",this.canvas.style.margin="20px",this.canvas.style.zIndex="1";const s=this.canvas.getContext("2d");null!==s&&(this.ctx=s),this.app.Init(this.ctx),this.InitEvent(),this.Loop()}InitEvent(){this.canvas.onmousedown=t=>{this.isDown=!0,this.vs=[]},this.canvas.onmouseup=t=>{this.isDown=!1;const e=this.app.implementation.smartDrawing.Predict(this.vs);this.div.innerHTML="class: "+e},this.canvas.onmousemove=t=>{this.isDown&&(this.vs.push([t.offsetX,t.offsetY]),this.Loop())}}Loop(){if(this.UpdateBG(),0!==this.vs.length){this.ctx.lineWidth=2,this.ctx.fillStyle="rgba(250, 50, 15, 0.2)",this.ctx.strokeStyle="rgba(250, 50, 15, 0.5)",this.ctx.beginPath(),this.ctx.moveTo(this.vs[0][0],this.vs[0][1]);for(let t=1;t<this.vs.length;++t)this.ctx.lineTo(this.vs[t][0],this.vs[t][1]);this.ctx.stroke();for(let t of this.vs)this.ctx.beginPath(),this.ctx.arc(t[0],t[1],this.radius,0,6.28),this.ctx.closePath(),this.ctx.fill()}}Clear(){this.vs=[],this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.UpdateBG()}UpdateBG(){this.ctx.beginPath(),this.ctx.rect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.closePath(),this.ctx.fillStyle="#ddaadd",this.ctx.fill()}}var n=s(65812);class r{static GetVecforGraphicApp(t,e,s,i,n,o){let a=new r(0,0,0);return a.long=t,a.lat=e,a.ele=s,a.proX=i,a.proY=n,a.proZ=o,a}static DeepCopy(t){const e=new r(t.x,t.y,t.z);return e.long=t.long,e.lat=t.lat,e.proX=t.proX,e.proY=t.proY,e.proZ=t.proZ,e}static Dot(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}static GetAreayConvexGPS(t){let e=[],s=[];for(let u=0;u<t.length;++u)e.push(t[u].lat),s.push(t[u].long);e.push(t[0].lat),s.push(t[0].long);let i=0,n=0;for(let u=e.length;u--;)i+=e[u],n+=s[u];let r,o,a,h=i/e.length,l=n/s.length,c=new Array(e.length);for(let u=e.length;u--;)e[u]-=h,s[u]-=l,s[u]>=0&&e[u]>=0?c[u]=Math.abs(180*Math.atan(e[u]/s[u])/Math.PI):s[u]<0&&e[u]>=0?c[u]=90+Math.abs(180*Math.atan(e[u]/s[u])/Math.PI):s[u]<0&&e[u]<0?c[u]=180+Math.abs(180*Math.atan(e[u]/s[u])/Math.PI):s[u]>=0&&e[u]<0&&(c[u]=270+Math.abs(180*Math.atan(e[u]/s[u])/Math.PI));for(let u=0;u<c.length;u++)for(let t=0;t<c.length-1;t++)r=c[t],o=e[t],a=s[t],r<c[t+1]&&(c[t]=c[t+1],e[t]=e[t+1],s[t]=s[t+1],c[t+1]=r,e[t+1]=o,s[t+1]=a);let x=0,y=0;for(let u=0;u<e.length;u++)u!==e.length-1?(x+=e[u]*s[u+1],y+=s[u]*e[u+1]):(x+=e[u]*s[0],y+=s[u]*e[0]);return 20*((x-y)/2)}static ScalarRev_V_S_OUT(t,e,s){return s.x=e*t.x,s.y=e*t.y,s.z=e*t.z,s}static Add(t,e){return new r(t.x+e.x,t.y+e.y,t.z+e.z)}static Sub(t,e){return new r(t.x-e.x,t.y-e.y,t.z-e.z)}static Clone(t){return r.DeepCopy(t)}static ZAxis(){return new r(0,0,1)}static YAxis(){return new r(0,1,0)}static Zero(){return new r(0,0,0)}static Origin(){return new r(0,0,0)}static Plus(t,e){return new r(t.x+e.x,t.y+e.y,t.z+e.z)}static Scale(t,e){return new r(t.x*e,t.y*e,t.z*e)}static MidVec(t,e){return new r(.5*(t.x+e.x),.5*(t.y+e.y),.5*(t.z+e.z))}static CompareTwoVectors(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z}static Length(t){return Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z)}static Normalize(t){let e=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z);return new r(t.x/e,t.y/e,t.z/e)}static GetArea(t){let e=0;for(let s=0,i=t.length;s<i;s++){e+=t[s].x*t[s===t.length-1?0:s+1].y*.5,e-=t[s===t.length-1?0:s+1].x*t[s].y*.5}return Math.abs(e)}static GetAreaByLongLat(t){let e=0;for(let s=0;s<t.length-1;s++)e+=(t[s].long-t[s+1].long)*(t[s].lat+t[s+1].lat);return e*=.5,e}static GetGeoArea(t){let e=0;for(let s=0;s<t.length-1;s++)e+=(t[s].x-t[s+1].x)*(t[s].y+t[s+1].y);return e*=.5,Math.abs(e)}static GetGeoAreaBbyLongLat(t){let e=0;for(let s=0;s<t.length-1;s++)e+=(t[s].long-t[s+1].long)*(t[s].lat+t[s+1].lat);return e*=.5,Math.abs(e)}static Distance(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)+(t.z-e.z)*(t.z-e.z))}static Distance2(t,e){return(t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y)+(t.z-e.z)*(t.z-e.z)}static DotProduct(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}static CrossProduct(t,e){return new r(t.y*e.z-t.z*e.y,t.z*e.x-t.x*e.z,t.x*e.y-t.y*e.x)}static DivideByNum(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,i=[],n=(e.x-t.x)/s,o=(e.y-t.y)/s,a=(e.z-t.z)/s;for(let h=0;h<s;++h){let e=t.x+n*h,s=t.y+o*h,l=t.z+a*h;i.push(new r(e,s,l))}return i}static KMeterFromGeoGPSPos(t,e){let s=e.lat*Math.PI/180-t.lat*Math.PI/180,i=e.long*Math.PI/180-t.long*Math.PI/180,n=Math.sin(s/2)*Math.sin(s/2)+Math.cos(t.lat*Math.PI/180)*Math.cos(e.lat*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return 6378.137*(2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n)))}static KMeterByTwoGeoPos(t,e,s,i){let n=new r(0,0);n.long=t,n.lat=e;let o=new r(0,0);return o.long=s,o.lat=i,r.KMeterFromGeoGPSPos(n,o)}static KMeterFromGPSPos(t,e){let s=e.y*Math.PI/180-t.y*Math.PI/180,i=e.x*Math.PI/180-t.x*Math.PI/180,n=Math.sin(s/2)*Math.sin(s/2)+Math.cos(t.y*Math.PI/180)*Math.cos(e.y*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return 6378.137*(2*Math.atan2(Math.sqrt(n),Math.sqrt(1-n)))}static Get1KM_Long_ByGeoUnit(){let t=new r(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,0),e=0;for(let s=0;s<1e4;++s){let s=r.KMeterFromGPSPos(t,new r(t.x+e,t.y,t.z));if(1<s&&s<1.001)return t.x+e;e+=1e-5}return-1}static Get1KM_lat_ByGeoUnit(){let t=new r(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,0),e=0;for(let s=0;s<1e4;++s){let s=r.KMeterFromGPSPos(t,new r(t.x,t.y+e,t.z));if(1<s&&s<1.001)return t.y+e;e+=1e-5}return-1}static Get1KM_Lat_Long_GeoUnit(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=r.Get1KM_Long_ByGeoUnit(t,e),i=r.Get1KM_lat_ByGeoUnit(t,e);return new r(s,i,0)}static CalculateFalloff(t,e,s,i){let n=e.Sub(t).Length();return n*(s*Math.exp(-i*n*n))}static Attractor(t,e,s,i){let n=e.Sub(t);n.Unitize();let r=n.Length();return n.Mult(s*Math.exp(-i*r*r))}static Explosion(t,e,s,i){let n=e.Sub(t);n.Unitize();let r=n.Length();return n.Mult(-s*Math.exp(-i*r*r))}static Rotor(t,e,s,i){return e.Sub(t).Unitize(),r.Origin()}static GetAngleBetween(t,e){return Math.atan2(e.x-t.x,e.y-t.y)}static GetCosAngleByTwoVectors(t,e){return r.DotProduct(r.Normalize(t),r.Normalize(e))}static GetAngleByTwoVectorsRadian(t,e){return Math.acos(r.GetCosAngleByTwoVectors(t,e))}static GetAngleByTwoVectors(t,e){return 180*r.GetAngleByTwoVectorsRadian(t,e)/Math.PI}static GetRotationByWorldCoodinate(t){let e=new r(1,0,0);return r.GetAngleByTwoVectors(e,t)}static GetRotationByWorldCoodinateByTwo(t,e){let s=e.Sub(t),i=new r(1,0,0);return s.y>0?-1*r.GetAngleByTwoVectors(i,s):r.GetAngleByTwoVectors(i,s)}static ComputeDotProducts(t){let e=[];for(let s=0;s<t.length;++s)if(s<t.length-1){let i=new r(t[s].x,t[s].y,t[s].z),n=new r(t[s+1].x,t[s+1].y,t[s+1].z);n.x-=i.x,n.y-=i.y,n.z-=i.z;let o=r.DotProduct(new r(1,0,0),r.Normalize(n));Number.isNaN(o)?e.push(e[e.length-1]):e.push(o)}else{let i=new r(t[s].x,t[s].y,t[s].z),n=new r(t[0].x,t[0].y,t[0].z);n.x-=i.x,n.y-=i.y,n.z-=i.z;let o=r.DotProduct(new r(1,0,0),r.Normalize(n));Number.isNaN(o)?e.push(e[e.length-1]):e.push(o)}return e}static ComputeDotProductsWithCenter(t){let e=r.GetCenterVecFromVecs(t),s=[];for(let i=0;i<t.length;++i){let n,o;i<t.length-1?(n=new r(t[i].x-e.x,t[i].y-e.y,t[i].z-e.z),o=new r(t[i+1].x-e.x,t[i+1].y-e.y,t[i+1].z-e.z)):(n=new r(t[i].x-e.x,t[i].y-e.y,t[i].z-e.z),o=new r(t[0].x-e.x,t[0].y-e.y,t[0].z-e.z));let a=r.DotProduct(r.Normalize(n),r.Normalize(o));s.push(a)}return s}static GetXYDimForCircle(t){let e=r.GetCenterVecFromVecs(t),s=0,i=0,n=t.length;for(let r=0;r<n;++r)s+=Math.abs(t[r].x-e.x),i+=Math.abs(t[r].y-e.y);return n+=2,[s/n,i/n]}static DistanceMouseWithTwoVecs(t,e,s){e.x+=1e-5,e.y+=1e-5;let i=r.GetBoundingVecs(e,s),n=r.GetCloseVec(e,s,t.x,t.y,i,!0);return r.Distance(t,n)}static GetCloseVec(t,e,s,i,n){let o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],a=new r(t.x,t.y,t.z),h=new r(e.x,e.y,e.z).Sub(a),l=new r(s,i,0).Sub(a);h.Unitize();let c=a.Add(h.Mult(l.DotProduct(h)));return o?r.IsInsideOfVecs(c,n)?c:t.Distance(c)<e.Distance(c)?new r(t.x,t.y,t.z):new r(e.x,e.y,e.z):c}static GetBoundingVecs(t,e){let s=[],i=0,n=0,o=0;i=t.x<e.x?t.x:e.x,n=t.y<e.y?t.y:e.y,o=t.z<e.z?t.z:e.z;let a=new r(i,n,o);i=t.x>e.x?t.x:e.x,n=t.y>e.y?t.y:e.y,o=t.z>e.z?t.z:e.z;let h=new r(i,n,o);return s.push(new r(a.x,a.y,a.z)),s.push(new r(h.x,a.y,a.z)),s.push(new r(h.x,h.y,a.z)),s.push(new r(a.x,h.y,a.z)),s}static GetBoundaryByVecWidthHeight(t,e,s){let i=[];return i.push(new r(t.x,t.y,t.z)),i.push(new r(t.x+e,t.y,t.z)),i.push(new r(t.x+e,t.y+s,t.z)),i.push(new r(t.x,t.y+s,t.z)),i}static GetMinMaxVecFromVecs(t){let e=Number.MAX_VALUE,s=Number.MAX_VALUE,i=Number.MAX_VALUE,n=Number.MIN_VALUE,o=Number.MIN_VALUE,a=Number.MIN_VALUE;for(let r of t)e>r.x&&(e=r.x),s>r.y&&(s=r.y),i>r.z&&(i=r.z),n<r.x&&(n=r.x),o<r.y&&(o=r.y),a<r.z&&(a=r.z);return[new r(e,s,i),new r(n,o,a)]}static RemoveVecsWithinDis(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,s=[];for(let i=0;i<t.length-1;++i){let s=t[i];if(!1!==s.d)for(let n=i+1;n<t.length;++n)r.Distance(s,t[n])<e&&(t[n].d=!1)}for(let i=0;i<t.length;++i)!0===t[i].d&&s.push(t[i]);return s}static IsInsideOfVecsWtihVecs(t,e){let s=!0;for(let i=0;i<t.length;i++)if(s=r.IsInsideOfVecs(t[i],e),!s)return!1;return!0}static IsInsideOfVecs(t,e){let s=t.x,i=t.y,n=!1;for(let r=0,o=e.length-1;r<e.length;o=r++){let t=e[r].x,a=e[r].y,h=e[o].x,l=e[o].y;a>i!==l>i&&s<(h-t)*(i-a)/(l-a)+t&&(n=!n)}return n}static IsInsideOfVecsByCrossing(t,e,s,i){return!!this.IsInsideOfVecs(new r(t.x-.5*e,t.y-.5*s),i)||(!!this.IsInsideOfVecs(new r(t.x+.5*e,t.y-.5*s),i)||(!!this.IsInsideOfVecs(new r(t.x+.5*e,t.y+.5*s),i)||!!this.IsInsideOfVecs(new r(t.x-.5*e,t.y+.5*s),i)))}static IsInsideOfVecsByConcaveHull(t,e){}static IsInsideOfVecsByConvexHull(t,e){return e=r.ConvexHull(e),!!r.IsInsideOfVecs(t,e)}static ConvexHull(t){t.sort((function(t,e){return t.x===e.x?t.y-e.y:t.x-e.x}));let e=[];for(let i=0;i<t.length;i++){for(;e.length>=2&&r.Cross(e[e.length-2],e[e.length-1],t[i])<=0;)e.pop();e.push(t[i])}let s=[];for(let i=t.length-1;i>=0;i--){for(;s.length>=2&&r.Cross(s[s.length-2],s[s.length-1],t[i])<=0;)s.pop();s.push(t[i])}s.pop(),e.pop();for(let i=0;i<s.length;++i)e.push(s[i]);return e}static Cross(t,e,s){return(e.x-t.x)*(s.y-t.y)-(e.y-t.y)*(s.x-t.x)}static Cross_A_B_OUT(t,e,s){const i=t.x,n=t.y,r=t.z,o=e.x,a=e.y,h=e.z;return s.x=n*h-r*a,s.y=r*o-i*h,s.z=i*a-n*o,s}static CheckLineIntersection(t,e,s,i){let n=0,o=0,a=0,h=0,l=0,c=!1,x=!1;n=(i.y-s.y)*(e.x-t.x)-(i.x-s.x)*(e.y-t.y);let y=new r(0,0,0);if(0!==n)return o=t.y-s.y,a=t.x-s.x,h=(i.x-s.x)*o-(i.y-s.y)*a,l=(e.x-t.x)*o-(e.y-t.y)*a,o=h/n,a=l/n,y.x=t.x+o*(e.x-t.x),y.y=t.y+o*(e.y-t.y),o>0&&o<1&&(c=!0),a>0&&a<1&&(x=!0),c&&x?y:void 0}static CheckConvexity(t){if(t.length<3)return!1;let e,s,i,n=0;for(let o=0;o<t.length;o++){e=t[o];let a=t[(o+1)%t.length];if(s=new r(a.x-e.x,a.y-e.y,0),i=t[(o+2)%t.length],0===o)n=i.x*s.y-i.y*s.x+s.x*e.y-s.y*e.x;else{let t=i.x*s.y-i.y*s.x+s.x*e.y-s.y*e.x;if(t>0&&n<0||t<0&&n>0)return!1}}return!0}static MoveVecs(t,e){let s=[];for(let i=0;i<t.length;++i)s.push(r.MoveVec(t[i],e));return s}static MoveVec(t,e){return new r(t.x+e.x,t.y+e.y,t.z+e.z)}static RotateVecsLoal(t,e){let s=r.GetCenterVecFromVecs(t),i=new r(-s.x,-s.y,-s.z),n=r.MoveVecs(t,i);return n=r.RotateVecs(n,e),n=r.MoveVecs(n,s),n}static RotateVecs(t,e){let s=[];for(let i=0;i<t.length;++i)s.push(r.RotateVec(t[i],e));return s}static RotateVec(t,e){let s=Math.cos(.017453292519943278*e),i=Math.sin(.017453292519943278*e),n=t.x*s-t.y*i,o=t.x*i+t.y*s;return new r(n,o,t.z)}static GetCenterVecFromVecs(t){let e=new r(0,0,0);for(let s=0,i=t.length;s<i;++s)e.Add(t[s]);return e.Mult(1/t.length),e}static MidVecGeo(t,e){return new r(t.x+.5*e.x,t.y+.5*e.y,0)}static GetVecFromIntersection(t){let e=[];for(let s=0;s<t.length-1;++s)for(let i=s+1;i<t.length-1;++i){let n=r.CheckLineIntersection(t[s],t[s+1],t[i],t[i+1]);n&&e.push(n)}return 0===e.length?void 0:e}static between(t,e,s){return t-r.eps<=e&&e<=s+r.eps}static segment_intersection(t,e,s,i){var n=((t.x*e.y-t.y*e.x)*(s.x-i.x)-(t.x-e.x)*(s.x*i.y-s.y*i.x))/((t.x-e.x)*(s.y-i.y)-(t.y-e.y)*(s.x-i.x)),o=((t.x*e.y-t.y*e.x)*(s.y-i.y)-(t.y-e.y)*(s.x*i.y-s.y*i.x))/((t.x-e.x)*(s.y-i.y)-(t.y-e.y)*(s.x-i.x));if(isNaN(n)||isNaN(o))return!1;if(t.x>=e.x){if(!r.between(e.x,n,t.x))return!1}else if(!r.between(t.x,n,e.x))return!1;if(t.y>=e.y){if(!r.between(e.y,o,t.y))return!1}else if(!r.between(t.y,o,e.y))return!1;if(s.x>=i.x){if(!r.between(i.x,n,s.x))return!1}else if(!r.between(s.x,n,i.x))return!1;if(s.y>=i.y){if(!r.between(i.y,o,s.y))return!1}else if(!r.between(s.y,o,i.y))return!1;return new r(n,o)}constructor(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=0,this.y=0,this.z=0,this.w=0,this.long=0,this.lat=0,this.ele=0,this.proX=0,this.proY=0,this.proZ=0,this.alt=0,this.d=!0,this.isModified=!1,this.parent=void 0,this.x=t,this.y=e,this.z=s}Set(t,e,s){return this.x=t,this.y=e,this.z=s,new r(this.x,this.y,this.z)}Scale(t){return this.x*=t,this.y*=t,this.z*=t,new r(this.x,this.y,this.z)}Mult(t){return this.x*=t,this.y*=t,this.z*=t,new r(this.x,this.y,this.z)}DivByVal(t){return this.x/=t,this.y/=t,this.z/=t,new r(this.x,this.y,this.z)}DivByVec(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,new r(this.x,this.y,this.z)}Add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,new r(this.x,this.y,this.z)}Sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,new r(this.x,this.y,this.z)}Negate(){return this.x*=-1,this.y*=-1,this.z*=-1,new r(this.x,this.y,this.z)}Equals(t){return this.x===t.x&&this.y===t.y&&this.z===t.z}Clone(){return new r(this.x,this.y,this.z)}Length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}Unitize(){return this.Normalize()}IsOverlap(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return this.Distance(t)<e}Normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return this.x=this.x/t,this.y=this.y/t,this.z=this.z/t,new r(this.x,this.y,this.z)}Distance(t){return r.Distance(new r(this.x,this.y,this.z),t)}Distance2(t){return r.Distance2(new r(this.x,this.y,this.z),t)}DotProduct(t){return r.DotProduct(new r(this.x,this.y,this.z),t)}CrossProduct(t){return r.CrossProduct(new r(this.x,this.y,this.z),t)}SquareLength(){let t=r.Length(new r(this.x,this.y,this.z));return t*t}FadeExp(t,e){let s=new r(this.x,this.y,this.z);return s.Sub(t),Math.exp(-e*s.SquareLength())}GetAngle(){return Math.atan2(this.y,this.x)}GetAngleDegree(){return 180*this.GetAngle()/Math.PI}ToJSON(){}ToString(){return"x: "+this.x.toFixed(3).toString()+" , y: "+this.y.toFixed(3).toString()+", z: "+this.z.toFixed(3).toString()}ToFloat32Array(){return new Float32Array([this.x,this.y,this.z])}}r.eps=1e-7,r.origin=new r(0,0,0);class o{constructor(t,e){this.firebaseConfig={apiKey:"AIzaSyA1yKg85WGZoshbk8xR23cXr3SwpqXVgIc",authDomain:"njs-data.firebaseapp.com",projectId:"njs-data",storageBucket:"njs-data.appspot.com",messagingSenderId:"635991152770",appId:"1:635991152770:web:722f5356e0d14cea50fc9b"},this.getData=t=>{let e=t.val();console.log("get data",e);for(let s in e)console.log(s,e[s])},this.getError=t=>{console.error(t)}}sendData(t){}}class a{constructor(){this.modelLogisticRegression=void 0,this.modelMultiClassification=void 0,this.divText=void 0,this.firebaseWrapper=void 0,this.AppendDiv(),this.LoadModelFromPublic(),console.log(n.version),this.firebaseWrapper=new o("smartDrawing",this.callback)}callback(t){let e=t.val();console.log("callback -------- get data",e);for(let s in e)console.log(s,e[s])}AppendDiv(){const t=document.getElementById("main"),e=document.createElement("div");t&&e&&(this.divText=e,t.insertBefore(this.divText,null),this.divText.style.marginLeft="20px")}async LoadModelFromJsons(){}async LoadModelFromPublic(){let t="https://raw.githubusercontent.com/NamjuLee/data/master/smart-drawing/model/modelLogisticRegression0/model.json";this.modelLogisticRegression=await this.LoadModelFromPath(t),t="https://raw.githubusercontent.com/NamjuLee/data/master/smart-drawing/model/modelMultiClassification0/model.json",this.modelMultiClassification=await this.LoadModelFromPath(t)}async LoadModelFromPath(t){return await n.loadLayersModel(t)}PredictByLogisticRegression(t){if(void 0!==this.modelLogisticRegression)return(0,n.tidy)((()=>{const e=(0,n.tensor2d)([t]),s=this.modelLogisticRegression.predict(e).dataSync();return this.PredictionPostProcessingLogisticRegression(s[0])}));console.error("no model loaded")}PredictByMultiClassification(t){if(void 0!==this.modelMultiClassification)return(0,n.tidy)((()=>{const e=n.tensor2d([t]),s=this.modelMultiClassification.predict(e);{const t=Array.from(s.dataSync()),e=this.GetIndexBySortDescending(t),i=[];for(let s of e){const e=t[s],n="class:"+a.CLASS_TYPE[s]+", probability:"+e.toFixed(5);console.log(n),i.push(n)}this.UpdateDivWithText(i)}const i=s.argMax(-1).dataSync()[0];return a.CLASS_TYPE[i]}));console.error("no model loaded")}UpdateDivWithText(t){let e="<p>*** FROM DEEP LEARNING MODEL B *** </p>";for(let s=0;s<t.length;++s)e+="<p> ".concat(t[s],"</p>");this.divText.innerHTML=e}PredictionPostProcessingLogisticRegression(t){const e=Math.floor(t+.5);return a.CLASS_TYPE[e]}GetIndexBySortDescending(t){let e=t.length,s=new Array(e);for(var i=0;i<e;++i)s[i]=i;return s.sort(((e,s)=>t[e]>t[s]?-1:t[e]<t[s]?1:0)),s}Remove(){}Predict(t){const e=[];for(let o of t)e.push(new r(o[0],o[1],0));const s=r.ComputeDotProducts(e),i=this.GetInterpolatedArray(s,501);console.log("*** FROM DEEP LEARNING MODELS ***");const n=this.PredictByMultiClassification(i);return console.debug("pridiction:%c ".concat(n," from MC model"),"background: #4e2c7e; color: white"),this.firebaseWrapper.sendData({class:n,vec:t}),n}LinearInterpolate(t,e,s){return t+(e-t)*s}GetInterpolatedArray(t,e){let s={},i=(t.length-1)/(e-1);s[0]=t[0];for(let n=1;n<e-1;n++){let e=n*i,r=+Math.floor(e).toFixed(),o=+Math.ceil(e).toFixed(),a=e-r;s[n]=this.LinearInterpolate(t[r],t[o],a)}return s[e-1]=t[t.length-1],s}}a.CLASS_TYPE={0:"CIRCLE",1:"TRI-GON",2:"ARROW_SINGLE",3:"ARROW_DOUBLE",4:"RECTANGLE",5:"TEXT",6:"CURVE",7:"HEART",8:"CLOUD"};class h{constructor(t){this.app=void 0,this.smartDrawing=void 0,this.app=t,this.smartDrawing=new a}}class l{static Init(t){new l(t)}constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";this.canvasSD=void 0,this.implementation=void 0,this.host=void 0,this.divText=void 0,console.log("id: "+t+", App Init!!!!!");const e=document.getElementById(t);e&&(this.host=e),this.InitHTML(),this.canvasSD=new i(this),this.implementation=new h(this)}InitHTML(){const t=document.createElement("button");t.style.width="100px",t.style.height="20px",t.style.marginLeft="20px",t.style.zIndex="5",t.name="Clear",t.innerText="Clear",t.value="Clear",t.onclick=()=>{console.log(this),this.canvasSD.Clear()},this.host.appendChild(t),this.divText=document.createElement("div"),this.divText.id="classText",this.divText.style.zIndex="5",this.divText.innerText="class: ",this.divText.style.marginLeft="20px",this.host.appendChild(this.divText)}Init(t){console.log("this is init...")}Clear(){this.canvasSD.Clear()}}}}]);
//# sourceMappingURL=81276.8fdb3bd7.chunk.js.map