"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[96086,97795],{12850:(e,s,t)=>{t.d(s,{D:()=>u});var i=t(4842),n=t(48224),h=t(55798),a=t(81106),o=t(70490),d=t(23209),l=t(95706),v=t(68520),r=t(11675),c=t(72924);class u extends a.J{constructor(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:300,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:170,h=arguments.length>5&&void 0!==arguments[5]&&arguments[5];super(e),this.independentPanelWrapper=void 0,this.divInput=void 0,this.btnClose=void 0,this.btnMini=void 0,this.btnHam=void 0,this.btnResize=void 0,this.bodyDiv=void 0,this.subMenu=void 0,this.subs=[],this._content=void 0,this.canvas=void 0,this.ctx=void 0,this.isActive=!0,this.independentPanelWrapper=e,this.title="njslabSandbox V3",this.width=i,this.height=n,0===s&&0===t?(this.vec.x=.5*e.width-.5*this.width,this.vec.y=.5*e.height-.5*this.height):(this.vec.x=s,this.vec.y=t),this.filletR=7,this.InitTop(),h&&(this.bodyDiv=new r.k(this,this.vec.x,this.vec.y+this.HeadHeight,this.width,this.height-this.HeadHeight)),this.InitCanvas(this.bodyDiv.div)}get IsMinimized(){return this.isMinimized}set IsMinimized(e){this.isMinimized=e,this.btnResize.isHidden=e,this.bodyDiv&&this.bodyDiv.Hide(e)}get Width(){return this.width}set Width(e){let s=e-this.width;this.width=e,this.btnHam.vec.x+=s,this.subMenu.vec.x+=s,this.bodyDiv&&(this.bodyDiv.Width=e)}get Height(){return this.height}set Height(e){this.height=e,this.bodyDiv&&(this.bodyDiv.Height=e)}get content(){return this._content}set content(e){this._content=e,this.bodyDiv&&(this.bodyDiv.content=e)}get HasSubMenu(){return this.hasSubMenu}set HasSubMenu(e){this.hasSubMenu=e,this.subMenu.IsHidden=!e}InitTop(){this.btnClose=new o.E(this,this.vec.x,this.vec.y),this.btnMini=new d.$(this,this.vec.x+25,this.vec.y),this.btnHam=new l.g(this,this.vec.x-25+this.width,this.vec.y),this.btnResize=new v.C(this,this.vec.x+this.width-10,this.vec.y+this.height-10,10,10),this.subMenu=new c.q(this),this.subs.push(this.btnClose,this.btnMini,this.btnHam)}Translate(e){if(!this.isMoveable)return;let s=e.x-e.preX,t=e.y-e.preY;this.vec.x+=s,this.vec.y+=t;for(let i=0;i<this.boundarVecs.length;++i)this.boundarVecs[i].x+=s,this.boundarVecs[i].y+=t;for(let i=0;i<this.subs.length;++i)this.subs[i].Translate(e);this.btnResize.vec.x+=s,this.btnResize.vec.y+=t,this.subMenu.Translate(s,t),this.bodyDiv&&this.bodyDiv.Translate(s,t)}Remove(){this.RemovePost();for(let e=0;e<this.subs.length;++e)this.subs[e].Remove();this.bodyDiv&&this.bodyDiv.Remove(),this.btnResize.Remove(),this.independentPanelWrapper.indePanelRender.Remove(this)}RenderPost(e){let s;this.ComputeBoundary(),s=n.mK.HexToCanvasColor(h.X.theme.mainMenuNormal,this.transparent),this.isMinimized||h.X.RoundedRectFillWithColorMainMenu(e,this.title,this.boundarVecs,this.filletR,0,this.isOver,this.isSelected,s),h.X.TopRoundedRectFill(e,this.title,i.h9.GetBoundaryByVecWidthHeight(this.vec,this.width,this.HeadHeight),this.filletR,0,this.isOver,this.isSelected,this.theme.colSelectedBG,!1),this.RenderHeadTitle(e),this.isMinimized||this.RenderBodyContent(e),this.hasSubMenu&&this.subMenu.RenderPost(e),this.RenderBtnHorizontal(e)}RenderBtnHorizontal(e){}RenderHeadTitle(e){e.save(),e.fillStyle="#ffffff",e.textBaseline="top",e.textAlign="center",e.font="100 12px Arial",e.shadowBlur=0,e.shadowOffsetY=0,e.shadowOffsetX=0,e.fillText(this.title,this.vec.x+.5*this.width,this.vec.y+.5*this.HeadHeight-7),e.restore()}RenderBodyContent(e){}RemovePost(){this.isActive=!1}InitCanvas(e){this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.zIndex="0",e.appendChild(this.canvas),this.canvas.id="NCanvasRenderer",this.canvas.className="njslab-web-core-canvas-renderer",this.canvas.style.pointerEvents="none",this.ctx=this.canvas.getContext("2d"),this.canvas.width=e.clientWidth,this.canvas.height=e.clientHeight,this.btnResize.ResizePropagation=(e,s)=>{this.canvas.width=e,this.canvas.height=s},this.LoopIndependentCanvas(this.ctx)}LoopIndependentCanvas(e){this.isActive&&(e.clearRect(0,0,this.canvas.width,this.canvas.height),requestAnimationFrame((()=>{this.LoopIndependentCanvas(e)})),this.RenderIndependentCanvas(e))}RenderIndependentCanvas(e){console.log("implementation needed")}ResizeCanvas(e,s){this.canvas.width=e,this.canvas.height=s}}},97795:(e,s,t)=>{t.r(s),t.d(s,{DefinitionIndeCanvasCore:()=>n});var i=t(12850);class n{constructor(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:650,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:350;this.scene=void 0,this.indeCanvas=void 0,this.mOffX=-12,this.mOffY=-12,this.scene=e,this.scene.definitions.push(this),this.InitIndeCanvas(s,t)}InitIndeCanvas(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:650,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:350;this.scene.implementation.app.needUI?this.indeCanvas=new i.D(this.scene.implementation.app.viewController.NUIWrapper.NUI.independentPanelWrapper,50,50,e,s,!0):this.indeCanvas=new i.D(this.scene.implementation.app.viewController.NUIWrapper.NUI.independentPanelWrapper,1,-25,e,s,!0),this.indeCanvas.title="TF Env",this.indeCanvas.btnHam.isHidden=!0,this.indeCanvas.btnMini.isHidden=!0,this.indeCanvas.RenderIndependentCanvas=e=>this.RenderIndependentCanvas(e)}get width(){return this.indeCanvas.canvas.width}get height(){return this.indeCanvas.canvas.height}Init(e){}RenderIndependentCanvas(e){}MouseMove(e,s){}MouseMovePre(e,s){this.indeCanvas.IsMouseInsidePanel(e,s)&&this.MouseMove(e-this.indeCanvas.vec.x+this.mOffX,s-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseDown(e,s){}MouseDownPre(e,s){this.indeCanvas.IsMouseInsidePanel(e,s)&&this.MouseDown(e-this.indeCanvas.vec.x+this.mOffX,s-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseUp(e,s){}MouseUpPre(e,s){this.indeCanvas.IsMouseInsidePanel(e,s)&&this.MouseUp(e-this.indeCanvas.vec.x+this.mOffX,s-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseDrag(e,s){}MouseDragPre(e,s){this.indeCanvas.IsMouseInsidePanel(e,s)&&this.MouseDrag(e-this.indeCanvas.vec.x+this.mOffX,s-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseLeftClick(e,s){}MouseLeftClickPre(e,s){this.indeCanvas.IsMouseInsidePanel(e,s)&&this.MouseLeftClick(e-this.indeCanvas.vec.x+this.mOffX,s-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseMiddleClick(e,s){}MouseMiddleClickPre(e,s){this.indeCanvas.IsMouseInsidePanel(e,s)&&this.MouseMiddleClick(e-this.indeCanvas.vec.x+this.mOffX,s-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseRightClick(e,s){}MouseRightClickPre(e,s){this.indeCanvas.IsMouseInsidePanel(e,s)&&this.MouseRightClick(e-this.indeCanvas.vec.x+this.mOffX,s-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseDoubleClick(e,s){}MouseDoubleClickPre(e,s){this.indeCanvas.IsMouseInsidePanel(e,s)&&this.MouseDoubleClick(e-this.indeCanvas.vec.x+this.mOffX,s-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseWheel(e,s,t){}MouseWheelPre(e,s,t){this.indeCanvas.IsMouseInsidePanel(e,s)&&this.MouseWheel(e-this.indeCanvas.vec.x+this.mOffX,s-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY,t)}}},96086:(e,s,t)=>{t.r(s),t.d(s,{TFModel03SmartDrawing:()=>h});var i=t(65812),n=t(97795);class h extends n.DefinitionIndeCanvasCore{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:650,arguments.length>2&&void 0!==arguments[2]?arguments[2]:350),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.tfModel=void 0,this.xPredict=void 0,this.inputs=[],this.indeCanvas.title="TF Horsepower and Miles Per Gallon",this.Init()}async Init(){const e=new a;await e.Init().then((()=>{this.tfModel=new o("model1",e.inputsTensor,e.labelsTensor),this.tfModel.CreateModel01(),this.tfModel=new o("model2",e.inputsTensor,e.labelsTensor),this.tfModel.CreateModel02()}))}RenderIndependentCanvas(e){i.tidy((()=>{}))}}class a{constructor(){this.raw=void 0,this.inputsTensor=void 0,this.labelsTensor=void 0}async Init(){const e=await this.OpenCSV();if(e){this.raw=this.processData(e),i.util.shuffle(this.raw);const s=[],t=[];for(let e=0;e<this.raw.length;++e){let i=[];for(let s=0;s<this.raw[e].length-1;++s)i.push(this.raw[e][s]);s.push(i),t.push(this.raw[e][this.raw[e].length-1])}console.log(s),console.log(t);const n=i.max(t).dataSync(),h=[];for(let e=0;e<t.length;++e){const s=[];for(let i=0;i<=n[0];++i)i===t[e]?s.push(1):s.push(0);h.push(s)}console.log(h),this.inputsTensor=i.tensor2d(s),this.labelsTensor=i.tensor2d(h),this.inputsTensor.print(),this.labelsTensor.print()}}processData(e){const s=e.split(/\r\n|\n/),t=s[0].split(","),i=[];for(let n=1;n<s.length;n++){const e=s[n].split(",");if(e.length===t.length){const s=[];for(let i=0;i<t.length;i++){const t=+e[i];isNaN(t)?s.push(e[i]):s.push(t)}i.push(s)}}return i}async OpenCSV(){return fetch("njslabSandboxStatic/ML/SmartDrawing/".concat("smartDrawingTrainData.csv")).then((e=>(console.log(e),e.text()))).catch((e=>{console.log(e)}))}}class o{constructor(e,s,t){this.t0=void 0,this.t1=void 0,this.name=void 0,this.model=void 0,this.inputsTensor=void 0,this.labelsTensor=void 0,this.name=e,this.inputsTensor=s,this.labelsTensor=t}CreateModel01(){this.model=i.sequential();const e=i.layers.dense({inputShape:[this.inputsTensor.shape[1]],units:20,activation:"sigmoid"}),s=i.layers.dense({units:this.labelsTensor.shape[1],activation:"softmax"});this.model.add(e),this.model.add(s),this.Compile()}CreateModel02(){this.model=i.sequential();const e=i.layers.dense({inputShape:[this.inputsTensor.shape[1]],units:20,activation:"sigmoid"}),s=i.layers.dense({units:15,activation:"sigmoid"}),t=i.layers.dense({units:this.labelsTensor.shape[1],activation:"softmax"});this.model.add(e),this.model.add(s),this.model.add(t),this.Compile()}Compile(){this.model.compile({optimizer:i.train.adam(),loss:i.losses.softmaxCrossEntropy,metrics:["accuracy"]}),this.model.summary(),this.trainLoop()}async trainLoop(){this.t0=performance.now(),await this.model.save("downloads://my-model"),this.train().then((e=>{this.t1=performance.now(),console.log("".concat(this.name,": ").concat(e.history.loss[0],", ").concat(this.t1-this.t0," ")),setTimeout((()=>this.trainLoop()),1)}))}async train(){}}}}]);
//# sourceMappingURL=96086.f160ffaa.chunk.js.map