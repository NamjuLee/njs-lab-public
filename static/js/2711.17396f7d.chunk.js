"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[2711],{72711:function(t,e,i){i.r(e),i.d(e,{Solution:function(){return p}});var s=i(15671),n=i(43144),h=i(60136),o=i(29388),r=i(17760),a=i(55913),u=i(37762),d=i(9936),v=function(){function t(e,i){(0,s.Z)(this,t),this.width=void 0,this.height=void 0,this.nodes=[],this.edges=[],this.dt=0,this.mouse=new d.h9(0,0),this.damping=.96,this.gravity=-.032,this.timeStep=.16,this.groundZ=-9.26,this.capture=void 0,this.Init(e,i)}return(0,n.Z)(t,[{key:"Init",value:function(t,e){this.InitGridR(t,e),this.nodes[0].fixed=!0,this.nodes[9].fixed=!0,this.nodes[this.nodes.length-1].fixed=!0,this.nodes[this.nodes.length-1-9].fixed=!0}},{key:"updateOptionA",value:function(t){this.damping=.1*t,console.log(this.damping,"damping")}},{key:"updateOptionB",value:function(t){this.timeStep=.05*t,console.log(this.timeStep,"timeStep")}},{key:"updateOptionC",value:function(t){}},{key:"InitGridR",value:function(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,n=0,h=0,o=t/i+1,r=e/s+1,a=this.nodes.length,u=0;u<s;++u)for(var v=0;v<i;++v){var c=n+o*v-.5*t,l=h+r*u-.5*e;this.AddNode(new d.h9(c,0,l),d.h9.Zero(),1)}for(var p=0;p<s;++p)for(var f=0;f<i;++f){var g=p*i+f;0!==f&&this.AddEdge(this.nodes[a+g-1],this.nodes[a+g]),0!==p&&this.AddEdge(this.nodes[a+g-i],this.nodes[a+g])}}},{key:"Clear",value:function(){this.nodes=[],this.edges=[]}},{key:"AddNode",value:function(t,e,i){var s=new l(t,e,i);return this.nodes.push(s),s}},{key:"AddEdge",value:function(t,e){var i=new c(t,e);return this.edges.push(i),i}},{key:"MouseMove",value:function(t,e){this.mouse.x=t,this.mouse.y=e,console.log("move",t,e)}},{key:"MouseDClick",value:function(t,e){this.mouse.x=t,this.mouse.y=e;var i=this.FindNode(this.mouse);i&&(i.fixed=!i.fixed),console.log("click",t,e)}},{key:"MouseDown",value:function(t,e){this.mouse.x=t,this.mouse.y=e,this.capture=this.FindNode(this.mouse),this.capture&&(this.capture.fixed=!0,this.capture.isCapture=!0),console.log("down",t,e,this.capture)}},{key:"MouseLeftClick",value:function(t,e){console.log("click",t,e,this.capture)}},{key:"MouseUp",value:function(t,e){this.mouse.x=t,this.mouse.y=e,this.capture&&(this.capture.isCapture=!1,this.capture=void 0),console.log("up",t,e)}},{key:"MouseDrag",value:function(t,e){this.mouse.x=t,this.mouse.y=e,this.capture&&(this.capture.v.x=t,this.capture.v.y=e),console.log("drag",t,e)}},{key:"Render",value:function(t){this.dt+=.1,this.Move(this.mouse.x,this.mouse.y,this.mouse.z,this.damping,0,this.timeStep,this.groundZ,1)}},{key:"FindNode",value:function(t){var e,i=(0,u.Z)(this.nodes);try{for(i.s();!(e=i.n()).done;){var s=e.value;if(s.v.Distance(t)<s.m+3)return s}}catch(n){i.e(n)}finally{i.f()}}},{key:"Move",value:function(t,e,i,s){for(var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.01,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-10,r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,a=new d.h9(t,e,i),v=0;v<r;++v){var c,l=(0,u.Z)(this.nodes);try{for(l.s();!(c=l.n()).done;){var p=c.value,f=d.h9.Sub(a,p.v),g=f.Length();f.Unitize(),p.f=d.h9.Add(d.h9.Scale(f,.1*Math.exp(-.1*g*g)),d.h9.Scale(d.h9.YAxis(),n))}}catch(M){l.e(M)}finally{l.f()}var y,m=(0,u.Z)(this.edges);try{for(m.s();!(y=m.n()).done;){var x=y.value;x.ApplySpringForce()}}catch(M){m.e(M)}finally{m.f()}var k,w=(0,u.Z)(this.nodes);try{for(w.s();!(k=w.n()).done;){var S=k.value;S.Move(h,s,o)}}catch(M){w.e(M)}finally{w.f()}}}}]),t}(),c=function(){function t(e,i){(0,s.Z)(this,t),this.n0=void 0,this.n1=void 0,this.targetLength=0,this.springConstant=.8,this.n0=e,this.n1=i,this.targetLength=1*this.n0.v.Distance(this.n1.v)}return(0,n.Z)(t,[{key:"Render",value:function(t){t.strokeStyle="#ff0000",d.h9.Distance(this.n0.v,this.n1.v)<2*this.targetLength&&(t.strokeStyle="#0000ff"),t.beginPath(),t.moveTo(this.n0.v.x,this.n0.v.y),t.lineTo(this.n1.v.x,this.n1.v.y),t.closePath(),t.stroke()}},{key:"ApplySpringForce",value:function(){var t=d.h9.Sub(this.n1.v,this.n0.v),e=t.Length();t.Unitize();var i=d.h9.Scale(t,(e-this.targetLength)*this.springConstant);this.n0.f=d.h9.Add(this.n0.f,i),this.n1.f=d.h9.Sub(this.n1.f,i)}}]),t}(),l=function(){function t(e,i,n){(0,s.Z)(this,t),this.nNodes=[],this.v=d.h9.Origin(),this.f=d.h9.Origin(),this.u=d.h9.Origin(),this.m=0,this.fixed=!1,this.isCapture=!1,this.v=new d.h9(e.x,e.y,e.z),this.u=new d.h9(i.x,i.y,i.z),this.m=n}return(0,n.Z)(t,[{key:"Move",value:function(t,e){if(!this.fixed&&!this.isCapture){this.u.Mult(e),this.u.Add(d.h9.Scale(this.f,t/this.m));var i=d.h9.Scale(this.u,t);this.v.x+=i.x,this.v.y+=i.y}}},{key:"Render",value:function(t,e){t.beginPath(),e.Distance(this.v)<this.m+3?(t.fillStyle="#000000",t.arc(this.v.x,this.v.y,this.m+6,0,2*Math.PI)):(t.fillStyle="#f90000",t.arc(this.v.x,this.v.y,this.m+3,0,2*Math.PI)),this.fixed&&(t.fillStyle="#000000",t.arc(this.v.x,this.v.y,this.m+7.5,0,2*Math.PI)),t.closePath(),t.fill()}}]),t}(),p=function(t){(0,h.Z)(i,t);var e=(0,o.Z)(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";(0,s.Z)(this,i),(t=e.call(this,n)).pointLight=void 0,t.pointer=new r.FM8,t.raycaster=new r.iMs,t.sphere=void 0,t.mesh=void 0,t.graph=void 0,t.camera.position.set(0,40,48);var h=new r.Mig(13421772,.25);t.scene.add(h),t.pointLight=new r.cek(16777215,.75),t.pointLight.position.x=10,t.pointLight.castShadow=!0,t.scene.add(t.pointLight),t.raycaster=new r.iMs,t.raycaster.params.Points.threshold=.8,t.raycaster.far=1e3;var o=new r.xo$(.1,32,32),a=new r.vBJ({color:16777215}),u=new r.Kj0(o,a);t.sphere=u,t.scene.add(u),t.graph=new v(20,20);for(var d=[],c=[],l=0;l<t.graph.nodes.length;++l){var p=t.graph.nodes[l].v.x,f=t.graph.nodes[l].v.y,g=t.graph.nodes[l].v.z;d.push(p,f,g),c.push(.5,.5,.5)}var y=new r.u9r;y.setAttribute("position",new r.a$l(d,3)),y.setAttribute("color",new r.a$l(c,3));var m=new r.UY4({vertexColors:!0,size:2}),x=new r.woe(y,m);return y.computeBoundingSphere(),t.scene.add(x),t.mesh=x,t.start(),t}return(0,n.Z)(i,[{key:"mouseMove",value:function(t){this.pointer.x=t.offsetX/this.hostDiv.clientWidth*2-1,this.pointer.y=-t.offsetY/this.hostDiv.clientHeight*2+1}},{key:"mouseDown",value:function(t){this.pointer.x=t.offsetX/this.hostDiv.clientWidth*2-1,this.pointer.y=-t.offsetY/this.hostDiv.clientHeight*2+1,this.raycaster.setFromCamera(this.pointer,this.camera);var e=this.raycaster.intersectObjects([this.mesh],!1),i=e.length>0?e[0]:null;null!==i&&(this.sphere.position.set(i.point.x,i.point.y+1,i.point.z),this.graph.nodes[i.index].v.y+=5)}},{key:"update",value:function(t){this.graph.Render();for(var e=this.mesh.geometry.attributes.position.count,i=0;i<e;i++){this.mesh.geometry.attributes.position;var s=this.graph.nodes[i].v.x,n=this.graph.nodes[i].v.y,h=this.graph.nodes[i].v.z;this.mesh.geometry.attributes.position.setXYZ(i,s,n,h),this.mesh.geometry.attributes.color.setXYZ(i,.3,.3,.3)}this.raycaster.setFromCamera(this.pointer,this.camera);var o=this.raycaster.intersectObjects([this.mesh],!1),r=o.length>0?o[0]:null;null!==r&&this.sphere.position.set(r.point.x,r.point.y,r.point.z),this.mesh.geometry.attributes.position.needsUpdate=!0,this.mesh.geometry.attributes.color.needsUpdate=!0,this.mesh.geometry.computeVertexNormals()}}]),i}(a.TF)}}]);
//# sourceMappingURL=2711.17396f7d.chunk.js.map