{"version":3,"file":"static/js/13267.1f889cc9.chunk.js","mappings":"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","sources":["njslab/app-legacy/Implementation/Apps/App2D/AppParticle/CanvasCore/index.ts","njslab/app-legacy/Implementation/Apps/App2D/AppParticle/ParticleWrapperPan/Core/Node.ts","njslab/app-legacy/Implementation/Apps/App2D/AppParticle/ParticleWrapperPan/ParticleWrapperPan.ts","njslab/app-legacy/Implementation/Apps/App2D/AppParticle/AppParticle.ts"],"sourcesContent":["\r\nexport class CanvasCore {\r\n    canvas: HTMLCanvasElement;\r\n    host: HTMLElement;\r\n    ctx: CanvasRenderingContext2D;\r\n    t: number = 0.0;\r\n    constructor(id: string) {\r\n        this.InitCanvas(id);\r\n    }\r\n    InitCanvas(id: string) {\r\n        const canvas = document.createElement('canvas');\r\n        const host = document.getElementById(id);\r\n        if (host) {\r\n            host.appendChild(canvas);\r\n            this.host = host;\r\n        }\r\n        if (canvas) {\r\n            this.canvas = canvas;\r\n            this.canvas.width = this.host.clientWidth;\r\n            this.canvas.height = this.host.clientHeight;\r\n            const ctx = this.canvas.getContext('2d');\r\n            if (ctx) {\r\n                this.ctx = ctx;\r\n                this.Init();\r\n            }\r\n        }\r\n    }\r\n    Init() {\r\n        this.EventBind();\r\n        this.Loop();\r\n    }\r\n    EventBind() {\r\n        this.canvas.onmousedown = (e: MouseEvent) => this.MouseDown(e);\r\n        this.canvas.onmouseup = (e: MouseEvent) => this.MouseUp(e);\r\n        this.canvas.onmousemove = (e: MouseEvent) => this.MouseMove(e);\r\n        window.onresize = (e: UIEvent) => this.Resize(e);\r\n\r\n    }\r\n    Resize(e: UIEvent) {\r\n        this.canvas.width = this.host.clientWidth;\r\n        this.canvas.height = this.host.clientHeight;\r\n    }\r\n    Loop() {\r\n        requestAnimationFrame(() => { this.Loop(); });\r\n        this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\r\n        this.Render(this.ctx);\r\n    }\r\n    Render(ctx: CanvasRenderingContext2D) {\r\n        console.log(ctx);\r\n    }\r\n    MouseDown(e: MouseEvent) {\r\n        console.log(e);\r\n    }\r\n    MouseUp(e: MouseEvent) {\r\n        console.log(e);\r\n    }\r\n    MouseMove(e: MouseEvent) {\r\n        console.log(e);\r\n    }\r\n}","import { NVector3 } from '../../../../../../NJSCore';\r\nexport class Node {\r\n    v: NVector3;\r\n    u: NVector3 = new NVector3(0, 0, 0);\r\n    f: NVector3 = new NVector3(0, 0, 0);\r\n    r: number = 10;\r\n    mass: number = 1;\r\n    isHover: boolean = false;\r\n    constructor(x: number, y: number) {\r\n        this.v = new NVector3(x, y);\r\n    }\r\n    Translate(x: number, y: number) {\r\n        // this.v.x = x;\r\n        // this.v.y = y;\r\n    }\r\n    IsInside(m: NVector3) {\r\n        if (this.v.Distance(m) < this.r) { this.isHover = true; return true; }\r\n        else { this.isHover = false; return false; }\r\n    }\r\n    Update(dt: number, damping: number) {\r\n        // u *= damping;\r\n        // u += f * (dt / m);\r\n        // p += u * dt;\r\n        this.u.Mult(damping);\r\n        this.f.Mult(dt / this.mass);\r\n        this.u.Add(this.f);\r\n        this.u.Mult(dt);\r\n        console.log(this.u);\r\n        this.v.Add(this.u);\r\n\r\n        // this.v.x += this.u.x;\r\n    }\r\n    // ........................................................................\r\n    Render(ctx: CanvasRenderingContext2D) {\r\n        if (this.isHover) {\r\n            ctx.fillStyle = '#ff0000';\r\n        } else {\r\n            ctx.fillStyle = '#000000';\r\n        }\r\n        ctx.beginPath();\r\n        ctx.arc(this.v.x, this.v.y, this.r, 0, Math.PI * 2);\r\n        ctx.closePath();\r\n        ctx.fill();\r\n    }\r\n    RenderVec(ctx: CanvasRenderingContext2D) {\r\n\r\n    }\r\n}","import { Node } from './Core/Node';\r\nimport { NVector3 } from '../../../../../NJSCore';\r\n\r\n// https://cs.stanford.edu/people/eroberts/courses/soco/projects/2008-09/modeling-natural-systems/boids.html\r\n// http://www.red3d.com/cwr/steer/\r\n\r\n// https://Flockdevelopment.tutsplus.com/tutorials/understanding-steering-behaviors-path-following--Flockdev-8769\r\n// https://Flockdevelopment.tutsplus.com/tutorials/understanding-steering-behaviors-leader-following--Flockdev-10810\r\n// https://Flockdevelopment.tutsplus.com/tutorials/understanding-steering-behaviors-queue--Flockdev-14365\r\n\r\n// https://gamedevelopment.tutsplus.com/series/understanding-steering-behaviors--gamedev-12732\r\n\r\nexport class ParticleWrapperPan {\r\n    nodes: Node[] = [];\r\n    capture: Node | undefined;\r\n    m: NVector3 = new NVector3(0, 0);\r\n    constructor() {\r\n        this.Init();\r\n    }\r\n    Init() {\r\n        this.nodes.push(new Node(100, 100));\r\n    }\r\n    Update() {\r\n        let atr = new NVector3(this.m.x, this.m.y);\r\n        let damping = 0.2;\r\n        // let g = 0.0;\r\n        let dt = 0.75;\r\n\r\n        for (let i = 0; i < this.nodes.length; ++i) {\r\n            const dv = NVector3.Sub(atr, this.nodes[i].v);\r\n            const L = dv.Length();\r\n            dv.Unitize();\r\n            this.nodes[i].f = dv.Mult(Math.exp(-0.000001 * L * L) * 10);\r\n            this.nodes[i].Update(dt, damping);\r\n        }\r\n    }\r\n    //     foreach(Node n in nodes) {\r\n    //       Vector3d dv = atr - n.p;\r\n    //       double L = dv.Length;\r\n    //       dv.Unitize();\r\n    //       n.f = dv * Math.Exp(-0.001 * L * L) * 0.1;\r\n    //       n.Move(dt, damping);\r\n    //     }\r\n    Render(ctx: CanvasRenderingContext2D) {\r\n        this.Update();\r\n        for (let i = 0; i < this.nodes.length; ++i) { this.nodes[i].Render(ctx); }\r\n    }\r\n    MouseDown(e: MouseEvent) {\r\n        console.log(e);\r\n        this.m.x = e.clientX;\r\n        this.m.y = e.clientY;\r\n        for (let i = 0; i < this.nodes.length; ++i) {\r\n            if (this.nodes[i].IsInside(this.m)) {\r\n                this.capture = this.nodes[i];\r\n                return;\r\n            }\r\n        }\r\n        this.capture = undefined;\r\n    }\r\n    MouseUp(e: MouseEvent) {\r\n        if (this.capture) { this.capture = undefined; }\r\n\r\n    }\r\n    MouseMove(e: MouseEvent) {\r\n        this.m.x = e.clientX;\r\n        this.m.y = e.clientY;\r\n        if (this.capture) {\r\n            this.MouseDrag(e);\r\n        }\r\n        for (let i = 0; i < this.nodes.length; ++i) {\r\n            if (this.nodes[i].IsInside(this.m)) {\r\n                console.log('ddd');\r\n            }\r\n        }\r\n    }\r\n    MouseDrag(e: MouseEvent) {\r\n\r\n        if (this.capture) {\r\n            this.capture.Translate(e.clientX, e.clientY);\r\n        }\r\n    }\r\n}\r\n","import { CanvasCore } from './CanvasCore';\r\nimport { ParticleWrapperPan } from './ParticleWrapperPan/ParticleWrapperPan';\r\nexport class AppParticle {\r\n    canvasCore: CanvasCore;\r\n    particleWrapperPan: ParticleWrapperPan;\r\n    static Init(id: string = 'SandBox') {\r\n        new AppParticle(id);\r\n    }\r\n    constructor(id: string = 'SandBox') {\r\n        this.particleWrapperPan = new ParticleWrapperPan();\r\n        this.canvasCore = new CanvasCore(id);\r\n        this.BindEvent();\r\n        this.BindRenderer();\r\n    }\r\n    BindEvent() {\r\n        this.canvasCore.MouseDown = (e: MouseEvent) => this.particleWrapperPan.MouseDown(e);\r\n        this.canvasCore.MouseMove = (e: MouseEvent) => this.particleWrapperPan.MouseMove(e);\r\n        this.canvasCore.MouseUp = (e: MouseEvent) => this.particleWrapperPan.MouseUp(e);\r\n    }\r\n    BindRenderer() {\r\n        this.canvasCore.Render = (ctx: CanvasRenderingContext2D) => this.particleWrapperPan.Render(ctx);\r\n    }\r\n}\r\n"],"names":["CanvasCore","constructor","id","canvas","host","ctx","t","this","InitCanvas","document","createElement","getElementById","appendChild","width","clientWidth","height","clientHeight","getContext","Init","EventBind","Loop","onmousedown","e","MouseDown","onmouseup","MouseUp","onmousemove","MouseMove","window","onresize","Resize","requestAnimationFrame","clearRect","Render","console","log","Node","x","y","v","u","NVector3","f","r","mass","isHover","Translate","IsInside","m","Distance","Update","dt","damping","Mult","Add","fillStyle","beginPath","arc","Math","PI","closePath","fill","RenderVec","ParticleWrapperPan","nodes","capture","push","atr","i","length","dv","L","Length","Unitize","exp","clientX","clientY","undefined","MouseDrag","AppParticle","static","canvasCore","particleWrapperPan","BindEvent","BindRenderer"],"sourceRoot":""}