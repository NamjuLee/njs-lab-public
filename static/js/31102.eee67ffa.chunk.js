"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[31102,75975],{97795:(i,e,t)=>{t.r(e),t.d(e,{DefinitionIndeCanvasCore:()=>h});var s=t(12850);class h{constructor(i){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:650,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:350;this.scene=void 0,this.indeCanvas=void 0,this.mOffX=-12,this.mOffY=-12,this.scene=i,this.scene.definitions.push(this),this.InitIndeCanvas(e,t)}InitIndeCanvas(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:650,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:350;this.scene.implementation.app.needUI?this.indeCanvas=new s.D(this.scene.implementation.app.viewController.NUIWrapper.NUI.independentPanelWrapper,50,50,i,e,!0):this.indeCanvas=new s.D(this.scene.implementation.app.viewController.NUIWrapper.NUI.independentPanelWrapper,1,-25,i,e,!0),this.indeCanvas.title="TF Env",this.indeCanvas.btnHam.isHidden=!0,this.indeCanvas.btnMini.isHidden=!0,this.indeCanvas.RenderIndependentCanvas=i=>this.RenderIndependentCanvas(i)}get width(){return this.indeCanvas.canvas.width}get height(){return this.indeCanvas.canvas.height}Init(i){}RenderIndependentCanvas(i){}MouseMove(i,e){}MouseMovePre(i,e){this.indeCanvas.IsMouseInsidePanel(i,e)&&this.MouseMove(i-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseDown(i,e){}MouseDownPre(i,e){this.indeCanvas.IsMouseInsidePanel(i,e)&&this.MouseDown(i-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseUp(i,e){}MouseUpPre(i,e){this.indeCanvas.IsMouseInsidePanel(i,e)&&this.MouseUp(i-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseDrag(i,e){}MouseDragPre(i,e){this.indeCanvas.IsMouseInsidePanel(i,e)&&this.MouseDrag(i-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseLeftClick(i,e){}MouseLeftClickPre(i,e){this.indeCanvas.IsMouseInsidePanel(i,e)&&this.MouseLeftClick(i-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseMiddleClick(i,e){}MouseMiddleClickPre(i,e){this.indeCanvas.IsMouseInsidePanel(i,e)&&this.MouseMiddleClick(i-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseRightClick(i,e){}MouseRightClickPre(i,e){this.indeCanvas.IsMouseInsidePanel(i,e)&&this.MouseRightClick(i-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseDoubleClick(i,e){}MouseDoubleClickPre(i,e){this.indeCanvas.IsMouseInsidePanel(i,e)&&this.MouseDoubleClick(i-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY)}MouseWheel(i,e,t){}MouseWheelPre(i,e,t){this.indeCanvas.IsMouseInsidePanel(i,e)&&this.MouseWheel(i-this.indeCanvas.vec.x+this.mOffX,e-this.indeCanvas.vec.y-this.indeCanvas.HeadHeight+this.mOffY,t)}}},31102:(i,e,t)=>{t.r(e),t.d(e,{TFPolynomialRegressionGradientDescent03Interaction:()=>d});var s=t(65812),h=t(97795),n=t(75975),a=t(83797);class d extends h.DefinitionIndeCanvasCore{constructor(i){super(i,arguments.length>1&&void 0!==arguments[1]?arguments[1]:650,arguments.length>2&&void 0!==arguments[2]?arguments[2]:350),this.xpos=100,this.ypos=100,this.xspeed=10,this.yspeed=10,this.xdirection=1,this.ydirection=1,this.rad=50,this.vs=[],this.selVec=void 0,this.tfLinearRegression=void 0,this.indeCanvas.title="TF LinearRegression GradientDescent 01",this.Init()}Init(){this.tfLinearRegression=new o,this.indeCanvas.canvas.style.zIndex="-1",a.fK.getData().then((i=>{}))}MouseDown(i,e){const t=new n.NVector3(this.MapX(i),this.MapY(e));for(let s=0;s<this.vs.length;++s)if(n.NVector3.Distance(t,this.vs[s])<.05)return void(this.selVec=this.vs[s]);this.vs.push(new n.NVector3(this.MapX(i),this.MapY(e)))}MouseDoubleClick(){}MouseMove(i,e){let t;const s=new n.NVector3(this.MapX(i),this.MapY(e));for(let h=0;h<this.vs.length;++h){n.NVector3.Distance(s,this.vs[h])<.05&&(t=this.vs[h])}this.selVec=t||void 0}MouseDrag(i,e){this.selVec&&(this.selVec.x=this.MapX(i),this.selVec.y=this.MapY(e))}MouseUp(){this.selVec=void 0}MapX(i){return n.MathUtility.Remap(i,0,this.width,-1,1)}MapY(i){return n.MathUtility.Remap(i,0,this.height,1,-1)}GridLine(i){i.strokeStyle="#555555";const e=this.width/20-1,t=this.height/20-1;for(let s=0;s<20;s+=1){i.lineWidth=10===s?3:1;let h=e*s,n=0,a=h,d=this.height;i.beginPath(),i.moveTo(h,n),i.lineTo(a,d),i.stroke(),h=0,n=t*s,a=this.width,d=n,i.beginPath(),i.moveTo(h,n),i.lineTo(a,d),i.stroke()}}RenderIndependentCanvas(i){if(i.fillStyle="#000000",i.beginPath(),i.rect(0,0,i.canvas.width,i.canvas.height),i.closePath(),i.fill(),this.GridLine(i),this.vs.length>1){const e=[],t=[];for(let i=0;i<this.vs.length;++i)e.push(this.vs[i].x),t.push(this.vs[i].y);this.tfLinearRegression.train(e,t),this.RenderLine(i)}i.fillStyle="#00ff00";for(let e=0;e<this.vs.length;++e)i.beginPath(),i.arc(n.MathUtility.Remap(this.vs[e].x,-1,1,0,this.width),n.MathUtility.Remap(this.vs[e].y,-1,1,this.height,0),5,0,2*Math.PI),i.closePath(),i.fill();this.selVec&&(i.fillStyle="#ffffff",i.font="15px Arial",i.textAlign="center",i.fillText("x:".concat(this.selVec.x.toFixed(3),", y").concat(this.selVec.y.toFixed(3)),n.MathUtility.Remap(this.selVec.x,-1,1,0,this.width),n.MathUtility.Remap(this.selVec.y,-1,1,this.height,0)-9))}RenderLine(i){const e=[];for(let s=-1;s<=1;s+=.05)e.push(s);const t=s.tidy((()=>this.tfLinearRegression.predict(s.tensor1d(e))));let h=t.dataSync();t.dispose(),i.lineWidth=3,i.strokeStyle="#00fff0",i.beginPath(),i.moveTo(n.MathUtility.Remap(e[0],-1,1,0,this.width),n.MathUtility.Remap(h[0],-1,1,this.height,0));for(let s=1;s<e.length;++s)i.lineTo(n.MathUtility.Remap(e[s],-1,1,0,this.width),n.MathUtility.Remap(h[s],-1,1,this.height,0));i.stroke()}}class o{constructor(){this.weights=[],this.bias=void 0,this.dim=3,this.leraningRate=.2,this.optimizer=void 0;for(let i=0;i<5;++i){const i=s.variable(s.scalar(2*Math.random()-1));i.print(),this.weights.push(i)}this.bias=s.variable(s.scalar(2*Math.random()-1)),this.optimizer=s.train.adam(this.leraningRate)}predict1d(i){return i.mul(this.weights[0]).add(this.bias)}predict2d(i){return i.square().mul(this.weights[1]).add(i.mul(this.weights[0])).add(this.bias)}predict3d(i){return i.pow(s.scalar(3)).mul(this.weights[2]).add(i.square().mul(this.weights[1])).add(i.mul(this.weights[0])).add(this.bias)}predict4d(i){return i.pow(s.scalar(4)).mul(this.weights[3]).add(i.pow(s.scalar(3)).mul(this.weights[2])).add(i.square().mul(this.weights[1])).add(i.mul(this.weights[0])).add(this.bias)}predict5d(i){return i.pow(s.scalar(5)).mul(this.weights[4]).add(i.pow(s.scalar(4)).mul(this.weights[3])).add(i.pow(s.scalar(3)).mul(this.weights[2])).add(i.square().mul(this.weights[1])).add(i.mul(this.weights[0])).add(this.bias)}predict(i){return 5===this.dim?this.predict5d(i):4===this.dim?this.predict4d(i):3===this.dim?this.predict3d(i):2===this.dim?this.predict2d(i):this.predict1d(i)}loss(i,e){return i.sub(e).square().mean()}train(i,e){s.tidy((()=>{const t=s.tensor1d(i),h=s.tensor1d(e);this.optimizer.minimize((()=>this.loss(this.predict(t),h)))}))}}},75975:(i,e,t)=>{t.r(e),t.d(e,{ACTION_TYPE:()=>s.KW,ACTIVECOMMAND_MODE:()=>s.AG,ActiveCommandBase:()=>s.wm,AppAccessibility:()=>s.Wv,AppProperties:()=>s.gj,ArrayUtility:()=>s.R3,BrowserUtility:()=>s.R7,CLICK_TYPE:()=>s.uh,CLOGTYPE:()=>s.g6,COMPILE_MODE:()=>s.Iq,ColorUtility:()=>s.mK,Deltatime:()=>s.gk,EVENT_LISTENER_TYPE:()=>s.GZ,FHTYPE:()=>s.OH,GTYPE:()=>s.OB,GeometryBase:()=>s.bx,INTERACTION_MODE:()=>s.WU,LINECAP:()=>s.EQ,MathUtility:()=>s.$H,NDataUtility:()=>s.eu,NUI:()=>s.Fc,NVector3:()=>s.h9,NumericalMotion:()=>s.aX,OPTIMIZER:()=>s.sg,PRESS_TYPE:()=>s.dc,TEXTALIGN:()=>s.mH,TEXTBOX:()=>s.SE,TOUCH_TYPE:()=>s.KV,UNIT:()=>s.iI});var s=t(4842)}}]);
//# sourceMappingURL=31102.eee67ffa.chunk.js.map