"use strict";(self.webpackChunkNJS_Lab=self.webpackChunkNJS_Lab||[]).push([[6076],{16076:function(t,e,s){s.r(e),s.d(e,{Solution:function(){return B}});var i=s(87968);class o{constructor(t){this.scene=void 0,this.isHovered=!1,this.type=void 0,this.hasAnimation=!1,this.scene=t,this.scene.area=this}isInside(t,e){return!1}translate(t,e){}update(){}onMouseUp(){}render(t){this.update(),this.renderPost(t)}renderPost(t){}}const r=function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=t.replace("#","");let s=parseInt(t.substring(0,2),16),i=parseInt(t.substring(2,4),16),o=parseInt(t.substring(4,6),16);if(e){let t=.58*s+.17*i+.8*o;return[t,t,t]}return[s,i,o]};class n{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=0,this.y=0,this.z=0,this.lng=0,this.lat=0,this.ele=0,this.x=t,this.y=e,this.z=s}}const h=(t,e,s)=>{t.beginPath(),t.arc(e,s,10,0,2*Math.PI),t.closePath(),t.fill()},a={text:"Residential",color:"#ffff6e"},c={text:"Business",color:"#f59700"},p={text:"Default",color:"#5287E6"},l={text:"Assigned",color:"#A355D4"};var d=s(86641);class u{constructor(t){this.host=void 0,this.host=t}renderPost(t){this.renderAreaBounding(t),this.renderCroppedArea(t),this.renderProperties(t),this.host.isHovered&&this.renderControlPoint(t)}renderCroppedArea(t){const e=m(this.host.polygonTurfOriginal,this.host.scene.polygonsDifference,this.host.scene.ids);this.host.polygonTurfSubtracted=e;for(let i=0;i<e.geometry.coordinates[0].length;++i){const s=e.geometry.coordinates[0][i];if(0===i){t.beginPath();const e=this.host.scene.common.toScreen(s[0],s[1]);t.moveTo(e[0],e[1])}else{const e=this.host.scene.common.toScreen(s[0],s[1]);t.lineTo(e[0],e[1])}}t.setLineDash([5,7]),t.lineDashOffset=this.host.t,t.lineWidth=2,t.strokeStyle="#fff";const s=.2+.09*Math.sin(.1*this.host.t);t.fillStyle="rgba(0, 255, 255, ".concat(s," )"),t.fill(),t.stroke(),t.setLineDash([])}renderControlPoint(t){t.fillStyle="rgba(200, 200, 200, 1.0)",t.strokeStyle="rgba(50, 50, 50, 1.0)",t.lineWidth=3,this.host.pts.forEach((e=>{t.beginPath(),t.arc(e.x,e.y,8,0,2*Math.PI),t.closePath(),t.fill(),t.stroke()}))}renderAreaBounding(t){t.beginPath(),"circle"===this.host.type?t.ellipse(this.host.cv.x,this.host.cv.y,.5*this.host.width,.5*this.host.height,0,0,2*Math.PI):"rect"===this.host.type&&t.rect(this.host.pts[3].x,this.host.pts[3].y,this.host.width,this.host.height),t.lineWidth=1,t.strokeStyle="rgba(255, 255, 255, 0.9)",t.stroke()}renderProperties(t){const e=d.hXg(d.SOn(this.host.polygonTurfSubtracted),"meters","miles");t.textAlign="center",t.font="18px arial",t.fillStyle="#fff",t.fillText("Area in square miles: ".concat(e.toFixed(5)),this.host.cv.x,this.host.cv.y-60-.5*this.host.height);const s=d.jfw(this.host.scene.points,this.host.polygonTurfSubtracted);let i=0,o=0,r=0;for(let n=0;n<s.features.length;++n)"R"===s.features[n].properties.landuse?i+=1:"B"===s.features[n].properties.landuse?o+=1:r+=1;t.fillStyle=a.color,t.fillText("".concat(a.text,": ").concat(i,","),this.host.cv.x-120,this.host.cv.y-25-.5*this.host.height),t.fillStyle=c.color,t.fillText("".concat(c.text,": ").concat(o,","),this.host.cv.x+28,this.host.cv.y-25-.5*this.host.height),t.fillStyle="rgb(0, 128, 0)",t.fillText("Other: ".concat(r),this.host.cv.x+140,this.host.cv.y-25-.5*this.host.height)}}const m=(t,e,s)=>{for(let i=0;i<e.length;++i)s[i]&&(t=d.e50(t,e[i]));return t};class v{constructor(t){this.host=void 0,this.host=t}translate(t,e){const s=this.host.scene.solution.activeCommander.mp[0]-this.host.scene.solution.activeCommander.mpPre[0],i=this.host.scene.solution.activeCommander.mp[1]-this.host.scene.solution.activeCommander.mpPre[1];if(this.host.capturedVecId>-1)return this.host.pts[this.host.capturedVecId].x+=s,this.host.pts[this.host.capturedVecId].y+=i,0===this.host.capturedVecId?(this.host.pts[3].x=this.host.pts[0].x,this.host.pts[1].y=this.host.pts[0].y):1===this.host.capturedVecId?(this.host.pts[2].x=this.host.pts[1].x,this.host.pts[0].y=this.host.pts[1].y):2===this.host.capturedVecId?(this.host.pts[1].x=this.host.pts[2].x,this.host.pts[3].y=this.host.pts[2].y):3===this.host.capturedVecId&&(this.host.pts[0].x=this.host.pts[3].x,this.host.pts[2].y=this.host.pts[3].y),this.updateCenterVec(),void this.updateProjection();this.host.cv.x+=s,this.host.cv.y+=i;for(let o=0;o<this.host.pts.length;++o)this.host.pts[o].x+=s,this.host.pts[o].y+=i;this.updateProjection()}updateCenterVec(){let t=0,e=0;for(let s=0;s<this.host.pts.length;++s)t+=this.host.pts[s].x,e+=this.host.pts[s].y;this.host.cv.x=t/this.host.pts.length,this.host.cv.y=e/this.host.pts.length}updateProjection(){const t=this.host.scene.common.toMap(this.host.cv.x,this.host.cv.y);this.host.cv.lng=t[0],this.host.cv.lat=t[1];for(let e=0;e<this.host.pts.length;++e){let t=this.host.scene.common.toMap(this.host.pts[e].x,this.host.pts[e].y);this.host.pts[e].lng=t[0],this.host.pts[e].lat=t[1]}this.host.updatePolygonTurf()}}class y extends o{constructor(t){super(t),this.renderer=void 0,this.transform=void 0,this.cv=void 0,this.pts=[],this.width=200,this.height=200,this.capturedVecId=-1,this.polygonTurfOriginal=void 0,this.polygonTurfSubtracted=void 0,this.t=.1,this.renderer=new u(this),this.transform=new v(this),this.type="rect",this.cv=new n(.5*t.solution.rendererWrapper.renderer.canvas.width,.5*t.solution.rendererWrapper.renderer.canvas.height);const e=.5*this.width,s=.5*this.height;this.pts.push(new n(this.cv.x-e,this.cv.y+s)),this.pts.push(new n(this.cv.x+e,this.cv.y+s)),this.pts.push(new n(this.cv.x+e,this.cv.y-s)),this.pts.push(new n(this.cv.x-e,this.cv.y-s)),this.transform.updateProjection()}isInside(t,e){const s=new n(t,e);this.capturedVecId=-1;for(let r=0;r<this.pts.length;++r)if(i=this.pts[r],o=s,Math.sqrt((i.x-o.x)*(i.x-o.x)+(i.y-o.y)*(i.y-o.y)+(i.z-o.z)*(i.z-o.z))<12)return this.capturedVecId=r,this.isHovered=!0,!0;var i,o;if("circle"===this.type){if(function(t,e,s,i){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5;return Math.pow(e.x-t.x,2)/Math.pow(o+s,2)+Math.pow(e.y-t.y,2)/Math.pow(o+i,2)<=1}(this.cv,s,.5*this.width,.5*this.height))return this.isHovered=!0,!0}else if(((t,e)=>{let s=t.x,i=t.y,o=!1;for(let r=0,n=e.length-1;r<e.length;n=r++){let t=e[r].x,h=e[r].y,a=e[n].x,c=e[n].y;h>i!==c>i&&s<(a-t)*(i-h)/(c-h)+t&&(o=!o)}return o})(s,this.pts))return this.isHovered=!0,!0;return this.isHovered=!1,!1}translate(t,e){const s=this.scene.solution.activeCommander.mp[0]-this.scene.solution.activeCommander.mpPre[0],i=this.scene.solution.activeCommander.mp[1]-this.scene.solution.activeCommander.mpPre[1];if(this.capturedVecId>-1)return this.pts[this.capturedVecId].x+=s,this.pts[this.capturedVecId].y+=i,0===this.capturedVecId?(this.pts[3].x=this.pts[0].x,this.pts[1].y=this.pts[0].y):1===this.capturedVecId?(this.pts[2].x=this.pts[1].x,this.pts[0].y=this.pts[1].y):2===this.capturedVecId?(this.pts[1].x=this.pts[2].x,this.pts[3].y=this.pts[2].y):3===this.capturedVecId&&(this.pts[0].x=this.pts[3].x,this.pts[2].y=this.pts[3].y),this.transform.updateCenterVec(),void this.transform.updateProjection();this.cv.x+=s,this.cv.y+=i;for(let o=0;o<this.pts.length;++o)this.pts[o].x+=s,this.pts[o].y+=i;this.transform.updateProjection()}update(){if(this.scene.solution.rendererWrapper.mapBoxWrapper.map.isMoving()){let t=this.scene.common.toScreen(this.cv.lng,this.cv.lat);this.cv.x=t[0],this.cv.y=t[1];for(let e=0;e<this.pts.length;++e)t=this.scene.common.toScreen(this.pts[e].lng,this.pts[e].lat),this.pts[e].x=t[0],this.pts[e].y=t[1]}}onMouseUp(){this.capturedVecId=-1,this.transform.updateProjection()}renderPost(t){this.width=Math.abs(this.pts[0].x-this.pts[2].x),this.height=Math.abs(this.pts[0].y-this.pts[2].y),this.renderer.renderPost(t),this.hasAnimation&&(this.t+=.2)}updatePolygonTurf(){const t=[];for(let e=0;e<this.pts.length;e++)t.push([this.pts[e].lng,this.pts[e].lat]);t.push([this.pts[0].lng,this.pts[0].lat]),this.polygonTurfOriginal=d.yue([t])}}class g{constructor(t){var e=this;this.solution=void 0,this.zoom=t=>this.solution.rendererWrapper.mapBoxWrapper.zoom(t),this.flyTo=(t,e)=>this.solution.rendererWrapper.mapBoxWrapper.flyTo(t,e),this.center=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-99.292649,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:39.043903;return e.solution.rendererWrapper.mapBoxWrapper.center(t,s)},this.toMap=(t,e)=>this.solution.rendererWrapper.mapBoxWrapper.toMap(t,e),this.toScreen=(t,e)=>this.solution.rendererWrapper.mapBoxWrapper.toScreen(t,e),this.solution=t}downloadScreen(){this.solution.rendererWrapper.downloadScreen()}enablePan(){this.solution.rendererWrapper.mapBoxWrapper.map.dragPan.enable()}disablePan(){this.solution.rendererWrapper.mapBoxWrapper.map.dragPan.disable()}async loadDataLocal(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"funded_census_blocks.geojson";return(0,i.getJSONFromURL)("/njs-lab-public/static/dataDummyReady/"+t)}addScatterLayer(t){return this.solution.rendererWrapper.deckGL.addScatterLayer(t)}addArcLayer(t){return this.solution.rendererWrapper.deckGL.addArcLayer(t)}addPolygonLayer(t,e){return this.solution.rendererWrapper.deckGL.addPolygonLayer(t,e)}addShape(){new y(this.solution.scene)}shiftShapeType(){this.solution.scene.area&&("circle"===this.solution.scene.area.type?this.solution.scene.area.type="rect":"rect"===this.solution.scene.area.type&&(this.solution.scene.area.type="circle"))}toggleAnimation(){this.solution.scene.area.hasAnimation=!this.solution.scene.area.hasAnimation}checkHoverArea(t,e){var s;return null===(s=this.solution.scene.area)||void 0===s?void 0:s.isInside(t,e)}pickObject(t){console.log("index",t.index),console.log(t)}}class f{constructor(t){this.solution=void 0,this.mp=[0,0,0,0],this.mpPre=[0,0,0,0],this.mouseDown=t=>{this.updateMousePos(t),this.solution.common.checkHoverArea(this.mp[0],this.mp[1])&&(this.solution.common.disablePan(),this.solution.scene.captured=this.solution.scene.area)},this.mouseUp=t=>{var e;this.updateMousePos(t),this.solution.common.enablePan(),this.solution.scene.captured=void 0,null===(e=this.solution.scene.area)||void 0===e||e.onMouseUp()},this.mouseDrag=t=>{this.updateMousePos(t),this.solution.scene.captured&&this.solution.scene.captured.translate(t.point.x,t.point.y),this.updateMousePrePos()},this.mouseClick=t=>{this.updateMousePos(t),this.solution.rendererWrapper.renderer.pts.push([t.lngLat.lng,t.lngLat.lat])},this.mouseMove=t=>{this.updateMousePos(t),this.solution.common.checkHoverArea(this.mp[0],this.mp[1]),this.updateMousePrePos()},this.solution=t}updateMousePos(t){this.mp[0]=t.point.x,this.mp[1]=t.point.y,this.mp[2]=t.lngLat.lng,this.mp[3]=t.lngLat.lat}updateMousePrePos(){this.mpPre[0]=this.mp[0],this.mpPre[1]=this.mp[1],this.mpPre[2]=this.mp[2],this.mpPre[3]=this.mp[3]}keyDown(t){"c"===t.key.toLocaleLowerCase()&&this.solution.scene.captured&&(this.solution.scene.captured.type="circle"),"r"===t.key.toLowerCase()&&this.solution.scene.captured&&(this.solution.scene.captured.type="rect")}}var x=s(5483),w=s.n(x);class P{constructor(t){var e=this;this.rendererWrapper=void 0,this.map=void 0,this.canvasMapbox=void 0,this.isPressed=!1,this.zoom=t=>this.map.zoomTo(t),this.flyTo=(t,e)=>this.map.flyTo({center:[t,e]}),this.center=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-99.292649,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:39.043903;return e.map.setCenter({lat:s,lng:t})},this.toMap=(t,e)=>{const s=this.map.unproject({x:t,y:e});return[s.lng,s.lat]},this.toScreen=(t,e)=>{try{const s=this.map.project([t,e]);return[s.x,s.y]}catch(s){}return[-1,-1]},this.mouseDown=t=>{},this.mouseUp=t=>{},this.mouseMove=t=>{},this.mouseDrag=t=>{},this.mouseClick=t=>{},this.mouseDClick=t=>{},this.keyDown=t=>{},this.rendererWrapper=t,this.initMap(t.solution.divHost.id)}initMap(t){w().accessToken="pk.eyJ1IjoiZGVzaWduanUiLCJhIjoiY2xhNGU0YWo4MDlhYzNwdHBwenVvang4eiJ9.P3sX4l_3KjdPeRRbVS1VVg",this.map=new(w().Map)({preserveDrawingBuffer:!0,container:t,zoom:3,center:[-77.430815,37.801833],style:"mapbox://styles/mapbox/dark-v10"}),this.map.dragRotate.disable(),this.map.on("click","polygon",(t=>{this.rendererWrapper.solution.common.pickObject(t)})),this.map.on("mousemove",(t=>{this.isPressed?this.mouseDrag(t):this.mouseMove(t)})),this.map.on("click",(t=>{this.mouseClick(t)})),this.map.on("mousedown",(t=>{this.isPressed=!0,this.mouseDown(t)})),this.map.on("dblclick",(t=>{this.mouseDClick(t)})),this.map.on("mouseup",(t=>{this.isPressed=!1,this.mouseUp(t)})),window.addEventListener("keydown",(t=>{this.keyDown(t)}));let e=document.getElementsByClassName("mapboxgl-canvas")[0];e.style.position="absolute",e=document.getElementsByClassName("mapboxgl-control-container")[0],e.style.display="none",this.map.on("load",(()=>{this.initPost()}))}initPost(){this.rendererWrapper.initPost(),this.canvasMapbox=this.map.getCanvas()}initCustomCanvas(){this.rendererWrapper.renderer.canvas.width=this.canvasMapbox.width,this.rendererWrapper.renderer.canvas.height=this.canvasMapbox.height,this.rendererWrapper.renderer.canvas.style.display="none";this.map.getBounds();this.map.addSource("canvas-source",{type:"canvas",canvas:this.rendererWrapper.renderer.canvas,coordinates:[[-125.618336,48.944262],[-125.618336,24.786775],[-65.591812,24.786775],[-65.591812,48.944262]],animate:!0}),this.map.addLayer({id:"canvas-layer",type:"raster",source:"canvas-source"})}downloadImage(){return function(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"map.png",i=document.createElement("canvas");i.width=t.width,i.height=t.height;let o=i.getContext("2d");o.globalAlpha=1,o.drawImage(t,0,0),o.drawImage(e,0,0,t.width,t.height);let r=new Image;r.width=t.width,r.height=t.height,r.src=i.toDataURL();let n=document.createElement("a");n.download=s,n.href=i.toDataURL(),n.click()}(this.map.getCanvas(),this.rendererWrapper.renderer.canvas)}}var C=s(31034),W=s(88410),b=s(69624),k=s(99764);class L{constructor(t){this.rendererWrapper=void 0,this.map=void 0,this.layers=[],this.rendererWrapper=t,this.map=this.rendererWrapper.mapBoxWrapper.map}initPost(){}addScatterLayer(t){const e=new C.Z({id:"scatter-".concat(this.layers.length),type:W.Z,data:t,getPosition:t=>t.position,getRadius:t=>t.size,getFillColor:t=>void 0!==t.color?t.color:[255,255,0],getLineColor:t=>[255,255,255],onClick:(t,e)=>console.log("Clicked:",t,e)});this.addLayer(e,"waterway-label")}addPolygonLayer(t,e){const s=new C.Z({id:"polygon-".concat(this.layers.length),type:b.Z,data:t,pickable:!0,stroked:!0,filled:!0,wireframe:!0,lineWidthMinPixels:1,getPolygon:t=>t.contour,getElevation:t=>1,getFillColor:t=>t.color,getLineColor:t=>[0,0,0],getLineWidth:1,onClick:(t,s)=>{e(t,s)}});this.addLayer(s,"waterway-label")}addArcLayer(t){const e=new C.Z({id:"arc-".concat(this.layers.length),type:k.Z,data:t,getSourcePosition:t=>t.pickup,getTargetPosition:t=>t.dropoff,getSourceColor:t=>[255,128,0],getTargetColor:t=>[0,128,255],strokeWidth:5});this.addLayer(e,"waterway-label")}addLayer(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"waterway-label";this.map.addLayer(t,e),this.layers.push(t)}pick(){}}class S extends i.RendererCanvas{constructor(t,e){super(t),this.rendererWrapper=void 0,this.time=0,this.pts=[],this.isActive=!1,this.rendererWrapper=e,this.canvas.id="mapboxCustom",this.canvas.style.position="absolute",this.canvas.style.pointerEvents="none",this.start()}initPost(){this.isActive=!0}render(t){if(!this.isActive)return;this.time+=.1;const e=this.rendererWrapper.mapBoxWrapper.map.getZoom(),s=.1*Math.pow(2,e);for(let i=0;i<this.pts.length;++i){const e=this.pts[i],o=this.rendererWrapper.mapBoxWrapper.toScreen(e[0],e[1]),r=.001*s;t.beginPath(),t.arc(o[0],o[1],r+(Math.sin(this.time+i)+3)/s,0,2*Math.PI),t.closePath(),t.fillStyle="rgba(0, 255, 0, 0.7)",t.fill()}this.rendererWrapper.solution.scene.renderCanvas(t),t.textAlign="center",t.font="14px arial",t.fillStyle="#fff",t.fillText("Lat: ".concat(this.rendererWrapper.solution.activeCommander.mp[1].toFixed(5),",  Lng: ").concat(this.rendererWrapper.solution.activeCommander.mp[0].toFixed(5)),.5*this.canvas.width,50)}}class M{constructor(t){this.solution=void 0,this.mapBoxWrapper=void 0,this.deckGL=void 0,this.renderer=void 0,this.solution=t,this.mapBoxWrapper=new P(this),this.mapBoxWrapper.mouseDown=t=>{this.solution.activeCommander.mouseDown(t)},this.mapBoxWrapper.mouseUp=t=>{this.solution.activeCommander.mouseUp(t)},this.mapBoxWrapper.mouseClick=t=>{this.solution.activeCommander.mouseClick(t)},this.mapBoxWrapper.mouseMove=t=>{this.solution.activeCommander.mouseMove(t)},this.mapBoxWrapper.mouseDrag=t=>{this.solution.activeCommander.mouseDrag(t)},this.mapBoxWrapper.keyDown=t=>{this.solution.activeCommander.keyDown(t)},this.deckGL=new L(this),this.renderer=new S(this.solution.divHost,this)}initPost(){this.renderer.initPost(),this.deckGL.initPost()}downloadScreen(){return this.mapBoxWrapper.downloadImage()}destroy(){this.renderer.destroy()}}class I{constructor(t){this.solution=void 0,this.divHost=void 0,this.div=void 0,this.solution=t,this.divHost=t.divHost,this.divHost.style.position="absolute";const e=document.createElement("div");this.divHost.appendChild(e),this.div=document.createElement("div"),this.div.style.width="150px",this.div.style.height="300px",this.divHost.appendChild(this.div),this.initUI()}async initUI(){const t=new Image;t.src="/njs-lab-public/static/dataDummyReady/readyLabs.png",t.style.position="relative",t.style.width="150px",t.style.margin="15px",t.style.marginTop="30px",t.style.marginBottom="0px";let e=document.createElement("a");e.href="https://ready.net/",e.appendChild(t),this.div.appendChild(e);let s=document.createElement("div");s.textContent="Capture Map",s.style.color="#fff",s.style.position="relative",s.style.margin="20px",s.onclick=()=>{this.solution.common.downloadScreen()},this.div.appendChild(s),s=document.createElement("div"),s.textContent="Set Extent",s.style.color="#fff",s.style.position="relative",s.style.margin="20px",s.onclick=()=>{this.solution.common.flyTo(-112.188375,35.267735)},this.div.appendChild(s),s=document.createElement("div"),s.textContent="Add Shape",s.style.color="#fff",s.style.position="relative",s.style.margin="20px",s.onclick=()=>{this.solution.common.addShape()},this.div.appendChild(s),s=document.createElement("div"),s.textContent="Shape Type",s.style.color="#fff",s.style.position="relative",s.style.margin="20px",s.onclick=()=>{this.solution.common.shiftShapeType()},this.div.appendChild(s),s=document.createElement("div"),s.textContent="Animation",s.style.color="#fff",s.style.position="relative",s.style.margin="20px",s.onclick=()=>{this.solution.common.toggleAnimation()},this.div.appendChild(s)}}class D{constructor(t){this.solution=void 0,this.ac=void 0,this.common=void 0,this.pts=[],this.area=void 0,this.captured=void 0,this.points=void 0,this.polygonsDifference=[],this.ids=[],this.solution=t,this.ac=t.activeCommander,this.common=t.common}async init(){this.common.center(-112.190375,35.257177),this.common.zoom(13);const t=await this.common.loadDataLocal("funded_census_blocks.geojson"),e=[],s=[],i=r(p.color),o=r(l.color);for(let r of t.features){const t=r.geometry.coordinates;let n;n="default"===r.properties.grant_long_status?i:o,e.push({contour:t[0],size:15,color:n}),s.push(!1)}this.ids=s;this.common.addPolygonLayer(e,((t,e)=>{this.ids[t.index]=!this.ids[t.index]}));const n=await this.common.loadDataLocal("funded_census_blocks.geojson");this.polygonsDifference=[];for(let r of n.features){const t=r.geometry.coordinates;this.polygonsDifference.push(d.yue(t[0]))}this.common.addScatterLayer([{position:[-74.5,40],size:1e4},{position:[-74.5,40.5],size:5e3},{position:[-74.6,40.5],size:5800},{position:[-74.7,40.5],size:100}]);this.common.addArcLayer([{pickup:[-122.42,37.8],dropoff:[-74.5,40.5]},{pickup:[-122.43,37.8],dropoff:[-122.42,37.75]}]);const h=await this.common.loadDataLocal("underserved_locations.geojson"),u=r(a.color),m=r(c.color),v=[];for(let r of h.features){const t=r.geometry.coordinates,e=r.properties.landuse;let s;s="R"===e?u:"B"===e?m:[0,128,0],v.push({position:[t[0],t[1]],size:15,color:s})}this.common.addScatterLayer(v),this.points=h}renderCanvas(t){this.area&&this.area.render(t),t.fillStyle="#f00";for(let e=0;e<this.pts.length;++e){const s=this.pts[e];h(t,s[0],s[1])}}}class B{constructor(t){this.divHost=void 0,this.common=void 0,this.activeCommander=void 0,this.uiWrapper=void 0,this.rendererWrapper=void 0,this.scene=void 0,this.divHost=t,this.divHost.style.position="relative",this.init(),this.initPost()}init(){this.common=new g(this),this.activeCommander=new f(this),this.scene=new D(this),this.rendererWrapper=new M(this),this.uiWrapper=new I(this)}destroy(){for(this.rendererWrapper.destroy();this.divHost.lastElementChild;)this.divHost.removeChild(this.divHost.lastElementChild)}async initPost(){await this.scene.init()}}}}]);
//# sourceMappingURL=6076.65fbce49.chunk.js.map